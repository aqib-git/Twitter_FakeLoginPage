webpackJsonp([17],Array(161).concat([function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(e){if(H.default.set(e.dm),(0,b.default)(e),fe.default.attachTo(document,{noTeardown:!0}),Le.default.attachTo(document),K.default.attachTo("body"),_t.default.attachTo(document),He.default.attachTo("body",{noTeardown:!0}),x.default.attachTo(document,{noTeardown:!0}),I.default.attachTo("#spam_challenge_dialog",{noTeardown:!0}),si.default.attachTo(document,e,{noTeardown:!0}),e.loggedIn){ae.default.attachTo(document,e,{noTeardown:!0});var i=H.default.get("poll_options");i?G.default.attachTo(document,{foregroundPollInterval:i.foreground_poll_interval,burstPollInterval:i.burst_poll_interval,burstPollDuration:i.burst_poll_duration,maxPollInterval:i.max_poll_interval,noTeardown:!0}):G.default.attachTo(document,{foregroundPollInterval:1e3*e.deciders.dm_polling_frequency_in_seconds,noTeardown:!0}),e.deciders.live_pipeline_consume&&Nt.default.attachTo(document),xt.default.attachTo("#list-membership-dialog",e,{noTeardown:!0}),Ot.default.attachTo("#list-operations-dialog",e,{noTeardown:!0}),L.default.attachTo("#create-custom-timeline-dialog",e),U.default.attachTo("#curate-dialog",e),Ht.default.attachTo("#moments-summary-list-dialog",e),(0,q.default)(e),Z.default.attachTo(document,{noTeardown:!0}),st.default.attachTo(document,{noTeardown:!0}),et.default.attachTo(document,{noTeardown:!0}),ye.default.attachTo(document,{currentUserPath:e.routes.profile,noTeardown:!0})}Ge.default.attachTo(document),wi.default.getDecider("native_notifications")&&(Zt.default.attachTo(document,{defaultIcon:e.defaultNotificationIcon}),ee.default.attachTo(document)),wi.default.getDecider("installNativePush")&&(ke.default.attachTo(document),Ie.default.attachTo(document,{autoSubscribe:wi.default.getDecider("autoSubscribeNativePush"),allowRegistration:wi.default.getDecider("enableNativePush"),noTeardown:!0})),vi.default.attachTo(document,{noTeardown:!0}),pi.default.attachTo(document,e.typeaheadData,{noTeardown:!0}),qe.default.attachTo(document,{noTeardown:!0}),$e.default.attachTo(document,{noTeardown:!0}),Dt.default.attachTo("#goto-user-dialog",e),(0,_e.default)({profile_user:e.profile_user,deviceEnabled:e.deviceEnabled,deviceVerified:e.deviceVerified,formAuthenticityToken:e.formAuthenticityToken,loggedIn:e.loggedIn}),wt.default.attachTo(document,{noTeardown:!0});var s={itemType:"tweet",noTeardown:!0,loggedIn:e.loggedIn,eventData:{scribeContext:{component:"gallery"}}};vt.default.attachTo(".Gallery",e,s),ui.default.attachTo(".Gallery",e,s),Gt.default.attachTo(".Gallery",e,s),le.default.attachTo(document,{noTeardown:!0}),re.default.attachTo(document,e),It.default.attachTo(document,e,{noTeardown:!0,loggedIn:e.loggedIn,keyboardShortcuts:e.keyboardShortcuts}),N.default.attachTo(document,e,{noTeardown:!0}),Ue.default.attachTo("#retweet-tweet-dialog",e,{noTeardown:!0}),$.default.attachTo("#delete-tweet-dialog",e,{noTeardown:!0}),xe.default.attachTo("#quick-promote-dialog",e,{noTeardown:!0}),g.default.attachTo("#block-user-dialog",e,{noTeardown:!0}),at.default.attachTo(document,{noTeardown:!0}),rt.default.attachTo("#embed-tweet-dialog",e,{noTeardown:!0}),m.default.attachTo("#block-dialog",e,{noTeardown:!0}),Ne.default.attachTo("#report-dialog",e,{noTeardown:!0}),Di.default.attachTo("#why-this-ad-dialog",e,{noTeardown:!0}),o.default.attachTo("#age-gate-dialog",e,{noTeardown:!0}),kt.default.attachTo("#leadgen-confirm-dialog",e),(0,Ke.default)("uiWantsToRefreshTimestamps"),pe.default.attachTo(document),pt.default.attachTo(document,{theme:e.theme}),k.default.attachTo(document,{noTeardown:!0}),ai.default.attachTo(document,{noTeardown:!0}),li.default.attachTo("#translation-feedback-dialog",e,{noTeardown:!0}),$t.default.attachTo("#media-edit-dialog",{noTeardown:!0}),Jt.default.attachTo(document),se.default.attachTo(".dashboard",{eventData:{scribeContext:{component:"dashboard_nav"}}}),ut.default.attachTo("#feedback_dialog",e.debugData,{noTeardown:!0}),lt.default.attachTo(document,e.debugData,{noTeardown:!0}),t(".uz_block_user_survey")[0]&&yi.default.attachTo(".uz_block_user_survey"),(0,De.default)(e),yt.default.attachTo(document,e,{noTeardown:!0}),O.default.attachTo(document,e,{noTeardown:!0}),S.default.attachTo("#bouncer-dialog",e,{noTeardown:!0}),y.default.attachTo("#buy-now-dialog",e,{noTeardown:!0}),D.default.attachTo(document,{noTeardown:!0}),ue.default.attachTo("#offers-dialog",e,{noTeardown:!0}),ve.default.attachTo("#payment-order-detail-dialog",e,{noTeardown:!0}),Lt.default.attachTo("#location-picker-dialog",e,{noTeardown:!0}),Ut.default.attachTo(document,{noTeardown:!0}),c.default.attachTo("#auth-webview-dialog",e,{noTeardown:!0}),Kt.default.attachTo(document),fi.default.attachTo(document,e,{noTeardown:!0}),Je.default.attachTo("#sms-confirmation-dialog"),Ze.default.attachTo("#sms-confirmation-dialog",e,{noTeardown:!0}),ei.default.attachTo(document),J.default.attachTo(document,{includeLongVideos:wi.default.getDecider("dynamic_video_ads_include_long_videos")}),_i.default.attachTo(document,e,{noTeardown:!0}),ri.default.attachTo(document,{noTeardown:!0}),ft.default.attachTo(".Footer"),d.default.attachTo("#page-container",e),we.default.attachTo("#page-container",{liveVideoContinuePlayingBehindModalsEnabled:e.liveVideoContinuePlayingBehindModalsEnabled}),qt.default.attachTo(document),h.default.attachTo(document),e.deciders.reactify&&Oe.default.attachTo(document,{noTeardown:!0})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var a=i(162),o=s(a),r=i(171),c=s(r),l=i(176),d=s(l),u=i(179),h=s(u),f=i(180),m=s(f),p=i(181),g=s(p),v=i(128),b=s(v),w=i(207),S=s(w),C=i(208),y=s(C),T=i(209),D=s(T),M=i(210),I=s(M),P=i(211),k=s(P),A=i(213),x=s(A),E=i(218),O=s(E),R=i(219),N=s(R),F=i(222),L=s(F),j=i(233),U=s(j),B=i(237),$=s(B),V=i(238),q=s(V),z=i(456),H=s(z),W=i(553),G=s(W),Q=i(556),K=s(Q),Y=i(558),J=s(Y),X=i(559),Z=s(X),tt=i(560),et=s(tt),it=i(561),st=s(it),nt=i(562),at=s(nt),ot=i(563),rt=s(ot),ct=i(565),lt=s(ct),dt=i(566),ut=s(dt),ht=i(567),ft=s(ht),mt=i(568),pt=s(mt),gt=i(569),vt=s(gt),bt=i(575),wt=s(bt),St=i(197),_t=s(St),Ct=i(576),yt=s(Ct),Tt=i(577),Dt=s(Tt),Mt=i(578),It=s(Mt),Pt=i(581),kt=s(Pt),At=i(582),xt=s(At),Et=i(583),Ot=s(Et),Rt=i(584),Nt=s(Rt),Ft=i(586),Lt=s(Ft),jt=i(587),Ut=s(jt),Bt=i(588),$t=s(Bt),Vt=i(594),qt=s(Vt),zt=i(596),Ht=s(zt),Wt=i(599),Gt=s(Wt),Qt=i(603),Kt=s(Qt),Yt=i(605),Jt=s(Yt),Xt=i(607),Zt=s(Xt),te=i(608),ee=s(te),ie=i(609),se=s(ie),ne=i(610),ae=s(ne),oe=i(612),re=s(oe),ce=i(613),le=s(ce),de=i(614),ue=s(de),he=i(616),fe=s(he),me=i(617),pe=s(me),ge=i(618),ve=s(ge),be=i(480),we=s(be),Se=i(619),_e=s(Se),Ce=i(626),ye=s(Ce),Te=i(627),De=s(Te),Me=i(678),Ie=s(Me),Pe=i(679),ke=s(Pe),Ae=i(680),xe=s(Ae),Ee=i(681),Oe=s(Ee),Re=i(859),Ne=s(Re),Fe=i(860),Le=s(Fe),je=i(861),Ue=s(je),Be=i(866),$e=s(Be),Ve=i(867),qe=s(Ve),ze=i(868),He=s(ze),We=i(869),Ge=s(We),Qe=i(611),Ke=s(Qe),Ye=i(870),Je=s(Ye),Xe=i(871),Ze=s(Xe),ti=i(874),ei=s(ti),ii=i(875),si=s(ii),ni=i(876),ai=s(ni),oi=i(877),ri=s(oi),ci=i(878),li=s(ci),di=i(879),ui=s(di),hi=i(883),fi=s(hi),mi=i(884),pi=s(mi),gi=i(901),vi=s(gi),bi=i(136),wi=s(bi),Si=i(902),_i=s(Si),Ci=i(903),yi=s(Ci),Ti=i(904),Di=s(Ti)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({submitButtonSelector:"#age-gate-dialog-submit-button",monthSelector:"#age-gate-month",daySelector:"#age-gate-day",yearSelector:"#age-gate-year",requiredSelector:".age-gate-error",ageGateCookieKey:"age-gated"}),this.setUpDialog=function(t,e){e.ageGated?this.showError():(this.reset(),this.ageData=e,this.setDateOption(),this.open())},this.fillYearSelect=function(){var t=(new Date).getFullYear(),e=void 0;for(e=t;e>t-100;e--)this.yearSelect.options.add(new Option(e,e));this.yearSelect.options.add(new Option((0,d.default)("Before {{year}}",{year:e}),e))},this.month={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},this.fillMonthSelect=function(){for(var t=1;t<=12;t++)this.monthSelect.options.add(new Option(this.month[t],t))},this.fillDaySelect=function(t,e){t||(t=1),e||(e=31);for(var i=t;i<=e;i++)this.daySelect.options.add(new Option(i,i))},this.resetSelect=function(t,e){t.options.length=0,t.options.add(new Option(e,(-1),(!0),(!0))),t.options[0].disabled=!0},this.reset=function(){this.resetSelect(this.yearSelect,"Year"),this.resetSelect(this.monthSelect,"Month"),this.resetSelect(this.daySelect,"Day"),this.hideRequired()},this.setDateOption=function(){this.fillYearSelect(),this.fillMonthSelect(),this.fillDaySelect()},this.showRequired=function(){this.select("requiredSelector").removeClass("hidden")},this.hideRequired=function(){this.select("requiredSelector").addClass("hidden")},this.getDateFromSelect=function(){var t={};return t.year=this.yearSelect.options[this.yearSelect.selectedIndex].value,t.month=this.monthSelect.options[this.monthSelect.selectedIndex].value,t.day=this.daySelect.options[this.daySelect.selectedIndex].value,t},this.getNumberOfDaysGivenMonthYear=function(t,e){return e<0&&(e=2012),new Date(e,t,0).getDate()},this.validateDate=function(){var t=this.getDateFromSelect(),e=t.year>=0&&t.month>=0&&t.month<=12&&t.day>=0&&t.day<=this.getNumberOfDaysGivenMonthYear(t.month,t.year);return e?new Date(t.year,t.month-1,t.day):("-1"===t.year||"-1"===t.month||"-1"===t.day?this.showRequired():this.trigger("uiShowMessage",{message:"Invalid date. Please input your date of birth."}),null)},this.updateDays=function(){var t=this.getDateFromSelect();if(this.hideRequired(),!(t.month<1||t.month>12)){this.resetSelect(this.daySelect,"Day");var e=this.getNumberOfDaysGivenMonthYear(t.month,t.year);this.fillDaySelect(1,e),t.day>0&&t.day<=e&&(this.daySelect.selectedIndex=t.day)}},this.showError=function(){this.trigger("uiShowMessage",{message:"You do not meet the minimum age requirements to follow this account."})},this.setAgeGateCookie=function(){(0,m.default)(this.attr.ageGateCookieKey,(new Date).getTime())},this.submitAgeGating=function(){var t=this.validateDate();t&&(t.getTime()<=this.ageData.minBirthDate?this.trigger("uiAgeGatePassed",h.default.merge(this.ageData.originalData,{passedAgeGating:!0})):(this.showError(),this.setAgeGateCookie()),this.close())},this.after("initialize",function(){this.monthSelect=this.select("monthSelector")[0],this.daySelect=this.select("daySelector")[0],this.yearSelect=this.select("yearSelector")[0],this.on(document,"uiNeedsAgeGateDialog",this.setUpDialog),this.on("click",{submitButtonSelector:this.submitAgeGating}),this.on("change",{monthSelector:this.updateDays,yearSelector:this.updateDays,daySelector:this.hideRequired})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r),l=i(123),d=s(l),u=i(126),h=s(u),f=i(154),m=s(f),p=(0,o.default)(n,c.default);e.default=p},,,,,,,,,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({authWebViewDialogIframeSelector:".auth-webview-card-iframe",authWebViewDialogTitleSelector:".modal-title",authWebViewActionSelector:".AuthWebViewCard-authWebViewAction",authWebViewCardCtaClass:"AuthWebViewCard-button",authWebViewCardImageClass:"AuthWebViewCard-productImageWrapper",authWebViewTweetSelector:".tweet",commerceCardSelector:".AuthWebViewCard",top:47}),this.openAuthWebViewDialog=function(t,e){if(this.attr.loggedIn){var i=e.webviewUrl;e.tweetId&&(i=this.appendQueryParam(i,"referringTweetId",e.tweetId)),e.impressionId&&(i=this.appendQueryParam(i,"impressionId",e.impressionId)),this.select("authWebViewDialogIframeSelector").attr("src",i),this.select("authWebViewDialogTitleSelector").html(e.webviewTitle),this.open()}else this.trigger(document,"uiOpenSignupDialog")},this.appendQueryParam=function(t,e,i){var s=document.createElement("a");s.href=t;var n=encodeURIComponent(e)+"="+encodeURIComponent(i);""===s.search?s.search=n:s.search+="&"+n;var a=s.href;return s=null,a},this.closeDialog=function(t,e){this.select("authWebViewDialogIframeSelector").attr("src","about:blank"),this.off(window,"message",this.adjustIframeHeight),this.off(window,"message",this.proxyIframeEvents)},this.adjustIframeHeight=function(t){this.fitIframeHeight(t,{iframeSelector:this.attr.authWebViewDialogIframeSelector,isQualified:function(t){return t.name&&"auth_webview"===t.name&&t.height}})},this.setActiveViewSelector=function(t,e){this.activeViewSelector=e.selector||""},this.setupMessageListener=function(){this.on(window,"message",this.adjustIframeHeight),this.on(window,"message",this.proxyIframeEvents)},this.after("initialize",function(){this.activeViewSelector="",this.on("uiDialogOpened",this.setupMessageListener),this.on("uiDialogClosed",this.closeDialog),this.on(window,"uiOpenAuthWebViewDialog",this.openAuthWebViewDialog),this.on(document,"uiCommerceSetActiveViewSelector",this.setActiveViewSelector)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r),l=i(172),d=s(l),u=i(173),h=s(u),f=i(175),m=s(f),p=i(139),g=s(p),v=(0,o.default)(n,c.default,d.default,h.default,m.default,g.default);e.default=v},,function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.fitIframeHeight=function(e,i){if(e&&i){var s=i.iframeSelector||this.attr.iframeSelector,n={};if(e.originalEvent&&(e=e.originalEvent),(0,o.default)(e.origin,window.location)&&"string"==typeof e.data&&t.isFunction(i.isQualified))try{n=JSON.parse(e.data),n&&i.isQualified(n)&&(this.$node.find(s).css("height",n.height+"px"),t.isFunction(i.additonalTreatment)&&i.additonalTreatment(this.$node.find(s)))}catch(a){}}}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(174),o=s(a);e.default=n}).call(e,i(10))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return i.reduce(function(i,n){return i||t===s(e.protocol,n)},t===s(e.protocol,e.host))};var i=["twitter.com","donate.twitter.com"],s=function(t,e){return[t,e].join("//")}},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.proxyIframeEvents=function(t){if(t){var e={};if(t.originalEvent&&(t=t.originalEvent),(0,o.default)(t.origin,window.location)&&"string"==typeof t.data)try{e=JSON.parse(t.data),e&&e.name&&"b2c"===e.name&&e.eventName&&this.trigger(e.eventName,e.data)}catch(i){}}}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(174),o=s(a);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.viewportHelpers=c.default,this.defaultAttrs({autoplayableContainerSelector:".has-autoplayable-media",mediaSelector:".animated-gif, .PlayableMedia, .js-macaw-cards-iframe-container",autoplayingMediaDataAttr:"data-autoplaying-media",scrollThrottle:100,watchDocumentScroll:!0,autoplayOnFractionInViewport:.25}),this.watchContainers=function(){this.$containers=this.select("autoplayableContainerSelector"),this.throttledProcessWatchedContainers()},this.stopAutoplaying=function(){this.$currentlyAutoplayingContainer&&(this.$currentlyAutoplayingContainer.attr(this.attr.autoplayingMediaDataAttr,!1),this.$currentlyAutoplayingMedia.trigger("uiStopAutoplayingMedia"),this.$currentlyAutoplayingContainer=void 0,this.$currentlyAutoplayingMedia=void 0)},this.processWatchedContainers=function(){if(0!==this.$containers.length&&this.$viewport){var t=this.viewportHelpers.getGlobalNavHeight(),e=this.viewportHelpers.getElementClosestToMiddleOfViewport({$container:this.$viewport,$elements:this.$containers,topThreshold:t,fractionInViewport:this.attr.autoplayOnFractionInViewport});e&&!e.is(this.$currentlyAutoplayingContainer)&&(this.stopAutoplaying(),e.attr(this.attr.autoplayingMediaDataAttr,!0),this.$currentlyAutoplayingContainer=e,this.$currentlyAutoplayingMedia=e.find(this.attr.mediaSelector),this.$currentlyAutoplayingMedia.trigger("uiAutoplayMedia")),this.$currentlyAutoplayingContainer&&!this.viewportHelpers.isPartiallyContainedInViewport({$container:this.$viewport,$element:this.$currentlyAutoplayingContainer,topThreshold:t,fractionInViewport:this.attr.autoplayOnFractionInViewport})&&this.stopAutoplaying()}},this.resetWatchedContainers=function(){this.$containers=t(),this.stopAutoplaying(),this.watchContainers()},this.cleanup=function(){this.off(document,"uiPageChanged"),this.off(this.$viewport,"resize"),this.$viewport=void 0,this.attr.watchDocumentScroll?this.off(document,"scroll",this.throttledProcessWatchedContainers):this.off("scroll",this.throttledProcessWatchedContainers)},this.before("teardown",function(){this.cleanup()}),this.after("initialize",function(){this.$currentlyAutoplayingContainer=void 0,this.$currentlyAutoplayingMedia=void 0,this.$viewport=t(window),this.$containers=t(),this.throttledProcessWatchedContainers=d.default.throttle(this.processWatchedContainers.bind(this),this.attr.scrollThrottle),this.on(document,"uiPageChanged",this.resetWatchedContainers),this.attr.watchDocumentScroll?this.on(document,"scroll",this.throttledProcessWatchedContainers):this.on("scroll",this.throttledProcessWatchedContainers),this.on(this.$viewport,"resize",this.throttledProcessWatchedContainers),this.on(document,"uiDynamicCardLoaded uiDynamicCardUnloaded",this.throttledProcessWatchedContainers),this.on(document,"uiWatchAutoplayMedia uiSwiftLoaded",this.watchContainers),this.on(document,"uiPageHidden",this.stopAutoplaying),this.on(document,"uiPageVisible",this.processWatchedContainers)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(177),c=s(r),l=i(126),d=s(l);e.default=(0,o.default)(n)}).call(e,i(10))},,,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({topbarSpacerSelector:".topbar-spacer"}),this.adjustHeight=function(t,e){this.select("topbarSpacerSelector").css("padding-top","-="+e.height)},this.after("initialize",function(){this.on("uiBannerDismissed",this.adjustHeight)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a);e.default=(0,o.default)(n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({blockUserLabelSelector:".block-user-label",blockUserTextSelector:".block-user-text",blockButtonSelector:".block-button",blockInputSelector:"input[name=block_user]"}),this.setUpDialog=function(t,e){this.eventData=e,this.setTriggeredTarget(),this.setScreenNameText(),this.isComplete=!1,this.open()},this.setTriggeredTarget=function(){"user"===this.eventData.target?this.$node.addClass("block-from-user"):this.$node.removeClass("block-from-user")},this.setScreenNameText=function(){var t=this.select("blockUserLabelSelector");t.text((0,c.default)("Block @{{screenName}}?",this.eventData)),this.select("blockUserTextSelector").text((0,c.default)("@{{screenName}} will no longer be able to follow or message you, and you will not see notifications from @{{screenName}}.",this.eventData))},this.submitBlock=function(){this.trigger("uiBlockAction",{eventData:this.eventData,tweetId:this.eventData.tweetId,userId:this.eventData.userId,screenName:this.eventData.screenName,impressionId:this.eventData.impressionId,disclosureType:this.eventData.disclosureType,scribeContext:{component:"block_dialog",element:"user"===this.eventData.target?"user":"tweet"}}),this.trigger("uiDidTriggerBlockingAction",{userId:this.eventData.userId}),this.isComplete=!0,this.close()},this.around("close",function(t){this.isOpen()&&!this.isComplete&&this.trigger("uiBlockDialogCancel",this.eventData),t()}),this.after("initialize",function(){this.on(document,"uiNeedsBlockDialog",this.setUpDialog),this.on("click",{blockButtonSelector:this.submitBlock})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(123),c=s(r),l=i(163),d=s(l),u=(0,o.default)(d.default,n);e.default=u},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaults={cancelSelector:".cancel-action",blockSelector:".block-action"},this.openBlockUser=function(t,e){var i={userOnly:!0,modal:"block"};this.attr.sourceEventData=e,this.displayTweet(e.tweetId,i),this.open()},this.blockUser=function(){this.trigger("uiDidBlockUser",{sourceEventData:this.attr.sourceEventData}),this.close()},this.after("initialize",function(){this.on("click",{cancelSelector:this.close,blockSelector:this.blockUser}),this.on(document,"uiOpenBlockUserDialog",this.openBlockUser)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r),l=i(182),d=s(l);e.default=(0,o.default)(n,c.default,d.default)},,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({safeOrigins:["https://localhost.twitter.com","https://twitter.com"],iframeSelector:"#bouncer-flow",contentSelector:".BouncerContent",spinnerSelector:".BouncerSpinner",dismissButtonSelector:".js-close"}),this.openBouncerDialog=function(t,e){this.select("iframeSelector").attr("src",e.bounce.bounce_location||"/account/access"),this.open()},this.onBeforeIframeUnload=function(){this.setIframeLoading(!0),this.position()},this.onIframeLoad=function(){this.setIframeLoading(!1),this.position()},this.setIframeLoading=function(t){if(t)this.$bouncerContent.hide(),this.$dismissButton.hide(),this.$spinner.show(),this.$bouncerContent.height(this.$spinner.height()),this.$iframe.height(this.$spinner.height());else{this.$spinner.hide(),this.$dismissButton.show(),this.$bouncerContent.show();var e=this.$iframe.contents().find("body").height()+20;e>this.$iframe.height()&&(this.$bouncerContent.height(e),this.$iframe.height(e))}},this.onCancel=function(){this.trigger("uiBouncerCancelled"),this.close()},this.onComplete=function(){this.trigger("uiBouncerCompleted"),this.close()},this.on2FAComplete=function(){this.is2faEnrollmentComplete=!0},this.onDialogClosed=function(){this.is2faEnrollmentComplete?(this.is2faEnrollmentComplete=!1,this.trigger("uiBouncer2FACompleted")):this.trigger("uiBouncerCancelled")},this.aroundAfterClose=function(t){t(),this.onDialogClosed(),this.reset()},this.reset=function(){this.setIframeLoading(!0)},this.dispatchBouncerMessage=function(t,e){var i=t.originalEvent,s=i&&i.data;if(this.attr.safeOrigins.indexOf(i.origin)!==-1&&s&&s.bouncer&&s.event){var n=s.event;"beforeunload"===n?this.onBeforeIframeUnload():"load"===n?this.onIframeLoad():"cancel"===n?this.onCancel():"complete"===n?this.onComplete():"2fa_complete"===n&&this.on2FAComplete()}},this.after("initialize",function(){this.on(document,"dataRequestBounced",this.openBouncerDialog),this.on(document,"uiPreOpenBouncerDialog",this.open),this.is2faEnrollmentComplete=!1,this.on(window,"message",this.dispatchBouncerMessage),this.around("afterClose",this.aroundAfterClose),this.$modalContent=this.select("modalContentSelector"),this.$iframe=this.select("iframeSelector"),this.$bouncerContent=this.select("contentSelector"),this.$spinner=this.select("spinnerSelector"),this.$dismissButton=this.select("dismissButtonSelector"),this.reset()})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r),l=(0,o.default)(n,c.default);e.default=l},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({buyNowDialogIframeSelector:".buy-now-card-iframe",buyNowActionSelector:".BuyNowCard-buyNowAction",buyNowCardCtaClass:"BuyNowCard-button",buyNowCardImageClass:"BuyNowCard-productImageWrapper",buyNowTweetSelector:".tweet",commerceCardSelector:".BuyNowCard",top:47,defaultHeight:"400px",productDetailViewSelector:".BuyNow-productDetailView",paymentInfoViewSelector:".BuyNow-paymentInfoView"}),this.openDialog=function(e,i){if(!this.attr.loggedIn)return void this.trigger(document,"uiOpenSignupDialog");if(i&&i.el){var s=t(i.el).closest(this.attr.buyNowTweetSelector),n=s.data("tweet-id"),a="/i/pay/status/"+n;this.promotedMetadata=this.extractPromotedMetadata(s),this.scribingData=this.getCardDataFromContainer(s),this.trigger("uiBuyNowCardClicked",c.default.merge(this.scribingData,this.promotedMetadata,{action:t(i.el).data("action")})),this.select("buyNowDialogIframeSelector").attr("src",a),this.open()}},this.openBuyNowDialogFromId=function(t,e){var i=e.buyNowTweetId;if(!this.attr.loggedIn)return void this.trigger(document,"uiOpenSignupDialog");this.promotedMetadata={impressionId:e.impressionId,disclosureType:e.disclosureType};var s="/i/pay/status/"+i;this.select("buyNowDialogIframeSelector").attr("src",s),this.open()},this.closeDialog=function(t,e){this.activeViewSelector===this.attr.paymentInfoViewSelector?this.trigger("uiCommerceFlowAborted",{component:"store_profile",scribingData:this.scribingData}):this.purchaseSuccess||this.trigger("uiCommerceFlowAborted",{component:"product_detail",scribingData:this.scribingData}),this.purchaseSuccess=!1,this.select("buyNowDialogIframeSelector").attr("src","about:blank"),this.select("buyNowDialogIframeSelector").css("height",this.attr.defaultHeight),this.off(window,"message",this.adjustIframeHeight)},this.adjustIframeHeight=function(t){var e={iframeSelector:this.attr.buyNowDialogIframeSelector,isQualified:function(t){return t.name&&"buy_now"===t.name&&t.height}};this.fitIframeHeight(t,e)},this.showSuccessMessage=function(t,e){this.purchaseSuccess=!0,this.trigger("uiCloseDialog"),this.trigger("uiShowMessage",{message:e.message}),this.trigger("uiCommerceBuyNowSuccess",this.promotedMetadata)},this.setActiveViewSelector=function(t,e){this.activeViewSelector=e.selector||""},this.extractPromotedMetadata=function(t){return{impressionId:t.data("impression-id"),disclosureType:t.data("disclosure-type")}},this.setupMessageListener=function(){this.on(window,"message",this.adjustIframeHeight)},this.after("initialize",function(){this.purchaseSuccess=!1,this.activeViewSelector="",this.on("uiDialogOpened",this.setupMessageListener),this.on("uiDialogClosed",this.closeDialog),this.on(window,"MacawCardOpenBuyNowDialog",this.openBuyNowDialogFromId),this.on(document,"uiCommerceShowSuccessMessage",this.showSuccessMessage),this.on(document,"uiCommerceSetActiveViewSelector",this.setActiveViewSelector),this.on(document,"click",{buyNowActionSelector:this.openDialog})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(126),c=s(r),l=i(163),d=s(l),u=i(172),h=s(u),f=i(173),m=s(f),p=i(139),g=s(p),v=(0,o.default)(n,d.default,h.default,m.default,g.default);e.default=v}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.convertCardDataToScribeData=function(t){return t&&{items:[this.getCard2Item(t)]}},this.scribeFlowAborted=function(t,e){this.scribe({page:"buy_now",component:e.component,action:"exit"},this.convertCardDataToScribeData(e.scribingData))},this.scribeBuyNowCardCtaClicked=function(t,e){var i=this.convertCardDataToScribeData(e);this.scribe({action:e.action},i)},this.after("initialize",function(){this.on("uiCommerceFlowAborted",this.scribeFlowAborted),this.on("uiBuyNowCardClicked",this.scribeBuyNowCardCtaClicked)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r),l=i(139),d=s(l);e.default=(0,o.default)(n,c.default,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({challengeSelector:"#recaptcha_challenge_field",responseSelector:"#recaptcha_response_field",submitSelector:"#recaptcha_submit",captchaName:"Captcha",bodyTextSelector:".modal-text",captchaFormSelector:"#captcha-challenge-form",recaptchaPublicKey:"6LfbTAAAAAAAAE0hk8Vnfd1THHnn9lJuow6fgulO"}),this.refreshCaptchaDialog=function(t,e){this.reloadCaptcha(),this.open()},this.reloadCaptcha=function(){window.Recaptcha&&window.Recaptcha.reload()},this.submitCaptcha=function(){var t=this.select("challengeSelector").val(),e=this.select("responseSelector").val();this.trigger("uiSubmitSpamChallenge",{challenge:t,response:e,challengeName:this.attr.captchaName})},this.getRecaptcha=function(t,e){this.isRecaptchaDefined()&&window.Recaptcha.create(this.attr.recaptchaPublicKey,"captcha-challenge-form",{theme:"clean",callback:function(){window.Recaptcha.focus_response_field(),t&&e.select("bodyTextSelector").text(t),e.open()}})},this.isRecaptchaDefined=function(){return"undefined"!=typeof window.Recaptcha},this.openCaptchaDialog=function(t,e){this.getRecaptcha(e.message,this)},this.after("initialize",function(){this.on("click",{submitSelector:this.submitCaptcha}),this.on(document,"uiOpenSpamCaptchaChallenge",this.openCaptchaDialog),this.on(document,"uiCloseSpamCaptchaChallenge",this.blurAndCloseImmediately),this.on(document,"uiRefreshSpamCaptchaChallenge",this.refreshCaptchaDialog)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r);e.default=(0,o.default)(n,c.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeAjaxDuration=function(t,e){this.scribeClientStats(t,e,"perf")},this.scribeApiStats=function(t,e){this.scribeClientStats(t,e,"api")},this.scribeClientStats=function(t,e,i){if(!e.statsName)throw new Error("statsName is required for stats logging.");var s=["stats","ajax",i,e.statsName];e.statsSubcategory&&s.push(e.statsSubcategory);var n=e.requestData||{};n.interval?s.push("polling"):n.min_position?s.push("newer"):n.max_position&&s.push("older"),e.status&&s.push(e.status),e.statusCode&&s.push(e.statusCode),e.apiErrorName&&s.push(e.apiErrorName);var a=s.join(":"),o={url:e.url,browser:(0,h.default)(),response_size:(e.responseText||{}).length};this.scribePerftown(a,e.duration,o)},this.after("initialize",function(){d.default.getDecider("web_perftown_stats")&&this.on("dataAjaxDuration",this.scribeAjaxDuration),d.default.getDecider("web_client_api_stats")&&this.on("dataApiStats",this.scribeApiStats)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(212),c=s(r),l=i(136),d=s(l),u=i(156),h=s(u);e.default=(0,o.default)(n,c.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeTransport=o.default,this.scribePerftown=function(t,e,i){var s={product:"webclient",description:t,duration_ms:e,start_time_ms:this.startTime,metadata:JSON.stringify(i)};this.scribeTransport.send(s,"perftown")},this.after("initialize",function(){this.startTime=(new Date).getTime()})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(131),o=s(a);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({confirmDialogSelector:"#confirm_dialog",cancelSelector:"#confirm_dialog_cancel_button",submitSelector:"#confirm_dialog_submit_button",modalSizes:{small:"modal-small",medium:"modal-medium",large:"modal-large"}}),this.openWithOptions=function(e,i){if(!this.openState){this.attr.eventParams={action:i.action},this.attr.top=i.top,this.eventNode=e.target;var s={title_text:i.titleText,body_text:i.bodyText,cancel_text:i.cancelText,submit_text:i.submitText},n=h.default.render(s);t("#confirm_dialog").length?t("#confirm_dialog").replaceWith(n):t("body").append(n),this.$dialogContainer=t("#confirm_dialog"),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector);var a=this.attr.modalSizes[i.modalSize];"undefined"!=typeof a&&this.$dialog.addClass(a),this.open()}},this.submit=function(t,e){this.trigger(this.eventNode,"ui{{action}}Confirm"),this.close()},this.cancel=function(t,e){this.trigger(this.eventNode,"ui{{action}}Cancel"),"click"===t.type&&this.close()},this.after("initialize",function(){this.on(document,"uiOpenConfirmDialog",this.openWithOptions),this.on("click",{submitSelector:this.submit,cancelSelector:this.cancel}),this.on("uiDialogCloseRequested",{confirmDialogSelector:this.cancel})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r),l=i(214),d=s(l),u=i(215),h=s(u);e.default=(0,o.default)(n,c.default,d.default);
}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.rewriteEventName=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var s="string"==typeof e[0]||e[0].defaultBehavior?0:1,n=e[s],a=n.type||n;e[s]=(0,o.default)(a,this.attr.eventParams,!0),n.type&&(n.type=e[s],e[s]=n),t.apply(this,e)},this.around("on",this.rewriteEventName),this.around("off",this.rewriteEventName),this.around("trigger",this.rewriteEventName)}Object.defineProperty(e,"__esModule",{value:!0});var a=i(124),o=s(a);e.default=n},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"dialogs/close_button":i(217)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div id="confirm_dialog" class="modal-container">\n  <div class="close-modal-background-target"></div>\n  <div class="modal draggable">\n    <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"      ")),s.b('      <div class="modal-header">\n        <h3 class="modal-title">'),s.b(s.v(s.f("title_text",t,e,0))),s.b("</h3>\n      </div>\n"),s.s(s.f("body_text",t,e,1),t,e,0,316,426,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('        <div class="modal-body">\n          <p class="modal-body-text">'),i.b(i.v(i.f("body_text",t,e,0))),i.b("</p>\n        </div>\n")}),t.pop()),s.b('      <div class="modal-footer">\n        <button class="btn js-close" id="confirm_dialog_cancel_button">'),s.b(s.v(s.f("cancel_text",t,e,0))),s.b('</button>\n        <button id="confirm_dialog_submit_button" class="btn primary-btn modal-submit">'),s.b(s.v(s.f("submit_text",t,e,0))),s.b("</button>\n      </div>\n    </div>\n  </div>\n</div>\n"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},,function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<button type="button" class="modal-btn modal-close js-close">\n  <span class="Icon Icon--close Icon--medium">\n    <span class="visuallyhidden">Close</span>\n  </span>\n</button>\n'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({keepBadgeStorageKey:"keep_badge_until",keepBadgeInterval:1e3}),this.processNewNotifications=function(t,e){e&&e.b&&"ok"===e.b.status&&e.b.response&&this.possiblyUpdateBadgeAndHighlighting(e.b.response)},this.possiblyUpdateBadgeAndHighlighting=function(t){t.show_badge_highlighting&&t.count>=0&&(this.trigger("uiUpdateConnectBadge",t),t.timestamp>=0&&(t.count>0||this.pastStorageTime())&&this.trigger("uiUpdateActivityHighlighting",t.timestamp),this.updateStorageTime())},this.pastStorageTime=function(){var t=(new Date).getTime(),e=this.storage.getItem(this.attr.keepBadgeStorageKey)||{until:0};return e.until<t},this.updateStorageTime=function(){var t=(new Date).getTime();this.storage.setItem(this.attr.keepBadgeStorageKey,{until:t+this.attr.keepBadgeInterval})},this.after("initialize",function(){this.storage=new c.default("connect_badge"),this.updateStorageTime(0),this.on(document,"dataNotificationsReceived",this.processNewNotifications)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(196),c=s(r);e.default=(0,o.default)(n)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({copyFoundMediaLinkDialogSelector:"#copy-found-media-link-dialog",foundMediaLinkDestinationSelector:".found-media-link-destination"}),this.openDialog=function(e,i){var s=c.default.get(i.fileId);if(s){t(this.attr.copyFoundMediaLinkDialogSelector).remove();var n={attribution_name:s.attribution.name,details_url:s.detailsUrl},a=h.default.render(n);this.$dialogContainer=t(a).appendTo("body"),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector),this.open(),this.selectLink()}},this.after("afterClose",function(){this.$dialogContainer.remove(),this.$dialog=t(),this.$dialogContainer=t()}),this.selectLink=function(){this.select("foundMediaLinkDestinationSelector").focus().select()},this.after("initialize",function(){this.on("click",{foundMediaLinkDestinationSelector:this.selectLink}),this.on(document,"uiNeedsCopyFoundMediaDialog",this.openDialog)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(220),c=s(r),l=i(163),d=s(l),u=i(221),h=s(u),f=(0,o.default)(d.default,n);e.default=f}).call(e,i(10))},,function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"dialogs/close_button":i(217)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div id="copy-found-media-link-dialog" class="modal-container">\n  <div class="close-modal-background-target"></div>\n  <div class="modal modal-medium draggable">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"    ")),s.b('    <div class="modal-content">\n      <div class="modal-header">\n        <h3 class="modal-title">GIF provided by <span class="provided-by">'),s.b(s.v(s.f("attribution_name",t,e,0))),s.b('</span></h3>\n      </div>\n      <div class="modal-body">\n        <div class="copy-found-media-link-container">\n          <textarea class="found-media-link-destination js-initial-focus u-dir" readonly>'),s.b(s.v(s.f("details_url",t,e,0))),s.b("</textarea>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({createOrUpdateEventName:"uiCreateCustomTimeline",orderSelector:"[name=create-timeline-order]:checked"}),this.around("params",function(t){var e=t();return e.tweetId=this.tweetId,e.impressionId=this.impressionId,e}),this.openDialog=function(t,e){this.tweetId=e.tweetId,this.impressionId=e.impressionId;var i={is_create_dialog:!0,id_prefix:"create",curation_reverse_chron:!0},s=m.default.render(i);this.$node.html(s),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector),this.open()},this.after("open",function(){c.default.attachTo(".custom-timeline-name-field",{maxLength:25,superwarnLength:20,warnLength:15,textSelector:"#custom-timeline-name",counterSelector:".custom-timeline-name-count"}),c.default.attachTo(".custom-timeline-description-field",{maxLength:160,superwarnLength:150,warnLength:140,textSelector:"#custom-timeline-description",counterSelector:".custom-timeline-description-count"})}),this.after("initialize",function(){this.on(document,"uiOpenCreateCustomTimelineDialog",this.openDialog)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(223),c=s(r),l=i(163),d=s(l),u=i(231),h=s(u),f=i(232),m=s(f);e.default=(0,o.default)(d.default,h.default,n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.after("initialize",function(){this.initTextNode()})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(224),c=s(r),l=i(229),d=s(l),u=(0,o.default)(n,c.default,d.default);e.default=u},,,,,,,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=/^\s*$/;this.defaultAttrs({top:90,saveSelector:".update-custom-timeline-button",nameSelector:"[name=name]",descriptionSelector:"[name=custom-timeline-description]",dialogTitleSelector:".modal-title",maxReachedSelector:".max-reached"}),this.params=function(){return{name:this.$name.val(),description:this.$description.val(),order:this.select("orderSelector").val()}},this.saveCustomTimeline=function(t,e){this.disableSaveButton(),this.trigger(this.attr.createOrUpdateEventName,this.params())},this.disableSaveButton=function(){this.$saveButton.prop("disabled",!0)},this.toggleSaveButton=function(e,i){var s=t.test(this.$name.val()),n=this.select("maxReachedSelector").length>0;this.$saveButton.prop("disabled",s||n)},this.after("open",function(){this.$saveButton=this.select("saveSelector"),this.$name=this.select("nameSelector"),this.$description=this.select("descriptionSelector"),this.toggleSaveButton()}),this.after("initialize",function(){this.on(document,"dataCustomTimelineUpdated",this.close),this.on("click",{saveSelector:this.saveCustomTimeline}),this.on("input",{nameSelector:this.toggleSaveButton}),this.on("uiTextChanged",this.toggleSaveButton)})}},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"dialogs/close_button":i(217)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="close-modal-background-target"></div>\n<div class="modal modal-medium draggable">\n  <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"    ")),s.b('    <div class="modal-header">\n      <h3 class="modal-title">\n        '),s.s(s.f("is_create_dialog",t,e,1),t,e,0,244,267,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("Create a new collection")}),t.pop()),s.b("\n"+i),s.b("        "),s.s(s.f("is_create_dialog",t,e,1),t,e,1,0,0,"")||s.b("Edit collection"),s.b("\n"+i),s.b('      </h3>\n    </div>\n\n    <div class="modal-body">\n      <div class="custom-timeline-editor">\n        '),s.s(s.f("is_create_dialog",t,e,1),t,e,0,480,671,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<p class="explanation">\n          Collections are public sets of Tweets that you control.\n          <br />\n          Create a collection, add Tweets, and share it with the world.\n        </p>')}),t.pop()),s.b("\n"),s.b("\n"+i),s.b('        <div class="field custom-timeline-name-field">\n          <label class="t1-label" for="custom-timeline-name">Collection name</label>\n          <input type="text" class="text" name="name" id="custom-timeline-name" value="'),s.b(s.v(s.f("timeline_name",t,e,0))),s.b('" aria-describedby="custom-timeline-name-help" />\n          <p class="help-text">\n            <span id="custom-timeline-name-help">25 characters</span>\n            <span class="custom-timeline-name-count">25</span>\n          </p>\n        </div>\n        <hr/>\n\n        <div class="field custom-timeline-description-field">\n          <label class="t1-label" for="custom-timeline-description">Description</label>\n          <textarea name="custom-timeline-description" id="custom-timeline-description" aria-describedby="custom-timeline-description-help">'),s.b(s.v(s.f("timeline_description",t,e,0))),s.b('</textarea>\n          <p class="help-text">\n            <span id="custom-timeline-description-help">160 characters, optional</span>\n            <span class="custom-timeline-description-count">160</span>\n          </p>\n        </div>\n        <hr/>\n\n        <fieldset class="field">\n          <legend class="t1-legend">Collection order</legend>\n          <div class="options">\n            <label class="t1-label u-block">\n              <input class="radio u-inlineBlock" type="radio" name="'),s.b(s.v(s.f("id_prefix",t,e,0))),s.b('-timeline-order" value="curation_reverse_chron"'),s.s(s.f("curation_reverse_chron",t,e,1),t,e,0,2087,2105,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(' checked="checked"')}),t.pop()),s.b(' />\n              <b>Recently added first</b>\n            </label>\n            <label class="t1-label u-block">\n              <input class="radio u-inlineBlock" type="radio" name="'),s.b(s.v(s.f("id_prefix",t,e,0))),s.b('-timeline-order" value="tweet_chron"'),s.s(s.f("tweet_chron",t,e,1),t,e,0,2377,2395,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(' checked="checked"')}),t.pop()),s.b(' />\n              <b>Oldest first</b>\n            </label>\n            <label class="t1-label u-block">\n              <input class="radio u-inlineBlock" type="radio" name="'),s.b(s.v(s.f("id_prefix",t,e,0))),s.b('-timeline-order" value="tweet_reverse_chron"'),s.s(s.f("tweet_reverse_chron",t,e,1),t,e,0,2664,2682,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(' checked="checked"')}),t.pop()),s.b(' />\n              <b>Newest first</b>\n            </label>\n          </div>\n        </fieldset>\n        <hr/>\n\n        <div class="custom-timeline-editor-save">\n          <button type="button" class="btn btn-primary update-custom-timeline-button" data-custom-timeline-id="'),s.b(s.v(s.f("id",t,e,0))),s.b('" disabled>\n            '),s.s(s.f("is_create_dialog",t,e,1),t,e,0,3029,3046,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("Create collection")}),t.pop()),s.b("\n"+i),s.b("            "),s.s(s.f("is_create_dialog",t,e,1),t,e,1,0,0,"")||s.b("Save collection"),s.b("\n"+i),s.b("          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({top:90,closeOnOtherDialogOpened:!0,timelineSelectorSelector:".timeline-selector",wasMemberSelector:".timeline-item .was-member",wasNotMemberSelector:".timeline-item .was-not-member",submitSelector:".js-submit"}),this.openDialog=function(t,e){var i=m.default.render({});this.$node.html(i),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector),this.tweetId=e.tweetId,this.impressionId=e.impressionId,this.trigger("uiNeedsFullCustomTimelines",{tweetId:e.tweetId}),this.scribe({component:"curate_dialog",action:"open"},e),this.open()},this.renderFullTimelinesList=function(t,e){this.select("timelineSelectorSelector").html(e.html)},this.submitChanges=function(){function e(e){return e.map(function(){return t(this).attr("data-timeline-id")}).get()}this.select("submitSelector").prop("disabled",!0);var i=this.select("wasMemberSelector").filter(":not(:checked)"),s=this.select("wasNotMemberSelector").filter(":checked"),n={removed:e(i),added:e(s),tweetId:this.tweetId,impressionId:this.impressionId};this.trigger("uiCurateTweets",n)},this.after("initialize",function(){this.on(document,"uiOpenCurateDialog",this.openDialog),this.on(document,"dataGotFullCustomTimelines",this.renderFullTimelinesList),this.on(document,"dataTweetsCurated",this.close),this.on("click",{submitSelector:this.submitChanges})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r),l=i(234),d=s(l),u=i(142),h=s(u),f=i(235),m=s(f);e.default=(0,o.default)(c.default,n,d.default,h.default)}).call(e,i(10))},function(t,e){"use strict";function i(){this.defaultAttrs({createCustomTimelineSelector:".js-create-custom-timeline-button"}),this.openCreateDialog=function(){this.trigger("uiOpenCreateCustomTimelineDialog",{tweetId:this.tweetId,impressionId:this.impressionId})},this.after("initialize",function(){this.on("click",{createCustomTimelineSelector:this.openCreateDialog})})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"dialogs/close_button":i(217),create_custom_timeline_button:i(236)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="close-modal-background-target"></div>\n<div class="modal modal-medium draggable">\n  <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"    ")),s.b('    <div class="modal-header">\n      <h3 class="modal-title">Add Tweet to collection</h3>\n    </div>\n    <div class="modal-body">\n      <div class="timeline-selector"></div>\n    </div>\n    <div class="modal-footer">\n'),s.b(s.rp("<create_custom_timeline_button1",t,e,"      ")),s.b("\n"+i),s.b('      <button type="button" class="btn js-close">Cancel</button>\n      <button type="button" class="btn primary-btn modal-submit js-submit">Save changes</button>\n    </div>\n  </div>\n</div>\n'),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}},"<create_custom_timeline_button1":{name:"create_custom_timeline_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<button type="button" class="btn-link js-create-custom-timeline-button" data-element-term="create_custom_timeline_button">Create new collection</button>\n'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({cancelSelector:".cancel-action",deleteSelector:".delete-action"}),this.openDeleteTweet=function(t,e){this.attr.sourceEventData=e,this.displayTweet(e.tweetId,{modal:"delete"}),this.id=e.id,this.open()},this.deleteTweet=function(){this.trigger("uiDidDeleteTweet",{id:this.id,sourceEventData:this.attr.sourceEventData})},this.deleteTweetSuccess=function(t,e){this.trigger("uiDidDeleteTweetSuccess",this.attr.sourceEventData),this.close()},this.restoreFocusToTweet=function(e){t(e.target).is(this.$dialog)&&this.activeEl&&this.trigger(t(this.activeEl).closest(".tweet"),"uiShouldAddFocusStyle")},this.after("initialize",function(){this.on("click",{cancelSelector:this.close,deleteSelector:this.deleteTweet}),this.on(document,"uiOpenDeleteDialog",this.openDeleteTweet),this.on(document,"dataDidDeleteTweet",this.deleteTweetSuccess),this.on(document,"uiDialogRestorePreviousFocus",this.restoreFocusToTweet),this.on(document,"uiCloseDeleteTweetDialog",this.close)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r),l=i(182),d=s(l),u=(0,o.default)(n,c.default,d.default);e.default=u}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){var e="#dm_dialog";pt.default.attachTo(document,t),rt.default.attachTo(document),lt.default.attachTo(e,t,{timestampSelector:".time"}),ut.default.attachTo(document,t),ft.default.attachTo(".dm-media-container"),_t.default.attachTo(document),vt.default.attachTo(document),o.default.attachTo(document),g.default.attachTo(document),G.default.attachTo(document),K.default.attachTo(document),J.default.get("welcome_message_add_to_conversation_enabled")&&b.default.attachTo(document),D.default.attachTo(document),H.default.attachTo(".DMInbox",{notifications:J.default.get("notifications"),usePushNotifications:J.default.get("usePushForNotifications")}),d.default.attachTo(".DMCompose",{maxParticipants:J.default.get("participant_max")||t.dm_participant_max||50,currentUserId:t.userId}),m.default.attachTo(e),J.default.get("notifications")&&et.default.attachTo(document,{conversationSelector:".DMConversation-content"}),S.default.attachTo(document),I.default.attachTo(document),N.default.attachTo(document),L.default.attachTo(document),$.default.attachTo(document),q.default.attachTo(document),y.default.attachTo(document),k.default.attachTo(document),O.default.attachTo(document),U.default.attachTo(document),x.default.attachTo(document),h.default.attachTo(document),Z.default.attachTo(document),at.default.attachTo(document),J.default.get("twitter_video_player")||st.default.attachTo(document);var i=t.dm_options||{};wt.default.attachTo(document,{open:i.show_dm_dialog,text:i.default_composer_text,welcomeMessageId:i.welcome_message_id,conversation:{id:i.conversation_id},compose:{id:i.recipient_id,screenName:i.recipient,name:i.recipient_name,avatar:i.recipient_avatar}}),yt.default.attachTo(document),Dt.default.attachTo(document),J.default.get("card_prefetch")&&c.default.attachTo(".DMComposer",{cardPrefetchInterval:J.default.get("card_prefetch_interval_in_seconds")})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(239),o=s(a),r=i(348),c=s(r),l=i(350),d=s(l),u=i(377),h=s(u),f=i(378),m=s(f),p=i(503),g=s(p),v=i(504),b=s(v),w=i(505),S=s(w),C=i(507),y=s(C),T=i(508),D=s(T),M=i(509),I=s(M),P=i(510),k=s(P),A=i(511),x=s(A),E=i(519),O=s(E),R=i(520),N=s(R),F=i(521),L=s(F),j=i(522),U=s(j),B=i(523),$=s(B),V=i(524),q=s(V),z=i(525),H=s(z),W=i(527),G=s(W),Q=i(528),K=s(Q),Y=i(456),J=s(Y),X=i(529),Z=s(X),tt=i(530),et=s(tt),it=i(531),st=s(it),nt=i(532),at=s(nt),ot=i(533),rt=s(ot),ct=i(534),lt=s(ct),dt=i(543),ut=s(dt),ht=i(544),ft=s(ht),mt=i(546),pt=s(mt),gt=i(547),vt=s(gt),bt=i(548),wt=s(bt),St=i(549),_t=s(St),Ct=i(550),yt=s(Ct),Tt=i(551),Dt=s(Tt),Mt=!!t("#dm_dialog").length;e.default=Mt?n:t.noop}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.addParticipants=function(t,e){e=e||{},this.post({url:"/i/direct_messages/add_participants",data:{id:e.conversation_id,participant_ids:e.participant_ids},eventData:e,success:u(t.target,"dataDMConversationResult"),error:u(t.target,"dataDMError")})},this.after("initialize",function(){this.on("uiAddConversationParticipants",this.addParticipants)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=i(347),d=s(l),u=d.default.triggerFn;e.default=(0,o.default)(n,c.default)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={triggerFn:function(e,i,s){return i=Array.isArray(i)?i:[i],function(n){i.forEach(function(i){var a=t.isFunction(i)?i(n):i,o=t.isFunction(s)?s(n):s;a&&t(e).trigger(a,o||n)})}},chain:function(){var e=Array.prototype.slice.call(arguments);return function(){var i=Array.prototype.slice.call(arguments);for(var s in e)t.isFunction(e[s])&&e[s].apply(e[s],i)}}}}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({basePrefetchEndpointUrl:"/i/cards/preview/v1",cardPrefetchInterval:1e4,prefetchOnLeadingEdge:!0}),this.filterCachedUri=function(t){return!this.prefetchedUri[t]},this.prefetchCardWithUri=function(t){this.prefetchedUri[t]=!0,this.get({url:this.attr.basePrefetchEndpointUrl,data:{card_uri:t},dataType:this.DATA_TYPES.TEXT})},this.setCardUriParam=function(t,e){var i=e&&e.urls;Array.isArray(i)&&(1===i.length?this.trigger("uiSetDmCreateCardUriParam",{cardUri:i[0]}):this.trigger("uiResetDmCreateCardUriParam"))},this.prefetchCard=function(t,e){var i=e&&e.urls;Array.isArray(i)&&1===i.length&&i.filter(this.filterCachedUri,this).forEach(this.prefetchCardWithUri,this)},this.after("initialize",function(){this.prefetchedUri={},this.on("uiGotUrlInText",this.setCardUriParam),this.on("uiGotUrlInText",(0,d.default)(this.prefetchCard,this.attr.cardPrefetchInterval,this.attr.cardPrefetchInterval,this.attr.prefetchOnLeadingEdge))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=i(349),d=s(l),u=(0,o.default)(n,c.default);e.default=u},,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({nextButtonSelector:".dm-initiate-conversation",dmTypeaheadSelector:".DMDialogTypeahead",maxParticipants:50,currentUserId:null}),this.enable=function(){this.select("nextButtonSelector").removeClass("disabled").prop("disabled",!1)},this.disable=function(){this.select("nextButtonSelector").addClass("disabled").prop("disabled",!0)},this.isGroupSelected=function(t,e){return e&&e.groups&&e.groups.length},this.initiateConversationFromSelectedGroup=function(t,e){var i=e.groups[0];this.initiateConversation("uiRenderConversationView",{conversation_id:i.id,name:i.name})},this.isNextButtonSelected=function(t,e){return"click"===t.type||"keydown"===t.type&&t.which===h.default.ENTER},this.initiateConversationFromSelectedAccounts=function(){var t=void 0,e=void 0;switch(this.selectedAccounts.length){case 0:t="uiRenderNewConversationView",e={name:"@"+this.manualScreenName,screen_names:this.manualScreenName?[this.manualScreenName]:[]};break;case 1:var i=this.selectedAccounts[0];t="uiRenderConversationView",e={conversation_id:c.default.generateConversationId(this.attr.currentUserId,i.id),name:i.name,is_oto:!0};break;default:var s=this.selectedAccounts.map(function(t){return t.id});t="uiRenderNewConversationView",e={name:c.default.generateConversationName(this.selectedAccounts),recipient_ids:s}}this.initiateConversation(t,e)},this.reset=function(t,e){this.trigger("uiInitializeDMTypeahead"),this.defaultComposerText=e&&e.default_composer_text||"",this.hasTweetAttachment=e&&e.has_tweet_attachment||!1},this.storeSelectedAccounts=function(t,e){this.selectedAccounts=e.accounts||[]},this.handleTextChange=function(t,e){var i=(e.text||"").replace(/^@/,"");this.manualScreenName=m.default.isValidUsername("@"+i)?i:""},this.initiateConversation=function(t,e){this.trigger(t,g.default.merge(e,{default_composer_text:this.defaultComposerText,has_tweet_attachment:this.hasTweetAttachment,retain_tweet_attachment:!0})),this.reset()},this.updateState=function(t,e){var i=this.manualScreenName,s=this.selectedAccounts.length;i||s?this.enable():this.disable()},this.after("handleTextChange",this.updateState),this.after("storeSelectedAccounts",this.updateState),this.after("reset",this.updateState),this.after("initialize",function(){this.attachChild(b.default,this.$node,{maxItems:this.attr.maxParticipants-1}),this.selectedAccounts=[],this.on("uiDMTypeaheadSelectedItemsChanged",this.storeSelectedAccounts),this.on("uiDMTypeaheadSelectedItemsChanged",(0,d.default)(this.initiateConversationFromSelectedGroup,this.isGroupSelected)),this.on("uiTextChanged",this.handleTextChange),this.on("click keydown",{nextButtonSelector:(0,d.default)(this.initiateConversationFromSelectedAccounts,this.isNextButtonSelected)}),this.on(document,"uiOpenNewDM",this.reset)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(351),c=s(r),l=i(353),d=s(l),u=i(354),h=s(u),f=i(230),m=s(f),p=i(126),g=s(p),v=i(355),b=s(v),w=i(227),S=s(w),C=(0,o.default)(n,S.default);e.default=C},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(123),a=s(n),o=i(352),r=s(o),c={generateConversationName:function(t){return 1===t.length?t[0].name:2===t.length?(0,a.default)("{{first}}, {{second}}",{first:t[0].name,second:t[1].name}):t.length>2?(0,a.default)("{{first}} + {{count}}",{first:t[0].name,count:t.length-1}):void 0},generateConversationId:function(t,e){if(t&&e){var i=[t,e];return(r.default.compare(i[0],i[1])<0?i:i.reverse()).join("-")}},sortRecipients:function(t){return(t||[]).sort(function(t,e){return r.default.compare(t.id,e.id)})}};e.default=c},,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){return function(){if(e.apply(i||this,arguments))return t.apply(i||this,arguments)}}},,function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({textSelector:"textarea.TokenizedMultiselect-input",selectedClass:"is-selected",suggestionClass:"DMTypeaheadSuggestions-item",suggestionSelector:".DMTypeaheadSuggestions-item",highlightedClass:"is-highlighted",highlightedSelector:".is-highlighted",suggestionsContainerSelector:".DMTypeaheadSuggestions",tokenIdDelimiter:"::",topAccountsLength:5,accountsDatasource:"dmAccounts",conversationsDatasource:"dmConversations",typeaheadSrc:"compose_message",preselectedItems:[],maxItems:50}),this.buildAccountTemplateData=function(t){var e=t.id_str,i=this.generateTokenId(this.attr.accountsDatasource,e),s=this.isItemSelected(i),n=this.isPreSelected(e),a=n?"":this.attr.suggestionClass,o=this.hasBusinessContext(t),r={emojified_text_as_html:d.default.emojifyText(t.name)};return{data_token_id:i,data_token_text:t.name,suggestion_class:a,title:{text:t.name,rich_text:r,screen_name:t.screen_name,verified:t.verified,"protected":!(!t.is_protected&&!t.protected)},avatar:{images:{src:t.profile_image_url_https,alt:t.name}},selected:s,preselected:n,is_group:!1,has_business_context:o}},this.buildGroupTemplateData=function(t){return{data_token_id:this.generateTokenId(this.attr.conversationsDatasource,t.id),data_token_text:t.emojified_title,suggestion_class:this.attr.suggestionClass,html:t.html,is_group:!0}},this.buildTemplateDataFromDMConversation=function(t){return t.is_group?this.buildGroupTemplateData(t):1===t.participants.length?this.buildAccountTemplateData(t.participants[0]):void 0},this.processEmptyQuerySuggestions=function(t){var e=t.suggestions.dmConversations||[],i=e.map(this.buildTemplateDataFromDMConversation.bind(this)),s=g.default.render({suggestions:i,has_suggestions:Boolean(i.length)});this.trigger("uiTokenizedMultiselectSuggestions",{html:s,preserve_previous_hightlight:!1})},this.processNonEmptyQuerySuggestions=function(t){var e=(t.suggestions.dmAccounts||[]).map(this.buildAccountTemplateData.bind(this)),i=(t.suggestions.dmConversations||[]).map(this.buildGroupTemplateData.bind(this)),s=i.length?e.slice(0,this.attr.topAccountsLength):e,n=b.default.render({accounts:s,groups:i,has_accounts:s.length,has_groups:i.length});this.trigger("uiTokenizedMultiselectSuggestions",{html:n,preserve_previous_hightlight:!0})},this.processSuggestions=function(t,e){var i=e.queryData&&e.queryData.query;e.suggestions&&this.currentQuery===i&&(""===i?this.processEmptyQuerySuggestions(e):this.processNonEmptyQuerySuggestions(e))},this.requestEmptyQuerySuggestions=function(){var t=this.attr.preselectedItems||[],e={id:this.typeaheadId,queryData:{query:"",dmConversationsOptions:{excludeGroups:this.selectedItems.length||t.length,sortBySortId:!0,excludeOneToOnes:!1}},datasources:[this.attr.conversationsDatasource]};this.trigger("uiNeedsTypeaheadSuggestions",e)},this.requestSuggestions=function(t,e){if(this.currentQuery=e.text,""===this.currentQuery)return void this.requestEmptyQuerySuggestions();var i=this.attr.preselectedItems||[],s=this.selectedItems.length||i.length,n=s?[this.attr.accountsDatasource]:[this.attr.accountsDatasource,this.attr.conversationsDatasource],a={id:this.typeaheadId,queryData:{query:e.text,typeaheadSrc:this.attr.typeaheadSrc,dmConversationsOptions:{excludeGroups:s,sortBySortId:!1,excludeOneToOnes:!s}},datasources:n};this.trigger("uiNeedsTypeaheadSuggestions",a)},this.splitTokenId=function(t){var e=t.split(this.attr.tokenIdDelimiter);return{datasource:e[0],id:e[1]}},this.handleItemSelected=function(t,e){this.selectedItems=e.selected_items||[];var i=this.selectedItems.map(function(t){var e=this.splitTokenId(t.id);return{datasource:e.datasource,id:e.id,text:t.text}},this),s=i.filter(function(t){return t.datasource===this.attr.accountsDatasource},this).map(function(t){return{id:t.id,name:t.text}}),n=i.filter(function(t){return t.datasource===this.attr.conversationsDatasource},this).map(function(t){return{id:t.id,name:t.text}});this.trigger("uiDMTypeaheadSelectedItemsChanged",{accounts:s,groups:n})},this.generateTokenId=function(t,e){return t+this.attr.tokenIdDelimiter+e},this.isItemSelected=function(e){var i=this.selectedItems.map(function(t){return t.id});return t.inArray(e+"",i||[])>=0},this.isPreSelected=function(e){return t.inArray(e+"",this.attr.preselectedItems||[])>=0},this.hasBusinessContext=function(t){return"enabled"===t.customer_service_state},this.resetAndInitialize=function(t,e){this.select("suggestionsContainerSelector").empty(),this.trigger("uiResetTokenizedMultiselect"),this.attr.preselectedItems=e&&e.preselectedItems&&e.preselectedItems.length?e.preselectedItems:[],e&&e.maxItems&&(this.attr.maxItems=e.maxItems,this.trigger("uiTokenizedMultiSelectMaxItems",{maxItems:e.maxItems})),this.selectedItems=[],this.requestEmptyQuerySuggestions(),this.currentQuery=""},this.after("handleItemSelected",this.requestEmptyQuerySuggestions),this.handleTokenChangeAccessibility=function(t,e){var i=this.splitTokenId(e.id);if(i.datasource===this.attr.accountsDatasource){
var s="uiTokenizedMultiselectTokenAdded"===t.type?(0,o.default)("Added {{user}}",{user:e.text}):(0,o.default)("Removed {{user}}",{user:e.text});this.trigger("uiShouldSpeakMessage",{message:s})}},this.after("initialize",function(){this.typeaheadId="dm_typeahead"+Math.floor(1e6*Math.random()),this.attachChild(h.default,this.$node,this.attr),this.on("uiTokenizedMultiselectTokenAdded uiTokenizedMultiselectTokenRemoved",this.handleTokenChangeAccessibility),this.on("uiTokenizedMultiselectTextChanged",this.requestSuggestions),this.on(document,"dataTypeaheadSuggestionsResults",this.processSuggestions),this.on("uiTokenizedMultiselectItemSelectionChanged",this.handleItemSelected),this.on("uiInitializeDMTypeahead",this.resetAndInitialize),this.selectedItems=[],this.requestEmptyQuerySuggestions()})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(123),o=s(a),r=i(111),c=s(r),l=i(356),d=s(l),u=i(362),h=s(u),f=i(227),m=s(f),p=i(365),g=s(p),v=i(376),b=s(v),w=(0,c.default)(n,m.default);e.default=w}).call(e,i(10))},,,,,,,function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.keymap=h.default;var e=0,i=1;this.attributes({textSelector:"textarea.TokenizedMultiselect-input",inputContainerSelector:".TokenizedMultiselect-inputContainer",textMinWidth:100,tokenClass:"InputToken",tokenSelector:".InputToken",focusedTokenSelector:".InputToken:focus",tokenDeleteClass:"InputToken-delete",tokenDeleteSelector:".InputToken-delete",highlightedClass:"is-highlighted",highlightedSelector:".is-highlighted",selectedClass:"is-selected",suggestionClass:"TokenizedMultiselect-suggestion",suggestionSelector:".TokenizedMultiselect-suggestion",suggestionsContainerSelector:".TokenizedMultiselect-suggestionsContainer",maxItems:50}),this.handleKeyPress=function(t){if("keydown"===t.type&&!t.shiftKey){var s=t.which||t.keycode,n=this.select("focusedTokenSelector").length,a=this.select("highlightedSelector").length,o=!this.$text.val();switch(s){case h.default.TAB:n?(t.preventDefault(),t.stopPropagation(),this.focusInput()):a&&(t.preventDefault(),t.stopPropagation(),this.tokenizeHighlightedSuggestion());break;case h.default.ENTER:t.preventDefault(),this.toggleTokenization();break;case h.default.ESC:a&&(t.preventDefault(),t.stopPropagation(),this.clearHighlight());break;case h.default.BACKSPACE:n?(this.removeFocusedToken(),t.preventDefault()):o&&(this.removeLastToken(),t.preventDefault());break;case h.default.DELETE:n&&this.removeFocusedToken();break;case h.default.UP:t.preventDefault(),n&&this.focusInput(),this.moveSuggestionHighlight(i);break;case h.default.DOWN:t.preventDefault(),n&&this.focusInput(),this.moveSuggestionHighlight(e);break;case h.default.LEFT:n?this.focusNeighbor(i):o&&this.focusLastToken();break;case h.default.RIGHT:n&&this.focusNeighbor(e)}}},this.focusNeighbor=function(t){var i=t===e?"next":"prev",s=this.select("focusedTokenSelector");s.length&&s[i]().focus()},this.focusLastToken=function(){this.select("tokenSelector").last().focus()},this.focusInput=function(){this.$text.focus()},this.removeFocusedToken=function(t){var i=this.select("focusedTokenSelector");t&&"click"===t.type?this.focusInput():this.focusNeighbor(e),this.removeToken(i)},this.removeLastToken=function(){this.removeToken(this.select("tokenSelector").last())},this.removeToken=function(t){t.length&&(this.trigger("uiTokenizedMultiselectTokenRemoved",{text:t.attr("data-token-text"),id:t.attr("data-token-id")}),t.remove())},this.getFirstSuggestion=function(){return this.select("suggestionSelector").first()},this.getHighlightedSuggestion=function(){return this.select("highlightedSelector").first()},this.getNeighboringSuggestion=function(t,i){var s=i===e?"nextAll":"prevAll";return t[s](this.attr.suggestionSelector).first()},this.moveSuggestionHighlight=function(t){var e=this.getHighlightedSuggestion(),i=this.getNeighboringSuggestion(e,t);e.length?i.length&&this.setHighlight(i):this.setHighlight(this.getFirstSuggestion())},this.toggleTokenization=function(){var t=this.getHighlightedSuggestion(),e=t.attr("data-token-id");this.isTokenized(t)?(this.removeToken(this.select("tokenSelector").filter('[data-token-id="'+e+'"]')),this.$text.val("").focus()):this.tokenizeHighlightedSuggestion()},this.tokenizeHighlightedSuggestion=function(){var e=this.getHighlightedSuggestion(),i=e.attr("data-token-text");if(this.canTokenize(e)){var s=t(m.default.render({token_class:this.attr.tokenClass,token_delete_class:this.attr.tokenDeleteClass,emojified_token_text:{emojified_text_as_html:c.default.emojifyText(i),text:i},token_id:e.attr("data-token-id"),token_text:i}));e.addClass(this.attr.selectedClass),this.$text.before(s),this.$text.val("").focus(),this.trigger("uiTokenizedMultiselectTokenAdded",{text:s.attr("data-token-text"),id:s.attr("data-token-id")})}},this.isTokenized=function(e){return t.inArray(e.attr("data-token-id"),this.getSelectedItemsIds())>=0},this.canTokenize=function(t){var e=this.select("tokenSelector").length>=this.attr.maxItems;return!e&&t.length&&!this.isTokenized(t)},this.getSelectedItemsIds=function(){return t.map(this.select("tokenSelector"),function(e){return t(e).attr("data-token-id")})},this.getSelectedItems=function(){return t.map(this.select("tokenSelector"),function(e){return{id:t(e).attr("data-token-id"),text:t(e).attr("data-token-text")}})},this.handleTextChange=function(t,e){this.trigger("uiTokenizedMultiselectTextChanged",{text:e.text,selected_items:this.getSelectedItemsIds()})},this.handleMouseOver=function(e){this.setHighlight(t(e.target).closest(this.attr.suggestionSelector))},this.updateWidth=function(){var t=this.select("tokenSelector").last();if(t.length){var e=this.select("inputContainerSelector").width()-t.position().left-t.outerWidth(!0),i=e<this.attr.textMinWidth?"100%":e;this.$text.outerWidth(i)}this.$text.prop("scrollHeight")>this.$text.prop("clientHeight")&&this.$text.outerWidth("100%")},this.selectedItemsChanged=function(){this.trigger("uiTokenizedMultiselectItemSelectionChanged",{selected_items:this.getSelectedItems()})},this.updateScroll=function(){var t=this.getHighlightedSuggestion(),e=this.select("suggestionsContainerSelector"),i=e.prop("scrollTop"),s=t.position().top+t.outerHeight();if(s>e.height()){var n=s-e.height();e.scrollTop(i+n)}else t.position().top<0&&e.scrollTop(i+t.position().top)},this.reset=function(){this.select("tokenSelector").remove(),this.$text.val("")},this.setMaxItems=function(t){this.attr.maxItems=t.maxItems},this.handleTokenChange=function(){this.updateWidth(),this.selectedItemsChanged()},this.updateSuggestions=function(t,e){var i=e.html,s=e.preserve_previous_hightlight,n=this.select("highlightedSelector").first().attr("data-token-id");if(this.clearHighlight(),this.select("suggestionsContainerSelector").html(i),s){var a=this.select("suggestionSelector").filter('[data-token-id="'+n+'"]').first(),o=a.length?a:this.select("suggestionSelector").first();this.setHighlight(o)}},this.clearHighlight=function(){this.select("suggestionSelector").removeAttr("id aria-selected").removeClass(this.attr.highlightedClass),this.$text.removeAttr("aria-activedescendant")},this.setHighlight=function(t){this.clearHighlight();var e="tokenizedMultiselectHighlight"+Math.floor(1e10*Math.random()).toString();t.addClass(this.attr.highlightedClass).attr({id:e,"aria-selected":!0}),this.$text.attr("aria-activedescendant",e)},this.after("moveSuggestionHighlight",this.updateScroll),this.after("tokenizeHighlightedSuggestion",this.handleTokenChange),this.after("toggleTokenization",this.handleTokenChange),this.after("removeFocusedToken",this.handleTokenChange),this.after("removeLastToken",this.handleTokenChange),this.after("reset",this.handleTokenChange),this.setupAria=function(){var t="TokenizedMultiselectOwns"+Math.floor(1e10*Math.random()).toString();this.select("suggestionsContainer").attr("id",t),this.$text.attr("aria-owns",t)},this.after("initialize",function(){this.initTextNode(),this.attr.placeholderText=this.$text.attr("placeholder"),this.setupAria(),this.on("uiTextChanged",this.handleTextChange),this.on("uiTextChanged",this.updateWidth),this.on("keyup keydown keypress paste",this.handleKeyPress),this.on("uiResetTokenizedMultiselect",this.reset),this.on("uiTokenizedMultiSelectMaxItems",this.setMaxItems),this.on("uiTokenizedMultiselectSuggestions",this.updateSuggestions),this.on("mouseover",{suggestionSelector:this.handleMouseOver}),this.on("click",{suggestionSelector:this.toggleTokenization,tokenDeleteSelector:this.removeFocusedToken})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(356),c=s(r),l=i(224),d=s(l),u=i(354),h=s(u),f=i(363),m=s(f),p=(0,o.default)(n,d.default);e.default=p}).call(e,i(10))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={emojified_text:i(364)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<li\n  class="'),s.b(s.v(s.f("token_class",t,e,0))),s.b('"\n  tabindex="-1"\n  data-token-id="'),s.b(s.v(s.f("token_id",t,e,0))),s.b('"\n  data-token-text="'),s.b(s.v(s.f("token_text",t,e,0))),s.b('"\n  aria-label="'),s.b(s.v(s.f("token_text",t,e,0))),s.b('">\n'),s.s(s.f("emojified_token_text",t,e,1),t,e,0,170,189,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<emojified_text0",t,e,""))}),t.pop()),s.b('  <span class="'),s.b(s.v(s.f("token_delete_class",t,e,0))),s.b(' Icon Icon--close" aria-hidden="true"></span>\n</li>'),s.fl()},partials:{"<emojified_text0":{name:"emojified_text",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},,function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"dm/dm_typeahead_group_suggestion":i(366),"dm/dm_typeahead_account_suggestion":i(367)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("has_suggestions",t,e,1),t,e,0,20,86,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('  <li class="DMTypeaheadHeader">\n    <span>Recent</span>\n  </li>\n')}),t.pop()),s.s(s.f("suggestions",t,e,1),t,e,0,123,274,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.s(i.f("is_group",t,e,1),t,e,0,139,184,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<dm/dm_typeahead_group_suggestion0",t,e,"    "))}),t.pop()),i.s(i.f("is_group",t,e,1),t,e,1,0,0,"")||i.b(i.rp("<dm/dm_typeahead_account_suggestion1",t,e,"    "))}),t.pop()),s.fl()},partials:{"<dm/dm_typeahead_group_suggestion0":{name:"dm/dm_typeahead_group_suggestion",partials:{},subs:{}},"<dm/dm_typeahead_account_suggestion1":{name:"dm/dm_typeahead_account_suggestion",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<li class="DMTokenizedMultiselectSuggestion '),s.b(s.v(s.f("suggestion_class",t,e,0))),s.b('" data-token-id="'),s.b(s.v(s.f("data_token_id",t,e,0))),s.b('" data-token-text="'),s.b(s.v(s.f("data_token_text",t,e,0))),s.b('" role="option" tabindex="-1">\n  <div class="DMTokenizedMultiselectSuggestion-body">\n    '),s.b(s.t(s.f("html",t,e,0))),s.b("\n"+i),s.b("  </div>\n</li>\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"dm/dm_typeahead_item":i(368)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<li class="DMTokenizedMultiselectSuggestion '),s.b(s.v(s.f("suggestion_class",t,e,0))),s.b(" "),s.s(s.f("preselected",t,e,1),t,e,0,81,95,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("is-preselected")}),t.pop()),s.b(" "),s.s(s.f("selected",t,e,1),t,e,0,125,136,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("is-selected")}),t.pop()),s.b('" data-token-id="'),s.b(s.v(s.f("data_token_id",t,e,0))),s.b('" data-token-text="'),s.b(s.v(s.f("data_token_text",t,e,0))),s.b('" role="option" tabindex="-1">\n  <div class="DMTokenizedMultiselectSuggestion-body">\n'),s.b(s.rp("<dm/dm_typeahead_item0",t,e,"    ")),s.b('  </div>\n  <div class="DMTokenizedMultiselectSuggestion-state">\n    <span class="DMTokenizedMultiselectSuggestion-selectedIndicator Icon Icon--check"></span>\n    <span class="DMTokenizedMultiselectSuggestion-preselectedIndicator">In Group</span>\n  </div>\n</li>\n'),s.fl()},partials:{"<dm/dm_typeahead_item0":{name:"dm/dm_typeahead_item",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"dm/dm_avatar":i(369),emojified_text:i(364),user_badges:i(370),user_name_break:i(374),screen_name:i(375)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMTypeaheadItem">\n  <div class="DMTypeaheadItem-avatar" aria-hidden="true">\n'),s.s(s.f("avatar",t,e,1),t,e,0,103,120,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<dm/dm_avatar0",t,e,""))}),t.pop()),s.b('  </div>\n  <div class="DMTypeaheadItem-body">\n    <div class="DMTypeaheadItem-title account-group">\n'),s.s(s.f("title",t,e,1),t,e,0,248,519,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('        <b class="fullname">'),s.s(s.f("rich_text",t,e,1),t,e,0,305,324,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<emojified_text1",t,e,""))}),t.pop()),s.s(s.f("rich_text",t,e,1),t,e,1,0,0,"")||s.b(s.v(s.f("text",t,e,0))),s.b("</b>"),s.b(s.rp("<user_badges2",t,e,"")),s.b(s.rp("<user_name_break3",t,e,"")),s.s(s.f("screen_name",t,e,1),t,e,0,480,496,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name4",t,e,""))}),t.pop()),s.b("\n"+i)}),t.pop()),s.b("    </div>\n"),s.s(s.f("has_business_context",t,e,1),t,e,0,603,718,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('      <div class="DMTypeaheadItem-context DMTypeaheadItem-businessContext">\n      Provides support\n    </div>\n')}),t.pop()),s.b("  </div>\n</div>\n"),s.fl()},partials:{"<dm/dm_avatar0":{name:"dm/dm_avatar",partials:{},subs:{}},"<emojified_text1":{name:"emojified_text",partials:{},subs:{}},"<user_badges2":{name:"user_badges",partials:{},subs:{}},"<user_name_break3":{name:"user_name_break",partials:{},subs:{}},"<screen_name4":{name:"screen_name",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMAvatar DMAvatar--'),s.s(s.f("image_count",t,e,1),t,e,0,47,62,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("image_count",t,e,0)))}),t.pop()),s.s(s.f("image_count",t,e,1),t,e,1,0,0,"")||s.b("1"),s.b(' u-chromeOverflowFix">\n'),s.s(s.f("images",t,e,1),t,e,0,147,279,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('    <span class="DMAvatar-container">\n      <img class="DMAvatar-image" src="'),i.b(i.v(i.f("src",t,e,0))),i.b('" alt="'),i.b(i.v(i.f("alt",t,e,0))),i.b('" title="'),i.b(i.v(i.f("alt",t,e,0))),i.b('">\n    </span>\n')}),t.pop()),s.b("</div>\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={verified_account_badge:i(371),translator_account_badges:i(372),protected_account_badge:i(373)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<span class="UserBadges">'),s.b(s.rp("<verified_account_badge0",t,e,"")),s.b(s.rp("<translator_account_badges1",t,e,"")),s.b(s.rp("<protected_account_badge2",t,e,"")),s.b("</span>"),s.fl()},partials:{"<verified_account_badge0":{name:"verified_account_badge",partials:{},subs:{}},"<translator_account_badges1":{name:"translator_account_badges",partials:{},subs:{}},"<protected_account_badge2":{name:"protected_account_badge",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("verified",t,e,1),t,e,0,13,134,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<span class="Icon Icon--verified">'),i.b('<span class="u-hiddenVisually">Verified account</span>'),i.b("</span>")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("is_translator",t,e,1),t,e,0,18,121,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<span class="Icon Icon--translator"><span class="u-hiddenVisually">Translator</span></span>')}),t.pop()),s.s(s.f("is_translation_moderator",t,e,1),t,e,0,175,288,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<span class="Icon Icon--moderator"><span class="u-hiddenVisually">Translation Moderator</span></span>')}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("protected",t,e,1),t,e,0,14,128,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<span class="Icon Icon--protected">'),i.b('<span class="u-hidden">Protected Tweets</span>'),i.b("</span>")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<span class="UserNameBreak">&nbsp;</span>'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},,function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"dm/dm_typeahead_account_suggestion":i(367),"dm/dm_typeahead_group_suggestion":i(366)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("has_accounts",t,e,1),t,e,0,45,111,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('  <li class="DMTypeaheadHeader">\n    <span>People</span>\n  </li>\n')}),t.pop()),s.s(s.f("accounts",t,e,1),t,e,0,142,185,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<dm/dm_typeahead_account_suggestion0",t,e,"  "))}),t.pop()),s.b("\n"+i),s.s(s.f("has_groups",t,e,1),t,e,0,240,306,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('  <li class="DMTypeaheadHeader">\n    <span>Groups</span>\n  </li>\n')}),t.pop()),s.s(s.f("groups",t,e,1),t,e,0,333,374,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<dm/dm_typeahead_group_suggestion1",t,e,"  "))}),t.pop()),s.fl()},partials:{"<dm/dm_typeahead_account_suggestion0":{name:"dm/dm_typeahead_account_suggestion",partials:{},subs:{}},"<dm/dm_typeahead_group_suggestion1":{name:"dm/dm_typeahead_group_suggestion",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.publishTyping=function(t,e){e&&e.conversation_id&&(this.trigger("dataDMTypingPublished"),this.post({url:"/i/direct_messages/publish_typing",data:{conversation_id:e.conversation_id}}))},this.after("initialize",function(){this.on("uiDMUserTyping",this.publishTyping)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r);e.default=(0,o.default)(n,c.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({conversation:".DMConversationContainer",groupAvatars:!1,maxCharacters:1e4}),this.openConversation=function(t,e){var i="uiRenderNewConversationView"===t.type?"uiOpenNewConversationView":"uiOpenConversationView";this.select("conversation").trigger(i,e)},this.after("initialize",function(){this.attachChild(d.default,this.attr.conversation),this.attachChild(m.default,this.attr.conversation),this.attachChild(h.default,this.attr.conversation,{groupAvatars:this.attr.groupAvatars,maxCharacters:this.attr.maxCharacters}),this.attachChild(g.default,this.attr.conversation),this.on("uiRenderConversationView uiRenderNewConversationView",this.openConversation)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(227),c=s(r),l=i(379),d=s(l),u=i(380),h=s(u),f=i(499),m=s(f),p=i(500),g=s(p);e.default=(0,o.default)(n,c.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({addParticipantsSelector:".DMAddParticipants",addParticipantsInputSelector:".TokenizedMultiselect-input",addParticipantsDoneSelector:".DMAddParticipants-done",dialogBodySelector:".DMAddParticipants-content",spinnerSelector:".DMAddParticipants-spinner"}),this.setParticipants=function(t,e){this.conversationId&&this.conversationId===e.conversation_id&&(this.resetDMTypeahead(e),this.select("dialogBodySelector").css("visibility","visible"),this.select("spinnerSelector").addClass("u-hidden"),this.select("addParticipantsInputSelector").focus())},this.resetDMTypeahead=function(t){var e=t||{},i=e.participants&&e.participants.map(function(t){return t.id});this.trigger(this.attr.addParticipantsSelector,"uiInitializeDMTypeahead",{preselectedItems:i,maxItems:e.additional_participants_allowed})},this.prepareAddParticipants=function(t,e){this.conversationId=e.conversation_id,this.select("dialogBodySelector").css("visibility","hidden"),this.select("spinnerSelector").removeClass("u-hidden"),this.resetDMTypeahead(),this.trigger("uiNeedsDMConversation",{conversation_id:e.conversation_id})},this.addParticipants=function(){this.conversationId&&this.selectedAccounts.length&&this.trigger("uiAddConversationParticipants",{conversation_id:this.conversationId,participant_ids:this.selectedAccounts}),this.trigger("uiDMAddParticipantsDone")},this.handleSelectedItems=function(t,e){var i=e&&e.accounts&&e.accounts.length?e.accounts:[];this.selectedAccounts=i.map(function(t){return t.id})},this.possibleAddParticipants=function(t,e){("click"===t.type||"keydown"===t.type&&t.which===d.default.ENTER)&&this.addParticipants()},this.after("initialize",function(){this.attachChild(c.default,this.select("addParticipantsSelector")),this.selectedAccounts=[],this.on("uiDMTypeaheadSelectedItemsChanged",this.handleSelectedItems),this.on(document,"dataDMConversationResult",this.setParticipants),this.on("uiAddParticipants",this.prepareAddParticipants),this.on("click keydown",{addParticipantsDoneSelector:this.possibleAddParticipants})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(355),c=s(r),l=i(354),d=s(l),u=i(227),h=s(u);e.default=(0,o.default)(n,h.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({messageClass:"DirectMessage",sentMessageSelector:".DirectMessage--sent",emojiOnlyMessageSelector:".DirectMessage--emoji",receivedMessageSelector:".DirectMessage--received",newMessagesPillSelector:".DMConversation-newMessagesPill",pageBackRange:1e3,dmComposerSelector:".DMComposer",dmComposerSectionSelector:".DMConversation-composer",viewConversation:".DMConversation",conversationContentSelector:".DMConversation-content",conversationScrollContainer:".DMConversation-scrollContainer",conversationActionsDropdownSelector:".DMConversationActions",conversationActionsContentSelector:".DMConversationActions-content",conversationNameSelector:".DMConversation-name",conversationReadonlyClass:"is-readonly",spinnerSelector:".DMConversation-spinner",quickReplyOptionPanelSelector:".DMConversation-quickReply",conversationAvatarSelector:".DMUpdateAvatar",sendingStateSelector:".DMConversation-sendingStateIndicator",maxCharacters:1e4}),this.prepareConversationView=function(t,e){e=e||{};var i="uiOpenNewConversationView"===t.type,s=i&&e.screen_names&&1===e.screen_names.length;this.trigger("uiDMDialogClearActions"),this.trigger("uiUpdateConversationType",{is_oto:e.is_oto}),this.trigger("uiUpdateConversationState",{is_readonly:e.is_readonly}),this.triggerOnConversationAvatar("uiDMResetConversationAvatar");var n=e.name||e.generated_name,a=s?"text":"html";this.$conversationName[a](n),this.trigger("uiClearRichHeaderState"),this.$content.empty().removeAttr("data-thread-id").attr("data-thread-id",e.conversation_id),this.$viewConversation.removeAttr("data-thread-id").attr("data-thread-id",e.conversation_id),this.removeConversationActions(),this.hideNewMessagesPill(),this.trigger("uiRemoveQuickReply"),i?this.hideSpinner():(this.showSpinner(),this.loadConversationData(e)),this.trigger("uiDMConversationUpdated",e)},this.currentConversationId=function(){return this.$content.attr("data-thread-id")},this.isExistingConversation=function(){return!!this.currentConversationId()},this.isDataForCurrentConversation=function(t){return!this.isExistingConversation()||t.conversation_id===this.currentConversationId()},this.processConversationResult=function(t,e){if(t&&t.preventDefault(),e&&this.isDataForCurrentConversation(e)){if(this.isExistingConversation()||this.initializeDMComposer(null,e),this.$content.attr("data-thread-id",e.conversation_id),this.$viewConversation.attr("data-thread-id",e.conversation_id),this.$conversationName.empty().removeData("raw-name"),e.conversation&&e.conversation.title){var i=e.conversation.title;this.$conversationName.html(i.html).data("raw-name",i.raw),i.screen_name&&this.trigger("uiSetRichHeaderState",i)}this.updateConversationAvatar(e),this.trigger("uiUpdateConversationType",{is_oto:e.is_oto}),this.trigger("uiUpdateConversationState",{is_readonly:e.is_readonly}),e.conversation_actions?this.updateConversationActions(e.conversation_actions.html):this.removeConversationActions();var s=this.$content.children(),n=s.first().attr("data-message-id"),a=s.last().attr("data-message-id");this.isPageVisible()&&this.$content.is(":visible")&&e.conversation&&e.conversation.is_unread&&this.trigger("dataMarkDMsAsRead",{last_message_id:e.sort_event_id||-1,recipient_id:e.conversation_id}),this.trigger("uiDMUpdateTrustRequest",e),this.updateConversationHTML(e,n,a),e.has_more===!1&&this.hideSpinner(),this.trigger("uiDMConversationUpdated",e)}},this.processUserUpdatesResult=function(e,i){if(!i.should_request_inbox&&!i.is_empty){var s=this.$content.attr("data-thread-id");(i.conversations||[]).forEach(function(t){t.conversation_id===s&&this.processConversationResult(null,t)},this),(i.update_events||[]).filter(function(_){return _.conversation_id===s}).forEach(function(e){switch(e.type){case"conversation_delete":this.trigger("uiCloseDMConversation");break;case"message_delete":this.$content.find('[data-message-id="'+e.message_id+'"]').remove(),0===this.$content.children().length&&this.trigger("uiCloseDMConversation"),this.updateQR(),this.trigger("uiDMMesageDeleted",{dmId:e.message_id});break;case"mark_spam":case"unmark_spam":e.messages.forEach(function(e){var i=t(e.html);this.$content.find('[data-message-id="'+e.message_id+'"]').replaceWith(i)},this)}},this),this.updateRapidFire()}},this.isPageVisible=function(){return"visible"===document.visibilityState},this.removeAnimationClass=function(e,i){var s=t(e.target).closest(this.attr.emojiOnlyMessageSelector);s.removeClass("is-animating")},this.removeConversationActions=function(){this.$conversationActionsDropdown.addClass("u-hidden"),this.$conversationActionsContent.empty()},this.updateConversationActions=function(t){this.$conversationActionsContent.html(t),this.$conversationActionsDropdown.removeClass("u-hidden")},this.updateConversationState=function(t,e){this.$viewConversation.toggleClass(this.attr.conversationReadonlyClass,!!e.is_readonly)},this.generateConversationHTML=function(t,e,i){var s=t.items,n=Object.keys(s);n.sort(o.default.compare);var a=!(e&&i),r="",c="";return n.forEach(function(t){a||o.default.compare(t,e)<0?r+=s[t]:o.default.compare(t,i)>0&&(c+=s[t])}),{prepend:r,append:c}},this.applyNewHtml=function(t,e,i,s){var n=this.$container[0].scrollHeight-this.$container.scrollTop();this.$content.prepend(e.prepend);var a=this.$container[0].scrollHeight-n;this.$container.scrollTop(a),this.$content.append(e.append),this.updateRapidFire(s),this.addAnimation(s),this.updateScrollPosition(t,s),this.updateQR(s)},this.updateConversationHTML=function(t,e,i){var s=this.generateConversationHTML(t,e,i),n=s.append||s.prepend;n&&this.applyNewHtml(t,s,e,i)},this.updateRapidFire=function(e){if(e){var i=this.attr.messageClass,s=this.$content.find('[data-message-id="'+e+'"]').nextAll().addBack();s.each(function(e,s){var n=t(this),a=n.next(),o=n.hasClass(i);if(o&&a.hasClass(i)){var r=n.find("[data-user-id]").attr("data-user-id"),c=n.find("[data-time]").attr("data-time"),l=n.find("[data-custom-profile-id]").attr("data-custom-profile-id"),d=a.find("[data-user-id]").attr("data-user-id"),u=a.find("[data-time]").attr("data-time"),h=a.find("[data-custom-profile-id]").attr("data-custom-profile-id");n.css("height"),r===d&&u-c<60&&l===h&&!n.hasClass("DirectMessage--emoji")&&!a.hasClass("DirectMessage--emoji")?n.addClass("is-rapidFire"):n.removeClass("is-rapidFire")}else o&&!a.hasClass(i)&&n.removeClass("is-rapidFire")})}},this.addAnimation=function(t){this.$content.find('[data-message-id="'+t+'"]').nextAll(this.attr.emojiOnlyMessageSelector).addClass("is-animating")},this.requestNextPage=function(){this.trigger("uiNeedsDMConversation",{conversation_id:this.$content.attr("data-thread-id"),max_entry_id:this.$content.children().first().attr("data-message-id")})},this.hideNewMessagesPill=function(){this.$newMessagesPill.addClass("is-hidden")},this.showNewMessagesPill=function(){this.$newMessagesPill.removeClass("is-hidden"),setTimeout(this.hideNewMessagesPill.bind(this),3500)},this.showSpinner=function(){this.$spinner.removeClass("u-hidden")},this.hideSpinner=function(){this.$spinner.addClass("u-hidden")},this.isMessageVisible=function(t){return t.position().top<this.$container[0].clientHeight},this.findMessage=function(t){return this.$content.find('[data-message-id="'+t+'"]')},this.hasNewReceivedMessages=function(t){return t.nextAll(this.attr.receivedMessageSelector).length},this.updateScrollPosition=function(t,e){var i=!e,s=this.findMessage(e),n=s.nextAll(this.attr.sentMessageSelector).length,a=this.hasNewReceivedMessages(s);i?(this.$container.scrollTop(this.$container[0].scrollHeight),this.applyMarker(t.last_read_event_id)):a?this.isMessageVisible(s)?this.scrollToBottom():this.showNewMessagesPill():n&&(this.scrollToBottom(),this.removeMarker())},this.updateQR=function(t){var e=!t,i=this.findMessage(t),s=this.hasNewReceivedMessages(i);if(e||s){var n=this.$content.children().last().data("quick-reply-json");this.trigger("uiRemoveQuickReply"),n&&(this.trigger("uiShowQuickReply",{qrJson:n,isFirstResult:e}),this.scrollToBottom())}},this.addDMComposerSectionQuickReplyClass=function(){this.$dmComposerSection.addClass("is-showingQuickReply")},this.removeDMComposerSectionQuickReplyClass=function(){this.$dmComposerSection.removeClass("is-showingQuickReply")},this.scrollToBottom=function(t){var e=t?250:0;this.$container.stop().clearQueue().animate({scrollTop:this.$container[0].scrollHeight-this.$container[0].clientHeight},e),this.hideNewMessagesPill()},this.initializeDMComposer=function(t,e){this.trigger(this.attr.dmComposerSelector,"uiInitializeDMComposer",e)},this.loadConversationData=function(t){this.$viewConversation.trigger("uiNeedsDMConversation",{conversation_id:t.conversation_id,fromInitData:t.fromInitData})},this.updateConversationAvatar=function(t){var e=t.conversation&&t.conversation.avatar;e?this.triggerOnConversationAvatar("uiDMSetConversationAvatar",{html:e.html,full_size_url:e.full_size_url,conversation_id:t.conversation_id,is_custom:e.is_custom,is_oto:t.is_oto}):this.triggerOnConversationAvatar("uiDMResetConversationAvatar")},this.triggerOnConversationAvatar=function(t,e){this.$avatar.trigger(t,e)},this.showComposeSection=function(){this.select("dmComposerSectionSelector").removeClass("u-hidden")},this.hideComposeSection=function(){this.select("dmComposerSectionSelector").addClass("u-hidden"),this.scrollToBottom(!1)},this.handleViewChange=function(t,e){var i="uiDMDialogClosed"===t.type||"conversation"!==e.activity?"uiDMConversationActivityHidden":"uiDMConversationActivityVisible";this.trigger(i,e)},this.handleTypingIndicatorShown=function(){var t=this.$content.children().last();
this.isMessageVisible(t)&&this.scrollToBottom()},this.removeCardsFromConversation=function(){this.trigger(this.select("conversationScrollContainer"),"uiUnloadAllCards")},this.after("initialize",function(){this.attachChild(m.default,this.$node),this.attachChild(D.default,this.$node),this.attachChild(I.default,this.$node),this.attachChild(x.default,this.$node),this.attachChild(O.default,this.$node),this.attachChild(N.default,this.$node),this.attachChild(L.default,this.$node),this.attachChild(U.default,this.$node),this.attachChild(rt.default,this.select("quickReplyOptionPanelSelector")),this.attachChild($.default,this.$node,{tweetSelector:".DirectMessage-message",mediaNotDisplayedSelector:".Sensitive-warning",mediaContainerSelector:".Sensitive-content",hiddenClass:"u-hidden"}),this.attachChild(q.default,this.$node),this.attachChild(H.default,this.$node,{eventData:{scribeContext:{component:"dm_existing_conversation_dialog"}}}),this.attachChild(G.default,this.$node),this.attachChild(K.default,this.$node),this.attachChild(J.default,this.$node.find(".DMUpdateAvatar")),this.attachChild(Z.default,this.$node),this.attachChild(b.default,this.select("dmComposerSelector"),{defaultText:"",condensedText:"",suppressFlashMessage:!0,eventData:{scribeContext:{component:"tweet_box_dm"}},dmOnly:!0,mediaCategoryPrefix:"dm_",fileDataString:"media",fileInputString:"media",maxLength:this.attr.maxCharacters,warnLength:this.attr.maxCharacters-20,superwarnLength:this.attr.maxCharacters-10,timeToDismissSelectedQRInMS:S.default.get("dm_quick_reply_options_panel_dismiss_in_ms")}),this.attachChild(g.default,this.$node),this.attachChild(k.default,this.$node),this.attachChild(y.default,this.select("sendingStateSelector")),this.attachChild(at.default,this.select("conversationScrollContainer"),{containerSelector:this.attr.conversationScrollContainer,cardContainerSelector:".DirectMessage",unloadedCardsFilter:".DirectMessage .js-macaw-cards-iframe-container"}),this.attachChild(lt.default,this.$node),this.attachChild(ut.default,this.$node),this.attachChild(st.default,this.select("conversationScrollContainer"),{watchDocumentScroll:!1}),this.on("uiDMConversationActivityHidden","uiPauseAllMedia"),this.$avatar=this.select("conversationAvatarSelector"),this.$container=this.select("conversationScrollContainer"),this.$content=this.select("conversationContentSelector"),this.$viewConversation=this.select("viewConversation"),this.$conversationName=this.select("conversationNameSelector"),this.$spinner=this.select("spinnerSelector"),this.$newMessagesPill=this.select("newMessagesPillSelector"),this.$conversationActionsContent=this.select("conversationActionsContentSelector"),this.$conversationActionsDropdown=this.select("conversationActionsDropdownSelector"),this.$dmComposerSection=this.select("dmComposerSectionSelector"),this.on(document,"dataDMConversationResult dataDMSendSuccess",this.processConversationResult),this.on("dataDMDeleteSuccess",this.processUserUpdatesResult),this.on("uiOpenConversationView uiOpenNewConversationView",this.prepareConversationView),this.on("uiOpenConversationView uiOpenNewConversationView",this.initializeDMComposer),this.on("uiUpdateConversationState",this.updateConversationState),this.on("uiWantsConversationHistory",d.default.throttle(this.requestNextPage,1e3)),this.on(document,"uiDMDialogClosed uiDMActivityOpened",this.handleViewChange),this.on("uiDMConversationActivityHidden",this.removeCardsFromConversation),this.on("uiFeedbackPanelOpened uiDMHideComposeSection",this.hideComposeSection),this.on("uiFeedbackPanelClosed uiDMShowComposeSection",this.showComposeSection),this.on("uiB2CFeedbackUpdateView",this.scrollToBottom),this.on("uiShowQuickReplyOptionPanel",this.addDMComposerSectionQuickReplyClass),this.on("uiQuickReplyRemoved",this.removeDMComposerSectionQuickReplyClass),this.on("uiUpdateQR",function(){this.updateQR()}),this.on("uiDMTypingIndicatorShown",this.handleTypingIndicatorShown),this.on("click",{newMessagesPillSelector:this.scrollToBottom}),this.on("mouseover",{emojiOnlyMessageSelector:this.removeAnimationClass}),this.on(document,"dataDMUserUpdates",this.processUserUpdatesResult)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(352),o=s(a),r=i(111),c=s(r),l=i(126),d=s(l),u=i(227),h=s(u),f=i(381),m=s(f),p=i(382),g=s(p),v=i(383),b=s(v),w=i(456),S=s(w),C=i(457),y=s(C),T=i(459),D=s(T),M=i(460),I=s(M),P=i(461),k=s(P),A=i(462),x=s(A),E=i(464),O=s(E),R=i(465),N=s(R),F=i(466),L=s(F),j=i(467),U=s(j),B=i(469),$=s(B),V=i(470),q=s(V),z=i(471),H=s(z),W=i(473),G=s(W),Q=i(474),K=s(Q),Y=i(475),J=s(Y),X=i(476),Z=s(X),tt=i(477),et=s(tt),it=i(480),st=s(it),nt=i(488),at=s(nt),ot=i(492),rt=s(ot),ct=i(494),lt=s(ct),dt=i(497),ut=s(dt),ht=(0,c.default)(n,h.default,et.default);e.default=ht}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({conversationIdSelector:"[data-conversation-id]",conversationTypeSelector:"[data-is-oto]",reportScreenNameSelector:".DMConversationActions [data-screen-name]",addParticipantsSelector:".js-actionAddParticipants",viewParticipantsSelector:".js-actionViewParticipants",editConversationNameSelector:".js-actionEditConversationName",deleteConversationSelector:".js-actionDeleteConversation",reportConversationSelector:".js-actionReportConversation",enableNotificationsSelector:".js-actionEnableNotifications",disableNotificationsSelector:".js-actionDisableNotifications",shareLocationSelector:".js-shareLocation",actionsContainerSelector:".DMConversationActions-content"}),this.getConversationId=function(){return this.select("conversationIdSelector").attr("data-conversation-id")},this.isGroupConversation=function(){return!this.select("conversationTypeSelector").data("is-oto")},this.getReportScreenName=function(){return this.select("reportScreenNameSelector").attr("data-screen-name")},this.toggleNotificationsAction=function(t){this.select("enableNotificationsSelector").toggleClass("u-hidden",!!t),this.select("disableNotificationsSelector").toggleClass("u-hidden",!t)},this.toggleNotifications=function(t){this.trigger("uiToggleNotifications",{conversation_id:this.getConversationId(),enable_notifications:t})},this.updateNotificationsState=function(t,e){switch(t.type){case"dataDMConversationResult":e.conversation_actions&&this.getConversationId()===e.conversation_actions.conversation_id&&this.toggleNotificationsAction(e.conversation_actions.notifications);break;case"dataNotificationsEnabled":case"dataNotificationsDisableFailed":this.getConversationId()===e.sourceEventData.conversation_id&&this.toggleNotificationsAction(!0);break;case"dataNotificationsDisabled":case"dataNotificationsEnableFailed":this.getConversationId()===e.sourceEventData.conversation_id&&this.toggleNotificationsAction(!1)}},this.triggerAction=function(t){this.trigger(t,{conversation_id:this.getConversationId(),is_group:this.isGroupConversation(),report_screen_name:this.getReportScreenName()})},this.updateUIOnToggle=function(t,e){this.toggleNotificationsAction(e.enable_notifications)},this.after("initialize",function(){this.on("uiToggleNotifications",this.updateUIOnToggle),this.on("uiEnableDMNotifications",this.toggleNotifications.bind(this,!0)),c.default.getDecider("dm_granular_mute_controls")?this.on("uiDisableDMNotifications","uiShowDMMuteNotificationsConfirmation"):this.on("uiDisableDMNotifications",this.toggleNotifications.bind(this,!1)),this.on("click",{enableNotificationsSelector:"uiEnableDMNotifications",disableNotificationsSelector:"uiDisableDMNotifications",addParticipantsSelector:this.triggerAction.bind(this,"uiAddParticipants"),viewParticipantsSelector:this.triggerAction.bind(this,"uiViewParticipants"),editConversationNameSelector:this.triggerAction.bind(this,"uiEditConversationName"),deleteConversationSelector:this.triggerAction.bind(this,"uiShowDMDeleteConversationConfirmation"),reportConversationSelector:this.triggerAction.bind(this,"uiShowDMReportConversationConfirmation"),shareLocationSelector:this.triggerAction.bind(this,"uiShareLocation"),actionsContainerSelector:"uiCloseDropdowns"}),this.on("dataDMConversationResult dataNotificationsEnabled dataNotificationsDisabled dataNotificationsEnableFailed dataNotificationsDisableFailed",this.updateNotificationsState)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(136),c=s(r),l=(0,o.default)(n);e.default=l},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.requestAnimationFrame=window.requestAnimationFrame.bind(window),this.attributes({conversationContentSelector:".DMConversation-content",pageBackRange:500,scrollContainerSelector:".DMConversation-scrollContainer",spinnerSelector:".DMConversation-spinner"}),this.checkForConversationHistory=function(){var t=this;this.requestAnimationFrame(function(){var e=!t.$spinner.hasClass("u-hidden")&&0!==t.$scrollContainer.prop("clientHeight")&&(t.$content.prop("clientHeight")<t.$scrollContainer.prop("clientHeight")||t.$scrollContainer.prop("scrollTop")<t.attr.pageBackRange);e&&t.trigger("uiWantsConversationHistory")})},this.after("initialize",function(){this.$content=this.select("conversationContentSelector"),this.$scrollContainer=this.select("scrollContainerSelector"),this.$spinner=this.select("spinnerSelector"),this.on(this.$scrollContainer,"scroll",c.default.debounce(this.checkForConversationHistory,250)),this.on("uiDMConversationUpdated",this.checkForConversationHistory)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(126),c=s(r);e.default=(0,o.default)(n)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};e.default={get:function(t){return i[t]},set:function(t){i=t||{}},clear:function(){this.set({})}}},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({indicatorDelay:1e3}),this.state={current:0,conversationId:void 0,isVisible:!1,previousInFlight:0,total:0},this.render=function(){var t=this;this.$node.html(c.default.render({total:this.state.total,current:this.state.current})),this.state.isVisible?this.timeout=setTimeout(function(){return t.state.isVisible?t.$node.slideDown(300):t.$node.hide()},this.attr.indicatorDelay):(clearTimeout(this.timeout),this.$node.slideUp(100))},this.updateCount=function(t,e){var i=e[this.state.conversationId]||0;0===i?(this.state.total=0,this.state.current=0):0===this.state.previousInFlight?(this.state.total=i,this.state.current=1):this.state.previousInFlight<i?this.state.total=this.state.total+1:this.state.previousInFlight>i&&(this.state.current=this.state.current+1),this.state.previousInFlight=i,this.state.isVisible=i>0},this.updateConversationId=function(t,e){this.state={isVisible:!1,total:0,conversationId:e.conversation_id,current:0,previousInFlight:0},this.trigger("uiDMConversationNeedsInFlightState")},this.after("updateCount",this.render),this.after("updateConversationId",this.render),this.after("initialize",function(){this.on(document,"dataDMMessagesInFlight",this.updateCount),this.on(document,"uiRenderConversationView",this.updateConversationId)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(458),c=s(r);e.default=(0,o.default)(n)},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMSendingStateIndicator">\n  <span>Sending message '),s.b(s.v(s.f("current",t,e,0))),s.b(" of "),s.b(s.v(s.f("total",t,e,0))),s.b("</span>\n  <span>...</span>\n</div>"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({notice:".DMDeleteConversation",confirm:".DMDeleteConversation-confirm",cancel:".DMDeleteConversation-cancel",groupVariantClass:"DMDeleteConversation--group"}),this.showConfirmation=function(t,e){var i=e&&e.is_group;this.select("notice").toggleClass(this.attr.groupVariantClass,!!i).trigger("uiShowDMNotice")},this.hideConfirmation=function(){this.select("notice").trigger("uiDismissDMNotice")},this.state=function(t,e){return this._state=e||this._state||{},this._state},this.deleteConversation=function(){var t=this.state();this.trigger("uiDeleteConversation",{conversation_id:t.conversation_id}),this.hideConfirmation(),this.trigger("uiDMInboxWantsRefreshed")},this.after("initialize",function(){this.on("uiShowDMDeleteConversationConfirmation",this.state),this.on("uiShowDMDeleteConversationConfirmation",this.showConfirmation),this.on("click",{confirm:this.deleteConversation,cancel:this.hideConfirmation})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=(0,o.default)(n);e.default=r},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({notice:".DMDeleteMessage",confirm:".DMDeleteMessage-confirm",cancel:".DMDeleteMessage-cancel"}),this.showConfirmation=function(){this.select("notice").trigger("uiShowDMNotice")},this.hideConfirmation=function(){this.select("notice").trigger("uiDismissDMNotice")},this.state=function(t,e){return this._state=e||this._state||{},this._state},this.deleteMessage=function(){var t=this.state();this.trigger("uiDMDialogDeleteMessage",{id:t.messageId,conversation_id:t.conversationId}),this.hideConfirmation(),this.trigger("uiDMInboxWantsRefreshed")},this.after("initialize",function(){this.on("uiShowDMDeleteMessageConfirmation",this.state),this.on("uiShowDMDeleteMessageConfirmation",this.showConfirmation),this.on("click",{confirm:this.deleteMessage,cancel:this.hideConfirmation})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=(0,o.default)(n);e.default=r},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({feedbackDismissSelector:".DMFeedback-dismiss",feedbackSelector:".DMFeedback",feedbackPageFrameSelector:"iframe.B2CFeedback"}),this.showFeedback=function(t,e){this.$b2cFeedback.is(":visible")||this.$b2cFeedback.show();var i="/i/pages/feedback?cardUri="+encodeURIComponent(t)+"&lang="+e;this.$feedbackIframe.attr("src")!==i&&this.$feedbackIframe.attr("src",i),this.trigger("uiFeedbackPanelOpened")},this.dismissFeedback=function(){var t=this.$feedbackIframe.data("current-view");this.closeFeedback(),this.trigger("uiB2CFeedbackDismiss",{cardName:this.feedback.name,feedbackId:this.feedback.feedback_id,currentView:t})},this.closeFeedback=function(){this.$b2cFeedback.hide(),this.$feedbackIframe.attr("src",""),this.trigger("uiFeedbackPanelClosed")},this.handleFeedbackError=function(t,e){var i=e&&e.errorMessage;this.trigger(document,"uiShowError",{message:i}),this.trigger("dataDMError",{message:i})},this.handleFeedbackTweetBtnClick=function(t,e){this.closeFeedback(),this.trigger(document,"uiOpenTweetDialog",{title:"Tweet about your experience",canTweetDefaultText:!1,text:e&&e.prefilledText})},this.updateFeedbackPanel=function(e,i){var s=t("html").attr("lang")||"en";i&&i.feedback&&(this.feedback=i.feedback,this.showFeedback(this.feedback.card_uri,s))},this.handleFeedbackUpdateView=function(t,e){this.$feedbackIframe.data("current-view",e.view)},this.resizeIframe=function(t){this.fitIframeHeight(t,{iframeSelector:this.attr.feedbackPageFrameSelector,isQualified:function(t){return t.name&&"commerce_page"===t.name&&t.height}})},this.closeFeedbackPanelWithId=function(t,e){this.feedback&&e.dmId===this.feedback.dm_id&&this.closeFeedback()},this.after("initialize",function(){this.$b2cFeedback=this.select("feedbackSelector"),this.$feedbackIframe=this.select("feedbackPageFrameSelector"),this.on("uiB2CCloseFeedbackAnchor uiDMDialogClearActions",this.closeFeedback),this.on("uiB2CFeedbackPostError",this.handleFeedbackError),this.on("uiB2CTweetBtnClicked",this.handleFeedbackTweetBtnClick),this.on("uiB2CFeedbackUpdateView",this.handleFeedbackUpdateView),this.on("uiDMConversationUpdated",this.updateFeedbackPanel),this.on("uiDMMesageDeleted",this.closeFeedbackPanelWithId),this.on(window,"message",this.resizeIframe),this.on(window,"message",this.proxyIframeEvents),this.on("click",{feedbackDismissSelector:this.dismissFeedback})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(175),c=s(r),l=i(173),d=s(l),u=i(123),h=(s(u),(0,o.default)(n,c.default,d.default));e.default=h}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({deleteSelector:".DMDeleteMessageAction",reportSelector:".DMReportMessageAction"}),this.hideMessage=function(t,e){if("not_spam"!==e.report_as){this.hiddenMessages=this.hiddenMessages||{};var i=".DMConversation [data-message-id='"+e.id+"'] {display: none !important;}";this.hiddenMessages[e.id]=this.insertCSSRule(this.stylesheet,i)}},this.unhideMessage=function(t,e){this.hiddenMessages=this.hiddenMessages||{};var i=this.hiddenMessages[e.id];null!=i&&this.removeCSSRule(this.stylesheet,i)},this.messageAction=function(e,i){var s=t(i.target);this.trigger(e,{messageId:s.closest("[data-message-id]").attr("data-message-id"),conversationId:s.closest("[data-thread-id]").attr("data-thread-id"),is_group:!s.closest("[data-is-oto]").data("is-oto")})},this.after("initialize",function(){this.stylesheet=this.createStyleSheet("hidden-dms"),this.on("uiDMDialogReportDM uiDMDialogDeleteMessage",this.hideMessage),this.on("dataDMDeleteFailed dataDMReportFailed",this.unhideMessage),this.on("click",{deleteSelector:this.messageAction.bind(this,"uiShowDMDeleteMessageConfirmation"),reportSelector:this.messageAction.bind(this,"uiShowDMReportMessageConfirmation")})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(463),c=s(r),l=(0,o.default)(n,c.default);e.default=l}).call(e,i(10))},function(t,e){"use strict";function i(){this.createStyleSheet=function(t){var e=document.createElement("style");return e.type="text/css",t&&(e.id=t),document.getElementsByTagName("head")[0].appendChild(e),e.sheet||new s},this.rules=function(t){return t.cssRules?t.cssRules:t.rules},this.insertCSSRule=function(t,e){return t.insertRule(e,this.rules(t).length)},this.removeCSSRule=function(t,e){t.deleteRule(e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var s=function(){function t(){this.cssRules=[]}return t.prototype.insertRule=function(t,e){return this.cssRules[e]={cssText:t},e},t.prototype.deleteRule=function(t){delete this.cssRules[t],this.cssRules=this.cssRules.filter(function(t){return null!=t})},t}()},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({notice:".DMMuteNotifications",cancel:".DMMuteNotifications-cancel",muteConfirmation:".DMMuteNotifications-mute"}),this.showConfirmation=function(){this.select("notice").trigger("uiShowDMNotice")},this.hideConfirmation=function(){this.select("notice").trigger("uiDismissDMNotice")},this.muteNotifications=function(e){var i=t(e.target),s=i.data("mute-duration");this.trigger("uiToggleNotifications",{conversation_id:this.conversationId,enable_notifications:!1,mute_duration:s}),this.hideConfirmation()},this.updateCurrentConversation=function(t,e){this.conversationId=e.conversation_id},this.after("initialize",function(){this.on("uiShowDMMuteNotificationsConfirmation",this.showConfirmation),this.on(document,"uiRenderConversationView",this.updateCurrentConversation),this.on("click",{muteConfirmation:this.muteNotifications,cancel:this.hideConfirmation})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=(0,o.default)(n);e.default=r}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({notice:".DMReportConversation",abuseConfirmation:".DMReportConversation-abuse",spamConfirmation:".DMReportConversation-spam",cancel:".DMReportConversation-cancel",messageContainer:".DMReportConversation-message"}),this.showConfirmation=function(t,e){var i=e&&e.is_group,s=(0,c.default)("The conversation will be deleted from your inbox, and @{{screen_name}} message you until you message them first.",{screen_name:e.report_screen_name}),n="The conversation will be deleted from your inbox, and you cannot be added to this group again.",a=i?n:s;this.select("messageContainer").text(a),this.select("notice").trigger("uiShowDMNotice")},this.hideConfirmation=function(){this.select("notice").trigger("uiDismissDMNotice")},this.state=function(t,e){return this._state=e||this._state||{},this._state},this.reportConversation=function(t){var e=this.state();this.trigger("uiReportConversation",{conversation_id:e.conversation_id,report_as:t});var i="Marked as spam",s=(0,c.default)("Report sent. @{{screen_name}} can no longer message you.",{screen_name:e.report_screen_name}),n="Marked as abusive. You cannot be added to this group again.",a=e.is_group?n:s,o="spam"===t?i:a;this.hideConfirmation(),this.trigger("uiDMShowToast",{message:o}),this.trigger("uiDMInboxWantsRefreshed")},this.after("initialize",function(){this.on("uiShowDMReportConversationConfirmation",this.state),this.on("uiShowDMReportConversationConfirmation",this.showConfirmation),this.on("click",{abuseConfirmation:this.reportConversation.bind(this,"abuse"),spamConfirmation:this.reportConversation.bind(this,"spam"),cancel:this.hideConfirmation})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(123),c=s(r),l=(0,o.default)(n);e.default=l},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({notice:".DMReportMessage",abuseConfirmation:".DMReportMessage-abuse",spamConfirmation:".DMReportMessage-spam",cancel:".DMReportMessage-cancel"}),this.showConfirmation=function(){this.select("notice").trigger("uiShowDMNotice")},this.hideConfirmation=function(){this.select("notice").trigger("uiDismissDMNotice")},this.state=function(t,e){return this._state=e||this._state||{},this._state},this.reportMessage=function(t){var e=this.state();this.trigger("uiDMDialogReportDM",{id:e.messageId,conversation_id:e.conversationId,report_as:t});var i="Marked as spam",s="Report sent. The message has been deleted from your conversation view.",n="Marked as abusive. The message has been deleted from your conversation view.",a=e.is_group?n:s,o="spam"===t?i:a;this.hideConfirmation(),this.trigger("uiDMShowToast",{message:o}),this.trigger("uiDMInboxWantsRefreshed")},this.after("initialize",function(){this.on("uiShowDMReportMessageConfirmation",this.state),this.on("uiShowDMReportMessageConfirmation",this.showConfirmation),this.on("click",{abuseConfirmation:this.reportMessage.bind(this,"abuse"),spamConfirmation:this.reportMessage.bind(this,"spam"),cancel:this.hideConfirmation})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(123),c=(s(r),(0,o.default)(n));e.default=c},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({allowRetryClass:"is-retryAllowed",allowCopyClass:"is-copyAllowed",cancel:".DMResendMessage-cancel",confirm:".DMResendMessage-confirm",copy:".DMResendMessage-copy",customErrorMessage:".DMResendMessage-customErrorMessage",dismiss:".DMResendMessage .DMNotice-dismiss",hasMessageTextClass:"has-messageText",messageText:".DMResendMessage-messageText",messageTextContainer:".DMResendMessage-messageTextContainer",messageTextCopyContainer:".DMResendMessage-messageCopyContainer",notice:".DMResendMessage",copyConfirmation:".DMCopyConfirmation"}),this.resendableImageErrors=[c.default.INTERNAL_ERROR,c.default.RATE_LIMIT,c.default.TIMEOUT],this.isRetryAllowed=function(t){return"media_upload"===t.type?!t.code||this.resendableImageErrors.indexOf(t.code)!==-1:"message_send"===t.type?!t.code||"500"===String(t.code):void 0},this.showConfirmation=function(t,e){var i=e.error||{},s=i.message,n=e.text||"",a=this.isRetryAllowed(i),o=!!n,r=this.isCopySupported()&&o;this.resendId=e.resend_id,this.select("messageText").text(n),this.select("messageTextCopyContainer").val(n),this.select("customErrorMessage").html(s),this.select("notice").toggleClass(this.attr.allowRetryClass,a).toggleClass(this.attr.allowCopyClass,r).toggleClass(this.attr.hasMessageTextClass,o),this.select("notice").trigger("uiShowDMNotice")},this.hideConfirmation=function(){this.trigger("uiDMResendDiscard",{resend_id:this.resendId}),this.select("notice").trigger("uiDismissDMNotice"),this.resendId=void 0},this.resendConfirmation=function(){this.select("notice").trigger("uiDismissDMNotice"),this.trigger("uiDMResendConfirm",{resend_id:this.resendId})},this.isCopySupported=function(){var t=!0;try{t=document.queryCommandSupported("copy")}catch(e){t=!1}return t},this.copyMessageToClipboard=function(){this.isCopySupported()&&document.execCommand&&(this.select("messageTextCopyContainer").select(),document.execCommand("copy"))},this.handleCopy=function(t,e){this.copyMessageToClipboard(),this.hideConfirmation(),this.trigger("uiDMShowToast",{message:"Message text copied to clipboard"})},this.after("initialize",function(){this.on("dataDMSendFailed",this.showConfirmation),this.on("click",{confirm:this.resendConfirmation,cancel:this.hideConfirmation,dismiss:this.hideConfirmation,copy:this.handleCopy})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(468),c=s(r),l=i(123),d=(s(l),(0,o.default)(n));e.default=d},,function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({mediaNotDisplayedSelector:".Tombstone",displayMediaSelector:".js-display-this-media",mediaContainerSelector:".js-media-container, .AdaptiveMedia, .js-old-media-container",tweetSelector:".tweet",hiddenClass:"u-hidden"}),this.showMedia=function(t){t=t||this.$node,t.find(this.attr.mediaNotDisplayedSelector).slideUp(100),t.find(this.attr.mediaContainerSelector).removeClass(this.attr.hiddenClass).slideDown(100)},this.showLimitedMedia=function(e){e.stopImmediatePropagation();var i=t(e.target).closest(this.attr.tweetSelector);this.trigger("uiShowLimitedMedia"),this.showMedia(i)},this.showAllMedia=function(e,i){this.showMedia(t(e.target))},this.after("initialize",function(){this.on("click",{displayMediaSelector:this.showLimitedMedia}),this.on("uiShowAllMedia",this.showAllMedia)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({warningSelector:".suspicious-content-warning",messageSelector:".dm",conversationSelector:".js-dm-conversation",reportButtonsSelector:".suspicious-content-response",reportAsSpamSelector:".js-message-is-spam",reportAsSafeSelector:".js-message-is-safe"}),this.showMessage=function(e,i){e.preventDefault();var s=t(e.target),n=s.prev(this.attr.messageSelector);s.hide(),n.show()},this.reportMessage=function(e,i,s){var n=t(i.target),a=n.closest(this.attr.messageSelector).attr("data-message-id"),o=n.closest(this.attr.conversationSelector).attr("data-thread-id");this.trigger("uiDMDialogReportDM",{id:a,conversation_id:o,report_as:e}),this.select("reportButtonsSelector").hide(),this.trigger("uiDMInboxWantsRefreshed")},this.after("initialize",function(){this.on("uiRevealSuspiciousDM",this.showMessage),this.on("uiReportDMAsSpam",this.reportMessage.bind(this,"spam")),this.on("uiReportDMAsSafe",this.reportMessage.bind(this,"not_spam")),this.on("click",{warningSelector:"uiRevealSuspiciousDM",reportAsSpamSelector:"uiReportDMAsSpam",reportAsSafeSelector:"uiReportDMAsSafe"})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=(0,o.default)(n);e.default=r}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({sharedTweetSelector:".DirectMessage-tweet"}),this.openSharedTweet=function(t,e){this.trigger("uiDMDialogSharedTweetClick")},this.after("initialize",function(){this.on("click",{sharedTweetSelector:this.openSharedTweet})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(472),c=s(r),l=(0,o.default)(n,c.default);e.default=l},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({jsMediaPreviewSelector:".js-media-preview",jsTweetSelector:".js-stream-tweet",jsLinkSelector:".js-link",jsPermalinkSelector:".js-permalink",jsDetailsLinkSelector:".js-details",jsAdaptivePhotoSelector:".js-adaptive-photo",quoteTweetSelector:".QuoteTweet-container",quoteTweetClass:"QuoteTweet-container",quoteTweetInnerSelector:".QuoteTweet-innerContainer",pushState:!0,expandoHandleSelector:".js-open-close-tweet span",dropdownSelector:".ProfileTweet-action .dropdown-menu",withheldTweetClass:"withheld-tweet",profileTweetActionButtonSelector:".js-actionButton",profileTweetActionCountSelector:".js-actionCount",jsTweetTextContainer:".js-tweet-text-container",jsExpandedTweetTextSelector:".js-expanded-tweet-text",jsTweetText:".js-tweet-text",newWindowClass:"js-new-window"}),this.shouldNavigateToPermalink=function(t){return this.attr.isMobile||this.isQuoteTweet(t)},this.isQuoteTweet=function(t){return t.hasClass(this.attr.quoteTweetClass)},this.handleMediaPreviewClick=function(e,i){var s=t(i.el),n=s.closest(this.attr.jsTweetSelector);this.shouldExpandWhenTargetIs(t(e.target),n)&&(e.preventDefault(),e.stopPropagation(),this.handleClick(e,n,!0))},this.handleQuoteTweetClick=function(t){var e=t.closest("[data-tweet-id]").attr("data-tweet-id"),i=t.find(this.attr.quoteTweetInnerSelector).attr("data-item-id"),s=[{id:e,item_type:h.default.tweet},{id:i,item_type:h.default.quotedTweet}];this.trigger("uiQuoteTweetClick",{items:s})},this.handleTweetClick=function(e,i){var s=t(i.el);this.isQuoteTweet(s)&&this.handleQuoteTweetClick(s),this.shouldExpandWhenTargetIs(t(e.target),s)&&(e.preventDefault(),e.stopPropagation(),this.handleClick(e,s,!1))},this.handleClick=function(t,e,i){var s=e.hasClass(this.attr.quoteTweetClass),n=e.find(this.attr.jsPermalinkSelector),a=s?n.attr("href"):e.data("permalink-path"),o=s?n.data("conversation-id"):e.data("conversation-id"),r=e.closest("[data-impression-id]"),l={impressionId:r.attr("data-impression-id"),disclosureType:r.attr("data-disclosure-type"),impressionCookie:r.attr("data-impression-cookie"),href:a,conversation_id:o};!i&&this.shouldNavigateToPermalink(e)&&this.setImpressionCookieOnProfileTweet(e),e.trigger("uiHasClickedTweet",c.default.merge(l,{organicExpansion:!0})),this.modifierKey(t)||n.length&&(n.attr("target")||n.hasClass(this.attr.newWindowClass))?this.openNewTab(a):this.trigger("uiNavigate",l)},this.openNewTab=function(t){var e=window.open(t,"_blank");e.opener=null},this.setImpressionCookieOnProfileTweet=function(t){if(t.hasClass("profile-promoted-tweet")){var e=t.closest("[data-impression-cookie]").attr("data-impression-cookie");if(e){var i=new Date,s=1e4,n=new Date(i.getTime()+s);this.setCookie(e,n)}}},this.shouldExpandWhenTargetIs=function(t,e){return!this.selectedText()&&!e.hasClass(this.attr.withheldTweetClass)&&(this.targetIsWhitelistedToExpandTweet(t,e)||!this.targetIsBlacklistedToExpandTweet(t,e))},this.targetIsWhitelistedToExpandTweet=function(t,e){var i=[this.attr.expandoHandleSelector,this.attr.jsDetailsLinkSelector,this.attr.jsMediaPreviewSelector,this.attr.quoteTweetSelector];return t.closest(i.join(),e).length>0},this.targetIsBlacklistedToExpandTweet=function(t,e){var i=["a","button",this.attr.jsLinkSelector,this.attr.dropdownSelector,this.attr.jsAdaptivePhotoSelector];return t.closest(i.join(),e).length},this.selectedText=function(){return o.default.getSelection()},this.modifierKey=function(t){return t.shiftKey||t.ctrlKey||t.metaKey||t.which>1},this.preventFocusOnClick=function(t){t.preventDefault()},this.setCookie=function(t,e){(0,d.default)("ic",t,{expires:e})},this.after("initialize",function(){this.on("click",{jsMediaPreviewSelector:this.handleMediaPreviewClick,
quoteTweetSelector:this.handleTweetClick,jsTweetSelector:this.handleTweetClick}),this.on("uiShortcutEnter",{quoteTweetSelector:this.handleTweetClick}),this.on("mousedown",{profileTweetActionButtonSelector:this.preventFocusOnClick,profileTweetActionCountSelector:this.preventFocusOnClick,quoteTweetSelector:this.preventFocusOnClick})})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var a=i(225),o=s(a),r=i(126),c=s(r),l=i(154),d=s(l),u=i(144),h=s(u)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({ctaLocationQRSelector:".js-locationQR-cta",ctaWebUrlSelector:".js-webUrl-cta",ctaViewSelector:".DMCtaView",convoContentSelector:".DMConversation-content"}),this.getJsonData=function(e){return t(e.target).closest(this.attr.ctaViewSelector).data("cta-json")},this.handleWebUrlClick=function(t){},this.handleLocationQRClick=function(t){t.preventDefault();var e=this.getJsonData(t),i=this.select("convoContentSelector").data("thread-id");e&&e.id&&i&&this.trigger("uiLocationQRCtaClicked",{qr_id:e.id,conversation_id:i})},this.after("initialize",function(){this.on("click",{ctaLocationQRSelector:this.handleLocationQRClick,ctaWebUrlSelector:this.handleWebUrlClick})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=(0,o.default)(n);e.default=r}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({locationAttachmentSelector:".DMLocationAttachment",expandedMapUriData:"expanded-url",headerSelector:".DMLocationAttachment-textHeader",bylineSelector:".DMLocationAttachment-byline",headerTextData:"header-text",bylineTextData:"byline-text"}),this.getClosestExpandedMapUri=function(t){return t.closest(this.attr.locationAttachmentSelector).data(this.attr.expandedMapUriData)},this.handleClick=function(e,i){e.preventDefault();var s=t(e.target),n=s.closest(this.attr.locationAttachmentSelector),a=this.getClosestExpandedMapUri(s),o=n.find(this.attr.headerSelector).data(this.attr.headerTextData),r=n.find(this.attr.bylineSelector).data(this.attr.bylineTextData);a&&this.trigger("uiLocationAttachmentClicked",{src:a,blackLine:o,grayLine:r})},this.after("initialize",function(){this.on("click",{locationAttachmentSelector:this.handleClick})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=(0,o.default)(n);e.default=r}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({avatarSelector:".DMUpdateAvatar-avatar",popoverSelector:".DMPopover",popoverContentSelector:".DMPopover-content",viewAvatarSelector:".DMUpdateAvatar-view",removeAvatarSelector:".DMUpdateAvatar-remove",changeAvatarSelector:".DMUpdateAvatar-change",spinnerClass:"DMSpinner",fileDataSelector:"input.file-data",fileDataString:"media_data[]",emptyFileDataString:"media_data_empty",fileInputString:"media[]",emptyFileInputString:"media_empty",fileNameSelector:"input.file-name",fileNameString:"media_file_name",fileSelector:"input.file-input",gifSupport:!1,videoSupport:!1,shouldInterceptTab:!1}),this.resetAvatar=function(t,e){this.avatarHTML=void 0,this.fullSizeUrl=void 0,this.conversationId=void 0,this.customAvatar=!1,this.editAllowed=!1,this.isLoading=!1},this.updateAvatar=function(t,e){e&&e.html&&this.avatarHTML===e.html||(this.avatarHTML=e.html,this.fullSizeUrl=e.full_size_url,this.conversationId=e.conversation_id,this.customAvatar=e.is_custom,this.editAllowed=e.is_oto===!1,this.isLoading=!1)},this.showAvatar=function(){this.fullSizeUrl&&this.trigger("uiDMDialogMediaPreview",{imgUrl:this.fullSizeUrl})},this.removeAvatar=function(){this.isLoading=!0,this.trigger("uiDMRemoveConversationAvatar",{conversation_id:this.conversationId})},this.changeAvatar=function(){this.select("fileSelector").click()},this.handleFileSelected=function(t,e){t.preventDefault(),this.reset(),this.isLoading=!0;var i=e.fileId;this.beginSru(i),this.trigger("uiDMUpdateConversationAvatar",{conversation_id:this.conversationId,fileId:i})},this.updateFailed=function(){this.isLoading=!1},this.addFileError=function(t){var e=(0,c.default)(t);e&&this.trigger("uiShowError",{message:e}),this.updateFailed()},this.toggleSpinner=function(t){this.$avatar.toggleClass(this.attr.spinnerClass,t)},this.disablePopover=function(){this.select("popoverSelector").trigger("uiDisableDMPopover")},this.enablePopover=function(){this.select("popoverSelector").trigger("uiEnableDMPopover")},this.render=function(){this.isLoading?(this.$avatar.empty(),this.toggleSpinner(!0),this.disablePopover()):(this.avatarHTML?this.$avatar.html(this.avatarHTML):this.$avatar.empty(),this.toggleSpinner(!1),this.editAllowed?this.enablePopover():this.disablePopover(),this.$node.attr("data-has-custom-avatar",this.customAvatar))},this.after("resetAvatar",this.render),this.after("updateAvatar",this.render),this.after("removeAvatar",this.render),this.after("handleFileSelected",this.render),this.after("updateFailed",this.render),this.after("initialize",function(){this.$avatar=this.select("avatarSelector"),this.on("uiDMResetConversationAvatar",this.resetAvatar),this.on("uiDMSetConversationAvatar",this.updateAvatar),this.on("uiFileSelected",this.handleFileSelected),this.on("dataDMUpdateConversationAvatarFailed dataDMRemoveConversationAvatarFailed",this.updateFailed),this.on("click",{viewAvatarSelector:this.showAvatar,changeAvatarSelector:this.changeAvatar,removeAvatarSelector:this.removeAvatar,popoverContentSelector:"uiCloseDropdowns"})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(401),c=s(r),l=i(402),d=s(l);e.default=(0,o.default)(n,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({maxCharacters:20,conversationIdSelector:"[data-conversation-id]",displayedHeaderSelector:".DMUpdateName-header",displayedNameSelector:".DMUpdateName-name",beginEditModeSelector:".DMUpdateName-name.edit-allowed",confirmButtonSelector:".DMUpdateName-confirm",inputGroupSelector:".DMUpdateName-form",spinnerSelector:".DMUpdateName-spinner",dmUpdateNameSelector:".DMUpdateName",displayedScreenNameSelector:".DMUpdateName-screenName",textSelector:".DMUpdateName-input",updateNameContainerSelector:".DMUpdateName-controls",verifiedBadgeSelector:".js-verified",protectedBadgeSelector:".js-protected",isRichHeaderClass:"is-richHeader",hiddenClass:"u-hidden",legacyHiddenClass:"hidden",invalidInputClass:"is-invalid"}),this.getConversationId=function(){return this.select("conversationIdSelector").attr("data-conversation-id")},this.getCurrentName=function(){return this.select("displayedNameSelector").data("raw-name")},this.handleCommandInputs=function(t,e){switch(t.keyCode){case f.default.ESC:t.stopPropagation(),this.hideEditMode();break;case f.default.ENTER:t.stopPropagation(),this.requestUpdateConversationName()}},this.showEditMode=function(){this.select("displayedHeaderSelector").addClass(this.attr.hiddenClass),this.select("inputGroupSelector").removeClass(this.attr.hiddenClass),this.select("textSelector").focus().val(this.getCurrentName()),this.inEditMode=!0},this.hideEditMode=function(t,e){this.select("displayedHeaderSelector").removeClass(this.attr.hiddenClass),this.select("inputGroupSelector").addClass(this.attr.hiddenClass),this.inEditMode=!1},this.showSpinner=function(){this.select("textSelector").unbind("blur"),this.hideEditMode(),this.select("displayedHeaderSelector").addClass(this.attr.hiddenClass),this.select("spinnerSelector").removeClass(this.attr.hiddenClass)},this.hideSpinner=function(){this.on(this.attr.textSelector,"blur",this.hideEditMode),this.hideEditMode(),this.select("spinnerSelector").addClass(this.attr.hiddenClass),this.select("displayedHeaderSelector").removeClass(this.attr.hiddenClass)},this.requestUpdateConversationName=function(){if(!this.select("inputGroupSelector").hasClass(this.attr.invalidInputClass)){var t=this.select("textSelector").val();this.trigger("uiUpdateConversationName",{conversation_id:this.getConversationId(),name:t}),this.showSpinner()}},this.updateDisplayedName=function(t,e){this.select("displayedNameSelector").html(e.conversation.title.html),this.hideSpinner()},this.prepareUpdateNameUI=function(t,e){"undefined"==typeof e.is_oto||e.is_oto?(this.hideSpinner(),this.select("updateNameContainerSelector").addClass(this.attr.hiddenClass),this.select("displayedNameSelector").removeClass("edit-allowed js-tooltip").removeAttr("title")):this.inEditMode||(this.hideSpinner(),this.select("updateNameContainerSelector").removeClass(this.attr.hiddenClass),this.select("displayedNameSelector").attr("title","Click to edit group name").addClass("edit-allowed js-tooltip"))},this.handleInputChange=function(t,e){var i=l.default.getTweetLength(e.text)>this.attr.maxCharacters;this.select("inputGroupSelector").toggleClass(this.attr.invalidInputClass,i)},this.detectInputChange=function(){var t=this.select("textSelector").val();this.previousText!==t&&(this.trigger("uiTextChanged",{text:t}),this.previousText=t)},this.clearRichHeaderState=function(){this.$dmUpdateName.removeClass(this.attr.isRichHeaderClass),this.select("verifiedBadgeSelector").addClass(this.attr.legacyHiddenClass),this.select("protectedBadgeSelector").addClass(this.attr.legacyHiddenClass)},this.setRichHeaderState=function(t,e){this.$dmUpdateName.addClass(this.attr.isRichHeaderClass),this.select("verifiedBadgeSelector").toggleClass(this.attr.legacyHiddenClass,!e.is_verified),this.select("protectedBadgeSelector").toggleClass(this.attr.legacyHiddenClass,!e.protected),this.$displayedScreenName.text("@"+e.screen_name)},this.after("initialize",function(){this.$dmUpdateName=this.select("dmUpdateNameSelector"),this.$displayedScreenName=this.select("displayedScreenNameSelector"),this.on("click",{beginEditModeSelector:this.showEditMode}),this.on("mousedown",{confirmButtonSelector:this.requestUpdateConversationName}),this.on(this.attr.textSelector,"blur",this.hideEditMode),this.on(this.attr.textSelector,"keydown",this.handleCommandInputs),this.on("uiEditConversationName",this.showEditMode),this.on("uiUpdateConversationType",this.prepareUpdateNameUI),this.on("dataUpdateConversationNameSuccess",this.updateDisplayedName),this.on("dataUpdateConversationNameFailure",this.hideSpinner),this.on("uiTextChanged",this.handleInputChange),this.on("uiInputPoll",this.detectInputChange),this.on("uiClearRichHeaderState",this.clearRichHeaderState),this.on("uiSetRichHeaderState",this.setRichHeaderState),u.default.attachTo(this.select("textSelector"))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(123),o=(s(a),i(111)),r=s(o),c=i(230),l=s(c),d=i(226),u=s(d),h=i(354),f=s(h),m=(0,r.default)(n);e.default=m},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({markerSelector:".DMConversation-lastReadMarker",messageIdAttr:"data-message-id",receivedMessagesSelector:".DirectMessage--received",scrollContainerSelector:".DMConversation-scrollContainer"}),this.removeMarker=function(){this.select("markerSelector").slideUp({duration:350})},this.applyMarker=function(t){var e=this.findLastReadNode(t),i=e.nextAll().filter(this.attr.receivedMessagesSelector),s=i.first(),n=!!s.length;if(n){s.prev().removeClass("is-rapidFire");var a=i.length,r={unread_count:a};r["unread_count_"+o.default.PluralRules.rule_for(i.length)]=!0,s.before(c.default.render(r));var l=s.prop("offsetTop")-.33*this.$scrollContainer.height();this.$scrollContainer.scrollTop(l)}},this.findLastReadNode=function(t){return this.$node.find("["+this.attr.messageIdAttr+"="+t+"]")},this.after("initialize",function(){this.$scrollContainer=this.select("scrollContainerSelector")})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(478),o=s(a),r=i(479),c=s(r);e.default=n},,function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMConversation-lastReadMarker">\n  <div class="DMLastReadMarker">\n    <div class="DMDivider">\n      <span class="DMDivider-text">\n        \n          '),s.s(s.f("unread_count_one",t,e,1),t,e,0,181,197,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("1 unread message")}),t.pop()),s.b("\n"+i),s.b("          "),s.s(s.f("unread_count_other",t,e,1),t,e,0,252,284,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("unread_count",t,e,0))),i.b(" unread messages")}),t.pop()),s.b("\n"+i),s.b("        \n      </span>\n    </div>\n  </div>\n</div>"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.viewportHelpers=c.default,this.utils=d.default,this.defaultAttrs({playableMediaContainerSelector:".PlayableMedia",playableMediaLoadThreshold:500,scrollThrottle:100,watchedClass:"watched",watchedSelector:".watched",watchDocumentScroll:!0,liveVideoContinuePlayingBehindModals:!1,preventUnloadClass:"playable-media-no-unload"}),this.updateWatchedMedia=function(){this.$media=this.select("playableMediaContainerSelector");var t=this.$media.not(this.attr.watchedSelector);h.default.attachTo(t,{liveVideoContinuePlayingBehindModalsEnabled:this.attr.liveVideoContinuePlayingBehindModalsEnabled}),t.addClass(this.attr.watchedClass),this.throttledProcessWatchedMedia()},this.processWatchedMedia=function(){var e=this;this.isInFullscreen()||this.$media.each(function(i,s){var n=t(s);if(!n.hasClass(e.attr.preventUnloadClass)){var a=c.default.isWithinBounds(e.$container,n,e.attr.playableMediaLoadThreshold),o=n.hasClass("playable-media-loaded");!o&&a?n.trigger("uiLoadPlayableMedia"):o&&!a&&n.trigger("uiUnloadPlayableMedia")}})},this.isInFullscreen=function(){return document.webkitFullscreenElement||document.msFullscreenElement||document.fullscreenElement||document.mozFullScreenElement},this.fullscreenChange=function(){clearInterval(this.fullscreenTimeout),this.isInFullscreen()?this.stopListeningOnProcessEvents():this.fullscreenTimeout=setTimeout(this.listenOnProcessEvents.bind(this),2e3)},this.listenOnProcessEvents=function(){this.on(this.$container,"resize",this.throttledProcessWatchedMedia),this.attr.watchDocumentScroll?this.on(document,"scroll",this.throttledProcessWatchedMedia):this.on("scroll",this.throttledProcessWatchedMedia)},this.stopListeningOnProcessEvents=function(){this.off(this.$container,"resize",this.throttledProcessWatchedMedia),this.attr.watchDocumentScroll?this.off(document,"scroll",this.throttledProcessWatchedMedia):this.off("scroll",this.throttledProcessWatchedMedia)},this.beforeTeardown=function(){this.$media.removeClass(this.attr.watchedClass)},this.preventPlayerToUnload=function(e,i){t(e.target).toggleClass(this.attr.preventUnloadClass,i.preventUnload)},this.before("teardown",this.beforeTeardown),this.after("initialize",function(){this.$container=t(window),this.throttledProcessWatchedMedia=d.default.throttle(this.processWatchedMedia.bind(this),this.attr.scrollThrottle),this.on(document,"uiPageChanged uiWatchPlayableMedia",this.updateWatchedMedia),this.on(document,"uiPreventPlayerUnloading",this.preventPlayerToUnload),this.listenOnProcessEvents(),this.on(document,"fullscreenchange webkitfullscreenchange msfullscreenchange mozfullscreenchange",this.fullscreenChange),this.updateWatchedMedia()})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(177),c=s(r),l=i(126),d=s(l),u=i(481),h=s(u);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.VideoPlayer=g.default,this.defaultAttrs({playerSelector:".PlayableMedia-player",autoplayOnHover:!1,playerLoadedClass:"playable-media-loaded",liveVideoContinuePlayingBehindModalsEnabled:!1}),this.autoplay=function(){this.player?this.player.playPreview():this.autoplayOnInit=!0},this.autoplayStop=function(){this.player?this.player.pausePreview():this.autoplayOnInit=!1},this.loadMedia=function(){this.$node.addClass(this.attr.playerLoadedClass);var t=this.select("playerSelector"),e=void 0;"undefined"!=typeof this.tweetId&&(e=this.requestDynamicVideoAd.bind(this));var i={scribeContext:this.getScribeContext(),promotedContext:this.getPromotedContext(),hideControls:t.hasClass("hide-controls"),adRequestCallback:e,borderRadius:this.getBorderRadius(t),ignoreFineGrainGeoblocking:this.getIgnoreFineGrainGeoblocking(t)},s=t.get(0),n=this.getPlayerConstructor(s);this.player=n(i).on("playbackComplete",this.trigger.bind(this,"uiPlayableMediaPlaybackComplete")).on("mute",this.trigger.bind(this,"uiPlayableMediaMute")).on("unmute",this.trigger.bind(this,"uiPlayableMediaUnmute")).on("play",this.trigger.bind(this,"uiPlayableMediaPlay")).on("pause",this.trigger.bind(this,"uiPlayableMediaPause")).on("ready",this.onPlayerReady.bind(this,t)).on("noCookiesError",this.trigger.bind(this,"uiPlayableMediaNoCookiesError")).on("geoblockError",this.trigger.bind(this,"uiPlayableMediaGeoblockError"))},this.getBorderRadius=function(t){var e=parseInt(t.attr("data-border-top-left-radius")),i=parseInt(t.attr("data-border-top-right-radius")),s=parseInt(t.attr("data-border-bottom-left-radius")),n=parseInt(t.attr("data-border-bottom-right-radius"));return{topLeft:isNaN(e)?void 0:e,topRight:isNaN(i)?void 0:i,bottomLeft:isNaN(s)?void 0:s,bottomRight:isNaN(n)?void 0:n}},this.getIgnoreFineGrainGeoblocking=function(t){return t.attr("data-ignore-fine-grain-geoblocking")},this.getPlayerConstructor=function(t){return"undefined"!=typeof this.liveVideoId?this.VideoPlayer.createPlayerForLiveVideo.bind(this,t,this.liveVideoId):"undefined"!=typeof this.dmId?this.VideoPlayer.createPlayerForDm.bind(this,t,this.dmId):this.VideoPlayer.createPlayerForTweet.bind(this,t,this.tweetId)},this.getPromotedContext=function(){if(this.impressionId)return{impressionId:this.impressionId,disclosureType:this.$node.closest("[data-disclosure-type]").attr("data-disclosure-type")}},this.getScribeContext=function(){var e=void 0;return"undefined"!=typeof this.tweetId&&(e="tweet"),t.extend({client:"web"},d.default.scribeContext,{component:this.$node.closest("[data-component-context]").attr("data-component-context")||e})},this.onPlayerReady=function(t){this.playOnInit||t.hasClass("play-on-init")?(this.player.play(),this.muteOnInit&&this.player.mute()):(this.autoplayOnInit||this.$node.closest("[data-autoplaying-media=true]").length>0)&&this.player.playPreview(),this.trigger("uiPlayableMediaReady"),this.liveVideoId&&this.player.updateLayoutBreakpoint({breakpoint:this.getBreakpoint()})},this.pauseMedia=function(){this.player?this.player.pause():(this.autoplayOnInit=!1,this.playOnInit=!1)},this.playMedia=function(){this.player?this.player.play():(this.autoplayOnInit=!1,this.playOnInit=!0)},this.muteMedia=function(){this.muteOnInit=!0,this.player&&this.player.mute()},this.unmuteMedia=function(){this.muteOnInit=!1,this.player&&this.player.unmute()},this.requestDynamicVideoAd=function(){return this.getDynamicVideoAd({id:this.tweetId,promoted_id:this.impressionId})},this.removePlayer=function(){this.$node.removeClass(this.attr.playerLoadedClass),this.player&&(this.player.teardown(),this.player=void 0)},this.before("teardown",function(){this.removePlayer()}),this.teardownIfPresent=function(){0===this.$node.closest("body").length&&this.teardown()},this.updatePosition=function(t,e){!this.player||e.tweetId!==this.tweetId&&e.tweetId!==this.tweetNonce||this.player.updatePosition(e.positionData)},this.updateLayoutBreakpoint=function(t,e){this.liveVideoId&&this.player&&this.player.updateLayoutBreakpoint(e)},this.onPauseAllMedia=function(){this.liveVideoId&&this.attr.liveVideoContinuePlayingBehindModalsEnabled||this.pauseMedia()},this.exitFullScreen=function(){this.liveVideoId&&this.player.exitFullScreen()},this.after("initialize",function(){var t=this.$node.closest("[data-tweet-id]");this.tweetId=t.attr("data-tweet-id"),this.tweetNonce=t.attr("data-tweet-nonce"),this.dmId=this.$node.closest("[data-message-id]").attr("data-message-id"),this.liveVideoId=this.$node.closest("[data-live-video-id]").attr("data-live-video-id"),this.impressionId=this.$node.closest("[data-impression-id]").attr("data-impression-id"),this.attr.autoplayOnHover&&(this.on("mouseenter",this.autoplay),this.on("mouseleave",this.autoplayStop)),this.on("uiLoadPlayableMedia",this.loadMedia),this.on("uiUnloadPlayableMedia",this.removePlayer),this.on("uiUnmuteMedia",this.unmuteMedia),this.on("uiMuteMedia",this.muteMedia),this.on("uiPlayMedia",this.playMedia),this.on("uiPauseMedia",this.pauseMedia),this.on("uiAutoplayMedia",this.autoplay),this.on("uiStopAutoplayingMedia",this.autoplayStop),this.on(document,"uiPauseAllMedia",this.onPauseAllMedia),this.on(document,"uiPlayableMediaPositionChange",this.updatePosition),this.on(document,"uiWatchPlayableMedia uiOverlayClosed",this.teardownIfPresent),this.on(document,"uiLiveVideoBreakpointUpdate",this.updateLayoutBreakpoint),this.on(document,"uiLiveVideoExitFullScreen",this.exitFullScreen)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(139),c=s(r),l=i(134),d=s(l),u=i(482),h=s(u),f=i(483),m=s(f),p=i(487),g=s(p);e.default=(0,o.default)(n,c.default,h.default,m.default)}).call(e,i(10))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.matchMedia=function(t){return window.matchMedia&&window.matchMedia(t)},this.getBreakpoint=function(){var t=this.matchMedia("(min-width: 1271px)").matches;if(t)return"wide";var e=this.matchMedia("(min-height: 901px)").matches;return e?"narrow_tall":"narrow_short"}}},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){o.default.mixin(this,[c.default,d.default]),this.getDynamicVideoAd=function(t){var e=this.adCacheKey({id:t.id,promoted_id:t.promoted_id}),i=this.getDynamicVideoAdFromCache(e);return this.trigger("uiRefreshVideoAdCache",{tweet:t,triggerAd:i}),i||{}}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(121),o=s(a),r=i(484),c=s(r),l=i(485),d=s(l);e.default=n},function(t,e){"use strict";function i(){this.adCacheKey=function(t){var e="t"+t.id;return t.promoted_id&&(e+="i"+t.promoted_id),e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.getDynamicVideoAdFromCache=function(t){return o.default.get(t)},this.updateDynamicVideoAdCache=function(t){o.default.update(t)},this.clearDynamicVideoAdCache=function(){o.default.clear()}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(486),o=s(a);e.default=n},function(t,e,i){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={},s={get:function(t){return i[t]},update:function(e){t.extend(i,e)},clear:function(){i={}}};e.default=s}).call(e,i(10))},function(t,e,i){var s;!function(n,a){s=function(){return n.TwitterVideoPlayer=a()}.call(e,i,e,t),!(void 0!==s&&(t.exports=s))}(this,function(){function t(t){if(t&&t.data&&t.data.params&&t.data.params[0]){var e=t.data.params[0],i=t.data.id;if(e&&e.context&&"TwitterVideoPlayer"===e.context){var s=e.playerId;delete e.playerId,delete e.context;var n=r[s];n&&n.processMessage(t.data.method,e,i)}}}function e(t,e,i){var s=Object.keys(i).filter(function(t){return null!=i[t]}).map(function(t){var e=i[t];return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&");return s&&(s="?"+s),t+e+s}function i(i,n,a,c,l){var d=i.ownerDocument,u=d.defaultView;u.addEventListener("message",t),this.playerId=o++;var h={embed_source:"clientlib",player_id:this.playerId,rpc_init:1};if(this.scribeParams={},this.scribeParams.suppressScribing=c&&c.suppressScribing,!this.scribeParams.suppressScribing){if(!c.scribeContext)throw"video_player: Missing scribe context";if(!c.scribeContext.client)throw"video_player: Scribe context missing client property";this.scribeParams.client=c.scribeContext.client,this.scribeParams.page=c.scribeContext.page,this.scribeParams.section=c.scribeContext.section,this.scribeParams.component=c.scribeContext.component}this.scribeParams.debugScribe=c&&c.scribeContext&&c.scribeContext.debugScribing,this.scribeParams.scribeUrl=c&&c.scribeContext&&c.scribeContext.scribeUrl,this.promotedLogParams=c.promotedContext,this.adRequestCallback=c.adRequestCallback,c.languageCode&&(h.language_code=c.languageCode);var f=e(s,n,h);return this.videoIframe=document.createElement("iframe"),this.videoIframe.setAttribute("src",f),this.videoIframe.setAttribute("allowfullscreen",""),this.videoIframe.setAttribute("id",a),this.videoIframe.setAttribute("style","width: 100%; height: 100%; position: absolute; top: 0; left: 0;"),this.domElement=i,this.domElement.appendChild(this.videoIframe),r[this.playerId]=this,this.eventCallbacks={},this.emitEvent=function(t,e){var i=this.eventCallbacks[t];"undefined"!=typeof i&&i.forEach(function(t){t.apply(this.playerInterface,[e])}.bind(this))},this.jsonRpc=function(t){var e=this.videoIframe.contentWindow;t.jsonrpc="2.0",e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")},this.jsonRpcCall=function(t,e){this.jsonRpc({method:t,params:e})},this.jsonRpcResult=function(t,e){this.jsonRpc({result:t,id:e})},this.processMessage=function(t,e,i){switch(t){case"requestPlayerConfig":this.jsonRpcResult({scribeParams:this.scribeParams,promotedLogParams:this.promotedLogParams,squareCorners:c.squareCorners,borderRadius:c.borderRadius,hideControls:c.hideControls,embedded:c.addTwitterBranding,ignoreFineGrainGeoblocking:c.ignoreFineGrainGeoblocking},i);break;case"videoPlayerAdStart":this.emitEvent("adStart",e);break;case"videoPlayerAdEnd":this.emitEvent("adEnd",e);break;case"videoPlayerPlay":this.emitEvent("play",e);break;case"videoPlayerPause":this.emitEvent("pause",e);break;case"videoPlayerMute":this.emitEvent("mute",e);break;case"videoPlayerUnmute":this.emitEvent("unmute",e);break;case"videoPlayerPlaybackComplete":this.emitEvent("playbackComplete",e);break;case"videoPlayerReady":this.emitEvent("ready",e);break;case"videoView":this.emitEvent("view",e);break;case"debugLoggingEvent":this.emitEvent("logged",e);break;case"requestDynamicAd":"function"==typeof this.adRequestCallback?this.jsonRpcResult(this.adRequestCallback(),i):this.jsonRpcResult({},i);break;case"videoPlayerError":e&&"NO_COOKIES_ERROR"===e.error_category?this.emitEvent("noCookiesError",e):e&&"GEOBLOCK_ERROR"===e.error_category&&this.emitEvent("geoblockError",e)}},this.playerInterface={on:function(t,e){return"undefined"==typeof this.eventCallbacks[t]&&(this.eventCallbacks[t]=[]),this.eventCallbacks[t].push(e),this.playerInterface}.bind(this),off:function(t,e){if("undefined"==typeof e)delete this.eventCallbacks[t];else{var i=this.eventCallbacks[t];if("undefined"!=typeof i){var s=i.indexOf(e);s>-1&&i.splice(s,1)}}return this.playerInterface}.bind(this),play:function(){return this.jsonRpcCall("play"),this.playerInterface}.bind(this),pause:function(){return this.jsonRpcCall("pause"),this.playerInterface}.bind(this),mute:function(){return this.jsonRpcCall("mute"),this.playerInterface}.bind(this),unmute:function(){return this.jsonRpcCall("unmute"),this.playerInterface}.bind(this),playPreview:function(){return this.jsonRpcCall("autoPlayPreview"),this.playerInterface}.bind(this),pausePreview:function(){return this.jsonRpcCall("autoPlayPreviewStop"),this.playerInterface}.bind(this),updatePosition:function(t){return this.jsonRpcCall("updatePosition",[t]),this.playerInterface}.bind(this),updateLayoutBreakpoint:function(t){return this.jsonRpcCall("updateLayoutBreakpoint",[t]),this.playerInterface}.bind(this),enterFullScreen:function(){return this.jsonRpcCall("enterFullScreen"),this.playerInterface}.bind(this),exitFullScreen:function(){return this.jsonRpcCall("exitFullScreen"),this.playerInterface}.bind(this),teardown:function(){this.eventCallbacks={},i.removeChild(this.videoIframe),this.videoIframe=void 0,delete r[this.playerId]}.bind(this)},this.playerInterface}var s="https://twitter.com",n=/^https?:\/\/([a-zA-Z0-9]+\.)*twitter.com(:\d+)?$/,a={suppressScribing:!1,squareCorners:!1,hideControls:!1,addTwitterBranding:!1},o=0,r={};return{setBaseUrl:function(t){n.test(t)?s=t:window.console.error("newBaseUrl "+t+" not allowed")},createPlayerForTweet:function(t,e,s){var n="/i/videos/tweet/"+e,o="player_tweet_"+e;return new i(t,n,o,s||a)},createPlayerForDm:function(t,e,s){var n="/i/videos/dm/"+e,o="player_dm_"+e;return new i(t,n,o,s||a)},createPlayerForLiveVideo:function(t,e,s){var n="/i/videos/live_video/"+e,o="player_live_video_"+e;return new i(t,n,o,s||a)},findPlayerForElement:function(t){for(var e in r)if(r.hasOwnProperty(e)){var i=r[e];if(i&&i.domElement===t)return i.playerInterface}return null}}})},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.viewportHelpers=d.default,this.staticCardsTypes=m.default,this.defaultAttrs({containerSelector:"body",cardContainerSelector:".tweet",scrollThrottle:100,viewportThreshold:800,fullscreenResetHeight:100,iframeContainerSelector:".js-macaw-cards-iframe-container",unloadedCardsSelector:'.js-macaw-cards-iframe-container[data-watched!="true"]',unloadedCardsFilter:".cards-forward .js-macaw-cards-iframe-container"}),this.shouldUnloadCard=function(t){var e=this.staticCardsTypes.indexOf(t.data("card-name"))!==-1,i=e&&this.shouldNotUnloadStaticCards;return!i},this.watchUnloadedCards=function(){var t=this.$container.find(this.attr.unloadedCardsFilter).filter(function(){return 0===this.children.length});t.attr("data-watched",!0),this.watchedCards=this.watchedCards.concat(t.toArray()),this.throttledProcessWatchedCards()},this.processWatchedCards=function(){if(!this.isInFullscreen()){for(var e=void 0,i=0;i<this.watchedCards.length;)e=this.watchedCards[i],d.default.isWithinBounds(this.$viewport,t(e),this.attr.viewportThreshold)?(this.loadCard(e),this.loadedCards.push(e),this.watchedCards.splice(i,1)):i+=1;for(i=0;i<this.loadedCards.length;)if(e=this.loadedCards[i],d.default.isWithinBounds(this.$viewport,t(e),this.attr.viewportThreshold))i+=1;else{var s=t(e),n=s.find("iframe").attr("height");n&&s.css("min-height",n+"px"),this.shouldUnloadCard(s)&&(this.unloadCard(e),this.watchedCards.push(e)),this.loadedCards.splice(i,1)}}},this._getCardContainer=function(e){return t(e).closest(this.attr.cardContainerSelector)},this.loadCard=function(t){this.createCard(this._getCardContainer(t)),this.trigger("uiDynamicCardLoaded")},this.unloadCard=function(t){this.destroyCard(this._getCardContainer(t)),this.trigger("uiDynamicCardUnloaded")},this.handleUnloadCards=function(t){t.stopPropagation(),this.destroyAllCards(),this.watchedCards=[],this.loadedCards=[],this.$container.find(this.attr.iframeContainerSelector).removeAttr("data-watched")},this.resetWatchedCards=function(){this.watchedCards=[],this.$container.find(this.attr.iframeContainerSelector).removeAttr("data-watched"),this.watchUnloadedCards()},this.isInFullscreen=function(){return document.webkitFullscreenElement||document.msFullscreenElement||document.fullscreenElement||document.mozFullScreenElement},this.fullScreenChange=function(e){var i=this;this.isInFullscreen()?(this.bindingTimeout&&(clearTimeout(this.bindingTimeout),this.bindingTimeout=void 0),this.$fullscreenTweet=t(e.target).closest(this.attr.cardContainerSelector),this.off("scroll",this.throttledProcessWatchedCards),this.off(this.$viewport,"resize",this.throttledProcessWatchedCards)):(this.$fullscreenTweet&&1===this.$fullscreenTweet.length&&(window.scrollTo(0,this.$fullscreenTweet.offset().top-this.attr.fullscreenResetHeight),this.$fullscreenTweet=void 0),this.bindingTimeout=setTimeout(function(){i.on("scroll",i.throttledProcessWatchedCards),i.on(i.$viewport,"resize",i.throttledProcessWatchedCards)},1e3))},this.cleanup=function(){this.watchedCards.forEach(this.unloadCard.bind(this)),this.loadedCards.forEach(this.unloadCard.bind(this)),this.$container=null,this.off(document,"uiPageChanged"),this.off("scroll"),this.off(this.$viewport,"resize")},this.before("teardown",function(){
this.cleanup()}),this.after("initialize",function(){this.$container=this.node===window?t(this.attr.containerSelector):this.select("containerSelector"),this.$container.length||(this.$container=this.$node),this.watchedCards=[],this.loadedCards=[],this.on(document,"uiPageChanged",this.resetWatchedCards),this.on(this.$container,"uiUnloadAllCards",this.handleUnloadCards),this.throttledProcessWatchedCards=h.default.throttle(this.processWatchedCards.bind(this),this.attr.scrollThrottle),this.on("scroll",this.throttledProcessWatchedCards),this.$viewport=this.node===document?t(window):this.$node,this.on(this.$viewport,"resize",this.throttledProcessWatchedCards),this.on(document,"uiWatchUnloadedCards",this.watchUnloadedCards),this.on(document,"webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",this.fullScreenChange),this.watchUnloadedCards(),this.shouldNotUnloadStaticCards=g.default.getDecider("should_not_unload_static_cards")})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(489),c=s(r),l=i(177),d=s(l),u=i(126),h=s(u),f=i(491),m=s(f),p=i(136),g=s(p);e.default=(0,o.default)(c.default,n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){o.default.mixin(this,[h.default,g.default,b.default]),this.defaultAttrs({cardWrapperClass:".js-macaw-cards-iframe-container",tweetIdData:"tweet-id",tweetNonceIdData:"tweet-nonce",itemIdData:"item-id",dmIdData:"message-id",advertiserIdData:"advertiser-id",itemType:"tweet",fullCardIframeUrl:"data-full-card-iframe-url",srcAttr:"data-src",cardUrl:"data-card-url",publisherId:"data-publisher-id",creatorId:"data-creator-id",srcDataAttr:"src",cardUrlDataAttr:"card-url",publisherIdDataAttr:"publisher-id",creatorIdDataAttr:"creator-id",cardName:"data-card-name",card2TypeAttr:"card2-type",macawCardsUserStyles:"macaw-cards-user-styles"}),this.DEFAULT_SCRIBE_ELEMENT="platform_card",this.DEFAULT_SCRIBE_COMPONENT="tweet",this.DEFAULT_SCRIBE_ACTION="undefined",this.CARDS_REQUIRING_USER_DEFINED_STYLES=["2586390716:message_me"],this.createCard=function(e){var i=this,s=void 0,n=this._getCardWrapper(e),a=this._getUniqueIdForCard(e),o=this._getTweetId(e),r=this._getAdvertiserId(e),l=void 0,u=void 0,h=e.closest("[data-card-component]").attr("data-card-component"),f={element:this.DEFAULT_SCRIBE_ELEMENT,component:h||this.DEFAULT_SCRIBE_COMPONENT},p=c.default.merge(y.default.scribeContext,{component:f.component}),g={impressionId:e.data("impression-id"),disclosureType:e.data("disclosure-type")};if(n&&n.length&&n[0].childNodes.length<2&&(!this.channels[a]||n.context&&0===n.context.clientHeight)){l=n.data("src"),t.inArray(this._getCard2Type(e),this.CARDS_REQUIRING_USER_DEFINED_STYLES)>=0&&(l=this._addUserColorToUrl(e,l)),this._isDMCardWithoutText(e)&&(l=this._addNoTextFlagToUrl(l)),l=this._addHeightToUrl(n,l),l=this._addScribeContextToUrl(p,l),s=new m.default.Rpc({remote:l,container:n[0],props:{height:"0",style:{display:"block"}},onReady:function(){e.trigger("uiCardLoaded")}},{local:u=this.localMethods={localMethodNames:function(){return{callMethodByName:!0,cancelFollowUser:!0,emojifyText:!0,favoriteStatus:!0,followAdvertiser:!0,followUser:!0,logPromotedInfo:!0,logPromotedContentEvent:!0,openBuyNowDialog:!0,openLeadGenConfirmDialog:!0,openAuthWebView:!0,openLink:!0,openLinkNoScribe:!0,openMessageMeDialog:!0,openProfile:!0,rawPromotedLoggerInterface:!0,rawScribeInterface:!0,requestDynamicAd:!0,requestPlayerConfig:!0,resizeCard:!0,retweetStatus:!0,scribe:!0,shareStatus:!0,statusComposeTweet:!0,unblockUser:!0,unfollowAdvertiser:!0,unfollowUser:!0,videoView:!0,subscribeToEvent:!0,unsubscribeFromEvent:!0}},callMethodByName:function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return u[t].method.apply(this,e)},openBuyNowDialog:function(t){return i.trigger("MacawCardOpenBuyNowDialog",{buyNowTweetId:t.tweetId,impressionId:t.impressionId,disclosureType:i._getDisclosureType(t.earned)})},openAuthWebView:function(t){return i.trigger("uiOpenAuthWebViewDialog",{impressionId:t.impressionId,webviewUrl:t.webviewUrl,webviewTitle:t.webviewTitle,tweetId:t.tweetId})},openLeadGenConfirmDialog:function(t){t=c.default.merge(t,g,{tweetId:e.data(i.attr.tweetIdData),cardUrl:n.attr(i.attr.cardUrl),fullCardIframeUrl:n.attr(i.attr.fullCardIframeUrl),publisherId:n.attr(i.attr.publisherId),creatorId:n.attr(i.attr.creatorId)}),i.trigger(document,"uiOpenLeadGenConfirmDialog",t)},openLink:function(t){var e=g;t.hasOwnProperty("cardEvent")&&(e.cardEvent=t.cardEvent),i.trigger("uiCardUrlClick",e),i.scribeCardInteraction("open_link",i._getCardDataWithScribeContext(n,f))},openLinkNoScribe:function(t){var e=g;t.hasOwnProperty("cardEvent")&&(e.cardEvent=t.cardEvent),t.skipEventUiCardUrlClick||i.trigger("uiCardUrlClick",e)},openMessageMeDialog:function(t){return i.trigger("uiComposeNewDMWithOptions",{tweetId:t.tweetId,recipientId:t.recipientId,defaultComposerText:t.defaultComposerText,welcomeMessageId:t.welcomeMessageId,messageMeCardData:{cardName:n.attr(i.attr.cardName),cardUri:n.attr(i.attr.cardUrl),userId:d.default.user.id}})},openProfile:function(t){t=c.default.merge({userId:t.userId,userScreenName:t.userScreenName,profileClickTarget:t.profileClickTarget,scribeContext:f},i.getCardDataFromContainer(n),g),e.trigger("uiShowProfileNewWindow",t),e.trigger("uiNavigate",{href:"/"+t.userScreenName})},requestDynamicAd:function(){var t=i.getCard2Item(i._getCardDataWithScribeContext(n,f));return i.getDynamicVideoAd(t)},requestPlayerConfig:function(){return{autoPlayPreview:e.find('[data-autoplaying-media="true"]').length>0,autoPlayPreviewPreroll:d.default.getDecider("autoplayPreviewPreroll"),useVmapVariants:d.default.getDecider("useVmapVariants")}},resizeCard:function(t){s.iframe.height=parseInt(t.height,10),n.removeClass("initial-card-height")},statusComposeTweet:function(e){e=c.default.merge(e,{defaultText:e.tweetText,canTweetDefaultText:!0,disclosureType:i._getDisclosureType(e.earned)}),t(document).trigger("uiOpenTweetDialog",e)},retweetStatus:function(t){return i._triggerTweetAction(e,"uiOpenRetweetDialog",{id:t.tweetId||o,tweetId:t.tweetId||o})},favoriteStatus:function(t){return i._triggerTweetAction(e,"uiDidFavoriteTweet",{id:t.tweetId||o})},shareStatus:function(t){return i._triggerTweetAction(e,"uiNeedsShareViaEmailDialog",{id:t.tweetId||o})},followAdvertiser:function(t){r&&i._triggerTweetAction(e,"uiFollowAction",{userId:r})},unfollowAdvertiser:function(t){r&&i._triggerTweetAction(e,"uiFollowAction",{userId:r})},rawScribeInterface:function(t){return i.trigger(document,"scribe",{scribeEvent:c.default.merge(y.default.scribeContext,f,t.namespace),scribeData:t.data})},rawPromotedLoggerInterface:function(t){return i.trigger(document,"uiLogPromotedEvent",t)},scribe:function(t){var e=i.DEFAULT_SCRIBE_ELEMENT,s=i.DEFAULT_SCRIBE_ACTION,a=void 0;t.hasOwnProperty("customScribe")&&(t.customScribe.hasOwnProperty("element")&&(e=t.customScribe.element),t.customScribe.hasOwnProperty("action")&&(s=t.customScribe.action),t.customScribe.hasOwnProperty("itemData")&&(a=t.customScribe.itemData),i.scribeCardInteraction(s,i._getCardDataWithScribeContext(n,f),e,a))},logPromotedInfo:function(t){return i.trigger(document,"uiMacawCardClicked",{event:t.event,impressionId:t.impressionId,earned:t.earned,sync:t.sync})},logPromotedContentEvent:function(s){return i._triggerTweetAction(e,"uiPlayableMediaEvent",t.extend(i.interactionData(e,s),s))},followUser:function(t){t.userId&&i._triggerTweetAction(e,"uiFollowAction",{userId:t.userId})},unfollowUser:function(t){t.userId&&i._triggerTweetAction(e,"uiUnfollowAction",{userId:t.userId})},unblockUser:function(t){t.userId&&i._triggerTweetAction(e,"uiUnblockAction",{userId:t.userId})},cancelFollowUser:function(t){t.userId&&i._triggerTweetAction(e,"uiCancelFollowRequestAction",{userId:t.userId})},subscribeToEvent:function(t){t&&t.subscribeTo&&(a in i.activeSubscriptions?i.activeSubscriptions[a].push(t.subscribeTo):i.activeSubscriptions[a]=[t.subscribeTo],i._addSubscription(a,t.subscribeTo))},unsubscribeFromEvent:function(t){t&&t.unsubscribeFrom&&i._removeSubscription(a,t.unsubscribeFrom)},emojifyText:function(t){for(var e in t)t[e]=D.default.emojifyText(t[e]);s.transmitEmojifiedText(t)}},remote:{localMethodNames:{},callVideoPlayerMethod:{},transmitEmojifiedText:{},transmitEvent:{}}}),t(s.iframe).attr("allowfullscreen",""),this.channels[a]=s;var v=e.data(this.attr.dmIdData);if(v&&e.is(":visible")){var b=this.getCard2Item(this.getCardDataFromContainer(n));this.trigger("uiNewDMCardLoaded",{cardItem:b})}}return g},this.destroyCard=function(t){var e=this._getUniqueIdForCard(t);if(this.channels[e]){this.channels[e].destroy(),delete this.channels[e];var i=this.activeSubscriptions[e];delete this.activeSubscriptions[e];for(var s in i)this._subscriptionExistsFor(event)||this.off(document,s)}},this.destroyAllCards=function(){var t=this.channels;Object.keys(this.channels).forEach(function(e){return t[e].destroy()}),this.channels={}},this.handleStreamItemRemoval=function(e){var i=this,s=e.target;s&&t(s).find(".tweet").each(function(e,s){return i.destroyCard(t(s))})},this._getCardWrapper=function(t){return t.find(this.attr.cardWrapperClass)},this._getTweetId=function(t){return t.data(this.attr.tweetIdData)},this._getUniqueIdForCard=function(t){return t.data(this.attr.tweetNonceIdData)||t.data(this.attr.tweetIdData)||t.data(this.attr.dmIdData)},this._getAdvertiserId=function(t){return t.data(this.attr.advertiserIdData)},this._getUserColor=function(e){var i=t("<a/>").css("display","none").appendTo(e),s=i.css("color");return i.remove(),s},this._getCard2Type=function(t){return t.data(this.attr.card2TypeAttr)},this._addUserColorToUrl=function(t,e){var i=this._getUserColor(t);return i?S.default.addToUrl(e,{user_color:i}):e},this._addScribeContextToUrl=function(t,e){return t?S.default.addToUrl(e,{scribe_context:JSON.stringify(t)}):e},this._isDMCardWithoutText=function(t){return t.hasClass("DirectMessage")&&t.data("no-text")},this._addNoTextFlagToUrl=function(t){return S.default.addToUrl(t,{dm_no_text:!0})},this._addHeightToUrl=function(t,e){var i=t.height();return i?S.default.addToUrl(e,{card_height:i}):e},this._getCardDataWithScribeContext=function(t,e){return c.default.merge(this.getCardDataFromContainer(t),{scribeContext:e})},this._getDisclosureType=function(t){return t===!0?"earned":"_"},this._triggerTweetAction=function(t,e,i){t.trigger(e,i)},this._addSubscription=function(t,e){var i=this;this.on(document,e,function(s,n){var a=i.channels[t];a&&i.activeSubscriptions[t]&&i.activeSubscriptions[t].indexOf(e)>-1&&a.transmitEvent(e,{type:s.type,timestamp:s.timeStamp,data:s.data},n)})},this._removeSubscription=function(t,e){var i=this.activeSubscriptions[t];if(this.channels[t]&&Array.isArray(i)){var s=i.indexOf(e);s>-1&&(i.splice(s,1),i.length>0?this.activeSubscriptions[t]=i:delete this.activeSubscriptions[t],this._subscriptionExistsFor(e)||this.off(document,e))}},this._getAllSubscriptions=function(){return Object.keys(this.activeSubscriptions).map(function(t){return this.activeSubscriptions[t]},this).filter(function(t){return!!t})},this._subscriptionExistsFor=function(t){return this._getAllSubscriptions().map(function(t){return t.subscribedTo}).some(function(e){return e.subscribedTo.indexOf(t)>-1})},this.autoplayMedia=function(e){var i=this._getUniqueIdForCard(t(e.target).closest(".tweet[data-tweet-id]")),s=this.channels[i];s&&s.callVideoPlayerMethod("autoPlayPreview")},this.loadVideoCards=function(t,e){var i=this;e&&e.tweets&&e.tweets.forEach(function(t){var e=i.$node.find(".tweet[data-tweet-id="+t.tweetId+"]");e.find('[data-card-name=__entity_video][data-has-autoplayable-media="true"]:empty').length&&i.createCard(e)})},this.stopAutoplayingMedia=function(e,i){var s=this._getUniqueIdForCard(t(e.target).closest(".tweet[data-tweet-id]")),n=this.channels[s];n&&n.callVideoPlayerMethod("autoPlayPreviewStop")},this.pauseMedia=function(e){var i=this._getUniqueIdForCard(t(e.target).closest(".tweet[data-tweet-id]")),s=this.channels[i];s&&(s.callVideoPlayerMethod("pause"),s.callVideoPlayerMethod("autoPlayPreviewStop"))},this.pauseAllMedia=function(t,e){var i=this.channels;Object.keys(i).forEach(function(t){i[t].callVideoPlayerMethod("pause"),i[t].callVideoPlayerMethod("autoPlayPreviewStop")})},this.updatePosition=function(t,e){var i=e&&e.tweetId&&this.channels[e.tweetId];i&&i.callVideoPlayerMethod("updatePosition",e.positionData)},this.after("initialize",function(){this.channels={},this.activeSubscriptions={},this.before("teardown",this.destroyAllCards),this.on(document,"uiAutoplayMedia",this.autoplayMedia),this.on(document,"uiStopAutoplayingMedia",this.stopAutoplayingMedia),this.on(document,"uiPauseAllMedia",this.pauseAllMedia),this.on(document,"uiPauseMedia",this.pauseMedia),this.on(document,"uiPlayableMediaPositionChange",this.updatePosition),this.on(document,"uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems uiHasInjectedRangeTimelineItems",this.loadVideoCards),this.on(document,"uiWillRemoveStreamItem",this.handleStreamItemRemoval)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var a=i(121),o=s(a),r=i(126),c=s(r),l=i(136),d=s(l),u=i(139),h=s(u),f=i(490),m=s(f),p=i(138),g=s(p),v=i(483),b=s(v),w=i(343),S=s(w),C=i(134),y=s(C),T=i(356),D=s(T)}).call(e,i(10))},function(t,e,i){/*!
	 * xdm.js  Nicolas Gallagher  MIT License
	 * easyXDM  Copyright(c) 2009-2011, yvind Sean Kinsey, oyvind@kinsey.no  MIT License
	 */
!function(e){"use strict";function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function s(t){return"undefined"==typeof t}function n(t){if(!t)throw new Error("url is undefined or empty");if(/^file/.test(t))throw new Error("The file:// protocol is not supported");var e=t.toLowerCase().match(S);if(e){var i=e[2],s=e[3],n=e[4]||"";return("http:"===i&&":80"===n||"https:"===i&&":443"===n)&&(n=""),i+"//"+s+n}return t}function a(t){if(!t)throw new Error("url is undefined or empty");if(t=t.replace(y,"$1/"),!t.match(/^(http||https):\/\//)){var e="/"===t.substring(0,1)?"":location.pathname;"/"!==e.substring(e.length-1)&&(e=e.substring(0,e.lastIndexOf("/")+1)),t=location.protocol+"//"+location.host+e+t}for(;C.test(t);)t=t.replace(C,"");return t}function o(t,e,i){var s;for(var n in e)e.hasOwnProperty(n)&&(n in t?(s=e[n],"object"==typeof s?o(t[n],s,i):i||(t[n]=e[n])):t[n]=e[n]);return t}function r(t,e){"string"==typeof t&&(t=[t]);for(var i,s=t.length;s--;)if(i=t[s],i=new RegExp("^"===i.substr(0,1)?i:"^"+i.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),i.test(e))return!0;return!1}function c(t,e){if(!e)throw new Error("parameters is undefined or null");var i=t.indexOf("#"),s=[];for(var n in e)e.hasOwnProperty(n)&&s.push(n+"="+encodeURIComponent(e[n]));return t+(i===-1?"#":"&")+s.join("&")}function l(t){var e=v.cloneNode(!1);if(o(t.props,{frameBorder:0,allowTransparency:!0,scrolling:"no",width:"100%",src:c(t.remote,{xdm_e:n(location.href),xdm_c:t.channel,xdm_p:1}),name:g+t.channel+"_provider",style:{margin:0,padding:0,border:0}}),e.id=t.props.name,delete t.props.name,!t.container)throw new Error('xdm.Rpc() configuration object missing a DOM "container" property');return o(e,t.props),t.container.appendChild(e),t.onLoad&&T(e,"load",t.onLoad),t.html&&(e.contentWindow.document.open(),e.contentWindow.document.write(t.html),e.contentWindow.document.close()),t.iframe=e,e}function d(t){var e;if(t.isHost=t.isHost||s(M.xdm_p),t.props=t.props||{},t.isHost)t.remote=a(t.remote),t.channel=t.channel||"default"+b++;else if(t.channel=M.xdm_c.replace(/["'<>\\]/g,""),t.remote=M.xdm_e.replace(/["'<>\\]/g,""),t.acl&&!r(t.acl,t.remote))throw new Error("Access denied for "+t.remote);return e=[new m.stack.PostMessageTransport(t)],e.push(new m.stack.QueueBehavior((!0))),e}function u(t){var e,i,s=t.length,n={incoming:function(t,e){this.up.incoming(t,e)},outgoing:function(t,e){this.down.outgoing(t,e)},callback:function(t){this.up.callback(t)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(i=0;i<s;i++)e=t[i],o(e,n,!0),0!==i&&(e.down=t[i-1]),i!==s-1&&(e.up=t[i+1]);return e}function h(t){t.up.down=t.down,t.down.up=t.up,t.up=t.down=null}if(e.postMessage){var f="",m={},p=e.xdm,g="xdm_",v=document.createElement("IFRAME"),b=Math.floor(1e4*Math.random()),w=Function.prototype,S=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,C=/[\-\w]+\/\.\.\//,y=/([^:])\/\//g,T=function(){return e.addEventListener?function(t,e,i){t.addEventListener(e,i,!1)}:function(t,e,i){t.attachEvent("on"+e,i)}}(),D=function(){return e.removeEventListener?function(t,e,i){t.removeEventListener(e,i,!1)}:function(t,e,i){t.detachEvent("on"+e,i)}}(),M=function(t){t=t.substring(1,t.length).split("&");for(var e,i={},s=t.length;s--;)e=t[s].split("="),i[e[0]]=decodeURIComponent(e[1]);return i}(location.hash);m.version="1.0.1",m.stack={},m.query=M,m.checkAcl=r,m.noConflict=function(t){return e.xdm=p,f=t,f&&(g="xdm_"+f.replace(".","_")+"_"),m},m.Rpc=function(t,e){var i;if(e.local)for(var s in e.local)e.local.hasOwnProperty(s)&&(i=e.local[s],i instanceof Function&&(e.local[s]={method:i}));var a=u(d(t).concat([new m.stack.RpcBehavior(this,e),{callback:function(e){t.onReady&&t.onReady(e)}}]));this.origin=n(t.remote),this.destroy=function(){a.destroy()},a.init(),this.iframe=t.iframe},m.stack.PostMessageTransport=function(t){function i(e){var i=n(e.origin),s="string"==typeof e.data;i===c&&s&&e.data.substring(0,t.channel.length+1)===t.channel+" "&&a.up.incoming(e.data.substring(t.channel.length+1),i)}function s(n){n.data===t.channel+"-ready"&&(r="postMessage"in o.contentWindow?o.contentWindow:o.contentWindow.document,D(e,"message",s),T(e,"message",i),setTimeout(function(){a.up.callback(!0)},0))}var a,o,r,c;return a={outgoing:function(e,i,s){r.postMessage(t.channel+" "+e,i||c),s&&s()},destroy:function(){D(e,"message",s),D(e,"message",i),o&&(r=null,o.parentNode.removeChild(o),o=null)},init:function(){c=n(t.remote),t.isHost?(T(e,"message",s),o=l(t)):(T(e,"message",i),r="postMessage"in e.parent?e.parent:e.parent.document,r.postMessage(t.channel+"-ready",c),setTimeout(function(){a.up.callback(!0)},0))}}},m.stack.QueueBehavior=function(t){function e(){var o;return t===!0&&0===n.length?void h(i):void(a||0===n.length||s||(a=!0,o=n.shift(),i.down.outgoing(o.data,o.origin,function(t){a=!1,o.callback&&setTimeout(function(){o.callback(t)},0),e()})))}var i,s,n=[],a=!0;return i={init:function(){i.down.init()},callback:function(t){a=!1;var s=i.up;e(),s.callback(t)},incoming:function(t,e){i.up.incoming(t,e)},outgoing:function(t,i,s){n.push({data:t,origin:i,callback:s}),e()},destroy:function(){s=!0,i.down.destroy()}}},m.stack.RpcBehavior=function(t,e){function n(t){t.jsonrpc="2.0",r.down.outgoing(JSON.stringify(t))}function a(t,e){var i=Array.prototype.slice;return function(){var s,a=arguments.length,o={method:e};a>0&&arguments[a-1]instanceof Function?(a>1&&arguments[a-2]instanceof Function?(s={success:arguments[a-2],error:arguments[a-1]},o.params=i.call(arguments,0,a-2)):(s={success:arguments[a-1]},o.params=i.call(arguments,0,a-1)),l[""+ ++c]=s,o.id=c):o.params=i.call(arguments,0),t.namedParams&&1===o.params.length&&(o.params=o.params[0]),n(o)}}function o(t,e,a,o){if(!a)return void(e&&n({id:e,error:{code:-32601,message:"Procedure not found."}}));var r,c;e?(r=function(t){r=w,n({id:e,result:t})},c=function(t,i){c=w;var s={id:e,error:{code:-32099,message:t}};i&&(s.error.data=i),n(s)}):r=c=w,i(o)||(o=[o]);try{var l=a.method.apply(a.scope,o.concat([r,c]));s(l)||r(l)}catch(d){c(d.message)}}var r,c=0,l={};return r={incoming:function(t,i){var s,a=JSON.parse(t);a.method?e.handle?e.handle(a,n):o(a.method,a.id,e.local[a.method],a.params):(s=l[a.id],a.error&&s.error?s.error(a.error):s.success&&s.success(a.result),delete l[a.id])},init:function(){if(e.remote)for(var i in e.remote)e.remote.hasOwnProperty(i)&&(t[i]=a(e.remote[i],i));r.down.init()},destroy:function(){for(var i in e.remote)e.remote.hasOwnProperty(i)&&t.hasOwnProperty(i)&&delete t[i];r.down.destroy()}}},t.exports=m}}(window)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=["2586390716:authenticated_web_view","2586390716:buy_now","3260518932:moment","3691233323:periscope_broadcast","app","direct_store_link_app","poll2choice_image","poll3choice_image","poll4choice_image","poll2choice_text_only","poll3choice_text_only","poll4choice_text_only","promo_website","summary","summary_large_image"];e.default=i},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({quickReplySelector:".DMQuickReply",optionSelector:".DMQuickReply-optionItem",unSelectedOptionSelector:".DMQuickReply:not(.is-selected) .DMQuickReply-optionItem",optionTextSelector:".DMQuickReply-optionText",selectedClass:"is-selected"}),this.handleClick=function(e){var i=t(e.target),s=i.closest(this.attr.quickReplySelector),n=i.closest(this.attr.optionSelector),a=i.closest(this.attr.optionTextSelector),o=n.data();s.addClass(this.attr.selectedClass),a.addClass(this.attr.selectedClass),this.trigger("uiQROptionClicked",o)},this.handleShowQRPanel=function(t,e){var i=c.default.render(e);this.$node.html(i)},this.handleEmptyQRPanel=function(){this.$node.empty()},this.after("initialize",function(){this.on(document,"uiShowQuickReplyOptionPanel",this.handleShowQRPanel),this.on(document,"uiQuickReplyRemoved",this.handleEmptyQRPanel),this.on("click",{unSelectedOptionSelector:this.handleClick})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(493),c=s(r),l=(0,o.default)(n);e.default=l}).call(e,i(10))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMQuickReply" data-quick-reply-id="'),s.b(s.v(s.f("id",t,e,0))),s.b('">\n  <div class="DMQuickReply-options">\n'),s.s(s.f("options",t,e,1),t,e,0,109,709,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('      <div class="DMQuickReply-optionItem" data-option-id="'),i.b(i.v(i.f("id",t,e,0))),i.b('" data-option-text="'),i.b(i.v(i.f("label",t,e,0))),i.b('">\n        <a\n          class="DMQuickReply-optionText list-link js-nav '),i.s(i.d("description.length",t,e,1),t,e,0,299,311,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("is-multiline")}),t.pop()),i.b('"\n          title="'),i.b(i.v(i.f("label",t,e,0))),i.s(i.f("description",t,e,1),t,e,0,378,386,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(" - "),i.b(i.v(i.d(".",t,e,0)))}),t.pop()),i.b('"\n        >\n          <div class="DMQuickReply-labelText">'),i.b(i.v(i.f("label",t,e,0))),i.b('</div>\n          <div class="DMQuickReply-optionDescriptionContainer">\n'),i.s(i.f("description",t,e,1),t,e,0,566,645,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <div class="DMQuickReply-optionDescription">'),i.b(i.v(i.d(".",t,e,0))),i.b("</div>\n")}),t.pop()),i.b("          </div>\n        </a>\n      </div>\n")}),t.pop()),s.b("  </div>\n</div>\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({checkSelector:".DMReadReceipt-check",statusSelector:".DMReadReceipt-statusView",readRecieptSelector:".DMReadReceipt",seenClass:"is-seen",seenAnimatedClass:"is-seenAnimated",receiptExpandedClass:"is-expanded",userListContainerSelector:".DMReadReceiptUserList",userListExpandedSelector:".DMReadReceiptUserList-expanded",userListTruncatedSelector:".DMReadReceiptUserList-truncated",userListExpandSeenSelector:".DMReadReceiptUserList-expandSeen",seenByAllClass:"is-seenByAll",userListExpandedClass:"is-expanded",conversationContentSelector:".DMConversation-content",sentMessageSelector:".DirectMessage--sent:not(.is-rapidFire)"}),this.resetState=function(t){this.conversationId=t.conversation_id,this.isOtoConversation=t.is_oto,this.participants=t.participants&&t.participants.filter(function(t){return t.id_str!==h.default.user.id})},this.localizeUserList=function(t,e){var i=e?t.slice(0,10):t,s=t.length-i.length;if(s>0){var n={user_count:s};n["user_count_"+c.default.PluralRules.rule_for(s)]=!0;var a=p.default.render(n);i.push(a)}var o=new c.default.ListFormatter;return o.format(i)},this.getSeenByData=function(t,e){var i=t.filter(function(t){var i=t.join_conversation_event_id;return!i||1!==o.default.compare(i,e)}),s=i.filter(function(t){return t.last_read_event_id&&1!==o.default.compare(e,t.last_read_event_id)});return{seenByAll:s.length===i.length,seenByUsers:s}},this.setMessageToSeenState=function(t){var e=this.isOtoConversation?"Seen":"Seen by everyone";t.find(this.attr.statusSelector).text(e),t.find(this.attr.checkSelector).addClass(this.attr.seenClass),t.find(this.attr.userListContainerSelector).addClass(this.attr.seenByAllClass)},this.setMessageToCollapsedState=function(t){t.data("has-expanded-read-receipt",!1),t.find(this.attr.readRecieptSelector).removeClass(this.attr.receiptExpandedClass),t.find(this.attr.userListContainerSelector).addClass("u-hidden")},this.setMessageToExpandedState=function(e){var i=this;this.select("sentMessageSelector").each(function(s,n){var a=t(n),o=a.data("message-id")===e.data("message-id"),r=i.isMessageExpanded(a);!o&&r&&i.setMessageToCollapsedState(a)}),e.data("has-expanded-read-receipt",!0),e.find(this.attr.readRecieptSelector).addClass(this.attr.receiptExpandedClass),e.find(this.attr.userListContainerSelector).removeClass("u-hidden")},this.populateDetails=function(t,e){var i=e.seenByUsers;if(e.seenByAll)this.setMessageToSeenState(t);else if(!this.isOtoConversation&&i.length>0){var s={user_count:i.length};s["user_count_"+c.default.PluralRules.rule_for(i.length)]=!0;var n=v.default.render(s);t.find(this.attr.statusSelector).text(n);var a=i.map(function(t){return t.name}),o=this.localizeUserList(a,!0),r=this.localizeUserList(a,!1);t.find(this.attr.userListTruncatedSelector).html(o,!0),t.find(this.attr.userListExpandedSelector).html(r,!1)}},this.handleConversationUpdate=function(e,i){var s=this;if(this.resetState(i),this.participants){var n=this.$content.find(this.attr.sentMessageSelector);n.each(function(e,i){var n=t(i),a=n.data("message-id"),o=s.getSeenByData(s.participants,a);if(o.seenByAll){var r=n.find(s.attr.checkSelector),c=n.data("is-read-receipt-set"),l=c?s.attr.seenAnimatedClass:s.attr.seenClass;r.addClass(l)}s.isMessageExpanded(n)&&s.populateDetails(n,o),n.data("is-read-receipt-set",!0)})}},this.isMessageExpanded=function(t){return t.data("has-expanded-read-receipt")===!0},this.expandReadReceipt=function(t){if(this.participants){var e=t.data("message-id"),i=this.getSeenByData(this.participants,e);this.populateDetails(t,i),this.setMessageToExpandedState(t)}},this.handleReadReceiptClick=function(e,i){var s=t(e.target).closest(this.attr.sentMessageSelector);this.isMessageExpanded(s)?this.setMessageToCollapsedState(s):this.expandReadReceipt(s)},this.expandSeenList=function(e,i){var s=t(e.target).closest(this.attr.sentMessageSelector);s.find(this.attr.userListContainerSelector).addClass(this.attr.userListExpandedClass)},this.after("initialize",function(){this.$content=this.select("conversationContentSelector"),this.on("uiDMConversationUpdated",this.handleConversationUpdate),this.on("click",{readRecieptSelector:this.handleReadReceiptClick,userListExpandSeenSelector:this.expandSeenList})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(352),o=s(a),r=i(478),c=s(r),l=i(111),d=s(l),u=i(136),h=s(u),f=i(123),m=(s(f),i(495)),p=s(m),g=i(496),v=s(g);e.default=(0,d.default)(n)}).call(e,i(10))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<a href="#" class="DMReadReceiptUserList-expandSeen">\n  \n    '),s.s(s.f("user_count_one",t,e,1),t,e,0,80,100,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("user_count",t,e,0))),i.b(" other")}),t.pop()),s.b("\n"+i),s.b("    "),s.s(s.f("user_count_other",t,e,1),t,e,0,145,166,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("user_count",t,e,0))),i.b(" others")}),t.pop()),s.b("\n"+i),s.b("  \n</a>"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.s(s.f("user_count_one",t,e,1),t,e,0,22,51,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("Seen by "),i.b(i.v(i.f("user_count",t,e,0))),i.b(" person")}),t.pop()),s.b("\n"+i),s.b("  "),s.s(s.f("user_count_other",t,e,1),t,e,0,94,123,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("Seen by "),i.b(i.v(i.f("user_count",t,e,0))),i.b(" people")}),t.pop()),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({acceptSelector:".DMTrustRequest-confirm",deleteSelector:".DMTrustRequest-cancel",reportSelector:".DMTrustRequest-report",trustContainerSelector:".DMConversation-trustRequest",untrustedMediaSelector:".Sensitive--untrusted"}),this.shouldUpdate=function(t,e){return this.conversationId!==e.conversation_id||this.isTrusted!==e.is_trusted||this.isReadonly!==e.is_readonly},this.storeConvoData=function(t){this.conversationId=t.conversation_id,this.isTrusted=t.is_trusted,this.isOto=t.is_oto,this.isReadonly=t.is_readonly},this.handleConversationUpdate=function(t,e){this.storeConvoData(e);var i=this.isTrusted===!1&&!this.isReadonly;if(i){var s=e.conversation.title.raw,n=u.default.render({conversation_title:s,is_oto:e.is_oto});this.select("trustContainerSelector").html(n)}this.select("trustContainerSelector").toggleClass("u-hidden",!i);var a=i?"uiDMHideComposeSection":"uiDMShowComposeSection";this.trigger(a)},this.handleAccept=function(t,e){this.select("trustContainerSelector").addClass("u-hidden"),this.select("untrustedMediaSelector").trigger("uiShowAllMedia"),this.trigger("uiDMShowComposeSection"),this.trigger("uiDMTrustRequestAccept",{conversation_id:this.conversationId})},this.handleDelete=function(t,e){this.trigger("uiOpenConfirmDialog",{titleText:"Are you sure?",bodyText:"This conversation history will be deleted from your inbox",cancelText:"Cancel",submitText:this.is_oto?"Delete":"Leave",modalSize:"small",action:"DMTrustRequestDelete"})},this.handleReport=function(t,e){t.preventDefault(),this.trigger("uiShowDMReportConversationConfirmation",{conversation_id:this.conversationId})},this.confirmDelete=function(t,e){this.trigger("uiDeleteConversation",{conversation_id:this.conversationId})},this.after("initialize",function(){this.on("uiDMUpdateTrustRequest uiOpenConversationView uiOpenNewConversationView",(0,c.default)(this.handleConversationUpdate,this.shouldUpdate,this)),this.on("click",{acceptSelector:this.handleAccept,deleteSelector:this.handleDelete,reportSelector:this.handleReport}),this.on(document,"uiDMTrustRequestDeleteConfirm",this.confirmDelete)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(353),c=s(r),l=i(123),d=(s(l),i(498)),u=s(d);e.default=(0,o.default)(n)},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMTrustRequest">\n  <div class="DMTrustRequest-message">\n'),s.s(s.f("is_oto",t,e,1),t,e,0,83,289,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("      Do you want to allow "),i.b(i.v(i.f("conversation_title",t,e,0))),i.b(" to message you? They won't know you've seen their request until you choose to accept. <button class=\"DMTrustRequest-report\">Flag conversation</button>\n")}),t.pop()),s.b("\n"+i),s.s(s.f("is_oto",t,e,1),t,e,1,0,0,"")||s.b("      Do you want to participate in this group? They won't know you've seen the request until you choose to accept. <button class=\"DMTrustRequest-report\">Flag conversation</button>\n"),s.b('  </div>\n  <div class="DMTrustRequest-actions">\n    <button class="DMTrustRequest-cancel btn">Delete</button>\n    <button class="DMTrustRequest-confirm btn primary-btn">Accept</button>\n  </div>\n</div>'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({dialogContentSelector:".DMViewParticipants-content",doneButtonSelector:".DMViewParticipants-done",spinnerSelector:".DMViewParticipants-spinner"}),this.prepareViewParticipants=function(){this.select("dialogContentSelector").hide(),this.select("spinnerSelector").show()},this.updateViewParticipants=function(t,e){t&&t.preventDefault(),this.select("dialogContentSelector").html(e.html).show(),this.select("spinnerSelector").hide(),this.trigger("uiDMDialogOpenedViewParticipants")},this.after("initialize",function(){this.on("uiViewParticipants",this.prepareViewParticipants),this.on("dataConversationParticipantsResult",this.updateViewParticipants),this.on("click",{doneButtonSelector:"uiDMViewParticipantsDone"})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a);e.default=(0,o.default)(n)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({avatarSelector:".DMTypingIndicator-avatar",avatarsContainerSelector:".DMTypingIndicator-avatarsContainer",containerSelector:".DMConversation-typingIndicator",messageBubbleSelector:".TypingIndicatorMessageBubble",overflowAvatarSelector:".DMTypingIndicator-avatar.is-overflowAvatar",overflowAvatarClass:"is-overflowAvatar",overflowCountSelector:".DMTypingIndicator-overflowCount",typingIndicatorSelector:".DMTypingIndicator",showHideDuration:300,avatarDisplayDuration:4e3,maxNumAvatars:5}),this.reset=function(t,e){this.$container.addClass("u-hidden").css({height:""}),this.$avatarsContainerSelector.empty(),this.$messageBubble.addClass("is-hidden"),this.activeAvatarList().forEach(function(t){return clearTimeout(t.timer)}),this.activeAvatars={}},this.show=function(){this.$container.stop().clearQueue().css({height:""}).removeClass("u-hidden"),this.$messageBubble.removeClass("is-hidden"),this.trigger("uiDMTypingIndicatorShown")},this.hideAnimation=function(){return this.$messageBubble.addClass("is-hidden"),this.$container.delay(250).animate({height:0},this.attr.showHideDuration).promise()},this.hide=function(e){var i=this,s=e?this.hideAnimation():t.Deferred().resolve().promise();s.then(function(){i.activeAvatarList().length?i.show():(i.$avatarsContainerSelector.empty(),i.$container.addClass("u-hidden"))})},this.updateOverflow=function(){var e=this.activeAvatarList().length,i=t(m.default.render({count:e-this.attr.maxNumAvatars+1}));this.$avatarsContainerSelector.find(this.attr.overflowCountSelector).remove();var s=e-this.attr.maxNumAvatars>0;s&&this.$avatarsContainerSelector.append(i);var n=this.select("avatarSelector").not(".is-hidden").not(this.attr.overflowAvatarSelector);n.css("visibility","");var a=this.attr.maxNumAvatars-n.length;if(a>0){var o=this.select("overflowAvatarSelector").slice(0,a);o.removeClass(this.attr.overflowAvatarClass),s&&o.last().css("visibility","hidden")}},this.addAvatar=function(e){var i=this.profileImageData[e].image_url,s=this.profileImageData[e].name;if(i){var n=t(h.default.render({alt:s,image_count:1,images:[{src:i}],overflow:this.activeAvatarList().length>=this.attr.maxNumAvatars})),a=!this.activeAvatarList().length;a&&this.$avatarsContainerSelector.empty(),this.$avatarsContainerSelector.append(n),this.activeAvatars[e]={timer:this.setRemoveTimeout(e),node:n},this.updateOverflow(),this.$container.hasClass("u-hidden")&&this.show()}},this.setRemoveTimeout=function(t){return setTimeout(this.removeAvatar.bind(this,t,!0),this.attr.avatarDisplayDuration)},this.refreshTimer=function(t){var e=this.activeAvatars[t];e&&(clearTimeout(e.timer),e.timer=this.setRemoveTimeout(t))},this.isEventForCurrentConvo=function(t,e){return this.conversationId&&this.conversationId===e.conversation_id},this.removeAvatar=function(t,e){var i=this.activeAvatars[t];if(i){clearTimeout(i.timer);var s=1===this.activeAvatarList().length;!s&&i.node.addClass("is-hidden"),delete this.activeAvatars[t],this.updateOverflow(),s&&this.hide(e)}},this.activeAvatarList=function(){return Object.keys(this.activeAvatars)},this.handleUserUpdate=function(t,e){var i=this;if(!e.should_request_inbox&&!e.is_empty){var s=(e.conversations||[]).filter(function(t){return t.conversation_id===i.conversationId})[0];s&&!s.is_empty&&(this.avatarsToClear.forEach(function(t){return i.removeAvatar(t,!1)}),this.avatarsToClear=[])}},this.handleConversationUpdate=function(t,e){e.conversation_id!==this.conversationId&&(this.reset(),this.conversationId=e.conversation_id);var i=e.participants||[];this.profileImageData=i.reduce(function(t,e){return t[e.id]={image_url:e.profile_image_url,name:e.name},t},{})},this.handleUpdateEvent=function(t,e){e.user_id&&this.avatarsToClear.push(e.user_id)},this.handleTypingEvent=function(t,e){var i=e.user_id;if(c.default.user.id!==i){var s=this.activeAvatars[i];s?this.refreshTimer(i):this.addAvatar(i)}},this.after("addAvatar",function(){this.trigger("uiDMTypingIndicatorAvatarAdded",{num_avatars:this.activeAvatarList().length})}),this.after("refreshTimer",function(){this.trigger("uiDMTypingIndicatorAvatarRefreshed",{num_avatars:this.activeAvatarList().length})}),this.after("initialize",function(){this.activeAvatars={},this.profileImageData={},this.avatarsToClear=[],this.$container=this.select("containerSelector"),this.$avatarsContainerSelector=this.select("avatarsContainerSelector"),this.$messageBubble=this.select("messageBubbleSelector"),this.on(document,"dataDMUserUpdates",this.handleUserUpdate),this.on(document,"uiDMConversationUpdated",this.handleConversationUpdate),this.on(document,"dataDMTyping",(0,d.default)(this.handleTypingEvent,this.isEventForCurrentConvo)),this.on(document,"dataDMUpdate",(0,d.default)(this.handleUpdateEvent,this.isEventForCurrentConvo))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(136),c=s(r),l=i(353),d=s(l),u=i(501),h=s(u),f=i(502),m=s(f);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"dm/dm_avatar":i(369)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMTypingIndicator-avatar'),s.s(s.f("overflow",t,e,1),t,e,0,49,67,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(" is-overflowAvatar")}),t.pop()),s.b('">\n'),s.b(s.rp("<dm/dm_avatar0",t,e,"  ")),s.b("</div>"),s.fl()},partials:{"<dm/dm_avatar0":{name:"dm/dm_avatar",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMTypingIndicator-overflowCount">\n  <span>+'),s.b(s.v(s.f("count",t,e,0))),s.b("</span>\n</div>"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.conversation=function(t,e){e=e||{},this.get({url:"/messages/with/conversation",data:{id:e.conversation_id,max_entry_id:e.max_entry_id},eventData:e,success:u(t.target,"dataDMConversationResult"),error:h(u(t.target,"dataDMInvalidConversation",e),u(t.target,"dataDMError"))})},this.after("initialize",function(){this.on("uiNeedsDMConversation",this.conversation)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(347),c=s(r),l=i(240),d=s(l),u=c.default.triggerFn,h=c.default.chain;e.default=(0,o.default)(n,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.addWelcomeMessage=function(t,e){if(e=e||{},!e.has_tweet_attachment&&e.is_oto!==!1){var i={};"undefined"!=typeof e.welcome_message_id&&(i.welcome_message_id=e.welcome_message_id),this.post({url:"/messages/add_welcome_message_to_conversation/"+e.conversation_id,data:i,eventData:e,success:u(t.target,"dataDMConversationResult")})}},this.after("initialize",function(){this.on("uiRenderConversationView",this.addWelcomeMessage)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(347),c=s(r),l=i(240),d=s(l),u=c.default.triggerFn;e.default=(0,o.default)(n,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.deleteConversation=function(t,e){e=e||{};var i=m(f(t.target,"dataConversationDeleted",{conversation_id:e.conversation_id}),f(t.target,"dataDMUserUpdates")),s=m(f(t.target,"dataConversationDeleteFailed",{conversation_id:e.conversation_id}),f(t.target,"dataDMError"));this.destroy({url:"/messages/with/conversation",data:{id:e.conversation_id,cursor:this.dmCursor},eventData:e,success:i,error:s})},this.after("initialize",function(){this.on("uiDeleteConversation",this.deleteConversation)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=i(506),d=s(l),u=i(347),h=s(u),f=h.default.triggerFn,m=h.default.chain,p=(0,o.default)(n,c.default,d.default);e.default=p},function(t,e){"use strict";function i(){this.storeDmCursor=function(t,e){e&&e.cursor&&(this.dmCursor=e.cursor,this.trigger("dataDMCursorUpdated",{cursor:this.dmCursor}))},this.storeDmCursorFromUpdates=function(t,e){e&&e.inbox_updates&&e.inbox_updates.cursor&&(this.dmCursor=e.inbox_updates.cursor,this.trigger("dataDMCursorUpdated",{cursor:this.dmCursor}))},this.after("initialize",function(){this.on(document,"dataDMCursor",this.storeDmCursor),this.on(document,"dataDMUserUpdates",this.storeDmCursorFromUpdates)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.deleteMessage=function(t,e){e=e||{},this.post({url:"/i/direct_messages/destroy",eventData:e,data:{id:e.id,conversation_id:e.conversation_id,cursor:this.dmCursor},success:f(t.target,["dataDMDeleteSuccess","dataDMUserUpdates"]),error:m(f(t.target,"dataDMDeleteFailed",e),f(t.target,"dataDMError"))})},this.after("initialize",function(){this.on("uiDMDialogDeleteMessage",this.deleteMessage)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(347),c=s(r),l=i(240),d=s(l),u=i(506),h=s(u),f=c.default.triggerFn,m=c.default.chain;e.default=(0,o.default)(n,d.default,h.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({darkTraffic:!1}),this.processDMTypingEvent=function(t){!this.attr.darkTraffic&&this.trigger("dataDMTyping",t)},this.processDMUpdate=function(t){!this.attr.darkTraffic&&this.trigger("dataDMUpdate",t)},this.processLPMessage=function(t,e){e.payload.dm_typing?this.processDMTypingEvent(e.payload.dm_typing):e.payload.dm_update&&this.processDMUpdate(e.payload.dm_update)},this.updateSubscriptions=function(t,e){if(e&&t){var i="subscribe"===t?"dataLPSubscribe":"dataLPUnsubscribe";this.trigger(i,{consumer_id:this.consumerId,topic:this.getTopicsForConversation(e)})}},this.handleConversationUpdate=function(t,e){e.conversation_id!==this.conversationId&&this.updateSubscriptions("unsubscribe",this.conversationId),this.updateSubscriptions("subscribe",e.conversation_id),this.conversationId=e.conversation_id},this.handleConversationViewChange=function(t){var e="uiDMConversationActivityHidden"===t.type?"unsubscribe":"subscribe";this.updateSubscriptions(e,this.conversationId)},this.getTopicsForConversation=function(t){return["/dm_typing/"+t,"/dm_update/"+t]},this.after("initialize",function(){this.consumerId=parseInt(Math.random()*Number.MAX_SAFE_INTEGER,10),this.on("dataLPMessage",this.processLPMessage),this.on("uiDMConversationUpdated",this.handleConversationUpdate),this.on("uiDMConversationActivityHidden uiDMConversationActivityVisible",this.handleConversationViewChange)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a);e.default=(0,o.default)(n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.reportConversation=function(t,e){e=e||{};var i=m(f(t.target,"dataDMUserUpdates"),f(t.target,"dataConversationReported",{conversation_id:e.conversation_id})),s=m(f(t.target,"dataDMError"),f(t.target,"dataConversationReportFailed",{conversation_id:e.conversation_id}));this.post({url:"/i/direct_messages/report_conversation",data:{conversation_id:e.conversation_id,report_as:e.report_as,cursor:this.dmCursor},success:i,error:s})},this.after("initialize",function(){this.on("uiReportConversation",this.reportConversation)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=i(506),d=s(l),u=i(347),h=s(u),f=h.default.triggerFn,m=h.default.chain,p=(0,o.default)(n,c.default,d.default);e.default=p},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.reportMessage=function(t,e){e=e||{},this.post({url:"/i/direct_messages/report",data:{id:e.id,conversation_id:e.conversation_id,report_as:e.report_as},eventData:e,success:u(t.target,["dataDMReportSuccess","dataDMConversationResult"]),error:h(u(t.target,"dataDMReportFailed",e),u(t.target,"dataDMError"))})},this.after("initialize",function(){this.on("uiDMDialogReportDM",this.reportMessage)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(347),c=s(r),l=i(240),d=s(l),u=c.default.triggerFn,h=c.default.chain;e.default=(0,o.default)(n,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{
"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.mergeErrorParams=function(t,e,i,s){return c.default.merge(t,{error:{type:e,code:i,message:s}})},this.sendImage=function(t,e){var i=this,s=e.media_data||{},n=function(t){return i.trigger("dataMediaSruComplete",s),c.default.merge(e,{media_id:t})},a=w(t.target,"dataDMSendFailed",function(t){return i.trigger("dataMediaSruCancel",s),i.mergeErrorParams(e,"media_upload",t.code,t.message)});return s.uploadId?this.mediaSruFinalize(s).then(n,a):Promise.resolve(e)},this._sendMessagePromise=function(t,e,i){var s=this;return new Promise(function(n,a){var o=function(t){e(t),n()},r=function(t){i(t),a()};s.post({url:"/i/direct_messages/new",data:t,eventData:t,success:o,error:r})})},this.sendMessage=function(t,e){var i=this,s=function(i,s){var n=this;return s&&s.retry&&"dataDMDialogSendMessageRetry"!==t.type?setTimeout(function(){return n.trigger(i,"dataDMDialogSendMessageRetry",e)},s.delay):this.trigger(i,"dataDMSendSuccess",s),s},n=w(t.target,"dataDMSendFailed",function(t){return i.mergeErrorParams(e,"message_send",t.xhr.status,t.message)}).bind(this);return this._sendMessagePromise(e,s.bind(this,t.target),n)},this.getConversationQueue=function(t){if(t)return this.conversationQueues[t]=this.conversationQueues[t]||(0,g.default)(),this.conversationQueues[t]},this.updateInFlight=function(t){var e=this,i=Object.keys(this.conversationQueues).reduce(function(t,i){return t[i]=e.conversationQueues[i].length(),t},{});return this.trigger("dataDMMessagesInFlight",i),t},this.enqueueMessage=function(t,e){var i=this.updateInFlight.bind(this),s=this.getConversationQueue(t).enqueue(e).then(i,i);return this.updateInFlight(),s},this.handleSend=function(t,e){var i=this;e.resend_id=e.resend_id||b.default.add({event:t,sendParams:e});var s=function(){return i.sendImage(t,e).then(i.sendMessage.bind(i,t))},n=e.conversation_id;return n?this.enqueueMessage(n,s):s()},this.discardDraftData=function(t,e){e.resend_id&&b.default.remove(e.resend_id)},this.handleResend=function(t,e){var i=b.default.get(e.resend_id);i&&this.handleSend(i.event,i.sendParams)},this.after("initialize",function(){this.on("uiDMSendMessage dataDMDialogSendMessageRetry",this.handleSend),this.on("uiDMResendConfirm",this.handleResend),this.conversationQueues={},this.on("uiDMConversationNeedsInFlightState",this.updateInFlight),this.on("dataDMSendSuccess uiDMResendDiscard",this.discardDraftData)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(126),c=s(r),l=i(347),d=s(l),u=i(240),h=s(u),f=i(512),m=s(f),p=i(518),g=s(p),v=i(220),b=s(v),w=d.default.triggerFn;e.default=(0,o.default)(n,h.default,m.default)},,,,,,,function(t,e){"use strict";function i(){function t(){if("running"!==i&&e.length>0){var s=e.shift();i="running";var n=function(e,s){if(i="idle",t(),e)return s;throw s},a=s();a.queuedPromise().then(n.bind(null,!0),n.bind(null,!1)).then(a.resolve,a.reject)}}var e=[],i="idle";return{enqueue:function(i){var s=new Promise(function(s,n){var a=function(){return{queuedPromise:i,resolve:s,reject:n}};e.push(a),t()});return s},numPending:function(){return e.length},numInProgress:function(){return"running"===i?1:0},length:function(){return this.numPending()+this.numInProgress()}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.after("initialize",function(){this.scribeOnEvent("uiRevealSuspiciousDM",{component:"rtf_message",action:"open"}),this.scribeOnEvent("uiReportDMAsSpam",{component:"rtf_message",action:"report_as_spam"}),this.scribeOnEvent("uiReportDMAsSafe",{component:"rtf_message",action:"report_as_ok"})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r),l=(0,o.default)(n,c.default);e.default=l},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.toggleNotifications=function(t,e){e=e||{};var i=h(u(t.target,"dataDMConversationResult"),u(t.target,e.enable_notifications?"dataNotificationsEnabled":"dataNotificationsDisabled")),s=u(t.target,e.enable_notifications?"dataNotificationsEnableFailed":"dataNotificationsDisableFailed");this.post({url:"/i/direct_messages/notifications",data:{id:e.conversation_id,enable_notifications:e.enable_notifications,mute_duration:e.mute_duration},eventData:e,success:i,error:s})},this.after("initialize",function(){this.on("uiToggleNotifications",this.toggleNotifications)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=i(347),d=s(l),u=d.default.triggerFn,h=d.default.chain,f=(0,o.default)(n,c.default);e.default=f},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.accept=function(t,e){var i="https://api.twitter.com/1.1/dm/conversation/"+e.conversation_id+"/accept.json";this.post({url:i,useOAuthSessionAuth:!0})},this.after("initialize",function(){this.on("uiDMTrustRequestAccept",this.accept)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=(0,o.default)(n,c.default);e.default=l},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.after("initialize",function(){this.scribeOnEvent("uiDMDialogSharedTweetClick",{element:"shared_tweet_dm",action:"click"})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r),l=(0,o.default)(n,c.default);e.default=l},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.update=function(t,e){var i=this;e=e||{};var s=t.target,n=c.default.get(e.fileId);n&&this.mediaSruFinalize(n).then(function(t){return i.post({url:"/i/direct_messages/update_avatar",data:{conversation_id:e.conversation_id,media_id:t},success:p(s,"dataDMUpdateConversationAvatarSuccess"),error:p(s,"dataDMUpdateConversationAvatarFailed")})})},this.remove=function(t,e){e=e||{},this.post({url:"/i/direct_messages/update_avatar",data:{conversation_id:e.conversation_id},success:p(t.target,"dataDMRemoveConversationAvatarSuccess"),error:p(t.target,"dataDMRemoveConversationAvatarFailed")})},this.after("initialize",function(){this.on("uiDMUpdateConversationAvatar",this.update),this.on("uiDMRemoveConversationAvatar",this.remove)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(220),c=s(r),l=i(347),d=s(l),u=i(240),h=s(u),f=i(512),m=s(f),p=d.default.triggerFn;e.default=(0,o.default)(n,h.default,m.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.updateName=function(t,e){e=e||{},this.post({url:"/i/direct_messages/update_name",data:{id:e.conversation_id,name:e.name},success:u(t.target,["dataDMConversationResult","dataUpdateConversationNameSuccess"]),error:u(t.target,"dataUpdateConversationNameFailure")})},this.after("initialize",function(){this.on("uiUpdateConversationName",this.updateName)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=i(347),d=s(l),u=d.default.triggerFn;e.default=(0,o.default)(n,c.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({inboxSelector:".DMInbox-content",inboxItemSelector:".DMInboxItem",conversationListSelector:".DMInbox-conversations",eventData:{scribeContext:{component:"dm_conversation_list_dialog"}},markAllReadSelector:".mark-all-read",noMessagesSelector:".dm-no-messages",spinnerSelector:".DMInbox-spinner",loadNextPageRange:150,notifications:!1,usePushNotifications:!1}),this.removeStaleInboxItems=function(t,e){var i=(e||[]).map(function(t){return this.generateInboxItemWithIdSelector(t)},this).join(", ");t.find(i).parent("li").remove()},this.sortInboxClone=function(e){var i=e.children().get();i.sort(function(e,i){var s=t(e).children().first().attr("data-sort-event-id"),n=t(i).children().first().attr("data-sort-event-id");return-1*o.default.compare(s,n)});var s=(i||[]).reduce(function(t,e){return t+e.outerHTML},"");e.html(s)},this.getDeletedConversationIDs=function(t){var e=(t||[]).filter(function(t){return"conversation_delete"===t.type}).map(function(t){return t.conversation_id});return e},this.applyUserUpdates=function(t,e){if(e.should_request_inbox)this.trigger("uiNeedsDMConversationList");else if(!e.is_empty){var i=e.inbox_updates,s=e.update_events,n=this.select("conversationListSelector").clone(),a=i&&i.updated_conversation_ids,o=this.getDeletedConversationIDs(s),r=(a||[]).concat(o);this.removeStaleInboxItems(n,r),n.prepend(i&&i.html),this.sortInboxClone(n),this.select("conversationListSelector").replaceWith(n),this.$node.data({markAllReadId:e.mark_all_read_id,maxEntryId:e.max_entry_id})}},this.applyInboxResult=function(t,e){var i=this.$node.data(),s=e.sourceEventData;if(s&&s.max_entry_id){if(this.isNextPage(i.minEntryId,e.max_entry_id)){var n=this.select("conversationListSelector").clone();this.removeStaleInboxItems(n,e.threads),n.append(e.html),this.select("conversationListSelector").replaceWith(n),this.$node.data({minEntryId:e.min_entry_id,hasMore:e.has_more})}}else this.select("conversationListSelector").html(e.html||""),this.trigger("dataDMCursor",{cursor:e.cursor}),this.$node.removeData(),this.$node.data({markAllReadId:e.mark_all_read_id,minEntryId:e.min_entry_id,maxEntryId:e.max_entry_id,hasMore:e.has_more});this.trigger("uiResetDMPoll")},this.isNextPage=function(t,e){return!(!t||!e)&&o.default.compare(t,e)>=0},this.updateSpinner=function(){this.select("spinnerSelector").toggleClass("u-hidden",!this.$node.data("hasMore"))},this.handleInboxScroll=function(e,i){var s=t(e.currentTarget);s[0].scrollHeight-s.scrollTop()-this.attr.loadNextPageRange<=s.outerHeight()&&this.requestNextPageThrottled()},this.requestNextPage=function(){var t=this.$node.data().hasMore;("undefined"==typeof t||t)&&this.trigger("uiNeedsDMConversationList",{max_entry_id:this.$node.data("minEntryId")})},this.requestNextPageThrottled=d.default.throttle(this.requestNextPage,1e3),this.markAllMessages=function(){this.trigger("dataMarkDMsAsRead",{last_message_id:this.$node.data("markAllReadId")||-1}),this.trigger("uiDMDialogMarkMessage"),this.select("inboxItemSelector").removeClass("is-unread"),this.trigger("uiReadStateChanged",{msgCount:0})},this.generateInboxItemWithIdSelector=function(t){return this.attr.inboxItemSelector+'[data-thread-id="'+t+'"]'},this.markConversationRead=function(t,e){e.recipient_id&&this.$node.find(this.generateInboxItemWithIdSelector(e.recipient_id)+".is-unread").removeClass("is-unread")},this.markConversationUnread=function(t,e){e.sourceEventData&&e.sourceEventData.recipient_id&&this.$node.find(this.generateInboxItemWithIdSelector(e.sourceEventData.recipient_id)).addClass("is-unread")},this.inboxNeedsRefresh=function(t,e){this.$node.addClass("needs-refresh")},this.removeConversation=function(t,e){this.$node.find(this.generateInboxItemWithIdSelector(e.conversation_id)).parent("li").remove(),this.trigger("uiRenderConversationListView")},this.initiateKnownConversation=function(e,i){if(e){var s=t(e.target);if(this.isProfileLink(s))return;if(s.hasClass("DMInboxItem-media"))return}e&&e.preventDefault();var n=t(i.el),a=n.attr("data-thread-id"),o=new RegExp("^([1-9][0-9]*)-([1-9][0-9]*)$","g");this.trigger("uiRenderConversationView",{conversation_id:a,is_oto:o.test(a),name:n.find(".fullname").html(),most_recent_event_id:n.attr("data-last-message-id")})},this.isProfileLink=function(t){return!!t.closest("a.js-user-profile-link").length},this.setEmptyState=function(t,e){switch(t.type){case"dataDMConversationEmptyState":this.$node.toggleClass("is-empty",!0),this.$node.data("hasMore",!1);break;case"dataDMConversationListResult":this.$node.toggleClass("is-empty",!1);break;case"dataDMUserUpdates":e&&e.conversations&&e.conversations.length&&this.$node.toggleClass("is-empty",!1)}},this.after("setEmptyState",this.updateSpinner),this.after("applyInboxResult",this.updateSpinner),this.after("initialize",function(){this.attr.notifications&&this.attachChild(m.default,this.$node.find(".DMNotificationsPermissionRequest"),{useNativePush:this.attr.usePushNotifications}),this.on(document,"dataDMConversationListResult",this.applyInboxResult),this.on(document,"dataDMUserUpdates",this.applyUserUpdates),this.on(document,"uiDMInboxWantsRefreshed",this.inboxNeedsRefresh),this.on(this.select("inboxSelector"),"scroll",this.handleInboxScroll),this.on(document,"uiDeleteConversation uiReportConversation",this.removeConversation),this.on(document,"dataConversationDeleteFailed dataConversationReportFailed","uiNeedsDMConversationList"),this.on(document,"dataDMConversationEmptyState dataDMConversationListResult dataDMUserUpdates",this.setEmptyState),this.on(document,"dataMarkDMsAsRead",this.markConversationRead),this.on(document,"dataDMReadError",this.markConversationUnread),this.on(document,"uiCloseDMConversation","uiRenderConversationListView"),this.on("click",{inboxItemSelector:this.initiateKnownConversation,markAllReadSelector:this.markAllMessages})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(352),o=s(a),r=i(111),c=s(r),l=i(126),d=s(l),u=i(227),h=s(u),f=i(526),m=s(f),p=(0,c.default)(n,h.default);e.default=p}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({acceptSelector:".js-prompt-accept",dismissSelector:".js-prompt-later",daysToWaitOnDismiss:30,useNativePush:!1}),this.shouldDisplayRequest=function(){var t="Notification"in window;if(!t)return!1;var e="default"===Notification.permission,i=this.storage.getItem("last_dismissed_timestamp")||0,s=this.now()-i>24*this.attr.daysToWaitOnDismiss*60*60*1e3;return e&&s},this.now=function(){return Date.now()},this.handleAccept=function(){this.trigger("uiABImpression",{experiment:"web_native_push_notifications_4335"}),this.attr.useNativePush&&this.pushSupported?this.trigger("uiPushSubscriptionChangeRequested",{subscribe:!0}):this.trigger("uiRequestNativeNotificationPermission"),this.trigger("uiDismissDMNotice"),this.scribeAction("success")},this.handleDismiss=function(){this.storage.setItem("last_dismissed_timestamp",this.now()),this.trigger("uiDismissDMNotice"),this.scribeAction("dismiss")},this.scribeAction=function(t){this.scribe({component:"dm_conversation_list_dialog",element:"native_notifications_permission_request",action:t})},this.showNotice=function(){this.trigger("uiShowDMNotice")},this.updatePushSupport=function(t,e){e.supported&&(this.pushSupported=!0),e.subscribed&&this.trigger("uiDismissDMNotice")},this.after("initialize",function(){this.pushSupported=!1,this.storage=new h.default("dm_notifications"),this.shouldDisplayRequest()&&(this.on("click",{acceptSelector:this.handleAccept,dismissSelector:this.handleDismiss}),this.on(document,"dataPushSubscriptionState",this.updatePushSupport),this.trigger("uiWantsPushSubscriptionState"),this.on(document,"uiSwiftLoaded",d.default.once(this.showNotice).bind(this)))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r),l=i(126),d=s(l),u=i(196),h=s(u),f=(0,o.default)(n,c.default);e.default=f},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.inbox=function(t,e){e=e||{},this.get({url:"/messages",data:{min_entry_id:e.min_entry_id,max_entry_id:e.max_entry_id},eventData:e,success:u(t.target,function(t){return t.is_empty_state?"dataDMConversationEmptyState":"dataDMConversationListResult"}),error:u(t.target,"dataDMError")})},this.after("initialize",function(){this.on("uiNeedsDMConversationList",this.inbox)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(347),c=s(r),l=i(240),d=s(l),u=c.default.triggerFn;e.default=(0,o.default)(n,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.viewParticipants=function(t,e){e=e||{},this.get({url:"/i/direct_messages/participants",data:{conversation_id:e.conversation_id},eventData:e,success:u(t.target,"dataConversationParticipantsResult"),error:u(t.target,"dataDMError")})},this.after("initialize",function(){this.on("uiNeedsConversationParticipants",this.viewParticipants)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=i(347),d=s(l),u=d.default.triggerFn;e.default=(0,o.default)(n,c.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({notice:".DMNotice",dismiss:".DMNotice-dismiss, .DMNotice-cancel",needsExplicitDismiss:".DMNotice--explicitDismiss",toast:".DMNotice--toast",toastMessage:".DMNotice--toast .DMNotice-message"}),this.findNotice=function(t){return this.select("notice").filter(t)},this.show=function(e,i){this.dismissAll(!0);var s=i&&i.notice?this.findNotice(i.notice):t(e.target).closest(this.attr.notice);s.slideDown()},this.dismiss=function(e,i){var s=i&&i.notice?this.findNotice(i.notice):t(e.target).closest(this.attr.notice);s.slideUp()},this.dismissAll=function(t){var e=this.select("notice").not(this.attr.needsExplicitDismiss);t?e.slideUp():e.hide()},this.showToast=function(t,e){var i=e.message,s=e.timeout||3e3;this.select("toastMessage").text(i),this.dismissAll(!0);var n=this.select("toast");n.slideDown(),clearTimeout(this.toastTimeout),this.toastTimeout=setTimeout(function(){return n.slideUp()},s)},this.after("initialize",function(){this.on("uiShowDMNotice",this.show),this.on("uiDismissDMNotice",this.dismiss),this.on(document,"uiDismissAllDMNotices",this.dismissAll.bind(this,!1)),this.on(document,"uiDMShowToast",this.showToast),this.on("click",{dismiss:"uiDismissDMNotice"})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({conversationContentSelector:".DMConversation-content",notificationDisplayDuration:7e3,mostRecentNotifiedMessageKey:"most_recent_notified_message_id",rollingTagPrefix:"twitterDM",maxSimultaneousNotifications:2,notificationType:"direct_message"}),this.handleUserUpdates=function(t,e){e&&e.notifications&&e.notifications.length&&!this.hasPushSubscription&&this.processNotifications(e.notifications)},this.handleDMPush=function(t,e){this.processNotifications([e])},this.processNotifications=function(t){var e=this.$conversationContainer.attr("data-thread-id"),i=this.isPageFocused()&&this.$conversationContainer.is(":visible"),s=this.storage.getItem(this.attr.mostRecentNotifiedMessageKey)||0,n=t.length?t[t.length-1].id:0;this.storage.setItem(this.attr.mostRecentNotifiedMessageKey,c.default.max(n,s));var a=t.filter(function(t){var n=c.default.compare(s,t.id)>=0,a=i&&t.conversation_id.toString()===e;return!n&&!a});a.forEach(function(t){this.trigger("uiDisplayNativeNotification",{title:t.title,body:t.body,icon:t.icon,tag:this.getRollingTag(),type:this.attr.notificationType,click:{eventName:"uiDMNotificationClicked",eventData:{conversation_id:t.conversation_id}},displayDuration:this.attr.notificationDisplayDuration})},this)},this.dmNotificationClicked=function(t,e){window.focus(),this.trigger("uiNeedsDMDialog",{conversation_id:e.conversation_id})},this.isPageFocused=function(){return document.hasFocus()},this.getRollingTag=function(){return this.lastTagNumber=this.lastTagNumber||0,this.lastTagNumber=this.lastTagNumber>=this.attr.maxSimultaneousNotifications?1:this.lastTagNumber+1,this.attr.rollingTagPrefix+this.lastTagNumber},this.updatePushSupport=function(t,e){this.hasPushSubscription=!!e.subscribed},this.after("initialize",function(){this.$conversationContainer=this.select("conversationContentSelector"),this.hasPushSubscription=!1,this.on(document,"dataPushSubscriptionState",this.updatePushSupport),this.trigger("uiWantsPushSubscriptionState"),this.on(document,"dataDMUserUpdates",this.handleUserUpdates),this.on(document,"uiDMNotificationClicked",this.dmNotificationClicked),this.on(document,"dataDMPushReceived",this.handleDMPush),this.on(document,"dataDMPushReceived","uiDMRequestUserUpdates"),this.storage=new d.default("dm_notifications")})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(352),c=s(r),l=i(196),d=s(l),u=(0,o.default)(n);e.default=u},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({scrollContainerSelector:".DMConversation-scrollContainer",videoSelector:".DirectMessage-media video, .dm-media-gallery-overlay video",autoplayVideoSelector:"video[data-autoplay=true]",mediaContainerSelector:".Media",autoPlayThreshold:150}),this.rAF=window.requestAnimationFrame.bind(window),this.getBoundingClientRect=function(t){return t.getBoundingClientRect()},this.handleScroll=function(){var t=this;this.rAF(function(){var e=t.getBoundingClientRect(t.$scrollContainer[0]),i=t.$autoplayVideos.filter(function(i,s){var n=t.getBoundingClientRect(s);return c.default.isPartiallyContainedInViewport({topThreshold:-1*t.attr.autoPlayThreshold,bottomThreshold:t.attr.autoPlayThreshold,fractionInViewport:.01,containerRect:e,elementRect:n})});t.$currentlyPlaying.not(i).each(function(){this.pause()}),i.not(t.$currentlyPlaying).each(function(){this.play()}),t.$currentlyPlaying=i})},this.updateMediaList=function(){this.$videos=this.select("videoSelector"),this.$videos.off("pause play playing ended").on("pause play playing ended",this.updatePlayingState.bind(this)),this.$autoplayVideos=this.$videos.filter(this.attr.autoplayVideoSelector)},this.togglePlayback=function(e){var i=t(e.target).closest(this.attr.mediaContainerSelector).find("video")[0];i&&(i.paused?i.play():i.pause())},this.updatePlayingState=function(e){t(e.target).closest(this.attr.mediaContainerSelector).toggleClass("is-playing",!e.target.paused)},this.handleViewChange=function(t,e){"uiDMDialogClosed"!==t.type&&"conversation"===e.activity||this.$videos.each(function(){this.pause()})},this.after("initialize",function(){this.$videos=t(),this.$autoplayVideos=t(),this.$scrollContainer=this.select("scrollContainerSelector"),this.$currentlyPlaying=t(),this.on("uiDMConversationUpdated uiSwiftLoaded",this.updateMediaList),this.select("scrollContainerSelector").scroll(d.default.throttle(this.handleScroll.bind(this),500)),this.on("click",{videoSelector:this.togglePlayback}),this.on("uiDMDialogClosed uiDMActivityOpened",this.handleViewChange)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(177),c=s(r),l=i(126),d=s(l);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({popover:".DMPopover",popoverButton:".DMPopover-button",enabledPopoverButton:".DMPopover-button:not(:disabled)",popoverContent:".DMPopover-content",openClass:"is-open",openSelector:".is-open",focusOnOpen:".js-focus-on-open"}),this.getClosestOpenPopover=function(t){return this.getClosestPopover(t).filter(this.attr.openSelector)},this.getClosestPopover=function(e){return t(e).closest(this.attr.popover)},this.toggle=function(t){var e=this.getClosestPopover(t.target);e.hasClass(this.attr.openClass)?this.close(e):(this.closeAll(),e.addClass(this.attr.openClass).find(this.attr.focusOnOpen).focus())},this.closeAll=function(t){this.select("popover").removeClass(this.attr.openClass)},this.close=function(t){t.removeClass(this.attr.openClass).find(this.attr.enabledPopoverButton).focus()},this.disable=function(t){this.getClosestPopover(t.target).find(this.attr.popoverButton).prop("disabled",!0)},this.enable=function(t){this.getClosestPopover(t.target).find(this.attr.popoverButton).prop("disabled",!1)},this.handleEscape=function(t){var e=this.getClosestOpenPopover(t.target);e.length&&(t.stopImmediatePropagation(),this.close(e))},this.handleBlur=function(t){var e=this.getClosestOpenPopover(t.target);e.length||this.closeAll()},this.after("initialize",function(){this.on(c.default.GLOBAL_FORCE_CLOSE_EVENTS,this.closeAll),this.on(c.default.GLOBAL_REQUEST_CLOSE_EVENTS,this.closeAll),this.on("uiShortcutEsc",this.handleEscape),this.on("click",this.handleBlur),this.on("click",{enabledPopoverButton:this.toggle}),this.on("uiDisableDMPopover",this.disable),this.on("uiEnableDMPopover",this.enable)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(440),c=s(r);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.composeNewDMWithTweet=function(t,e){this.trigger("uiOpenNewDM",{has_tweet_attachment:!0}),this.trigger("uiComposeWithTweet",e)},this.composeNewDMWithOptions=function(t,e){e.tweetId&&this.trigger("uiComposeWithTweet",{id:e.tweetId}),this.trigger("uiNeedsDMDialog",{id:e.recipientId,default_composer_text:e.defaultComposerText,welcome_message_id:e.welcomeMessageId,has_tweet_attachment:void 0!==e.tweetId,retain_tweet_attachment:void 0!==e.tweetId}),e.messageMeCardData&&this.trigger("uiAddMessageMeCardData",e.messageMeCardData)},this.after("initialize",function(){this.on("uiComposeNewDMWithTweet",this.composeNewDMWithTweet),this.on(window,"uiComposeNewDMWithOptions",this.composeNewDMWithOptions)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=(0,o.default)(n);e.default=r},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({itemType:"user",dialogSelector:"#dm_dialog",noReposition:!0,disableKeyboardShortcuts:!0,openActivity:".DMActivity--open",openActivityClass:"DMActivity--open",addParticipants:".DMAddParticipants",compose:".DMCompose",conversation:".DMConversation",emptyState:".DMEmptyState",inbox:".DMInbox",viewParticipants:".DMViewParticipants",linksForInbox:".DMActivity-back",linksForCompose:".dm-new-button",toFieldSelector:".dm-to-input",errorBar:".DMErrorBar",errorText:".DMErrorBar-text",mediaPreviewSelector:".DMInboxItem-media, .dm-attached-media"}),this.openDialog=function(t,e){e&&e.fromInitData&&this.on("uiDialogClosed",function(){this.isDialogNavigation||this.isOverlayNavigation||this.trigger("uiNavigate",{href:"/"}),this.isOverlayNavigation=!1}),this.trigger("uiNeedsDMConversationList"),e&&e.id?this.trigger("uiRenderConversationView",{conversation_id:c.default.generateConversationId(this.attr.userId,e.id),name:e.name,is_oto:!0,default_composer_text:e.default_composer_text,welcome_message_id:e.welcome_message_id,has_tweet_attachment:e.has_tweet_attachment,retain_tweet_attachment:e.retain_tweet_attachment}):e&&e.conversation_id?this.trigger("uiRenderConversationView",e):e&&e.default_composer_text?this.trigger("uiOpenNewDM",{default_composer_text:e.default_composer_text}):this.renderInbox(),this.open()},this.closeDialog=function(){this.isDialogNavigation=!1,this.close()},this.renderInbox=function(t,e){t&&t.preventDefault(),this.renderView("inbox");var i=this.select("inbox");return this.trigger("uiReadStateChanged",{msgCount:0}),i.hasClass("needs-refresh")?(i.removeClass("needs-refresh"),void this.trigger("uiNeedsDMConversationList")):void this.trigger("uiDMDialogOpenedConversationList")},this.handleProfileLinkClick=function(){this.isDialogNavigation||(this.isDialogNavigation=this.$dialog.is(":visible"),this.closeImmediately())},this.renderConversationView=function(t,e){this.renderView("conversation"),this.trigger("uiDMDialogOpenedConversation",{recipient:e.conversation_id||e.screen_names})},this.renderCompose=function(t,e){t&&t.preventDefault(),this.renderView("compose"),this.trigger("uiDMDialogOpenedNewConversation"),this.isOpen()||(this.trigger("uiNeedsDMConversationList"),this.open())},this.renderAddParticipants=function(t,e){this.renderView("addParticipants")},this.renderViewParticipants=function(t,e){t&&t.preventDefault(),this.trigger(t.target,"uiNeedsConversationParticipants",{conversation_id:e.conversation_id}),this.renderView("viewParticipants")},this.renderView=function(t){this.trigger("uiDismissAllDMNotices"),this.select("openActivity").removeClass(this.attr.openActivityClass),this.select(t).addClass(this.attr.openActivityClass),this.trigger("uiDMActivityOpened",{activity:t}),this.trigger(this.$dialog,"uiDialogContentChanged"),this.setScribeComponent(t)},this.setScribeComponent=function(t){this.attr.eventData||(this.attr.eventData={});var e=void 0;switch(t){case"compose":e="dm_new_conversation_dialog";break;case"conversation":e="dm_existing_conversation_dialog";break;case"inbox":e="dm_conversation_list_dialog";break;case"addParticipants":e="dm_add_participants_dialog";break;case"viewParticipants":e="dm_view_participants_dialog"}e&&(this.attr.eventData.scribeContext={component:e})},this.showError=function(t,e){this.select("errorText").html(e.message||e.error),this.select("errorBar").show(),this.trigger(this.select("toFieldSelector"),"uiTypeaheadIgnoreNextFocus"),this.trigger(this.$dialog,"uiDialogContentChanged")},this.previewMedia=function(e,i){e.preventDefault();var s=t(e.target);this.trigger("uiDMDialogMediaPreview",{imgUrl:s.attr("data-full-img"),dmId:s.closest(".dm").attr("data-message-id")||s.closest(".DMInboxItem").attr("data-last-message-id")})},this.hideDMDialog=function(){this.$dialogContainer.hide(),this.openState=!1},this.showDMDialog=function(t,e){this.$dialogContainer.show(),this.openState=!0},this.restoreDialog=function(){this.isDialogNavigation&&(this.isDialogNavigation=!1,this.open())},this.dismissErrors=function(){this.trigger("uiHideMessage"),this.select("errorBar").trigger("uiDismissDMNotice")},this.setOverlayNavigation=function(){this.isOverlayNavigation=!0},this.after("initialize",function(){this.$dialogContainer=this.select("dialogSelector"),this.on(document,"uiShowProfilePopup",this.handleProfileLinkClick),this.on(document,"uiCloseProfilePopup",this.restoreDialog),this.on(document,"uiNeedsDMDialog",this.openDialog),this.on(document,"uiCloseDMDialog",this.closeDialog),this.on(document,"uiOpenNewDM",this.renderCompose),this.on(document,"uiAddParticipants",this.renderAddParticipants),this.on(document,"uiViewParticipants",this.renderViewParticipants),this.on(document,"uiNavigate","uiCloseDMDialog"),this.on(document,"uiOverlayNavigate",this.setOverlayNavigation),this.on("uiRenderConversationListView",this.renderInbox),this.on("uiRenderConversationView uiRenderNewConversationView",this.renderConversationView),this.on("uiDMViewParticipantsDone uiDMAddParticipantsDone",this.renderView.bind(this,"conversation")),this.on(document,"dataDMSendSuccess dataDMDeleteSuccess","dataDMSuccess"),this.on(document,"dataDMError",this.showError),this.on(document,"uiDMDialogMediaPreview",this.hideDMDialog),this.on(document,"uiDMDialogMediaPreviewClosed",this.showDMDialog),this.on("uiDialogClosed uiDMHideError",this.dismissErrors),this.on("uiDialogClosed","uiDMDialogClosed"),this.on("click",{linksForInbox:this.renderInbox,linksForCompose:"uiOpenNewDM",mediaPreviewSelector:this.previewMedia})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(351),c=s(r),l=i(163),d=s(l),u=i(535),h=s(u),f=i(536),m=s(f),p=i(537),g=s(p),v=i(538),b=s(v),w=(0,o.default)(n,d.default,m.default,h.default,g.default,b.default);e.default=w}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){o.default.mixin(this,[h.default,d.default]),this.defaultAttrs({pageContainer:"#doc",nestedContainerSelector:".js-stream-item .in-reply-to",showWithScreenNameSelector:".twitter-atreply",showWithIdSelector:".show-popup-with-id, .js-user-profile-link",searchtagSelector:".twitter-hashtag, .twitter-cashtag",cashtagSelector:".twitter-cashtag",geoPivotSelector:".js-geo-pivot-link",itemLinkSelector:".twitter-timeline-link,.js-adaptive-photo",mediaForwardSelector:".js-adaptive-photo",cardExternalLinkSelector:".js-card2-external-link",
viewMoreItemSelector:".view-more-container",inSnapbackExperiment:!1,snapbackSkipProfilePopup:!1,dismissedTweetSelector:".js-dismissed-tweet",dismissedTweetClass:"js-dismissed-tweet",dismissibleContainerSelector:".dismissible-container",threadedConversationTweetSelector:".ThreadedConversation-tweet"}),this.showProfilePopupWithScreenName=function(e,i){var s=t(e.target).closest(this.attr.showWithScreenNameSelector).text();"@"===s[0]&&(s=s.substring(1));var n={screenName:s},a=this.getCardDataFromContainer(t(e.target));i=c.default.merge(this.interactionData(e,n),a),this.showProfile(e,i)},this.showProfilePopupWithId=function(e,i){var s=this.getCardDataFromContainer(t(e.target));i=c.default.merge(this.interactionDataWithCard(e),s),this.showProfile(e,i)},this.showProfile=function(e,i){"mouseover"===e.type?(e.preventDefault(),e.stopImmediatePropagation(),this.trigger(e.target,"uiShowProfileHover",i)):(i.user_id=t(e.target).closest(".twitter-atreply").attr("data-mentioned-user-id")||i.userId,this.trigger(e.target,"uiShowProfileNewWindow",i))},this.hideHover=function(e,i){var s=this.getCardDataFromContainer(t(e.target));i=c.default.merge(this.interactionData(e),s),this.trigger("uiHideProfileHover",i)},this.searchtagClick=function(e,i){var s=t(e.target),n=s.closest(this.attr.searchtagSelector),a=n.is(this.attr.cashtagSelector)?"uiCashtagClick":"uiHashtagClick",o={query:n.text()};this.trigger(a,this.interactionData(e,o))},this.isCardUrl=function(t){var e=/^(https?:\/\/)?cards(-staging|-beta)?.twitter.com/;return e.test(t)},this.geoPivotClick=function(e,i){var s={placeId:t(i.el).data("place-id")};this.trigger("uiGeoPivotClick",this.interactionData(e,s))},this.itemLinkClick=function(e,i){var s=t(e.target),n=s.closest(this.attr.itemLinkSelector),a=n.closest(".tweet").data("permalink-path"),o=!!s.parents(".permalink").length,r=void 0,l=n.is(this.attr.mediaForwardSelector)?a:"",d=c.default.merge({url:n.attr("data-expanded-url")||n.attr("href")||l,tcoUrl:n.attr("href")||l,text:n.text()},this.getCardDataFromContainer(s));if(("promotion"===d.cardName||"promotions"===d.cardType)&&this.isCardUrl(d.url)&&!o){e.preventDefault(),r=n.parents(".stream-item").find(".tweet");var u=r.data("permalink-path"),h=r.data("conversation-id");u&&t(document).trigger("uiNavigate",c.default.merge(i,{href:u,conversation_id:h}))}this.trigger("uiItemLinkClick",this.interactionData(e,d))},this.cardLinkClick=function(e,i,s){var n=this.getCardDataFromContainer(t(i.target));this.trigger(e,this.interactionDataWithCard(i,n))},this.getUserIdFromElement=function(t){return t.length?t.data("user-id"):null},this.itemSelected=function(e,i){var s=this.getCardDataFromContainer(t(e.target));i.organicExpansion&&this.trigger("uiItemSelected",c.default.merge(this.interactionData(e),s))},this.isNested=function(){return this.$node.closest(this.attr.nestedContainerSelector).length},this.modifierKey=function(t){if(t.shiftKey||t.ctrlKey||t.metaKey||t.which>1)return!0},this.removeTweetsFromUser=function(e,i){var s=this,n=this.$node.find("[data-user-id="+i.userId+"].js-stream-tweet"),a=this;t.each(n,function(e,i){var n=t(i),o=n.attr("data-tweet-id"),r=n.closest(s.attr.threadedConversationTweetSelector);r.length||(r=n.parent()),a.removeEngagementsOnTweet(o),r.remove()}),this.trigger("uiRemovedSomeTweets")},this.navigateToViewMoreURL=function(e){var i=t(e.target),s=void 0;i.find(this.attr.viewMoreItemSelector).length&&(s=i.find(".view-more-link"),this.trigger(s,"uiNavigate",{href:s.attr("href")}))},this.removeEngagementsOnTweet=function(t){var e=this.$node.find("[data-item-id="+t+"]");e.remove()},this.dismissTweet=function(e,i){var s=t(e.target),n=s.closest(this.attr.tweetContainerSelector),a=n.closest(this.attr.dismissibleContainerSelector);n.addClass(this.attr.dismissedTweetClass).fadeOut(200,function(){n.remove(),a&&a.remove()}),this.trigger("uiTweetDismissed",i)},this.removeAllDismissedTweets=function(){this.select("dismissedTweetSelector").stop().remove()},this.after("initialize",function(){this.isNested()||(this.on("click",{showWithScreenNameSelector:this.showProfilePopupWithScreenName,showWithIdSelector:this.showProfilePopupWithId,searchtagSelector:this.searchtagClick,geoPivotSelector:this.geoPivotClick,itemLinkSelector:this.itemLinkClick,cardExternalLinkSelector:this.cardLinkClick.bind(this,"uiCardExternalLinkClick")}),this.on("uiItemLinkClick",{itemLinkSelector:this.itemLinkClick}),this.on("mouseover",{showWithScreenNameSelector:this.showProfilePopupWithScreenName,showWithIdSelector:this.showProfilePopupWithId}),this.on("mouseout",{showWithScreenNameSelector:this.hideHover,showWithIdSelector:this.hideHover}),this.on("uiHasClickedTweet",this.itemSelected),this.on("uiRemoveTweetsFromUser",this.removeTweetsFromUser),this.on("uiShortcutEnter",this.navigateToViewMoreURL),this.on("uiDismissTweet",this.dismissTweet),this.on(document,"uiBeforePageChanged",this.removeAllDismissedTweets))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(121),o=s(a),r=i(126),c=s(r),l=i(139),d=s(l),u=i(138),h=s(u);e.default=n}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({timestampSelector:".tweet-timestamp",relativeTimestampSelector:".js-relative-timestamp",relativeTimestampClass:"js-relative-timestamp"}),this.currentTimeSecs=function(){return new Date/1e3},this.updateAccessibleShortTimestamp=function(e,i){var s=this.currentTimeSecs(),n=Math.floor(s-i);if(!(n<3)){var a=c.format(i-s),o=e.closest(this.attr.timestampSelector),r=o.find(".u-hiddenVisually");r.length||(o.find(this.attr.relativeTimestampSelector).removeAttr("data-aria-label-part").attr("aria-hidden","true"),r=t(d),o.append(r)),r.text(a)}},this.updateTimestamps=function(){var e=this;this.select("relativeTimestampSelector").each(function(i,s){var n=t(s),a=n.data("time"),o=e.formatTimestamp(a);o.relative||n.removeClass(e.attr.relativeTimestampClass),n.text(o.text),e.updateAccessibleShortTimestamp(n,a)})},this.formatTimestamp=function(t){var e=this,i=this.currentTimeSecs(),s=Math.floor(i-t),n=void 0;return s<3?n=l:(n=c.format(s,{direction:"none",type:this.timespanType}),this.localizedDigits&&(n=n.replace(/\d/g,function(t){return e.localizedDigits.charAt(t.charCodeAt(0)-"0".charCodeAt(0))}))),{text:n,relative:!0}},this.after("initialize",function(){var e=t("html").attr("lang");this.timespanType="en"===e||"en-gb"===e?"abbreviated":"short",this.localizedDigits={ar:"",fa:""}[e],this.on(document,"uiWantsToRefreshTimestamps uiPageChanged",this.updateTimestamps)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(123),o=(s(a),i(478)),r=s(o),c=new r.default.TimespanFormatter,l="now",d='<span class="u-hiddenVisually" data-aria-label-part="last"></span>';e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({tweetFormSelector:".tweet-form"}),this.initTweetbox=function(t){var e=this.select("tweetFormSelector"),i=this.attr.preexpandTweetbox||!1;this.trigger(e,"uiInitTweetbox",o.default.merge({draftTweetId:this.attr.draftTweetId,condensable:!i,preexpandTweetbox:i,suppressSuccessMessage:this.attr.suppressSuccessMessage},{eventData:this.attr.eventData},t))}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var a=i(126),o=s(a)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){o.default.mixin(this,[h.default,S.default]),this.defaultAttrs({followButtonSelector:".follow-button, .follow-link, .ProfileTweet-follow-button",topicLinkSelector:".user-topic-link",userInfoSelector:".user-actions",dropdownSelector:".user-actions .dropdown",dropdownItemSelector:".user-actions .dropdown.open .dropdown-menu li",blockOrReportButtonSelector:".block-or-report-text",tweetItemSelector:".tweet",reportButtonSelector:".blocked-report-text",unmuteButtonSelector:".unmute-button",muteButtonSelector:".mute-button",followStates:["not-following","following","blocked","pending"],userActionClassesToEvents:{"mention-text":["uiMentionAction","mentionUser"],"dm-text":["uiDmAction","dmUser"],"list-text":["uiListAction"],"block-text":["uiNeedsBlockDialog","attachUserData"],"report-text":["uiNeedsReportDialog","attachUserData"],"unblock-text":["uiUnblockAction"],"hide-suggestion-text":["uiHideSuggestionAction"],"retweet-on-text":["uiRetweetOnAction"],"retweet-off-text":["uiRetweetOffAction"],"device-notifications-on-text":["uiDeviceNotificationsOnAction","deviceNotificationsOn"],"device-notifications-off-text":["uiDeviceNotificationsOffAction"],"embed-profile":["uiEmbedProfileAction","redirectToEmbedProfile"]}}),this.getClassNameFromList=function(t,e){var i=e.filter(function(e){return t.hasClass(e)});return i[0]},this.getUserActionEventNameAndMethod=function(t){var e=this.getClassNameFromList(t.closest("li"),Object.keys(this.attr.userActionClassesToEvents));return this.attr.userActionClassesToEvents[e]},this.getFollowState=function(t){return this.getClassNameFromList(t,this.attr.followStates)},this.getInfoElementFromEvent=function(e){var i=t(e.target);return i.closest(this.attr.userInfoSelector)},this.findInfoElementForUser=function(t){var e=this.attr.userInfoSelector+"[data-user-id="+g.default.parseBigInt(t)+"]";return this.$node.find(e)},this.getEventName=function(t){var e={"not-following":"uiFollowAction",following:"uiUnfollowAction",blocked:"uiUnblockAction",pending:"uiCancelFollowRequestAction"};return e[t]},this.addCancelHoverStyleClass=function(t){t.addClass("cancel-hover-style"),t.one("mouseleave",function(){return t.removeClass("cancel-hover-style")});var e=t.closest(this.attr.userInfoSelector);e.addClass("show-more-actions-button"),t.one("mouseleave",function(){return e.removeClass("show-more-actions-button")})},this.handleFollowButtonClick=function(e){e.stopPropagation(),this.trigger(t(e.target),"uiCloseDropdowns");var i=this.getInfoElementFromEvent(e),s=t(e.target).closest(this.attr.followButtonSelector),n=this.getTweetForEvent(e,"closest");this.addCancelHoverStyleClass(s);var a=this.getFollowState(i),o=!s.closest(".stream").length;"not-following"===a&&i.data("protected")&&this.trigger("uiShowMessage",{message:(0,c.default)("A follow request has been sent to @{{screen_name}} and is pending their approval.",{screen_name:i.data("screen-name")})});var r=this.getEventName(a),l={originalFollowState:a,shouldRefreshTimeline:o,mediaType:this.getMediaType(n),screenName:i.data("screen-name")};this.trigger(r,this.interactionDataWithCard(e,l))},this.handleTopicLinkClick=function(t){var e=this.interactionData(t);this.trigger("uiUserTopicClickAction",e)},this.blockFollowWithSignupDialog=function(e){e.stopPropagation(),this.trigger(t(e.target),"uiCloseDropdowns"),this.trigger("uiOpenSignupDialog",{signUpOnly:!0,screenName:this.getInfoElementFromEvent(e).data("screen-name")}),this.trigger("uiLoggedOutFollowAttempt",this.interactionData(e))},this.handleBlockOrReportClick=function(t){var e=this.getInfoElementFromEvent(t),i=e.data("screen-name"),s=e.data("user-id").toString(),n=this.getFollowState(e),a=d.default.merge(this.interactionData(t),{screenName:i,userId:s,target:"user",viewerFollowsAuthor:"following"===n,viewerBlocksAuthor:"blocked"===n});this.trigger("uiNeedsBlockOrReportDialog",a)},this.handleUserAction=function(e){var i=t(e.target),s=this.getUserActionEventNameAndMethod(i);if(s){e.stopPropagation();var n=this.getInfoElementFromEvent(e),a=s[0],o=s[1],r=this.getFollowState(n),c={originalFollowState:r};o&&(c=this[o](n,a,c)),c&&this.trigger(a,this.interactionData(e,c)),this.trigger(i,"uiCloseDropdowns")}},this.deviceNotificationsOn=function(t,e,i){return this.attr.deviceEnabled?i:(this.attr.smsDeviceVerified||this.attr.hasPushDevice?this.trigger("uiOpenConfirmDialog",{titleText:"Enable mobile notifications for Tweets",bodyText:(0,c.default)("Before you can receive mobile notifications for @{{screenName}}'s Tweets, you need to enable the Tweet notification setting.",{screenName:t.data("screen-name")}),cancelText:"Close",submitText:"Enable Tweet notifications",action:this.attr.hasPushDevice?"ShowPushTweetsNotifications":"ShowMobileNotifications",top:this.attr.top}):this.trigger("uiOpenConfirmDialog",{titleText:"Setup mobile notifications",bodyText:(0,c.default)("Before you can receive mobile notifications for @{{screenName}}'s Tweets, you need to set up your phone.",{screenName:t.data("screen-name")}),cancelText:"Cancel",submitText:"Set up phone",action:"ShowMobileNotifications",top:this.attr.top}),!1)},this.redirectToMobileNotifications=function(){window.location="/settings/devices"},this.redirectToPushNotificationsHelp=function(){window.location="//support.twitter.com/articles/20169887"},this.redirectToEmbedProfile=function(t,e,i){return this.trigger("uiNavigate",{href:"/settings/widgets/new/user?screen_name="+t.data("screen-name")}),!0},this.mentionUser=function(t,e,i){this.trigger("uiOpenTweetDialog",{screenName:t.data("screen-name"),title:(0,c.default)("Tweet to {{name}}",{name:t.data("name")})})},this.attachUserData=function(t,e,i){var s=d.default.merge(this.interactionData(i),{screenName:b.default.getScreenName(t),userId:b.default.getId(t),target:"user"});return s},this.dmUser=function(t,e,i){return this.trigger("uiNeedsDMDialog",{id:b.default.getId(t),screen_name:b.default.getScreenName(t),name:b.default.getName(t),oto_only:!0}),i},this.hideSuggestion=function(t,e,i){return d.default.merge(i,{feedbackToken:t.data("feedback-token")})},this.followStateChange=function(t,e){this.updateFollowState(e.userId,e.newState),e.fromShortcut&&("not-following"===e.newState?this.trigger("uiShowMessage",{message:(0,c.default)("You have unblocked {{username}}",{username:e.username})}):"blocked"===e.newState&&this.trigger("uiUpdateAfterBlock",{userId:e.userId}))},this.updateFollowState=function(t,e){var i=this.findInfoElementForUser(t),s=this.getFollowState(i);s&&i.removeClass(s),i.addClass(e),"blocked"===e?this.trigger("uiUpdateAfterBlock",{userId:t}):"not-following"===e&&this.trigger("uiShowProfileTweets")},this.follow=function(t,e){var i=this.findInfoElementForUser(e.userId),s=i.data("protected")?"pending":"following";this.updateFollowState(e.userId,s),i.addClass("including")},this.unfollow=function(t,e){var i=this.findInfoElementForUser(e.userId);this.updateFollowState(e.userId,"not-following"),i.removeClass("including notifying")},this.cancel=function(t,e){this.updateFollowState(e.userId,"not-following")},this.block=function(t,e){var i=this.findInfoElementForUser(e.userId);this.trigger("jsClearReinjectionCookiesForUser",{userId:e.userId}),this.updateFollowState(e.userId,"blocked"),i.removeClass("including notifying")},this.unblock=function(t,e){this.updateFollowState(e.userId,"not-following")},this.retweetsOn=function(t,e){var i=this.findInfoElementForUser(e.userId);i.addClass("including")},this.retweetsOff=function(t,e){var i=this.findInfoElementForUser(e.userId);i.removeClass("including")},this.notificationsOn=function(t,e){var i=this.findInfoElementForUser(e.userId),s=i.find(this.attr.deviceFollowCheckboxSelector);i.addClass("notifying"),s.prop("checked",!0)},this.notificationsOff=function(t,e){var i=this.findInfoElementForUser(e.userId),s=i.find(this.attr.deviceFollowCheckboxSelector);i.removeClass("notifying"),s.prop("checked",!1)},this.blockUserConfirmed=function(t,e){t.stopImmediatePropagation(),this.trigger("uiBlockAction",e.sourceEventData)},this.preventFocus=function(t,e){t.preventDefault()},this.handleMuteButtonClick=function(t){return function(e,i){i=this.interactionData(e),i.scribeContext={element:"muted_button"},this.trigger(e.target,t,i)}},this.updateMuteButtonState=function(t,e){var i=this.$node.find(this.attr.userInfoSelector+"[data-user-id="+e.userId+"]"),s=i.find(this.attr.unmuteButtonSelector),n=i.find(this.attr.muteButtonSelector),a=s.is(":focus"),o=n.is(":focus");i[e.modOp](e.modClass),n.removeClass("first-load"),a?n.focus():o&&s.focus()},this.isHomePage=function(){return"/"===window.location.pathname},this.after("initialize",function(){return m.default.attachTo(this.$node),this.attr.loggedIn?(this.on(document,"uiFollowStateChange dataFollowStateChange dataBulkFollowStateChange",this.followStateChange),this.on(document,"uiFollowAction",this.follow),this.on("click",{followButtonSelector:this.handleFollowButtonClick}),void(this.attr.loggedIn&&(this.on("click",{topicLinkSelector:this.handleTopicLinkClick,dropdownItemSelector:this.handleUserAction,unmuteButtonSelector:this.handleMuteButtonClick("uiDidUnmuteUser"),muteButtonSelector:this.handleMuteButtonClick("uiDidMuteUser"),blockOrReportButtonSelector:this.handleBlockOrReportClick,reportButtonSelector:this.handleBlockOrReportClick}),this.on("mousedown",{unmuteButtonSelector:this.preventFocus,muteButtonSelector:this.preventFocus}),this.on(document,"uiUnfollowAction",this.unfollow),this.on(document,"uiCancelFollowRequestAction",this.cancel),this.on(document,"uiUnblockAction",this.unblock),this.on(document,"uiRetweetOnAction dataRetweetOnAction",this.retweetsOn),this.on(document,"uiRetweetOffAction dataRetweetOffAction",this.retweetsOff),this.on(document,"uiDeviceNotificationsOnAction dataDeviceNotificationsOnAction",this.notificationsOn),this.on(document,"uiDeviceNotificationsOffAction dataDeviceNotificationsOffAction",this.notificationsOff),this.on(document,"uiShowMobileNotificationsConfirm",this.redirectToMobileNotifications),this.on(document,"uiShowPushTweetsNotificationsConfirm",this.redirectToPushNotificationsHelp),this.on(document,"uiUpdateMuteButtonState",this.updateMuteButtonState),this.on(document,"uiBlockAction",this.block),this.on(document,"uiDidBlockUser",this.blockUserConfirmed),this.on(document,"uiDidTriggerBlockingAction",this.block)))):void this.on("click",{followButtonSelector:this.blockFollowWithSignupDialog})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(121),o=s(a),r=i(123),c=s(r),l=i(126),d=s(l),u=i(138),h=s(u),f=i(539),m=s(f),p=i(352),g=s(p),v=i(541),b=s(v),w=i(542),S=s(w);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({dropdownThresholdSelector:".dropdown-threshold"}),this.scrollIntoView=function(){var t=this.$node.closest(this.attr.dropdownThresholdSelector),e=void 0,i=void 0;t.length&&(e=this.$node.find(this.attr.dropDownSelector),i=e.offset().top+e.outerHeight()-(t.offset().top+t.height()),i>0&&t.animate({scrollTop:t.scrollTop()+i}))},this.after("initialize",function(){this.on("uiDropdownOpened",this.scrollIntoView),this.on(document,"uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems uiHasInjectedRangeTimelineItems",this.applyARIAAttrs)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(540),c=s(r),l=(0,o.default)(c.default,n);e.default=l},,,function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.preventDefault=function(t,e,i){t.preventDefault()},this.composeHandler=function(){var t=arguments,e={};return function(i,s){for(var n=0,a=t.length;n<a&&t[n].call(this,i,s,e)!==!1;n++);}},this.getTweetForEvent=function(e,i){var s=t(e.target),n=void 0;return s.is(this.attr.tweetItemSelector)&&(n=s),n||(n=s[i](this.attr.tweetItemSelector)),n},this.getClosestTweet=function(t,e,i){var s=this.getTweetForEvent(t,"closest"),n=!!s.length;return n&&(i.$tweet=s),n},this.getDataForTweet=function(t){return{id:t.attr("data-tweet-id"),screenName:t.attr("data-screen-name"),isTweetProof:"true"===t.attr("data-is-tweet-proof"),viewerFollowsAuthor:"true"===t.attr("data-you-follow"),viewerBlocksAuthor:"true"===t.attr("data-you-block"),featureContext:t.attr("data-feature-context"),mediaType:this.getMediaType(t),photoCount:t.find(".animated-gif, .js-adaptive-photo, .AdaptiveStreamGridImage").length,momentId:t.attr("data-moment-id")}},this.getMediaType=function(t){var e="";return 0!==t.find(".js-adaptive-photo").length?e="image":"player"===t.attr("data-card2-type")?e="video":(t.attr("data-has-cards")||t.hasClass("has-content"))&&(e="media"),e},this.mkTweetDataCollector=function(){var t=this,e=arguments;return function(i){for(var s={},n=0,a=e.length;n<a;n++)s=o.default.merge(s,e[n].call(t,i));return s=o.default.merge(s,t.getDataForTweet(i))}},this.mkTweetDataCollectorForAction=function(){var t=this.mkTweetDataCollector.apply(this,arguments);return function(e,i,s){return s.tweetData=t(s.$tweet),!0}},this.triggerTweetAction=function(t){return function(e,i,s){var n="function"==typeof t?t.call(this,e,i,s):t;this.trigger(s.$tweet,n,s.tweetData)}}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(126),o=s(a);e.default=n}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({dmLinkSelector:".js-dm-dialog, .dm-button, .global-dm-nav"}),this.openDialog=function(e,i){e.preventDefault();var s=t(i.el);i={id:c.default.getId(s),screen_name:c.default.getScreenName(s),name:c.default.getName(s),oto_only:!0},this.trigger("uiNeedsDMDialog",i)},this.after("initialize",function(){this.on(document,"click",{dmLinkSelector:this.openDialog})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(541),c=s(r);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({dmImagePreviewSelector:".dm-media-preview",dmPreviewSelector:".dm-media"}),this.loadImage=function(e,i){var s=this,n=t('<img class="dm-media-image"/>'),a=this.select("dmImagePreviewSelector");a.empty(),n.on("load",function(t){a.empty().append(n),n.attr({"data-height":n[0].height,"data-width":n[0].width}),h.default.resizeMedia(n,s.select("dmPreviewSelector")),s.position();var e=parseFloat(n.css("margin-top"));e&&n.css("margin-bottom",e),s.trigger("uiDMMediaLoaded",{url:n.attr("src"),id:i})}),n.on("error",function(t){return s.trigger("uiDMMediaFailed",{url:n.attr("src"),id:i})}),n.attr("src",e)},this.openDialog=function(t,e){this.calculateScrollbarWidth(),h.default.resetMinSize(this.select("dmPreviewSelector")),this.loadImage(e.imgUrl,e.dmId),this.open()},this.renderConversation=function(t,e){this.trigger("uiDMDialogMediaPreviewClosed")},this.after("initialize",function(){this.on(document,"uiDMDialogMediaPreview",this.openDialog),this.on("uiDialogCloseRequested",this.renderConversation)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r),l=i(165),d=s(l),u=i(545),h=s(u);e.default=(0,o.default)(n,c.default,d.default)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var e=300,i=592,s=12,n=48;return{galleryWidth:function(e,i){var s=t(window).width()-2*n,a=Math.min(s,e.width());return Math.max(i.width(),a)},resetMinSize:function(t){this.galW=i,this.galH=e,t.width(this.galW),t.css("min-height",this.galH)},resizeMedia:function(e,i,a,o,r){var c=i.find(o).add(i.find(".modal-header")).map(function(){return t(this).outerHeight()}).get().reduce(function(t,e){return t+e}),l=t(window).height()-2*s,d=t(window).width()-2*n,u=l-c,h=d,f=e[0].getBoundingClientRect(),m=f.bottom-f.top,p=f.right-f.left,g=p/m;a&&(p+=130,m+=100),m>u&&(p=Math.ceil(p*(u/m)),m=u,e.width(p).height(m)),p>h&&(p=h,m=Math.ceil(p/g),e.width(p).height(m));var v=i.find(".GalleryNav").hasClass("enabled");(!v||p>this.galW)&&(this.galW=p,i.width(this.galW)),m+c>this.galH?(this.galH=m+c,i.css("min-height",this.galH),e.css("margin-top",0)):r?i.css("min-height",0):(e.css("margin-top",(this.galH-c-m)/2),e.css("margin-bottom",(this.galH-c-m)/2))}}}();e.default=i}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeSendDM=function(t,e){var i=e.conversation_id?"dm_existing_conversation_dialog":"dm_new_conversation_dialog",s=this.buildScribeData(e);if(this.scribe({component:i,action:"send_dm"},e,s),e.tweet_id&&this.scribe({component:i,action:"send_tweet_dm"},{conversation_id:e.conversation_id||e.recipient_ids,status_id:e.tweet_id},s),e.media_data&&e.media_data.fileType===c.default.GIF){var n=!!e.media_data.foundMediaInfo;this.scribe({component:i,element:n?"remote":"local",action:"send_gif_dm"})}},this.buildScribeData=function(t){var e={};if(t.message_me_scribe_data){if(t.message_me_scribe_data.userId){var i={item_type:h.default.user,id:t.message_me_scribe_data.userId};e.items=[i]}t.message_me_scribe_data.cardName&&(e.context=t.message_me_scribe_data.cardName),t.message_me_scribe_data.cardUri&&(e.message=t.message_me_scribe_data.cardUri)}return e},this.scribeCardInDmImpression=function(t,e){var i=e&&{items:[e.cardItem]};this.scribe({component:"dm_existing_conversation_dialog",element:"platform_card",action:"show"},i)},this.scribeTypingIndicator=function(t,e){var i="uiDMTypingIndicatorAvatarAdded"===t.type?"impression":"refresh";this.scribe({component:"dm_existing_conversation_dialog",element:"typing_indicator",action:i},e)},this.muteDurationScribeAction={0:"mute_dm_thread_forever",1:"mute_dm_thread_1h",2:"mute_dm_thread_8h",3:"mute_dm_thread_1w"},this.scribeNotificationsMute=function(t,e){var i=this.muteDurationScribeAction[e.mute_duration];e.enable_notifications===!1&&i&&this.scribe({component:"dm_existing_conversation_dialog",action:i})},this.after("initialize",function(){this.scribeOnEvent("uiComposeNewDMWithTweet","share_via_dm"),this.scribeOnEvent("uiDMDialogOpenedNewConversation","open"),this.scribeOnEvent("uiDMDialogOpenedConversation","open"),this.scribeOnEvent("uiDMDialogOpenedConversationList","open"),this.scribeOnEvent("uiDMDialogDeleteMessage",{component:"dm_existing_conversation_dialog",action:"delete_dm"}),this.scribeOnEvent("uiDMDialogMarkSpam",{component:"dm_existing_conversation_dialog",action:"report_as_spam"}),this.scribeOnEvent("uiDMDialogMarkMessage",{element:"mark_all_as_read",action:"click"}),this.scribeOnEvent("uiDMMediaLoaded","media_preview"),this.scribeOnEvent("uiDMMediaFailed","media_preview"),this.scribeOnEvent("uiDMResendConfirm",{component:"dm_existing_conversation_dialog",element:"error",action:"retry"}),this.scribeOnEvent("dataDMTypingPublished",{component:"dm_existing_conversation_dialog",action:"publish_typing"}),this.on("uiDMSendMessage",this.scribeSendDM),this.on("uiNewDMCardLoaded",this.scribeCardInDmImpression),this.on("uiDMTypingIndicatorAvatarAdded uiDMTypingIndicatorAvatarRefreshed",this.scribeTypingIndicator),this.on("uiToggleNotifications",this.scribeNotificationsMute)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(393),c=s(r),l=i(142),d=s(l),u=i(144),h=s(u),f=(0,o.default)(n,d.default);e.default=f},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.markDMsAsRead=function(e,i){i=i||{},i.retry=i.retry||void 0===i.retry;var s=t.noop,n=t.noop;i.from_notification?s=u(e.target,function(t){return"msgCount"in t?"uiReadStateChanged":null}):(s=function(t){"success"!==t.text?n.call(this,t):this.trigger(e.target,"dataDMReadSuccess",t)},n=function(t){i.retry?(i.retry=!1,this.trigger(e.target,"dataMarkDMsAsRead",i)):this.trigger(e.target,"dataDMReadError",t)}),this.post({url:"/i/messages/mark_read",data:{last_message_id:i.last_message_id,recipient_id:i.recipient_id,recipient_name:i.recipient_name,get_count:i.from_notification},eventData:i,success:s.bind(this),error:n.bind(this)})},this.after("initialize",function(){this.on("dataMarkDMsAsRead",this.markDMsAsRead)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=i(347),d=s(l),u=d.default.triggerFn;e.default=(0,o.default)(n,c.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({open:!1,text:"",welcomeMessageId:void 0,conversation:{id:null},compose:{id:null,screenName:null,name:null,avatar:null}}),this.openDMDialog=function(t,e){this.attr.open&&((this.attr.conversation||{}).id?this.openConversation():this.openCompose())},this.openConversation=function(){var t=this.attr.conversation||{};this.trigger("uiNeedsDMDialog",{conversation_id:t.id,default_composer_text:this.attr.text,fromInitData:!0})},this.openCompose=function(){var t=this.attr.compose||{};this.trigger("uiNeedsDMDialog",{id:t.id,screen_name:t.screenName,name:t.name,profile_image_url_https:t.avatar,default_composer_text:this.attr.text,welcome_message_id:this.attr.welcomeMessageId,fromInitData:!0})},this.after("initialize",function(){this.on("uiSwiftLoaded uiPopStateNavigate",this.openDMDialog)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a);e.default=(0,o.default)(n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){var t=0;this.triggerUnreadCount=function(e,i){i=i||{},t=i.msgCount,t>0?this.trigger(e.target,"dataUserHasUnreadDMsWithCount",{msgCount:t}):this.trigger(e.target,"dataUserHasNoUnreadDMsWithCount")},this.dispatchUnreadNotification=function(t,e){var i=e&&e.d||{};"ok"===i.status&&null!=i.response&&this.triggerUnreadCount(t,{msgCount:i.response})},this.checkForEnvelope=function(e,i){i&&"profile"===i.section&&this.triggerUnreadCount(e,{msgCount:t})},this.after("initialize",function(){this.on("uiReadStateChanged",this.triggerUnreadCount),this.on("dataNotificationsReceived",this.dispatchUnreadNotification),this.on("uiPageChanged",this.checkForEnvelope)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a);e.default=(0,o.default)(n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.dismiss=function(t,e){this.post({url:["/i/feedback/dismiss/",e.feedbackId,".json"].join(""),success:"dataB2CFeedbackDismissed",error:"dataB2CFeedbackDismissedFailed"}),this.trigger("uiDMHideError")},this.after("initialize",function(){this.on(document,"uiB2CFeedbackDismiss",this.dismiss)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=(0,o.default)(n,c.default);e.default=l},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.getFeedbackItem=function(t){return{id:t,item_type:h.default.feedbackRequest}},this.scribeFeedbackDismiss=function(t,e){e&&this.scribe({component:this.getFeedbackComponent[e.cardName],element:e.currentView,action:"dismiss"},{items:[this.getFeedbackItem(e.feedbackId)]})},this.after("initialize",function(){this.getFeedbackComponent={},this.getFeedbackComponent[m.default.feedbackNpsCardName]=m.default.feedbackNpsScribeComponentName,this.getFeedbackComponent[m.default.feedbackCsatCardName]=m.default.feedbackCsatScribeComponentName,this.on(document,"uiB2CFeedbackDismiss",this.scribeFeedbackDismiss)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r),l=i(139),d=s(l),u=i(144),h=s(u),f=i(552),m=s(f);e.default=(0,o.default)(n,c.default,d.default)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="2586390716:feedback_nps",s="2586390716:feedback_csat",n="nps_feedback_survey",a="csat_feedback_survey",o={feedbackNpsCardName:i,feedbackCsatCardName:s,feedbackNpsScribeComponentName:n,feedbackCsatScribeComponentName:a};e.default=o},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0,dmDialogSelector:"#dm_dialog",throttleInterval:3e3,foregroundPollInterval:3e3,burstPollInterval:3e3,burstPollDuration:3e5,maxPollInterval:6e4}),this.dispatch=function(t){t&&(m.default.updateNotificationState(t.note),this.trigger("dataNotificationsReceived",t.note))},this.makeToastRequest=function(t,e,i){this.get({url:"/i/toast_poll",data:i,eventData:e,success:this.dispatch.bind(this),headers:{"X-Twitter-Polling":!0},returnNotificationData:!0})},this.requestUserUpdates=function(){this.get({url:"/i/direct_messages/user_updates",data:{cursor:this.dmCursor,active_conversation:this.activeConversationVisible?this.activeConversation:void 0
},success:"dataDMUserUpdates"})},this.requestConversationList=function(t,e){var i={};m.default.addDMData(i),this.makeToastRequest(t,e,i)},this.attachBackgroundPoller=g.default.once(function(){this.attachChild(o.default,document,{burstPollInterval:this.attr.burstPollInterval,burstDuration:this.attr.burstPollDuration,maxPollInterval:this.attr.maxPollInterval})}),this.updateActiveConversation=function(t,e){this.activeConversation=e.conversation_id},this.updateActiveConversationVisibility=function(t,e){this.activeConversationVisible="uiDMConversationActivityVisible"===t.type},this.after("initialize",function(){this.attachChild(d.default,document,{dmDialogSelector:this.attr.dmDialogSelector,pollingInterval:this.attr.foregroundPollInterval}),c.default.get("notifications")&&"Notification"in window&&"granted"===Notification.permission&&this.attachBackgroundPoller(),this.on("uiNativeNotificationPermissionGranted",this.attachBackgroundPoller),this.on("uiDMPoll",this.requestConversationList),this.on("uiDMRequestUserUpdates",g.default.throttle(this.requestUserUpdates,this.attr.throttleInterval)),this.on("dataDMUpdate",this.requestUserUpdates),this.on("uiDMConversationUpdated",this.updateActiveConversation),this.on("uiDMConversationActivityHidden uiDMConversationActivityVisible",this.updateActiveConversationVisibility)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(554),o=s(a),r=i(456),c=s(r),l=i(555),d=s(l),u=i(111),h=s(u),f=i(342),m=s(f),p=i(126),g=s(p),v=i(345),b=s(v),w=i(240),S=s(w),C=i(506),y=s(C),T=i(227),D=s(T),M=(0,h.default)(n,S.default,b.default,y.default,D.default);e.default=M},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({burstDuration:5,burstPollInterval:3e3,dmToastType:"direct_message",maxPollInterval:6e4,noTeardown:!0}),this.possiblyStartBurstPolling=function(t,e){e.should_request_inbox||e.is_empty||(clearTimeout(this.stopTimeout),this.timer.resume(),this.stopTimeout=setTimeout(this.timer.pause.bind(this.timer),this.attr.burstDuration))},this.after("initialize",function(){this.timer=o.default.setIntervalEvent("uiDMRequestUserUpdates",this.attr.burstPollInterval,{},this.attr.noTeardown),this.timer.pause(),o.default.setIntervalEvent("uiDMRequestUserUpdates",this.attr.maxPollInterval,{},this.attr.noTeardown),this.on("uiSwiftLoaded","uiDMRequestUserUpdates"),this.on("dataDMUserUpdates",this.possiblyStartBurstPolling)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(110),o=s(a),r=i(111),c=s(r),l=(0,c.default)(n);e.default=l},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({dmDialogSelector:"#dm_dialog",pollingInterval:3e3,noTeardown:!0}),this.pollIfForeground=function(){this.isDocumentVisible()&&this.isDialogVisible()&&this.trigger("uiDMRequestUserUpdates")},this.isDialogVisible=function(){return this.$dmDialog.is(":visible")},this.isDocumentVisible=function(){return"visible"===document.visibilityState},this.after("initialize",function(){this.$dmDialog=this.select("dmDialogSelector"),this.timer=o.default.setIntervalEvent("uiDMForegroundPoll",this.attr.pollingInterval,{},!0),this.on("uiDMForegroundPoll",this.pollIfForeground)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(110),o=s(a),r=i(111),c=s(r),l=(0,c.default)(n);e.default=l},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({draggingClass:"currently-dragging",supportsDraggingClass:"supports-drag-and-drop"}),this.dragEnter=function(){this.$node.addClass(this.attr.draggingClass)},this.dragLeave=function(){this.$node.removeClass(this.attr.draggingClass)},this.addSupportsDraggingClass=function(){this.$node.addClass(this.attr.supportsDraggingClass)},this.hasSupport=function(){return"draggable"in document.createElement("span")&&!(0,o.default)().msie},this.after("initialize",function(){this.hasSupport()&&(this.addSupportsDraggingClass(),this.on("uiDragEnter",this.dragEnter),this.on("uiDragLeave uiDrop",this.dragLeave))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(156),o=s(a),r=i(111),c=s(r),l=i(557),d=s(l);e.default=(0,c.default)(n,d.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({fileTypeRegExp:!1}),this.childHover=function(e){t.contains(this.$node.get(0),e.target)&&(e.stopImmediatePropagation(),this.inChild="dragenter"===e.type)},this.hover=function(t){if(t.preventDefault(),this.inChild)return!1;var e=this.prepareData(t);this.trigger("dragenter"===t.type?"uiDragEnter":"uiDragLeave",e)},this.finish=function(t){t.stopImmediatePropagation(),this.inChild=!1,this.trigger("uiDragLeave")},this.preventDefault=function(t){return t.preventDefault(),!1},this.detectDragEnd=function(e){this.detectingEnd||(this.detectingEnd=!0,t(document.body).one("mousemove",this.dragEnd.bind(this)))},this.dragEnd=function(){this.detectingEnd=!1,this.trigger("uiDragEnd")},this.outOfBounds=function(t){var e=t.originalEvent.pageX,i=t.originalEvent.pageY,s=document.body.clientWidth,n=document.body.clientHeight;(e<=0||i<=0||i>=n||e>=s)&&this.dragEnd()},this.prepareData=function(t){var e=(t.originalEvent||t).dataTransfer,i={};i.types=Array.prototype.slice.call(e.types,0);var s=e.items||e.files;if(s){i.items=[];for(var n=0;n<s.length;++n){var a=s[n];i.items.push({type:a.type})}}else i.items=null;return{dataTransfer:i}},this.after("initialize",function(){this.inChild=!1,this.on(document.body,"dragenter dragover",this.detectDragEnd),this.on(document.body,"dragleave",this.outOfBounds),this.on("dragenter dragleave",o.default.onlyHandleEventsWithFiles(this.hover,this.attr.fileTypeRegExp)),this.on("dragover drop",o.default.onlyHandleEventsWithFiles(this.preventDefault,this.attr.fileTypeRegExp)),this.on("dragenter dragleave",o.default.onlyHandleEventsWithFiles(this.childHover,this.attr.fileTypeRegExp)),this.on(document,"uiDragEnd drop",this.finish)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(400),o=s(a);e.default=n}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({itemSelector:".tweet[data-dynamic-preroll=true]",maxAdRequest:10,tweetIdAttr:"data-tweet-id",impressionIdAttr:"data-impression-id",includeLongVideos:!1}),this.initialAdFetch=function(t,e){var i=this.getTweetInfo(this.select("itemSelector"));this.fetchAdsAndCache(i)},this.timelineAdFetch=function(e,i){var s=this.getTweetInfo(t(i.items_html).find(this.attr.itemSelector));this.fetchAdsAndCache(s)},this.getTweetInfo=function(e){var i=this;return e.map(function(e,s){var n=t(s);return{id:n.attr(i.attr.tweetIdAttr),promoted_id:n.attr(i.attr.impressionIdAttr)}}).get()},this.isMarketplaceTweet=function(t){return!t.promoted_id},this.fetchAdsAndCache=function(t){var e=this;this.tweetRefreshCache=this.tweetRefreshCache.concat(t.filter(this.isMarketplaceTweet)),t.forEach(function(t){e.isMarketplaceTweet(t)||(e.amplifyTweets[e.adCacheKey(t)]=t)}),this.fetchAds(t)},this.fetchAds=function(t,e){var i=this;if(t&&0!==t.length){var s=void 0;for(s=0;s<t.length;s+=this.attr.maxAdRequest){var n=t.slice(s,s+this.attr.maxAdRequest),a=n.map(function(t){return i.requestsInFlight[i.adCacheKey(t)]=!0,{tweet_id:t.id,impression_id:t.promoted_id}}),o=void 0;e&&e.adId&&e.dynamicPrerollType&&(o={preroll_id:e.adId,dynamic_preroll_type:e.dynamicPrerollType}),this.post({url:"/i/videoads/v2/prerolls.json",data:{tweets:JSON.stringify({tweets:a,trigger_preroll:o,include_long_videos:this.attr.includeLongVideos})},success:this.handleSuccess.bind(this,n),error:this.handleError.bind(this,n)})}}},this.handleSuccess=function(t,e){var i=this,s={},n=e.autoplay_blacklist;this.removeInFlightRequests(t),e.video_analytics_scribe.forEach(function(t){var a=e.prerolls.find(function(e){return e.tweet_id===t.tweet_id&&e.impression_id===t.impression_id&&e.live_event_id===t.live_event_id})||{},o={adId:a.preroll_id,dynamicPrerollType:a.dynamic_preroll_type,autoplayBlacklist:n,videoAnalyticsScribePassthrough:t.video_analytics_scribe_passthrough};a.promoted_content&&(o.promotedContent={impressionId:a.promoted_content.impression_id,disclosureType:a.promoted_content.disclosure_type}),a.media_info&&(o.mediaInfo=a.media_info);var r=i.adCacheKey({id:t.tweet_id,promoted_id:t.impression_id});i.amplifyTweets[r]&&(i.amplifyTweets[r].adId=a.preroll_id,i.amplifyTweets[r].dynamicPrerollType=a.dynamic_preroll_type),s[r]=o}),this.updateDynamicVideoAdCache(s)},this.handleError=function(e,i){this.removeInFlightRequests(e);var s=e.map(function(e){return t.extend({error_message:i.message},e)});this.scribe({element:"dynamic_video_ads",action:"dynamic_preroll_request_error"},{items:s})},this.removeInFlightRequests=function(t){var e=this;t.forEach(function(t){return delete e.requestsInFlight[e.adCacheKey(t)]})},this.refreshCache=function(t,e){var i=this;if(this.clearDynamicVideoAdCache(),e.tweet&&e.tweet.id){var s=this.adCacheKey({id:e.tweet.id,promoted_id:e.tweet.promoted_id});this.requestsInFlight[s]&&this.scribe({element:"dynamic_video_ads",action:"dynamic_preroll_request_late"},{items:[e.tweet]})}Object.keys(this.amplifyTweets).length>0&&setTimeout(function(){return i.updateDynamicVideoAdCache(i.amplifyTweets)},0),this.fetchAds(this.tweetRefreshCache,e.triggerAd)},this.after("initialize",function(){this.tweetRefreshCache=[],this.amplifyTweets={},this.requestsInFlight={},this.on(document,"uiRefreshVideoAdCache",this.refreshCache),this.on(document,"dataGotMoreTimelineItems",this.timelineAdFetch),this.initialAdFetch()})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=i(142),d=s(l),u=i(484),h=s(u),f=i(485),m=s(f),p=(0,o.default)(n,c.default,d.default,h.default,m.default);e.default=p}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({emailSettingsLinkSelector:".email-settings-link",phoneSettingsLinkSelector:".phone-settings-link",resendConfirmationEmailLinkSelector:".resend-confirmation-email-link",resetBounceLinkSelector:".reset-bounce-link"}),this.emailSettingsLink=function(){this.trigger("uiClickEmailSettingsLink")},this.phoneSettingsLink=function(){this.trigger("uiClickPhoneSettingsLink")},this.resendConfirmationEmail=function(e,i){this.trigger("uiResendConfirmationEmail",{unsuspend:t(e.target).hasClass("unsuspend-confirmation")})},this.resetBounceLink=function(){this.trigger("uiResetBounceLink")},this.after("initialize",function(){this.on("click",{emailSettingsLinkSelector:this.emailSettingsLink,phoneSettingsLinkSelector:this.phoneSettingsLink,resendConfirmationEmailLinkSelector:this.resendConfirmationEmail,resetBounceLinkSelector:this.resetBounceLink})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.resendConfirmationEmail=function(t,e){var i=function(t){this.trigger("uiShowMessage",{message:t.messageForFlash})},s=function(){this.trigger("uiShowMessage",{message:"Oops!  There was an error sending the confirmation email."})};this.post({url:"/account/resend_confirmation_email",eventData:null,data:e&&e.unsuspend?{unsuspend:!0}:{},success:i.bind(this),error:s.bind(this)})},this.resetBounceScore=function(){var t=function(){this.trigger("uiShowMessage",{message:"Your email notifications should resume shortly."})},e=function(){this.trigger("uiShowMessage",{message:"Oops! There was an error sending email notifications."})};this.post({url:"/bouncers/reset",eventData:null,data:null,dataType:this.DATA_TYPES.TEXT,success:t.bind(this),error:e.bind(this)})},this.after("initialize",function(){this.on("uiResendConfirmationEmail",this.resendConfirmationEmail),this.on("uiResetBounceLink",this.resetBounceScore)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=i(123);s(l);e.default=(0,o.default)(n,c.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeEmailSettingsClick=function(t,e){this.scribe({page:"self_unsuspend",section:"banner",component:"email_verification",element:"settings",action:"click"})},this.scribePhoneSettingsClick=function(t,e){this.scribe({page:"self_unsuspend",section:"banner",component:"phone_verification",action:"click"})},this.scribeResendConfirmationEmailClick=function(t,e){this.scribe({page:"self_unsuspend",section:"banner",component:"email_verification",element:"resend_confirmation_email",action:"click"})},this.after("initialize",function(){this.on("uiClickEmailSettingsLink",this.scribeEmailSettingsClick),this.on("uiClickPhoneSettingsLink",this.scribePhoneSettingsClick),this.on("uiResendConfirmationEmail",this.scribeResendConfirmationEmailClick)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r);e.default=(0,o.default)(n,c.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeOpen=function(t,e){this.scribeEmbedAction("open",e)},this.scribeOembedError=function(t,e){this.scribeEmbedAction("request_failed",e)},this.scribeEmbedCopy=function(t,e){this.scribeEmbedAction("copy",e)},this.scribeEmbedError=function(t,e){this.scribeEmbedAction("embed_request_failed")},this.scribeEmbedAction=function(t,e){this.scribeInteraction(t,h.default.merge(e,{scribeContext:{component:"embed_tweet_dialog"}}))},this.after("initialize",function(){this.on("uiEmbedRequestFailed",this.scribeEmbedError),this.on("uiNeedsEmbedTweetDialog uiNeedsEmbedVideoDialog",this.scribeOpen),this.on("uiOembedError",this.scribeOembedError),this.on("uiUserCopiedEmbedCode",this.scribeEmbedCopy)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r),l=i(141),d=s(l),u=i(126),h=s(u);e.default=(0,o.default)(n,c.default,d.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({dialogSelector:"#embed-tweet-dialog",dialogContentSelector:"#embed-tweet-dialog .modal-content",previewContainerSelector:".embed-preview",embedCodeDestinationSelector:".embed-destination",triggerSelector:".js-embed-tweet",overlaySelector:".embed-overlay",spinnerOverlaySelector:".embed-overlay-spinner",errorOverlaySelector:".embed-overlay-error",tryAgainSelector:".embed-overlay-error .retry-embed",includeParentTweetContainerSelector:".embed-include-parent-tweet",includeParentTweetSelector:".include-parent-tweet",includeCardContainerSelector:".embed-include-card",includeCardSelector:".include-card",embedTweetTitleSelector:".embed-tweet-title",embedVideoTitleSelector:".embed-video-title",embedTweetInstructionsSelector:".embed-tweet-instructions",embedVideoInstructionsSelector:".embed-video-instructions",embedWidth:"469px",top:"90px"}),this.didReceiveEmbedCode=function(t,e){this.select("overlaySelector").hide(),this.$embedCodeDestination.val(e.data.html),this.trigger(this.$dialog,"uiDialogContentChanged"),this.selectEmbedCode()},this.retryEmbedCode=function(t,e){this.select("overlaySelector").hide(),this.select("spinnerOverlaySelector").show(),this.trigger("uiOembedError",this.tweetData)},this.failedToReceiveEmbedCode=function(t,e){this.select("overlaySelector").hide(),this.select("embedCodeDestinationSelector").hide(),this.select("errorOverlaySelector").show(),this.clearOembed(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.updateEmbedCode=function(){this.select("embedCodeDestinationSelector").show(),this.select("overlaySelector").hide(),this.trigger("uiNeedsOembed",this.getOptions()),this.trigger(this.$dialog,"uiDialogContentChanged")},this.requestTweetEmbed=function(){if(this.widgetsAreLoaded()){var t=this.getOptions();"tweet"===this.widgetType?this.widgets.widgets.createTweet(this.tweetId(),this.$previewContainer[0],this.receivedTweetEmbed.bind(this),{width:this.attr.embedWidth,conversation:t.data.hide_thread?"none":"all",cards:t.data.hide_media?"hidden":"shown",lang:t.data.lang}):"video"===this.widgetType&&this.widgets.widgets.createVideo(this.tweetId(),this.$previewContainer[0],this.receivedTweetEmbed.bind(this),{width:this.attr.embedWidth,status:"shown"})}},this.clearTweetEmbed=function(){this.$previewContainer.empty()},this.clearOembed=function(){this.$embedCodeDestination.val("")},this.tearDown=function(){this.clearTweetEmbed(),this.clearOembed()},this.embedCodeCopied=function(){this.trigger("uiUserCopiedEmbedCode")},this.receivedTweetEmbed=function(t){t||this.trigger("uiEmbedRequestFailed")},this.includeParentTweet=function(){return this.$includeParentTweet.prop("checked")},this.showCard=function(){return this.$includeCard.prop("checked")},this.getOptions=function(){var t={lang:this.lang};return"tweet"===this.widgetType?(t.hide_thread=!this.includeParentTweet(),t.hide_media=!this.showCard()):"video"===this.widgetType&&(t.widget_type="video"),{data:t,retry:!0,tweetId:this.tweetId(),screenName:this.screenName()}},this.selectEmbedCode=function(){this.$embedCode.select()},this.setUpDialog=function(t,e){this.position(),this.eventData=t,this.tweetData=e,this.toggleIncludeParent(),this.toggleShowCard(),this.toggleTitle(),this.toggleInstructions(),this.resetIncludeParent(),this.resetShowCard(),this.updateEmbedCode(),this.requestTweetEmbed(),this.open(),this.fixPosition(),this.widgetsAreLoaded()||this.getWidgets()},this.setUpDialogForTweet=function(){this.widgetType="tweet",this.setUpDialog.apply(this,arguments)},this.setUpDialogForVideo=function(){this.widgetType="video",this.setUpDialog.apply(this,arguments)},this.fixPosition=function(){this.$dialog.css({position:"relative",top:this.attr.top})},this.resetIncludeParent=function(){this.$includeParentTweet.prop("checked",!0)},this.resetShowCard=function(){this.$includeCard.prop("checked",!0)},this.toggleIncludeParent=function(){this.$includeParentCheckboxContainer.toggle("tweet"===this.widgetType&&!!this.tweetHasParent())},this.toggleShowCard=function(){this.$includeCardCheckboxContainer.toggle("tweet"===this.widgetType&&!!this.hasCard())},this.toggleTitle=function(){this.$embedTweetTitle.toggle("tweet"===this.widgetType),this.$embedVideoTitle.toggle("video"===this.widgetType)},this.toggleInstructions=function(){this.$embedTweetInstructions.toggle("tweet"===this.widgetType),this.$embedVideoInstructions.toggle("video"===this.widgetType)},this.tweetId=function(){return this.tweetData.tweetId},this.tweetHasParent=function(){return this.tweetData.hasParentTweet},this.hasCard=function(){return this.getCardDataFromContainer(t(this.eventData.target)).hasCard},this.screenName=function(){return this.tweetData.screenName},this.widgetsReady=function(){this.$dialogContainer&&this.isOpen()&&this.requestTweetEmbed()},this.onOptionChange=function(){this.trigger("uiNeedsOembed",this.getOptions()),this.requestTweetEmbed()},this.restoreFocusToTweet=function(e){t(e.target).is(this.$dialog)&&this.activeEl&&this.trigger(t(this.activeEl).closest(".tweet"),"uiShouldAddFocusStyle")},this.after("initialize",function(){this.$previewContainer=this.select("previewContainerSelector"),this.$includeParentTweet=this.select("includeParentTweetSelector"),this.$embedCodeDestination=this.select("embedCodeDestinationSelector"),this.$includeParentCheckboxContainer=this.select("includeParentTweetContainerSelector"),this.$includeCard=this.select("includeCardSelector"),this.$includeCardCheckboxContainer=this.select("includeCardContainerSelector"),this.$embedCode=this.select("embedCodeDestinationSelector"),this.$embedTweetTitle=this.select("embedTweetTitleSelector"),this.$embedVideoTitle=this.select("embedVideoTitleSelector"),this.$embedTweetInstructions=this.select("embedTweetInstructionsSelector"),this.$embedVideoInstructions=this.select("embedVideoInstructionsSelector"),this.on(document,"uiNeedsEmbedTweetDialog",this.setUpDialogForTweet),this.on(document,"uiNeedsEmbedVideoDialog",this.setUpDialogForVideo),this.on("uiDialogCloseRequested",this.tearDown),this.on(document,"uiBeforePageChanged",this.tearDown),this.on(document,"uiDialogRestorePreviousFocus",this.restoreFocusToTweet),this.on(document,"dataOembedSuccess",this.didReceiveEmbedCode),this.on(document,"dataOembedError",this.failedToReceiveEmbedCode),this.on(document,"dataOembedRetry",this.retryEmbedCode),this.on(this.$embedCodeDestination,"copy cut",this.embedCodeCopied),this.on(this.$embedCode,"click",this.selectEmbedCode),this.on("click",{tryAgainSelector:this.updateEmbedCode}),this.on("change",{includeParentTweetSelector:this.onOptionChange,includeCardSelector:this.onOptionChange}),this.widgetType="tweet",this.lang=document.documentElement.getAttribute("lang")})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r),l=i(139),d=s(l),u=i(564),h=s(u),f=(0,o.default)(n,c.default,d.default,h.default);e.default=f}).call(e,i(10))},function(t,e){"use strict";function i(){this.widgetsAreLoaded=function(){return!(!this.widgets||!this.widgets.init)},this.getWidgets=function(){window.twttr||this.asyncWidgetsLoader(),this.widgets=window.twttr,window.twttr.ready(this._widgetsReady.bind(this))},this._widgetsReady=function(_){this.widgetsReady&&this.widgetsReady()},this.asyncWidgetsLoader=function(){window.twttr=function(t,e,i){var s=t.getElementsByTagName(e)[0];if(!t.getElementById(i)){var n=t.createElement(e);n.id=i,n.src="//platform.twitter.com/widgets.js",s.parentNode.insertBefore(n,s);var a={_e:[],ready:function(t){a._e.push(t)}};return window.twttr||a}}(document,"script","twitter-wjs")}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({feedbackCookie:"debug_data",data:{}}),this.getFeedbackData=function(t,e){this.trigger("dataFeedback",this.attr.data)},this.toggleFeedbackCookie=function(t,e){var i=!!e.enabled||null;(0,c.default)(this.attr.feedbackCookie,i),this.refreshPage(),this.checkDebugEnabled()},this.refreshPage=function(){document.location.reload(!0)},this.checkDebugEnabled=function(){this.trigger("dataDebugFeedbackChanged",{enabled:!!(0,c.default)(this.attr.feedbackCookie)})},this.addFeedbackData=function(t,e){var i=this.attr.data;for(var s in e)i[s]?i[s]=[].concat.apply(i[s],e[s]):i[s]=e[s]},this.logNavigation=function(t,e){this.addFeedbackData(t,{pushState:[{data:{href:e.href,module:e.module,title:e.title}}]}),e.init_data&&e.init_data.debugData&&this.addFeedbackData(t,e.init_data.debugData.data||{})},this.after("initialize",function(){this.data=this.attr.data||{},this.on("uiNeedsFeedbackData",this.getFeedbackData),this.on("uiToggleDebugFeedback",this.toggleFeedbackCookie),this.on("dataSetDebugData",this.addFeedbackData),this.on("uiPageChanged",this.logNavigation),this.checkDebugEnabled()})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(154),c=s(r),l=i(240),d=s(l);e.default=(0,o.default)(n,d.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({pastedContentSelector:".feedback-json-output",debugKeySelectorSelector:"select[name=debug-key]",debugDataText:"",dialogToggleSelector:".feedback-dialog .feedback-data-toggle"}),this.toggleDebugEnabled=function(e,i){this.trigger("uiToggleDebugFeedback",{enabled:t(i.el).is(".off")})},this.prepareDialog=function(t,e){this.trigger("uiNeedsFeedbackData")},this.openDialog=function(t,e){this.debugData=e,this.refreshAvailableDataKeys(),this.open()},this.refreshAvailableDataKeys=function(){var e=this.select("debugKeySelectorSelector");e.empty(),Object.keys(this.debugData).forEach(function(i){var s=t("<option>"+i+"</option>");e.append(s)}),this.refreshDebugJSON()},this.refreshDebugJSON=function(t){var e=this.select("debugKeySelectorSelector").val();if(e&&this.debugData[e]){var i=this.debugData[e].map(function(t){return t.data});this.select("pastedContentSelector").html(JSON.stringify(i,void 0,2))}},this.after("initialize",function(){this.on(document,"dataFeedback",this.openDialog),this.on(document,"uiPrepareFeedbackDialog",this.prepareDialog),this.on("change",{debugKeySelectorSelector:this.refreshDebugJSON}),this.on("click",{dialogToggleSelector:this.toggleDebugEnabled})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r);e.default=(0,o.default)(n,c.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({linkSelector:"a"}),this.scribeLinkClick=function(){this.scribe({component:"page_footer",action:"click"})},this.after("initialize",function(t){this.scribe({component:"page_footer",action:"impression"}),this.on("click",{linkSelector:this.scribeLinkClick})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r),l=(0,o.default)(n,c.default);e.default=l},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(111),a=s(n),o=i(142),r=s(o);e.default=(0,a.default)(r.default,function(){this.defaultAttrs({theme:"normal"}),this.scribeForeground=function(){this.scribe({element:this.attr.theme,action:"foreground"})},this.after("initialize",function(t){this.on("uiPageVisible",this.scribeForeground)})})},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.tweetHtml={},this.tweetPromotedBadgesHtml={},this.defaultAttrs({mediaSelector:".js-adaptive-photo,.tweet-media-img-placeholder,.AdaptiveStreamGridImage,.ProfileAvatar-container,.ProfileCardMini-avatar,.MomentMediaItem-entity--image,.ProfileStreamGridImage",galleryParentSelector:".Gallery",galleryMediaSelector:".Gallery-media",galleryTweetSelector:".GalleryTweet",closeSelector:".js-close, .Gallery-closeTarget",gallerySelector:".Gallery-content",imageSelector:".media-image",navSelector:".GalleryNav",prevSelector:".GalleryNav--prev",nextSelector:".GalleryNav--next",itemType:"tweet",tweetlessGalleryClass:"is-tweetless",hasStickersClass:"is-stickers"}),this.isOpen=function(){return this.$node.is(":visible")},this.open=function(e,i){this.calculateScrollbarWidth();var s=t(e.target).closest(this.attr.mediaSelector);!this.isOpen()&&s.length&&(i&&i.timelineSelector?this.$timeline=s.closest(i.timelineSelector):this.$timeline=s.parent(),this.clearTweet(),d.default.resetMinSize(this.select("gallerySelector")),this.render(s),t("body").addClass("gallery-enabled"),this.select("gallerySelector").addClass("show-controls"),this.trigger("uiGalleryOpened",i))},this.handleClose=function(t){this.isOpen()&&(t.stopPropagation(),this.closeGallery())},this.closeGallery=function(){t("body").hasClass("gallery-enabled")&&(t("body").removeClass("gallery-enabled"),this.select("galleryMediaSelector").empty(),this.resetStickers(),this.hideNav(),this.enableNav(!1,!1),this.off(window,"resize",this.debouncedResize),delete this.$timeline,delete this.$current,this.trigger("uiGalleryClosed"),this.trigger("uiDialogClosed"))},this.render=function(t){this.resetStickers(),this.$current=t,this.renderNav(),this.trigger(t,"uiGalleryMediaLoad"),this.renderMedia(t)},this.renderNav=function(){if(this.$current){var t=this.$timeline.find(this.attr.mediaSelector),e=t.index(this.$current),i=t.slice(0,e),s=t.slice(e+1),n=s.length>0,a=i.length>0;this.enableNav(n,a),n||a?this.showNav():this.hideNav()}},this.preloadNeighbors=function(t){this.preloadRecursive(t,"next",2),this.preloadRecursive(t,"prev",2)},this.clearTweet=function(){this.select("galleryTweetSelector").empty()},this.flushTweet=function(e){var i=this.getTweetId(t(e.target));i&&delete this.tweetHtml[i]},this.getTweet=function(t){if(t)if(this.tweetHtml[t])this.renderTweet(t,this.tweetHtml[t].tweetHtml,this.tweetHtml[t].tweetStickers);else{this.$current&&this.getTweetId(this.$current)===t&&this.select("galleryMediaSelector").find(".media-image,iframe").hide();var e={id:t,modal:"gallery",hasStickers:h.default.getDeciderValue("stickersExperience")};this.trigger("uiGetTweet",e)}},this.gotTweet=function(t,e){e.id&&e.tweet_html&&(this.tweetHtml[e.id]={tweetHtml:e.tweet_html,tweetStickers:e.tweet_stickers},e.sourceEventData.promotedBadgeHtml&&(this.tweetPromotedBadgesHtml[e.id]=e.sourceEventData.promotedBadgeHtml),this.renderTweet(e.id,e.tweet_html,e.tweet_stickers))},this.moveDropdownToActionList=function(t){var e=t.find(".ProfileTweet-action--more"),i=t.find(".stream-item-footer .ProfileTweet-actionList");e.appendTo(i)},this.renderTweet=function(e,i,s){if(this.$current&&this.getTweetId(this.$current)===e.toString()){var n=this.select("galleryTweetSelector"),a=this.select("gallerySelector"),o=this.select("galleryMediaSelector").find(".media-image,iframe"),r=a.closest(this.attr.galleryParentSelector);n.html(i);var c=this.tweetPromotedBadgesHtml[e];if(c&&n.find(".stream-item-footer").prepend(t(c)),r.hasClass("Gallery--large")&&this.moveDropdownToActionList(n),o.length&&(o.show(),d.default.resizeMedia(o,a,!1,this.attr.galleryTweetSelector)),s){var l=this.$timeline.find(this.attr.mediaSelector),u=l.filter('[data-tweet-id="'+e+'"]');u.length||(u=l.not("[data-tweet-id]"));var h=u.index(this.$current);h>=0&&s[h]&&(this.select("gallerySelector").addClass(this.attr.hasStickersClass),this.replaceMediaWithImageAndStickers(s[h]))}this.trigger("uiNeedUpdateInjectedTweetStats")}},this.getTweetId=function(t){return t.attr("data-status-id")?t.attr("data-status-id"):t.closest("[data-tweet-id]").attr("data-tweet-id")},this.getAllInDir=function(e,i){var s=void 0,n="prev"===i?-1:1,a=this.$timeline.find(this.attr.mediaSelector),o=a.index(e)+n;return o>-1&&(s=a.slice(o)),s||t()},this.getInDir=function(t,e){return this.getAllInDir(t,e).first()},this.preloadRecursive=function(t,e,i){var s=this;if(i&&1!==this.$timeline.find(this.attr.mediaSelector).length){if("next"===e&&this.getAllInDir(t,e).length<i&&!this.$timeline.hasClass("dashboard"))return void this.trigger("uiNearTheBottom");var n=this.getInDir(t,e);if(n&&n.length){n.attr("data-preloading",!0);var a=function(t){n.attr("data-preloaded",!0),s.getTweet(s.getTweetId(n)),s.preloadRecursive(n,e,--i)},o=function(){n.remove(),s.preloadRecursive(n,e,i)};c.default.load(this.getLargeMediaUrl(n),a,o)}}},this.renderMedia=function(t){t.attr("data-source-url")?this.loadVideo(t):this.loadImage(t),this.preloadNeighbors(t)},this.mediaLoaded=function(t){var e=this.getTweetId(t),i=this.select("gallerySelector");e?(this.getTweet(e),i.closest(this.attr.galleryParentSelector).removeClass(this.attr.tweetlessGalleryClass)):(this.clearTweet(),i.closest(this.attr.galleryParentSelector).addClass(this.attr.tweetlessGalleryClass)),this.trigger("uiGalleryMediaLoaded",{url:this.getLargeMediaUrl(t),id:t.attr("data-status-id")})},this.mediaFailed=function(t){this.trigger("uiGalleryMediaFailed",{url:this.getLargeMediaUrl(t),id:t.attr("data-status-id")}),t.remove(),this.next()},this.loadImage=function(e){var i=this;this.select("gallerySelector").removeClass(["video","is-hitTesting",this.attr.hasStickersClass].join(" "));var s=e.find("img").attr("alt"),n=t("<img>",{alt:s,addClass:"media-image"});n.on("load",function(t){var s=i.select("gallerySelector");e.attr("loaded",!0),i.select("galleryMediaSelector").html(n),n.attr({"data-height":n[0].height,"data-width":n[0].width}),d.default.resizeMedia(n,s,!1,i.attr.galleryTweetSelector,!0),i.$current=e,i.mediaLoaded(e)}),n.on("error",function(){return i.mediaFailed(e)}),n.attr("src",this.getLargeMediaUrl(e))},this.fixSnappyUrl=function(t){var e=t.attr("data-source-url"),i=/https:\/\/www.snappytv.com\/tc\/(\d+)\?autoplay=true&h=(\d+)&w=(\d+)/;if(i.test(e)){var s=2*t.attr("data-height"),n=2*t.attr("data-width");e=e.replace(i,"https://www.snappytv.com/tc/$1?autoplay=true&h="+s+"&w="+n),t.attr("data-source-url",e)}},this.loadVideo=function(e){var i=t("<iframe>");this.fixSnappyUrl(e),i.height(2*e.attr("data-height")).width(2*e.attr("data-width")).attr("data-height",2*e.attr("data-height")).attr("data-width",2*e.attr("data-width")).attr("src",e.attr("data-source-url")),
e.attr("loaded",!0),this.select("galleryMediaSelector").empty().append(i),this.$current=e,this.getTweet(e.attr("data-status-id")),this.select("gallerySelector").addClass("video").removeClass(this.attr.hasStickersClass)},this.prev=function(){this.gotoMedia("prev"),this.trigger("uiGalleryNavigatePrev")},this.next=function(){this.gotoMedia("next"),this.trigger("uiGalleryNavigateNext")},this.gotoMedia=function(t){if(this.$current){var e=this.getInDir(this.$current,t);e.length&&this.render(e)}},this.showNav=function(){this.select("navSelector").show()},this.hideNav=function(){this.select("navSelector").hide()},this.enableNav=function(t,e){t?this.select("nextSelector").addClass("enabled"):this.select("nextSelector").removeClass("enabled"),e?this.select("prevSelector").addClass("enabled"):this.select("prevSelector").removeClass("enabled")},this.getLargeMediaUrl=function(t){var e=t.attr("data-image-url");return t.attr("data-resolved-url-large")||e&&e+":large"},this.throttle=function(t,e,i){var s=!1;return function(){s||(t.apply(i,arguments),s=!0,setTimeout(function(){return s=!1},e))}},this.hideControls=function(){this.select("gallerySelector").removeClass("show-controls")},this.after("initialize",function(){this.on("uiReplyToTweet","uiOpenReplyDialog"),this.on("mousemove",this.hideControls),this.on(document,"dataDidDeleteTweet",this.closeGallery),this.on(document,"dataGotMoreMediaTimelineItems",this.renderNav),this.on(document,"uiOpenGallery",this.open),this.on(document,"uiOverlayNavigate uiCloseGallery",this.closeGallery),this.on(document,"uiShortcutEsc",this.handleClose),this.on(window,"popstate",this.closeGallery),this.on(document,"uiShortcutLeft",this.throttle(this.prev,200,this)),this.on(document,"uiShortcutRight",this.throttle(this.next,200,this)),this.on(document,"dataGotTweet",this.gotTweet),this.on(document,"dataFailedToGetTweet",this.clearTweet),this.on("click",{prevSelector:this.prev,nextSelector:this.next,closeSelector:this.handleClose}),this.on(document,"uiDidRetweet uiDidUnretweet uiDidFavoriteTweet uiDidUnfavoriteTweet",this.flushTweet)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(570),c=s(r),l=i(545),d=s(l),u=i(136),h=s(u),f=i(535),m=s(f),p=i(571),g=s(p),v=i(165),b=s(v),w=i(572),S=s(w),C=i(574),y=s(C),T=(0,o.default)(n,m.default,b.default,S.default,g.default,y.default);e.default=T}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(357),a=s(n),o={load:function(e,i,s){function n(t){o=!0,a.unbind("load"),s()}var a=t("<img/>"),o=!1;a.on("load",function(t){o||"error"===t.type||i(a)}),a.on("error",n),a.on("abort",n),a.attr("src",e)},loadMultiple:function(e){var i=a.default.unique(e),s=i.map(function(e){var i=t("<img>");return new Promise(function(t,s){return i.on("load",function(e){return t({width:i[0].width,height:i[0].height})}).on("error",function(){return s()}).attr("src",e)})});return Promise.all(s).then(function(t){var e={};return t.forEach(function(t,s){return e[i[s]]=t}),e})}};e.default=o}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){o.default.mixin(this,[c.default]),this.defaultAttrs({tweetSelector:".tweet",tweetTranslationSelector:".tweet-translation",tweetTranslationTextSelector:".tweet-translation-text",translateTweetSelector:".js-translate-tweet",needsTranslationClass:"needs-translation",permalinkContainerSelector:".permalink-tweet-container",permalinkClass:".permalink-tweet",languageSelector:".tweet-language",galleryTranslateButtonSelector:".Gallery .GalleryTweet .tweet .translate-button",translateButtonSelector:".translate-button",translationFeedbackButtonSelector:".js-translation-feedback-button",translationsLoadingSelector:".tweet-translation-loading"}),this.translateTweet=function(t){var e=this.tweetFromEvent(t);if(e.find(this.attr.tweetTranslationSelector).hasClass(this.attr.needsTranslationClass)){var i=this.interactionData(e);i.dest=e.find(this.attr.tweetTranslationSelector).data("destLang"),e.find(this.attr.translationsLoadingSelector).show(),this.trigger(e,"uiNeedsTweetTranslation",i)}},this.showTranslationFeedbackDialog=function(t){var e=this.tweetFromEvent(t),i=e.find(this.attr.tweetTranslationSelector);this.trigger(e,"uiNeedsTranslationFeedbackDialog",{tweetId:e.data("tweetId"),translation:i.data("translationText"),sourceLang:i.data("sourceLang"),destLang:i.data("destLang")})},this.tweetFromEvent=function(e){return t(e.target).closest(this.attr.tweetSelector)},this.showTweetTranslation=function(e,i){if(this.select("translationsLoadingSelector").hide(),i.item_html){var s=this.findTweetById(t(e.target),i.id_str);s.find(this.attr.translateButtonSelector).hide();var n=s.find(this.attr.tweetTranslationSelector);if(!i.translated_lang)return void s.find(this.attr.translateTweetSelector).hide();n.find(this.attr.languageSelector).html(i.translated_lang),n.data({translationText:i.text,sourceLang:i.source_lang}).removeClass(this.attr.needsTranslationClass).find(this.attr.tweetTranslationTextSelector).html(i.item_html),s.find(this.attr.translateTweetSelector).toArray().forEach(function(e){var i=t(e);i.is(this.attr.galleryTranslateButtonSelector)&&i.hide()},this)}},this.findTweetById=function(t,e){var i=this.tweetSelectorById(e);return t.is(i)?t:t.find(i)},this.tweetSelectorById=function(t){return this.attr.tweetSelector+"[data-tweet-id="+t.replace(/\D/g,"")+"]"},this.showError=function(t,e){this.select("translationsLoadingSelector").hide(),this.trigger("uiShowMessage",{message:"Unable to translate this Tweet. Please try again later."})},this.after("initialize",function(){this.on("dataTweetTranslationSuccess",this.showTweetTranslation),this.on("dataTweetTranslationError",this.showError),this.on("click",{translationFeedbackButtonSelector:this.showTranslationFeedbackDialog,translateTweetSelector:this.translateTweet})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(121),o=s(a),r=i(138),c=s(r),l=i(123);s(l);e.default=n}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({stickerSelector:".StickersMediaImage-stickerImage",stickerLinkSelector:".StickersMediaImage-stickerLink",stickerMediaImageSelector:".StickersMediaImage",hitTestingEnabledClass:"is-hitTesting"}),this.animateSticker=function(e){var i=t(e.target),s="stickerAnimation-"+i.data("animationRefIndex"),n=i.data("currentAnimationPattern");n="a"===n?"b":"a",i.data("currentAnimationPattern",n),s=s+"-"+n,i.css("-webkit-animation-name",s),i.css("animation-name",s)},this.transformSticker=function(t,e){return"matrix("+t.matrix.join(",")+")scale("+e+")"},this.generateStickerDataArray=function(t){var e=this.select("imageSelector").width();this.stickerData=t.map(function(t,i){var s=e*t.aspectRatio;return m.default.merge({width:e,height:s,halfWidth:e/2,halfHeight:s/2,animationRefIndex:i,matrix:[t.transformA,t.transformB,t.transformC,t.transformD,t.transformTx*e,t.transformTy*s]},t)},this)},this.generateTemplateVariables=function(t,e,i,s){var n=Math.ceil((e.width()-i.width())/2);return{image:t.src,width:t.width,height:t.height,bgWidth:i.width(),bgHeight:i.height(),blackBarWidth:n,stickers:this.stickerData.map(function(t){return m.default.merge(t,{link:s?"/i/stickers/"+t.id:"",transform:this.transformSticker(t,1)})},this)}},this.renderMainImageAndStickerPlaceholders=function(t,e){this.generateStickerDataArray(e);var i=h.default.getDeciderValue("stickersInteractivity"),s=this.generateTemplateVariables(t,this.select("galleryMediaSelector"),this.select("imageSelector"),i),n=g.default.render(s);this.$current.attr("loaded",!0),this.stickersFirstVisibleTime=Date.now(),this.select("galleryMediaSelector").html(n),this.$stickersContainer=this.select("stickerMediaImageSelector"),h.default.getDeciderValue("stickersInteractivityDuringLoading")||this.enableHitTesting()},this.detectedBrowser=function(){return(0,o.default)().name},this.isNotFirefoxOrIE=function(){var t=this.detectedBrowser();return!("mozilla"===t||"msie"===t)},this.isValidBrowserForSVG=function(){return!(document.implementation&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"))&&this.isNotFirefoxOrIE()},this.hypot=function(t,e){return Math.sqrt(t*t+e*e)},this.getBiggestRasterSticker=function(t){var e=t.images.raster;return e[e.length-1].url},this.findBestsizedRasterSticker=function(t){for(var e=!1,i=t.width*this.hypot(t.matrix[0],t.matrix[2]),s=t.height*this.hypot(t.matrix[1],t.matrix[3]),n=t.images.raster,a=0;a<n.length-1;a++)if(n[a].w>i&&n[a].h>s){e=n[a].url;break}return e?e:this.getBiggestRasterSticker(t)},this.determineStickerUrl=function(t){return this.isValidBrowserForSVG()&&t.images.vector?t.images.vector.url:this.findBestsizedRasterSticker(t)},this.loadStickersAsBlobUrls=function(t,e,i){var s=this;this.renderMainImageAndStickerPlaceholders(t,e);var n=this.stickerData.map(function(t){return t.url=s.determineStickerUrl(t),t.url}),a=this.$stickersContainer.width(),o=this.$stickersContainer.height();i===this.currentStickerKey&&c.default.createMapOfBlobUrls(n).then(function(t){i===s.currentStickerKey&&(s.urlToBlobUrlMap=t,Promise.all(s.stickerData.map(function(t){return this.generateHitTestPixels(t,a,o,i)},s)).then(function(){return s.beginHitTesting()}))})},this.loadMainImageAndStickers=function(t,e,i){var s=this;d.default.load(t,function(t){var n=t[0];s.loadStickersAsBlobUrls(n,e,i)})},this.replaceMediaWithImageAndStickers=function(t){var e=this.getLargeMediaUrl(this.$current),i=e+JSON.stringify(t);this.currentStickerKey!==i&&(this.currentStickerKey=i,this.loadMainImageAndStickers(e,t,i))},this.resetStickers=function(){this.lastHitIndex=-1,this.$stickersContainer=null,this.isHitTesting=!1,this.stickerData=[],this.currentStickerKey=null,this.urlToBlobUrlMap&&c.default.revokeMapOfBlobUrls(this.urlToBlobUrlMap),this.urlToBlobUrlMap=null},this.generateHitTestPixels=function(t,e,i,s){var n=this,a=document.createElement("canvas");a.width=e,a.height=i;var o=new Image,r=this.getBlobUrlForSticker(t);return new Promise(function(c,l){return o.onload=function(){var s=a.getContext("2d");s.transform.apply(s,t.matrix),s.drawImage(o,-t.halfWidth,-t.halfHeight,t.width,t.height),t.hitTestPixels=s.getImageData(0,0,e,i),c(t)},o.onerror=l,s===n.currentStickerKey&&r?void(o.src=n.urlToBlobUrlMap[t.url]):l()})},this.enableHitTesting=function(){this.select("gallerySelector").addClass(this.attr.hitTestingEnabledClass),this.isHitTesting=!0},this.getBlobUrlForSticker=function(t){return this.urlToBlobUrlMap&&this.urlToBlobUrlMap[t.url]},this.replaceTempImagesWithRealImages=function(){var e=this,i=this.select("stickerSelector");i.each(function(i,s){var n=e.stickerData[i],a=e.getBlobUrlForSticker(n);a&&t(s).css("background-image","url("+a+")")})},this.beginHitTesting=function(){this.enableHitTesting(),this.replaceTempImagesWithRealImages();var t=this.select("stickerSelector"),e=Math.max(0,v-(Date.now()-this.stickersFirstVisibleTime));setTimeout(function(){return t.trigger("uiAnimateSticker")},e)},this.getStickerHitIndex=function(t){if(!this.$stickersContainer)return-1;var e=this.$stickersContainer[0].getBoundingClientRect(),i=e.bottom-e.top,s=e.right-e.left;if(!s||!i)return-1;var n=this.$stickersContainer.offset(),a=(t.pageX-n.left)/s,o=(t.pageY-n.top)/i;return a<0||a>=1||o<0||o>=1?-1:this.stickerData.reduce(function(t,e,i){var s=e.hitTestPixels;return s&&s.data[4*(Math.floor(a*s.width)+Math.floor(o*s.height)*s.width)+3]?i:t},-1)},this.animateIfHitTestChanged=function(t){if(this.isHitTesting){var e=this.getStickerHitIndex(t);e!==this.lastHitIndex&&(this.lastHitIndex=e,this.select("stickerLinkSelector").css("cursor",e>=0?"pointer":"default"),e>=0&&this.select("stickerSelector").eq(e).trigger("uiAnimateSticker"))}},this.navigateIfHitTestSucceeds=function(t){if(this.isHitTesting){var e=this.getStickerHitIndex(t);e>=0&&this.select("stickerSelector").eq(e).trigger("click")}},this.preventWhenHitTesting=function(t){this.isHitTesting&&t.originalEvent&&(t.stopPropagation(),t.preventDefault())},this.after("initialize",function(){this.resetStickers(),this.on("uiAnimateSticker",{stickerSelector:this.animateSticker}),this.on("mousemove",{stickerMediaImageSelector:this.animateIfHitTestChanged}),this.on("click",{stickerLinkSelector:this.preventWhenHitTesting}),this.on("mouseup",{stickerLinkSelector:this.navigateIfHitTestSucceeds})}),this.before("teardown",this.resetStickers)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var a=i(156),o=s(a),r=i(388),c=s(r),l=i(570),d=s(l),u=i(136),h=s(u),f=i(126),m=s(f),p=i(573),g=s(p),v=500}).call(e,i(10))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("<style>\n\n.StickersMediaImage.media-image {\n  background-image: url('"),s.b(s.v(s.f("image",t,e,0))),s.b("');\n\n  width: "),s.b(s.v(s.f("bgWidth",t,e,0))),s.b("px;\n  height: "),s.b(s.v(s.f("bgHeight",t,e,0))),s.b("px;\n}\n\n.StickersMediaImage-blackBar {\n  width: "),s.b(s.v(s.f("blackBarWidth",t,e,0))),s.b("px;\n  height: "),s.b(s.v(s.f("bgHeight",t,e,0))),s.b("px;\n}\n\n"),s.s(s.f("stickers",t,e,1),t,e,0,238,1859,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("@-webkit-keyframes stickerAnimation-"),i.b(i.v(i.f("animationRefIndex",t,e,0))),i.b("-a {\n  0%   {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  13%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  53%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1.025); animation-timing-function: ease-in;}\n  100% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-out;}\n}\n@keyframes stickerAnimation-"),i.b(i.v(i.f("animationRefIndex",t,e,0))),i.b("-a {\n  0%   {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  13%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  53%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1.025); animation-timing-function: ease-in;}\n  100% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-out;}\n}\n@-webkit-keyframes stickerAnimation-"),i.b(i.v(i.f("animationRefIndex",t,e,0))),i.b("-b {\n  0%   {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  13%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  53%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1.025); animation-timing-function: ease-in;}\n  100% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-out;}\n}\n@keyframes stickerAnimation-"),i.b(i.v(i.f("animationRefIndex",t,e,0))),i.b("-b {\n  0%   {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  13%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  53%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1.025); animation-timing-function: ease-in;}\n  100% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-out;}\n}\n")}),t.pop()),s.b("\n"+i),s.b('</style>\n\n<div class="StickersMediaImage media-image">\n  <img src="'),s.b(s.v(s.f("image",t,e,0))),s.b('" class="StickersMediaImage-passthroughImage" />\n\n'),s.s(s.f("stickers",t,e,1),t,e,0,2015,2702,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.s(s.f("link",t,e,1),t,e,0,2029,2106,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('      <a class="StickersMediaImage-stickerLink js-nav" href="'),i.b(i.v(i.f("link",t,e,0))),i.b('">\n')}),t.pop()),s.b("\n"+i),s.b('      <div\n          class="StickersMediaImage-stickerImage js-tooltip"\n          data-original-title="'),s.b(s.v(s.f("tooltip",t,e,0))),s.b('"\n          data-animation-ref-index="'),s.b(s.v(s.f("animationRefIndex",t,e,0))),s.b('"\n\n          style="\n            width: '),s.b(s.v(s.f("width",t,e,0))),s.b("px;\n            height: "),s.b(s.v(s.f("height",t,e,0))),s.b("px;\n            left: -"),s.b(s.v(s.f("halfWidth",t,e,0))),s.b("px;\n            top: -"),s.b(s.v(s.f("halfHeight",t,e,0))),s.b("px;\n\n            -moz-transform:    "),s.b(s.v(s.f("transform",t,e,0))),s.b(";\n            -webkit-transform: "),s.b(s.v(s.f("transform",t,e,0))),s.b(";\n            -o-transform:      "),s.b(s.v(s.f("transform",t,e,0))),s.b(";\n            transform:         "),s.b(s.v(s.f("transform",t,e,0))),s.b(';\n          ">\n      </div>\n\n'),s.s(s.f("link",t,e,1),t,e,0,2674,2690,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("      </a>\n")}),t.pop())}),t.pop()),s.b('</div>\n\n<div class="StickersMediaImage-blackBar StickersMediaImage-blackBar--left"></div>\n<div class="StickersMediaImage-blackBar StickersMediaImage-blackBar--right"></div>\n'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function i(){this.defaultAttrs({requestReplyActivitySelector:"",requestRetweetedActivitySelector:".request-retweeted-popup",requestFavoritedActivitySelector:".request-favorited-popup",requestActivitySelectors:".request-retweeted-popup, .request-favorited-popup",requestTaggingActivitySelector:".request-tagging-popup",targetTweetSelector:".tweet",targetTaggedUsersListSelector:".popup-tagged-users-list",targetTitleSelector:"[data-activity-popup-title]",tweetPivotLinkSelector:".tweet-pivot-link",hiddenClass:"hidden"}),this.requestReplyActivity=function(t){this.trigger("uiRequestReplyActivity")},this.requestRetweetedActivity=function(t){this.requestActivityPopup(t),this.trigger("uiRequestRetweetedActivity")},this.requestFavoritedActivity=function(t){this.requestActivityPopup(t),this.trigger("uiRequestFavoritedActivity")},this.requestTaggingActivity=function(t){this.requestActivityPopup(t),this.trigger("uiRequestTaggingActivity")},this.requestActivityPopup=function(e,i){var s=t(e.target),n=s.closest(this.attr.targetTitleSelector).attr("data-activity-popup-title"),a=s.closest(this.attr.targetTweetSelector).attr("data-tweet-id"),o=i?i.usersHtml:null,r=void 0;e.preventDefault(),e.stopPropagation(),r=s.closest(this.attr.requestRetweetedActivitySelector).length?"retweeted_popup":s.closest(this.attr.requestTaggingActivitySelector).length?"media_tagged_popup":"favorited_popup",this.trigger("uiRequestActivityPopup",{titleHtml:n,contentId:a,usersHtml:o,component:r})},this.handleLoggedOutRetweetedActivityClick=function(t,e){this.trigger("uiLoggedOutActionAttempt",{action:"retweeted_activity_attempt"})},this.handleLoggedOutFavoritedActivityClick=function(t,e){this.trigger("uiLoggedOutActionAttempt",{action:"favorited_activity_attempt"})},this.uiOpenSignupDialog=function(t,e,i){this.trigger("uiOpenSignupDialog")},this.uiTweetPivotClick=function(e){var i=t(e.target),s={item_details:{item_type:"0",id:i.attr("data-item-id")},component_details:{id:i.attr("data-entity-id"),name:i.attr("data-name"),description:i.attr("data-id")}};this.trigger("uiTweetPivotClick",s)},this.after("initialize",function(){return this.attr.loggedIn?void this.on("click",{requestReplyActivitySelector:this.requestReplyActivity,requestRetweetedActivitySelector:this.requestRetweetedActivity,requestFavoritedActivitySelector:this.requestFavoritedActivity,requestTaggingActivitySelector:this.requestTaggingActivity,tweetPivotLinkSelector:this.uiTweetPivotClick}):void this.on("click",{requestActivitySelectors:this.uiOpenSignupDialog,requestRetweetedActivitySelector:this.handleLoggedOutRetweetedActivityClick,requestFavoritedActivitySelector:this.handleLoggedOutFavoritedActivityClick,requestTaggingActivitySelector:this.requestTaggingActivity})})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeGalleryOpened=function(t,e){this.scribe({element:"gallery",action:"open"},e)},this.scribeGalleryClosed=function(t,e){this.scribe({element:"gallery",action:"close"},e)},this.scribeGalleryMediaLoaded=function(t,e){var i={url:e.url,item_ids:[e.id]};this.scribe({element:"photo",action:"impression"},e,i)},this.scribeGalleryMediaFailed=function(t,e){var i={url:e.url,item_ids:[e.id]};this.scribe({element:"photo",action:"error"},e,i)},this.scribeGalleryNavigateNext=function(t,e){this.scribe({element:"next",action:"click"},e)},this.scribeGalleryNavigatePrev=function(t,e){this.scribe({element:"prev",action:"click"},e)},this.scribeGridPaged=function(t,e){this.scribe({element:"grid",action:"page"},e)},this.scribeGridOpened=function(t,e){this.scribe({element:"grid",action:"impression"},e)},this.after("initialize",function(){this.on(document,"uiGalleryOpened",this.scribeGalleryOpened),this.on(document,"uiGalleryClosed",this.scribeGalleryClosed),this.on(document,"uiGalleryMediaLoaded",this.scribeGalleryMediaLoaded),this.on(document,"uiGalleryMediaFailed",this.scribeGalleryMediaFailed),this.on(document,"uiGalleryNavigateNext",this.scribeGalleryNavigateNext),this.on(document,"uiGalleryNavigatePrev",this.scribeGalleryNavigatePrev),this.on(document,"uiGridPaged",this.scribeGridPaged),this.on(document,"uiGridOpened",this.scribeGridOpened)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r);e.default=(0,o.default)(n,c.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({birdSelector:"h1.bird-topbar-etched",spinnerContainer:"body",globalHeadingSelector:".global-nav h1",spinnerClass:"pushing-state",spinnerSelector:".pushstate-spinner"}),this.showSpinner=function(t,e){this.select("birdSelector").removeAttr("style"),this.select("spinnerContainer").addClass(this.attr.spinnerClass)},this.hideSpinner=function(t,e){this.select("spinnerContainer").removeClass(this.attr.spinnerClass)},this.addSpinner=function(){this.select("spinnerSelector").length||t('<div class="pushstate-spinner"></div>').insertAfter(this.select("globalHeadingSelector"))},this.after("initialize",function(){this.on("uiSwiftLoaded",this.addSpinner),this.on("uiShowGlobalLoadingIndicator",this.showSpinner),this.on("uiHideGlobalLoadingIndicator",this.hideSpinner)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=(0,o.default)(n);e.default=r}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({dropdownId:"swift_autocomplete_dropdown_goto_user",inputSelector:"input.username-input",usernameFormSelector:"form.goto-user-form"}),this.focus=function(){this.select("inputSelector").focus()},this.gotoUser=function(t,e){if(!e||!e.dropdownId||e.dropdownId===this.attr.dropdownId){if(t.preventDefault(),e&&e.item)return this.select("inputSelector").val(e.item.screen_name),void this.trigger("uiNavigate",{href:e.href});var i=this.select("inputSelector").val().trim();"@"===i.substr(0,1)&&(i=i.substr(1)),this.trigger("uiNavigate",{href:"/"+i})}},this.reset=function(){this.select("inputSelector").val(""),this.select("inputSelector").blur(),this.trigger(this.select("inputSelector"),"uiHideAutocomplete")},this.after("initialize",function(){this.on(document,"uiShortcutShowGotoUser",this.open),this.on("uiDialogOpened",this.focus),this.on("uiDialogClosed",this.reset),this.on(this.select("usernameFormSelector"),"submit",this.gotoUser),this.on("uiTypeaheadItemSelected uiTypeaheadSubmitQuery",this.gotoUser),d.default.attachTo(this.$node,{inputSelector:this.attr.inputSelector}),c.default.attachTo(this.$node,{inputSelector:this.attr.inputSelector,autocompleteAccounts:!1,datasourceRenders:[["accounts",["accounts"]]],deciders:this.attr.typeaheadData,eventData:{scribeContext:{component:"goto_user_dialog"}}})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(409),c=s(r),l=i(424),d=s(l),u=i(163),h=s(u),f=(0,o.default)(n,h.default);e.default=f},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({showShortcutsBtnSelector:"#show-shortcuts-btn",dismissShortcutsBtnSelector:"#dismiss-shortcuts-btn",suppressSRMsgCookie:"suppress_sr_shortcuts_msg",loggedIn:!1,closeOnOtherDialogOpened:!0,keyboardShortcuts:[]}),this.renderSRMessage=function(){if(!t("#kb-shortcuts-msg").length){var e=m.default.render({});t(e).insertBefore(document.body.firstChild)}},this.addMessage=function(){(0,d.default)(this.attr.suppressSRMsgCookie)||this.renderSRMessage()},this.removeMessage=function(){t("#kb-shortcuts-msg").remove(),(0,d.default)(this.attr.suppressSRMsgCookie,"1",{expires:1/0})},this.renderShortcutsDialog=function(){if(!t("#keyboard-shortcut-dialog").length){var e={keyboard_shortcuts:this.attr.keyboardShortcuts};t("body").append(h.default.render(e)),this.$dialogContainer=t("#keyboard-shortcut-dialog"),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector)}},this.showShortcutsDialog=function(){this.renderShortcutsDialog(),this.open()},this.after("initialize",function(){this.on(document,"click",{showShortcutsBtnSelector:this.showShortcutsDialog,dismissShortcutsBtnSelector:this.removeMessage}),this.on(document,"uiSwiftLoaded",this.addMessage),this.on(document,"uiOpenKeyboardShortcutsDialog",this.showShortcutsDialog)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r),l=i(154),d=s(l),u=i(579),h=s(u),f=i(580),m=s(f),p=(0,o.default)(n,c.default);e.default=p}).call(e,i(10))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"dialogs/close_button":i(217)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div id="keyboard-shortcut-dialog" class="modal-container">\n  <div class="close-modal-background-target"></div>\n  <div class="modal modal-large draggable">\n    <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"      ")),s.b("\n"+i),s.b('      <div class="modal-header">\n        <h3 class="modal-title">Keyboard shortcuts</h3>\n      </div>\n\n'),s.b('      <div class="modal-body">\n\n        <div class="keyboard-shortcuts clearfix" id="keyboard-shortcut-menu">\n          <p class="visuallyhidden">\n            Note: To use these shortcuts, users of screen readers may need to toggle off the virtual navigation.\n          </p>\n'),s.s(s.f("keyboard_shortcuts",t,e,1),t,e,0,696,1394,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('            <table class="modal-table" summary="'),i.b(i.v(i.f("description",t,e,0))),i.b('">\n'),i.s(i.f("name",t,e,1),t,e,0,786,947,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <thead>\n                  <tr>\n                    <th colspan="2">'),i.b(i.v(i.f("name",t,e,0))),i.b("</th>\n                  </tr>\n                </thead>\n")}),t.pop()),i.b("              <tbody>\n"),i.s(i.f("shortcuts",t,e,1),t,e,0,1009,1325,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                  <tr>\n                    <td class="shortcut">\n'),i.s(i.f("keys",t,e,1),t,e,0,1106,1181,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                        <b class="sc-key">'),i.b(i.v(i.d(".",t,e,0))),i.b("</b>\n")}),t.pop()),i.b('                    </td>\n                    <td class="shortcut-label">'),i.b(i.v(i.f("description",t,e,0))),i.b("</td>\n                  </tr>\n")}),t.pop()),i.b("              </tbody>\n            </table>\n")}),t.pop()),s.b("        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div id="kb-shortcuts-msg" class="visuallyhidden">\n  <h2>Keyboard Shortcuts</h2>\n  <p>\n    Keyboard shortcuts are available for common actions and site navigation.\n'),s.b('    <button id="show-shortcuts-btn" type="button" tabindex="-1">View Keyboard Shortcuts</button>\n    <button id="dismiss-shortcuts-btn" type="button" tabindex="-1">Dismiss this message</button>\n  </p>\n</div>'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({promoCTASelector:".stream-items .leadgen-card-forward .promotion-cta",leadgenDialogIframeSelector:".cards2-promotion-iframe",tweetSelector:".leadgen-card-forward",macawCardsIframeContainerSelector:".js-macaw-cards-iframe-container"});var e={OPEN_DIALOG:"uiOpenLeadGenConfirmDialog",DIALOG_CLOSED:"uiDialogClosed"};this.setUpDialogWithElement=function(e,i){this.$tweet=t(i.el).closest(this.attr.tweetSelector);var s=this.$tweet.closest("[data-impression-id]").attr("data-impression-id"),n=this.$tweet.closest("[data-impression-id]").attr("data-disclosure-type"),a=t(i.el).data("card-url");this.leadgenDialogIframe.attr("src",a),this.setUpDialog(e,this.$tweet,s,n)},this.setUpDialogWithData=function(e,i){this.$tweet=t(this.attr.tweetSelector+"[data-tweet-id="+i.tweetId+"]"),this.macawCardsIframeContainer.attr(this.attr.srcAttr,i.fullCardIframeUrl),this.macawCardsIframeContainer.attr(this.attr.cardUrl,i.cardUrl),this.macawCardsIframeContainer.attr(this.attr.publisherId,i.publisherId),this.macawCardsIframeContainer.attr(this.attr.creatorId,i.creatorId),this.leadgenDialogIframe.hide(),this.macawCardsIframeContainer.length&&(this.createCard(t(this.macawCardsIframeContainer[0].parentElement)||this.$tweet),this.setUpDialog(e,this.$tweet,i.impressionId,i.disclosureType))},this.cleanUpDialog=function(t,e){this.macawCardsIframeContainer.removeData(this.attr.srcDataAttr),this.macawCardsIframeContainer.removeData(this.attr.cardUrlDataAttr),this.macawCardsIframeContainer.removeData(this.attr.publisherIdDataAttr),this.macawCardsIframeContainer.removeData(this.attr.creatorIdDataAttr),this.destroyCard(this.$tweet)},this.after("initialize",function(){this.leadgenDialogIframe=this.select("leadgenDialogIframeSelector"),this.macawCardsIframeContainer=this.select("macawCardsIframeContainerSelector"),this.on(document,"click",{promoCTASelector:this.setUpDialogWithElement}),this.on(document,e.OPEN_DIALOG,this.setUpDialogWithData),this.on(e.DIALOG_CLOSED,this.cleanUpDialog)}),this.setUpDialog=function(t,e,i,s){t.preventDefault(),this.open()}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r),l=i(489),d=s(l),u=(0,o.default)(n,c.default,d.default);e.default=u}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({top:90,contentSelector:".list-membership-content",createListSelector:".create-a-list",membershipSelector:".list-membership-container li"}),this.openListMembershipDialog=function(t,e){this.userId=e.userId,this.userId&&this.trigger("uiNeedsListMembershipContent",{userId:this.userId}),this.$content.empty(),this.$node.removeClass("has-content"),this.open()},this.addListMembershipContent=function(t,e){this.$node.addClass("has-content"),this.$content.html(e.html)},this.handleNoListMembershipContent=function(t,e){this.close(),this.trigger("uiShowError",e)},this.toggleListMembership=function(e,i){var s=t(e.target),n={userId:s.closest("[data-user-id]").attr("data-user-id"),listId:s.closest("[data-list-id]").attr("data-list-id")},a=t("#list_"+n.listId);a.is(":visible")&&(a.closest(this.attr.membershipSelector).addClass("pending"),a.data("is-checked")?this.trigger("uiRemoveUserFromList",n):this.trigger("uiAddUserToList",n))},this.updateMembershipState=function(e){var i=this;return function(s,n){var a=t("#list_"+n.sourceEventData.listId);
a.closest(i.attr.membershipSelector).removeClass("pending"),a.prop("checked",e),a.data("is-checked",e),a.attr("data-is-checked",e)}},this.openListCreateDialog=function(){this.close(),this.trigger("uiOpenCreateListDialog",{userId:this.userId})},this.after("initialize",function(){this.$content=this.select("contentSelector"),this.on("click",{createListSelector:this.openListCreateDialog,membershipSelector:this.toggleListMembership}),this.on(document,"uiListAction uiOpenListMembershipDialog",this.openListMembershipDialog),this.on(document,"dataGotListMembershipContent",this.addListMembershipContent),this.on(document,"dataFailedToGetListMembershipContent",this.handleNoListMembershipContent),this.on(document,"dataDidAddUserToList dataFailedToRemoveUserFromList",this.updateMembershipState(!0)),this.on(document,"dataDidRemoveUserFromList dataFailedToAddUserToList",this.updateMembershipState(!1))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r),l=(0,o.default)(n,c.default);e.default=l}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({top:90,win:window,saveListSelector:".update-list-button",editorSelector:".list-editor",currentNameSelector:".js-list-details .js-list-name",currentDescSelector:".js-list-details .js-list-desc",nameInputSelector:".list-editor input[name='name']",descriptionSelector:".list-editor textarea[name='description']",privacySelector:".list-editor input[name='mode']"}),this.openListOperationsDialog=function(t,e){e=e||{},this.userId=e.userId,"uiOpenUpdateListDialog"===t.type&&this.modifyDialog(),this.open(),this.$nameInput.focus()},this.modifyDialog=function(){this.$modalTitle=this.select("modalTitleSelector"),this.originalTitle=this.originalTitle||this.$modalTitle.text(),this.$modalTitle.text("Edit list details");var e=t(this.attr.currentNameSelector).attr("data-raw-text").trim(),i=t(this.attr.currentDescSelector).attr("data-raw-text").trim();this.$nameInput.val(e),this.$descriptionInput.val(i),this.isPublic||(this.$privacyInput[1].checked=!0),this.$saveButton.attr("data-list-id",this.listId).attr("data-operation","update"),this.toggleSaveButtonDisabled(),this.modified=!0,this.$descriptionInput.on("keyup",this.toggleSaveButtonDisabled.bind(this)),this.$privacyInput.on("change",this.toggleSaveButtonDisabled.bind(this))},this.revertModifications=function(){this.modified&&(this.revertDialog(),this.$editor.find("input,textarea").val(""),this.$descriptionInput.off("keyup"),this.$privacyInput.off("change"),this.modified=!1)},this.revertDialog=function(){this.$modalTitle.text(this.originalTitle),this.$saveButton.removeAttr("data-list-id").removeAttr("data-operation"),this.isPublic||(this.$privacyInput[0].checked=!0)},this.saveList=function(e,i){if(!this.requestInProgress){this.requestInProgress=!0;var s=t(i.el),n="update"===s.attr("data-operation")?"uiUpdateList":"uiCreateList",a={name:this.formValue("name"),description:this.formValue("description",{type:"textarea"}),mode:this.formValue("mode",{conditions:":checked"})};"update"===s.attr("data-operation")&&(a=u.default.merge(a,{list_id:s.attr("data-list-id")})),this.trigger(n,a),this.$saveButton.prop("disabled",!0)}},this.saveListSuccess=function(t,e){this.close();var i="List saved!";"dataDidCreateList"===t.type?(i="List created!",this.userId?this.trigger("uiOpenListMembershipDialog",{userId:this.userId}):e&&e.slug&&(this.attr.win.location="/"+this.attr.screenName+"/lists/"+e.slug)):this.revertDialog(),this.$editor.find("input:text,textarea").val(""),this.trigger("uiShowMessage",{message:i})},this.saveListComplete=function(t,e){this.requestInProgress=!1,this.toggleSaveButtonDisabled()},this.toggleSaveButtonDisabled=function(t,e){this.$saveButton.prop("disabled",""===this.$nameInput.val())},this.formValue=function(t,e){return e=e||{},e.type=e.type||"input",e.conditions=e.conditions||"",this.$editor.find(e.type+"[name='"+t+"']"+e.conditions).val()},this.disableSaveButton=function(){this.$saveButton.prop("disabled",!0)},this.updateState=function(t,e){this.listId=e.init_data.list_id,this.isPublic=e.init_data.is_public},this.after("initialize",function(){this.listId=this.attr.list_id,this.isPublic=this.attr.is_public,this.$editor=this.select("editorSelector"),this.$nameInput=this.select("nameInputSelector"),this.$descriptionInput=this.select("descriptionSelector"),this.$privacyInput=this.select("privacySelector"),this.$saveButton=this.select("saveListSelector"),this.on("click",{saveListSelector:this.saveList}),this.on("focus blur keyup",{nameInputSelector:this.toggleSaveButtonDisabled}),this.on("uiDialogOpened",this.disableSaveButton),this.on("uiDialogClosed",this.revertModifications),this.on(document,"uiOpenCreateListDialog uiOpenUpdateListDialog",this.openListOperationsDialog),this.on(document,"dataDidCreateList dataDidUpdateList",this.saveListSuccess),this.on(document,"dataDidCreateList dataDidUpdateList dataFailedToCreateList dataFailedToUpdateList",this.saveListComplete),this.on(document,"uiPageChanged",this.updateState)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r),l=i(123),d=(s(l),i(126)),u=s(d),h=(0,o.default)(n,c.default);e.default=h}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.subscribe=function(t,e){var i=this.consumers[e]||[];i.indexOf(t)===-1&&i.push(t),this.consumers[e]=i,this.lpClient.subscribe(e)},this.unsubscribe=function(t,e){var i=this.consumers[e]||[];i=i.filter(function(e){return e!==t}),this.consumers[e]=i,i.length||(this.lpClient.unsubscribe(e),delete this.consumers[e])},this.subUnsubHandler=function(t,e){var i=e.consumer_id,s=e.topic;if(i&&s){var n="dataLPSubscribe"===t.type?this.subscribe:this.unsubscribe,a=Array.isArray(s)?s:[s];a.forEach(n.bind(this,i))}},this.handleVisibilityChange=function(t){"uiPageVisible"===t.type?Object.keys(this.consumers).length&&this.lpClient.reconnect():this.lpClient.close()},this.after("initialize",function(){this.consumers={},this.lpClient=new o.default,this.lpClient.onMessage(this.trigger.bind(this,"dataLPMessage")),this.on("dataLPSubscribe dataLPUnsubscribe",this.subUnsubHandler),this.on("uiPageVisible uiPageHidden",this.handleVisibilityChange)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(585),o=s(a),r=i(111),c=s(r);e.default=(0,c.default)(n)},function(t,e,i){(function(t){"use strict";function i(e){e=e||{};var n={urls:{events:e.urls&&e.urls.events||s.urls.events,subscribe:e.urls&&e.urls.subscribe||s.urls.subscribe,unsubscribe:e.urls&&e.urls.unsubscribe||s.urls.unsubscribe},retry:{enabled:void 0===(e.retry&&e.retry.enabled)?s.retry.enabled:e.retry.enabled,backoffFactor:void 0===(e.retry&&e.retry.backoffFactor)?s.retry.backoffFactor:e.retry.backoffFactor,maxDelay:void 0===(e.retry&&e.retry.maxDelay)?s.retry.maxDelay:e.retry.maxDelay},resubPreemptDuration:e.resubPreemptDuration||s.resubPreemptDuration};this.onMessageCallback=n.message,this.onErrorCallback=n.error;var a=void 0,o=[],r={},c=void 0,l=void 0,d=void 0,u=!1;this.updateSessionData=function(t){r.sessionId=t.session_id,r.ttl=t.subscription_ttl_millis},this.newEventSource=function(t,e){return new EventSource(t,e)},this.hasSubscribedTopics=function(){return!!o.length},this.openConnection=function(){if(this.hasSubscribedTopics()){var t="?topic="+o.map(encodeURIComponent).join(",");this.close(),a=this.newEventSource(n.urls.events+t,{withCredentials:!0}),a.onmessage=this.messageHandler.bind(this),a.onerror=this.errorHandler.bind(this)}},this.messageHandler=function(t){var e=this.tryParseJSON(t.data);if(e)switch(e.topic){case"/system/config":this.updateSessionData(e.payload.config),u&&this.refreshSubscriptions(),this.resetRetryCount();break;default:this.onMessageCallback&&this.onMessageCallback(e)}},this.errorHandler=function(t){this.close(),this.onErrorCallback&&this.onErrorCallback(t),this.retry()},this.tryParseJSON=function(t){try{return JSON.parse(t)}catch(e){return}},this.subUnsubErrorHandler=function(t){if(400===t.status){var e=this.tryParseJSON(t.responseText),s=e&&e.errors&&e.errors[0];s&&s.code===i.API_ERROR_CODES.SESSION_NOT_FOUND&&this.retry()}},this.resetRetryCount=function(){c=void 0},this.retry=function(){if(n.retry.enabled){c=void 0===c?0:c+1;var t=Math.random()*(Math.pow(2,c)-1)*n.retry.backoffFactor,e=Math.min(t,n.retry.maxDelay);l=setTimeout(this.openConnection.bind(this),e)}},this.refreshSubscriptions=function(){var e=this;return this.connectionStatus()===i.CONNECTING?void(u=!0):r.sessionId&&this.connectionStatus()!==i.CLOSED?void(o.length&&(u=!1,t.ajax({method:"POST",url:n.urls.subscribe,data:{session_id:r.sessionId,topic:o.join(",")},headers:{"LivePipeline-Session":r.sessionId},xhrFields:{withCredentials:!0},success:function(){e.resetRetryCount(),clearTimeout(d),d=setTimeout(e.refreshSubscriptions.bind(e),Math.max(0,r.ttl-n.resubPreemptDuration))},error:this.subUnsubErrorHandler.bind(this)}))):void this.openConnection()},this.subscribe=function(t){var e=o.indexOf(t)===-1,s=e||this.connectionStatus()===i.CLOSED;e&&o.push(t),s&&this.refreshSubscriptions()},this.unsubscribe=function(e){o.indexOf(e)!==-1&&(o=o.filter(function(t){return e!==t}),r.sessionId&&(t.ajax({method:"POST",url:n.urls.unsubscribe,data:{session_id:r.sessionId,topic:e},xhrFields:{withCredentials:!0}}),o.length||this.close()))},this.onMessage=function(t){this.onMessageCallback=t},this.onError=function(t){this.onErrorCallback=t},this.connectionStatus=function(){return a?a.readyState:i.CLOSED},this.reconnect=this.openConnection.bind(this),this.close=function(){a&&a.close(),r={},a=void 0,clearTimeout(l),clearTimeout(d)}}Object.defineProperty(e,"__esModule",{value:!0});var s={urls:{events:"https://api.twitter.com/live_pipeline/events",subscribe:"/i/live_pipeline/subscribe",unsubscribe:"/i/live_pipeline/unsubscribe"},retry:{enabled:!0,backoffFactor:500,maxDelay:12e4},resubPreemptDuration:25e3};i.isSupported=function(){return"EventSource"in window},i.OPEN=i.isSupported()&&EventSource.OPEN,i.CLOSED=i.isSupported()&&EventSource.CLOSED,i.CONNECTING=i.isSupported()&&EventSource.CONNECTING,i.API_ERROR_CODES={SESSION_NOT_FOUND:392};var n=function(t){var e=new i(t);this.subscribe=e.subscribe.bind(e),this.unsubscribe=e.unsubscribe.bind(e),this.connectionStatus=e.connectionStatus.bind(e),this.reconnect=e.reconnect.bind(e),this.close=e.close.bind(e),this.onMessage=e.onMessage.bind(e),this.onError=e.onError.bind(e),this.__privateInstance=e};n.isSupported=i.isSupported,n.OPEN=i.OPEN,n.CLOSED=i.CLOSED,n.CONNECTING=i.CONNECTING,n.API_ERROR_CODES=i.API_ERROR_CODES,n.__privateObject=i,e.default=n}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({locationPickerIframeSelector:".LocationPickerDialog-iframe",suggestedLocationSelector:".LocationPickerDialog-suggestedLocation",mainAddressLineSelector:".LocationPickerDialog-mainAddressLine",secondaryAddressLineSelector:".LocationPickerDialog-secondaryAddressLine",titleSelector:".LocationPickerDialog-title",submitButtonSelector:"#location-picker-submit-button",footerSelector:".LocationPickerDialog-footer",foursquareVendorInfoSelector:".LocationPickerDialog-foursquareVendorInfo",yelpVendorInfoSelector:".LocationPickerDialog-yelpVendorInfo",isShowingAttributionClass:"is-ShowingAttribution"}),this.openDialog=function(e,i){var s=t("html").attr("lang"),n="/i/locations/share?lang="+s;i=i||{},e=e||{};var a=i&&i.src||n;this.attr.loggedIn?(this.select("locationPickerIframeSelector").attr("src",a),this.on(window,"message",this.proxyIframeEvents),this.open(),this.$button=this.select("submitButtonSelector"),this.$button.addClass("disabled").prop("disabled",!0),this.state={type:"uiLocationAttachmentClicked"===e.type?"location_attachment":"location_picker"},"location_picker"===this.state.type?(this.state.qrId=i.qr_id,this.state.conversationId=i.conversation_id,this.$button.addClass("primary-btn").text("Send"),this.select("titleSelector").text("Share Location")):(this.handlePickerTextUpdate(null,i),this.$button.removeClass("primary-btn").text("View related Tweets"),this.updateDialogTitle(i))):this.trigger(document,"uiOpenSignupDialog")},this.updateDialogTitle=function(t){var e=t.blackLine,i=e||"Shared Location";this.select("titleSelector").text(i)},this.resetDialog=function(t,e){this.off(window,"message",this.proxyIframeEvents),this.select("locationPickerIframeSelector").attr("src","about:blank"),this.select("titleSelector").empty(),this.select("mainAddressLineSelector").empty(),this.select("secondaryAddressLineSelector").empty(),this.select("footerSelector").removeClass(this.attr.isShowingAttributionClass),this.select("foursquareVendorInfoSelector").addClass("u-hidden"),this.select("yelpVendorInfoSelector").addClass("u-hidden")},this.handlePickerTextUpdate=function(t,e){e=e||{};var i=this.select("suggestedLocationSelector"),s=i.find(".LocationPickerDialog-mainAddressLine"),n=i.find(".LocationPickerDialog-secondaryAddressLine"),a=!e.blackLine&&!e.grayLine,o=a?"":e.blackLine||e.grayLine,r=!e.blackLine||!e.grayLine,c=r?"":e.grayLine;s.toggleClass("u-hidden",a).text(o),n.toggleClass("u-hidden",r).text(c)},this.handleLocationUpdate=function(t,e){this.state.locationData=e||{},this.$button.removeClass("disabled").prop("disabled",!1),e.attribution&&this.updateAttribution(e.attribution)},this.updateAttribution=function(t){var e=this.select("footerSelector"),i=this.select("foursquareVendorInfoSelector"),s=this.select("yelpVendorInfoSelector"),n="foursquare"===t,a="yelp"===t,o=n||a;e.toggleClass(this.attr.isShowingAttributionClass,o),i.toggleClass("u-hidden",!n),s.toggleClass("u-hidden",!a)},this.canSend=function(){return this.state.locationData},this.handleClick=function(){"location_picker"===this.state.type?(this.sendLocation(),this.close()):this.viewRelatedTweets(),this.trigger("uiScribeLocationDialogButtonClick",this.state)},this.viewRelatedTweets=function(){var t=this.state.locationData.bestPlaceId||"",e="place:"+t,i="/search?"+C.default.encode({q:e});window.open(i,"_blank")},this.sendLocation=function(){var t=this.state.locationData,e={conversation_id:this.state.conversationId,"quick_reply_response[location][id]":this.state.qrId};"Coord"===t.type?p.default.push(e,{"location[shared_coordinate][lat]":t.lat,"location[shared_coordinate][lon]":t.lon}):p.default.push(e,{"location[shared_place][place][id]":t.placeId}),this.trigger("uiDMSendMessage",e)},this.after("initialize",function(){this.on(document,"uiLocationQRCtaClicked uiShareLocation uiLocationAttachmentClicked",this.openDialog),this.on("uiDialogClosed",this.resetDialog),this.on("uiB2CLocationPickerTextUpdate",this.handlePickerTextUpdate),this.on("uiB2CLocationPickerUpdateSelectedLocation uiB2CLocationAttachmentInit",this.handleLocationUpdate),this.on("click",{submitButtonSelector:(0,v.default)(this.handleClick,this.canSend)})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(123),o=(s(a),i(111)),r=s(o),c=i(163),l=s(c),d=i(172),u=s(d),h=i(142),f=s(h),m=i(126),p=s(m),g=i(353),v=s(g),b=i(175),w=s(b),S=i(344),C=s(S),y=(0,r.default)(n,l.default,u.default,f.default,w.default);e.default=y}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeLocationDialogButtonClick=function(t,e){e=e||{};var i=e.type,s=e.locationData,n=void 0;switch(i){case"location_picker":"Coord"===s.type?n=l:"Place"===s.type&&s.isSearched?n=u:"Place"!==s.type||s.isSearched||(n=d);break;case"location_attachment":n=h}"undefined"!=typeof n&&this.scribe(n)},this.after("initialize",function(){this.scribeOnEvent("uiLocationQRCtaClicked",{page:"messages",section:"thread",element:"location_request_dm",action:"click"}),this.scribeOnEvent("uiLocationAttachmentClicked",{page:"messages",section:"thread",element:"shared_location_dm",action:"click"}),this.on(document,"uiScribeLocationDialogButtonClick",this.scribeLocationDialogButtonClick)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r),l={page:"map_place_picker",element:"pinned_location",action:"share"},d={page:"map_place_picker",element:"poi_suggestion",action:"share"},u={page:"map_place_picker",element:"poi_searched",action:"share"},h={page:"map_place_viewer",element:"related_tweets",action:"click"};e.default=(0,o.default)(n,c.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({applyButtonSelector:".MediaEditDialog-applyAltTextButton",altTextTextareaSelector:".MediaEditDialog-altTextTextarea",doneTargetSelector:".js-done",closeTargetSelector:".js-close",photoContainerSelector:".MediaEditDialog-photoContainer",videoTrimSelector:".VideoTrim",videoTitleSelector:".MediaEditForm-title",videoDescriptionSelector:".MediaEditForm-description",videoCtaSelectSelector:".MediaEditForm-ctaSelect",videoCtaUrlSelector:".MediaEditForm-ctaUrl",videoEmbeddableSelector:".MediaEditForm-embeddable",videoTitleCharCounterSelector:".MediaEditForm-titleCharCounter",videoDescriptionCharCounterSelector:".MediaEditForm-descriptionCharCounter",videoTitleMaxLength:70,videoDescriptionMaxLength:200}),this.fileId=0,this.renderMediaEditDialog=function(t){var e=this.advancedVideoFeatures,i=t.advanced||{},s={alt_text:t.altText,can_compose_alt_text:this.canComposeAltText(),has_cta:""!==i.ctaType,is_cta_visit_site:"visit_site"===i.ctaType,is_cta_watch_now:"watch_now"===i.ctaType,is_gif:this.isGif,is_photo:this.isPhoto,is_video:this.isVideo,is_video_embeddable:i.embeddable||"undefined"==typeof i.embeddable,title:this.getTitle(),video_ctl_url:i.ctaUrl,video_title:i.title,video_description:i.description,whitelisted_video_user:e},n=P.default.render(s);this.$node.html(n),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector),this.isVideo&&(this.attachChild(S.default,this.select("videoTrimSelector"),{maxSelectionDuration:U,maxVisibleDuration:1.2*U,defaultSelectionDuration:j}),e&&(this.attachChild(o.default,this.select("videoTitleCharCounterSelector"),{maxLength:this.attr.videoTitleMaxLength}),this.attachChild(o.default,this.select("videoDescriptionCharCounterSelector"),{maxLength:this.attr.videoDescriptionMaxLength})))},this.openMediaEditDialog=function(t,e){var i=e.fileId,s=m.default.get(i);if(s&&(this.fileId=i,this.isVideo=s.isVideo,this.isGif=s.isGif,this.isImage=s.isImage,this.composeAltText=e.composeAltText,this.advancedVideoFeatures=g.default.getDeciderValue("web_upload_video_advanced"),this.renderMediaEditDialog(s),this.open(),this.loadMedia(s),this.canComposeAltText())){var n=this.select("altTextTextareaSelector")[0],a=n.value;this.initialAltText=a,this.resizeAltTextInput(),n.selectionStart=n.selectionEnd=a.length}},this.loadMedia=function(t){this.isVideo?(this.loadVideo(t),this.trigger(this.select("videoTitleCharCounterSelector"),"uiCharacterCounterUpdate"),this.trigger(this.select("videoDescriptionCharCounterSelector"),"uiCharacterCounterUpdate")):this.loadPhoto(t.thumbnail.src)},this.loadVideo=function(e){this.mediaObjectUrl=d.default.getObjectUrl(e.fileHandle),this.trigger(this.select("videoTrimSelector"),"uiLoadVideo",{videoSrc:this.mediaObjectUrl,initialTrimRange:e.trimRange}),t(document).trigger("uiPauseAllMedia")},this.sizeAndPosition=function(){var t=this.select("photoContainerSelector").find("img");h.default.resetMinSize(this.$dialog),h.default.resizeMedia(t,this.$dialog,!1,".modal-footer",!1),this.position()},this.loadPhoto=function(e){var i=t("<img>",{"class":"MediaEditDialog-photo",src:e,on:{load:this.sizeAndPosition.bind(this)}});this.select("photoContainerSelector").html(i)},this.expandVideoDescription=function(){var t=3,e=parseInt(this.select("videoDescriptionSelector").css("line-height"))*t;this.off(this.select("videoDescriptionSelector"),"focus",this.expandVideoDescription),this.select("videoDescriptionSelector").height(e)},this.canComposeAltText=function(){return!this.isVideo&&!this.isGif&&this.composeAltText},this.getTitle=function(){var t=void 0;return this.isVideo?t=this.advancedVideoFeatures?E:O:this.isGif?t=R:this.isImage&&(t=this.canComposeAltText()?F:N),t},this.displayVideoCtaUrl=function(){var t=""===this.select("videoCtaSelectSelector").val();this.select("videoCtaSelectSelector").toggleClass("u-inactive",t),this.select("videoCtaUrlSelector").toggleClass("u-hidden",t),t?this.select("videoCtaUrlSelector").removeAttr("data-valid"):(this.validateVideoCtaUrl(),this.select("videoCtaUrlSelector").focus()),this.trigger("uiValidateForm")},this.validateForm=function(){var t=this.isValidInput("videoCtaUrlSelector"),e=this.isValidInput("videoTitleSelector")&&this.isValidInput("videoDescriptionSelector")&&t;return e?this.select("doneTargetSelector").prop("disabled",!1):(this.select("doneTargetSelector").prop("disabled",!0),!t&&this.select("videoCtaUrlSelector").val().length&&(this.trigger(document,"uiShowMessage",{message:x}),this.select("videoCtaUrlSelector").focus())),e},this.isValidInput=function(t){return"false"!==this.select(t).attr("data-valid")},this.validateVideoCtaUrl=function(){var t=this.select("videoCtaUrlSelector").val(),e=this.isValidUrl(t);return this.select("videoCtaUrlSelector").attr("data-valid",e),this.trigger("uiValidateForm"),e},this.isValidUrl=function(t){return A.test(t.trim())},this.notifyEditDone=function(){this.trigger("uiMediaEditDialogDone",{fileId:this.fileId})},this.updateVideoInfo=function(t,e){var i=b.default.merge(e,{duration:t.trimEnd-t.trimStart});return m.default.update(t.fileId,i)},this.editDone=function(){var t=this.isVideo,e=t?{trimStart:this.trimStart,trimEnd:this.trimEnd,trimRange:this.trimRange}:{},i=t&&this.advancedVideoFeatures?{advanced:{title:this.select("videoTitleSelector").val(),description:this.select("videoDescriptionSelector").val(),ctaType:this.select("videoCtaSelectSelector").val(),ctaUrl:this.select("videoCtaUrlSelector").val(),embeddable:this.select("videoEmbeddableSelector").is(":checked")}}:{},s=this.canComposeAltText()?{altText:(this.select("altTextTextareaSelector").val()||"").trim()}:{},n=b.default.merge(e,i,s),a=m.default.update(this.fileId,n);t?d.default.getVideoInfo(a.fileHandle,this.trimStart).then(this.updateVideoInfo.bind(this,a)).then(this.notifyEditDone.bind(this)):this.notifyEditDone()},this.closeMediaEditDialog=function(e,i){this.isVideo&&(this.trigger(this.select("videoTrimSelector"),"uiUnloadVideo"),this.mediaObjectUrl&&(d.default.revokeObjectUrl(this.mediaObjectUrl),this.mediaObjectUrl=null)),this.canComposeAltText()&&this.select("altTextTextareaSelector").val(""),this.close(),this.activeEl?t(this.activeEl).closest(".tweet-form, .modal").find(".tweet-box").focus():this.restorePreviousFocus()},this.updateTrimRange=function(t,e){this.trimStart=e.trimStart,this.trimEnd=e.trimEnd,this.trimRange=e.trimRange},this.resizeAltTextInput=function(t){var e=this.select("altTextTextareaSelector"),i=e[0],s=e.innerHeight()-e.height(),n=this.select("applyButtonSelector"),a=n.outerHeight()-4;e.height(1);var o=Math.max(i.scrollHeight,a);e.height(Math.min(o-s,L)),i.style.display="none",i.offsetHeight,i.style.display=""},this.toggleApplyButtonState=function(e){var i=t(e.target).val();this.select("applyButtonSelector").prop("disabled",!(this.initialAltText!==i))},this.after("initialize",function(){this.on(document,"uiOpenMediaEditDialog",this.openMediaEditDialog),this.on("uiShortcutEsc uiDialogClosed uiMediaEditDialogDone",this.closeMediaEditDialog),this.on("uiTrimRangeChanged",this.updateTrimRange),this.on("click",{doneTargetSelector:this.editDone,closeTargetSelector:this.closeMediaEditDialog}),this.on("uiShortcutCmdEnter",this.editDone),this.on("change",{videoTitleSelector:this.validateForm,videoDescriptionSelector:this.validateForm,videoCtaSelectSelector:this.displayVideoCtaUrl,videoCtaUrlSelector:this.validateVideoCtaUrl}),this.on("input",{altTextTextareaSelector:this.toggleApplyButtonState}),this.on("uiValidateForm",this.validateForm),this.on("focusin",{videoDescriptionSelector:this.expandVideoDescription}),this.on("input",{altTextTextareaSelector:this.resizeAltTextInput})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(589),o=s(a),r=i(111),c=s(r),l=i(388),d=s(l),u=i(545),h=s(u),f=i(220),m=s(f),p=i(136),g=s(p),v=i(126),b=s(v),w=i(590),S=s(w),C=i(163),y=s(C),T=i(227),D=s(T),M=i(123),I=(s(M),i(592)),P=s(I),k=(0,c.default)(n,y.default,D.default,o.default),A=/^(https?:\/\/)?[a-z0-9-.]+\.[a-z]+\/?([^\s<>#%",{}\\|\\^[\]`]+)?$/,x="URL is not valid",E="Edit",O="Trim",R="GIF",N="Image",F="Image description",L=60,j=45,U=140;e.default=k}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({maxLength:null}),this.render=function(){var t=!this.maxLengthExceeded();this.$node.toggleClass("is-maxExceeded",!t),this.$input.attr("data-valid",t),this.$counter.text(this.getRemainingLength())},this.maxLengthExceeded=function(){return this.getRemainingLength()<0},this.getRemainingLength=function(){var t=this.getLength(this.$input.val());return this.attr.maxLength-t},this.getLength=function(t){return t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x").length},this.after("initialize",function(){this.$input=this.$node.find(".CharCounter-target"),this.$counter=this.$node.find(".CharCounter-counter"),this.render(),this.on(this.$input,"input",this.render),this.on("uiCharacterCounterUpdate",this.render)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=(0,o.default)(n);e.default=r},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){var e=0,i=1,s=2,n=3,a=4;this.defaultAttrs({timeBubbleSelector:".VideoTrim-timeBubble",timelineSelector:".VideoTrim-timeline",timelineCursorSelector:".VideoTrim-timelineCursor",scrubberSelector:".VideoTrim-scrubber",unplayedScrubberSelector:".VideoTrim-unplayedScrubber",timeSelector:".VideoTrim-time",widestTimeSelector:".VideoTrim-widestTime",selectionSelector:" .VideoTrim-selection",ticksSelector:".VideoTrim-ticks",innerSelectionSelector:".VideoTrim-innerSelection",leftHandleSelector:".VideoTrim-leftHandle",midHandleSelector:".VideoTrim-midHandle",midHandleCursorSelector:".VideoTrim-midHandleCursor",rightHandleSelector:".VideoTrim-rightHandle",shroudSelector:".VideoTrim-shroud",minSelectionDuration:1,maxSelectionDuration:30,maxVisibleDuration:36,defaultSelectionDuration:20,scrollPixels:20,timeToFadeOutBubble:1e3,pixelsBeforeWarningLength:50,maxPixelsPerSecond:30,widthForHandles:42,minWidthForMidHandle:18,dragScrollRepeatInterval:30}),this.setInitialTrimRange=function(t,e){this.initialTrimRange=e.initialTrimRange},this.initAfterVideoLoads=function(){if(""===this.initialTrimRange)this.startTime=0,this.endTime=this.videoDuration;else if(this.initialTrimRange){var t=this.initialTrimRange.split("-");this.startTime=+t[0],this.endTime=+t[1]}else this.startTime=(this.videoDuration-this.attr.defaultSelectionDuration)/2,this.endTime=this.startTime+this.attr.defaultSelectionDuration;this.startTime=this.clamp(this.startTime,0,this.videoDuration),this.endTime=this.clamp(this.endTime,0,this.videoDuration),this.visibleWidth=this.$node.width()-this.attr.widthForHandles,this.defaultPixelsPerSecond=this.visibleWidth/Math.min(this.videoDuration,this.attr.maxVisibleDuration),this.timelinePixelsPerSecond=this.$timeline.width()/this.videoDuration,this.generateTicks(),this.zoomToDefault(),this.showSelectionBubble(),this.playVideo(this.startTime),this.notifyTrimRange()},this.generateTicks=function(){for(var t="",e=0;e<this.videoDuration;e+=1){var i=(100*e/this.videoDuration).toFixed(4),s=e%60?"":h.default.formatDuration(e);t+='<div style="left:'+i+'%">'+s+"</div>"}this.$ticks.html(t)},this.calculateScale=function(){this.offset=-this.$selection.position().left,this.pixelsPerSecond=this.$innerSelection.width()/this.videoDuration,this.percentPerSecond=100/this.videoDuration,this.minTimeForScrolling=(this.offset-this.attr.scrollPixels)/this.pixelsPerSecond,this.maxTimeForScrolling=(this.offset+this.attr.scrollPixels+this.visibleWidth)/this.pixelsPerSecond},this.formatTimeProgress=function(t){return h.default.formatDuration(t)+" / "+h.default.formatDuration(this.videoDuration)},this.updatePositions=function(){if(this.$mid.toggle(!!this.videoDuration),this.videoDuration){this.calculateScale(),this.$mid.css({left:this.startTime*this.percentPerSecond+"%",width:(this.endTime-this.startTime)*this.percentPerSecond+"%"});var t=Math.min(-1,((this.endTime-this.startTime)*this.pixelsPerSecond-this.attr.minWidthForMidHandle)/2);this.$midHandleCursor.css({left:t,right:t});var e=this.isProgressVisible?Math.max(100*(this.getVideoCurrentTime()-this.startTime)/(this.endTime-this.startTime),0):0;this.$unplayedScrubber.css("left",e+"%"),this.$scrubber.css({left:this.startTime*this.percentPerSecond+"%",right:100-this.endTime*this.percentPerSecond+"%"}),this.$widestTime.text(this.formatTimeProgress(this.videoDuration)),this.$time.text(this.formatTimeProgress(this.getVideoCurrentTime())),this.select("timelineSelector"),this.updateBubblePos()}},this.showSelectionBubble=function(){var t=Math.max(this.selectionDuration(),this.attr.minSelectionDuration);this.setBubble(this.formatTimeForSelection(t),"mid")},this.setEndBubbleWhileDragging=function(){this.dragMode===n?this.setBubble(h.default.formatDuration(this.endTime),"right"):this.setBubble(h.default.formatDuration(this.startTime),"left")},this.selectionDuration=function(){return this.endTime-this.startTime},this.isMaxSelected=function(){return this.selectionDuration()>=this.attr.maxSelectionDuration},this.isMinSelected=function(){return this.selectionDuration()<=this.attr.minSelectionDuration},this.formatTimeForSelection=function(t){var e=Math.floor(t/60),i=Math.floor(t%60),s="abbreviated";this.timespanFormatter.patterns.none.minute.abbreviated||(s="short");var n={minutesWithAbbreviation:this.timespanFormatter.format(60*e,{direction:"none",type:s,unit:"minute"}),secondsWithAbbreviation:this.timespanFormatter.format(i,{direction:"none",type:s,unit:"second"})};return this.isMaxSelected()?e?(0,o.default)("{{minutesWithAbbreviation}} {{secondsWithAbbreviation}} max selected",n):(0,o.default)("{{secondsWithAbbreviation}} max selected",n):this.isMinSelected()?(0,o.default)("{{secondsWithAbbreviation}} min selected",n):e?(0,o.default)("{{minutesWithAbbreviation}} {{secondsWithAbbreviation}} selected",n):(0,o.default)("{{secondsWithAbbreviation}} selected",n)},this.setBubble=function(t,e){this.bubbleMode=e,this.bubbleWidth=this.$timeBubble.attr("data-mode",e||"").text(t||"").css("opacity",0).show().outerWidth(),this.updateBubblePos(),this.$timeBubble.css("opacity",1).delay(this.attr.timeToFadeOutBubble).fadeOut(500)},this.updateBubblePos=function(){var t=null,e=void 0,i=void 0;switch(this.bubbleMode){case"left":e=0,i=0;break;case"right":e=100,i=-this.bubbleWidth;break;case"mid":e=50;var s=(this.startTime+this.endTime)*this.timelinePixelsPerSecond/2;s<this.bubbleWidth/2?(i=-15,t="left"):s>this.videoDuration*this.timelinePixelsPerSecond-this.bubbleWidth/2?(i=23-this.bubbleWidth,t="right"):i=-this.bubbleWidth/2;break;default:return}this.$timeBubble.css({left:e+"%","margin-left":i}),t?this.$timeBubble.attr("data-clip",t):this.$timeBubble.removeAttr("data-clip")},this.setSelectionView=function(t,e){e?this.$selection.width(e+this.attr.widthForHandles):e=this.$innerSelection.width(),this.$selection.css("left",-this.clamp(t,0,e-this.visibleWidth)),this.updatePositions()},this.zoomToDefault=function(){var t=this.defaultPixelsPerSecond*this.videoDuration,e=(this.defaultPixelsPerSecond*(this.startTime+this.endTime)-this.visibleWidth)/2;e=this.clamp(e,0,t-this.visibleWidth),this.setSelectionView(e,t)},this.playLastFewSeconds=function(t){this.playVideo(t?Math.max(this.endTime-3,this.startTime):this.startTime),this.updatePositions()},this.beginDrag=function(t,e){if(this.$shroud.toggleClass("is-sideways",t===i||t===n),this.dragMode=t,this.dragStartX=e.clientX,this.dragDirty=!1,
this.dragStartOffset=this.offset,this.dragHandlesInView=[t===i||t===a,t===n||t===a],t===a){var s=(e.clientX-this.$timeline.offset().left)/this.timelinePixelsPerSecond;if(s<this.startTime||s>this.endTime){var o=this.endTime-this.startTime;this.startTime=this.clamp(s,0,this.videoDuration-o),this.endTime=this.startTime+o}this.$shroud.show(),this.zoomToDefault()}this.$mid.addClass("is-active"),this.isVideoPlaying()||this.setDragPause(),this.updatePositions(),this.setEndBubbleWhileDragging()},this.drag=function(t){if(this.dragMode!==e){var i=window.getSelection();i&&i.removeAllRanges(),clearTimeout(this.dragTimeoutId);var n=!1;this.$shroud.show(),this.calculateScale(),this.dragMode===s&&(this.dragHandlesInView=this.dragHandlesInView.map(function(t,e){return t||0===this.scrollShiftForHandle(e)},this));var o=t.clientX-this.dragStartX,r=void 0;this.dragMode===a?r=this.timelinePixelsPerSecond:(r=this.pixelsPerSecond,o+=this.offset-this.dragStartOffset);var c=this.applyDrag(o/r)*r;c?(this.dragDirty=!0,this.updatePositions(),this.dragStartX+=c,this.setDragPause(),this.setEndBubbleWhileDragging()):Math.abs(o)>this.attr.pixelsBeforeWarningLength&&(this.isMaxSelected()||this.isMinSelected())&&this.showSelectionBubble(),this.dragMode===a?this.zoomToDefault():this.dragHandlesInView.forEach(function(t,e){if(t){var i=this.scrollShiftForHandle(e);i&&(this.setSelectionView(this.offset+i),n=!0)}},this),n&&(this.dragTimeoutId=setTimeout(this.drag.bind(this,t),this.attr.dragScrollRepeatInterval))}},this.endDrag=function(){var t=this;if(this.dragMode){this.$shroud.hide(),this.updatePositions();var i=this.dragMode===n;this.dragDirty&&this.showSelectionBubble(),this.isVideoPlaying()?this.doubleClickTimeoutId||(this.doubleClickTimeoutId=setTimeout(function(){t.doubleClickTimeoutId=null,t.playLastFewSeconds(i)},300)):this.playLastFewSeconds(i),this.$mid.removeClass("is-active"),this.dragMode=e,clearTimeout(this.dragTimeoutId),this.notifyTrimRange()}},this.setDragPause=function(t){this.pauseVideo(this.dragMode===n?this.endTime:this.startTime)},this.calculateDrag=function(t,e,s){return t=this.clamp(t+e,0,this.videoDuration),this.dragMode===i?t=this.clamp(t,this.endTime-this.attr.maxSelectionDuration,this.endTime-this.attr.minSelectionDuration):this.dragMode===n&&(t=this.clamp(t,this.startTime+this.attr.minSelectionDuration,this.startTime+this.attr.maxSelectionDuration)),this.dragMode!==a&&this.dragHandlesInView[s]&&(t=this.clamp(t,this.minTimeForScrolling,this.maxTimeForScrolling)),t},this.applyDragLeft=function(t){var e=this.startTime;return this.startTime=this.calculateDrag(this.startTime,t,0),this.startTime-e},this.applyDragRight=function(t){var e=this.endTime;return this.endTime=this.calculateDrag(this.endTime,t,1),this.endTime-e},this.applyDrag=function(t){return this.dragMode===i?this.applyDragLeft(t):this.dragMode===n?this.applyDragRight(t):t<0?this.applyDragRight(this.applyDragLeft(t)):this.applyDragLeft(this.applyDragRight(t))},this.scrollShiftForHandle=function(t){var e=(t?this.endTime:this.startTime)*this.pixelsPerSecond;return this.clamp(this.offset,e-this.visibleWidth,e)-this.offset},this.hoverSideHandle=function(i){this.dragMode===e&&t(i.target).toggleClass("is-hover","mouseenter"===i.type)},this.hoverMidHandle=function(t){this.dragMode===e&&this.$left.add(this.$right).toggleClass("is-hover","mouseenter"===t.type)},this.hoverSelectionBubble=function(){this.dragMode===e&&this.showSelectionBubble()},this.notifyTrimRange=function(){var t=this.endTime-this.startTime>this.videoDuration-.01;this.trigger("uiTrimRangeChanged",{trimStart:this.startTime,trimEnd:this.endTime,trimRange:t?"":this.startTime.toFixed(3)+"-"+this.endTime.toFixed(3)})},this.clamp=function(t,e,i){return Math.max(e,Math.min(i,t))},this.after("initialize",function(){this.timespanFormatter=new m.default.TimespanFormatter,this.dragMode=e,this.$timeBubble=this.select("timeBubbleSelector"),this.$timeline=this.select("timelineSelector"),this.$scrubber=this.select("scrubberSelector"),this.$unplayedScrubber=this.select("unplayedScrubberSelector"),this.$time=this.select("timeSelector"),this.$widestTime=this.select("widestTimeSelector"),this.$selection=this.select("selectionSelector"),this.$ticks=this.select("ticksSelector"),this.$innerSelection=this.select("innerSelectionSelector"),this.$left=this.select("leftHandleSelector"),this.$mid=this.select("midHandleSelector"),this.$midHandleCursor=this.select("midHandleCursorSelector"),this.$right=this.select("rightHandleSelector"),this.$shroud=this.select("shroudSelector"),this.on("uiLoadVideo",this.setInitialTrimRange),this.on("uiVideoLoaded uiVideoUnloaded",this.initAfterVideoLoads),this.on("uiVideoStateChanged",this.updatePositions),this.on("mousedown",{leftHandleSelector:this.beginDrag.bind(this,i),rightHandleSelector:this.beginDrag.bind(this,n),midHandleCursorSelector:this.beginDrag.bind(this,s),timelineSelector:this.beginDrag.bind(this,a)}),this.on(window,"mousemove",this.drag),this.on(window,"mouseup",this.endDrag),this.on(this.$midHandleCursor,"mouseenter mouseleave",this.hoverMidHandle),this.on(this.$right.add(this.$left),"mouseenter mouseleave",this.hoverSideHandle),this.on(this.select("timelineCursorSelector").add(this.$mid),"mouseenter",this.hoverSelectionBubble)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(123),o=s(a),r=i(111),c=s(r),l=i(591),d=s(l),u=i(395),h=s(u),f=i(478),m=s(f);e.default=(0,c.default)(n,d.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({videoSelector:".VideoTrim-video",playStateSelector:".VideoTrim-playState",audioStateSelector:".VideoTrim-audioState",isPlayingClass:"is-playing",isMutedClass:"is-muted",playVideoPollFreq:30}),this.loadVideo=function(t,e){this.videoDuration=0,this.video.pause(),this.video.src=e.videoSrc,this.video.load()},this.unloadVideo=function(){this.loadVideo(null,{videoSrc:""})},this.playVideo=function(t){var e=this;void 0!==t&&this.setVideoCurrentTime(t),this.isVideoPlaying()||(clearInterval(this.playbackIntervalId),this.playbackIntervalId=setInterval(function(){e.video.paused?e.pauseVideo():e.isVideoAtEnd()&&e.pauseVideo(e.endTime),e.updateVideoState()},1e3/this.attr.playVideoPollFreq),this.video.play(),this.isProgressVisible=!0)},this.pauseVideo=function(t){this.video.pause(),clearInterval(this.playbackIntervalId),void 0!==t&&(this.isProgressVisible=!1,this.setVideoCurrentTime(t)),this.updateVideoState()},this.isVideoPlaying=function(){return!this.video.paused&&this.video.currentTime>0},this.setVideoMuted=function(t){this.video.muted=t},this.isVideoMuted=function(){return this.video.muted},this.isVideoAtEnd=function(){var t=1/this.attr.playVideoPollFreq;return this.getVideoCurrentTime()>this.endTime-t||this.video.ended},this.getVideoCurrentTime=function(){return this.video.currentTime},this.setVideoCurrentTime=function(t){this.video.currentTime=t},this.updateVideoState=function(){this.$node.toggleClass(this.attr.isPlayingClass,this.isVideoPlaying()).toggleClass(this.attr.isMutedClass,this.isVideoMuted()),this.trigger("uiVideoStateChanged")},this.readVideoMetadata=function(){this.videoDuration=this.video.duration,this.startTime=0,this.endTime=this.videoDuration,this.trigger("uiVideoLoaded"),this.updateVideoState()},this.videoError=function(t){this.trigger("uiVideoError",{message:"Video is not playable."})},this.videoUnloaded=function(t){this.videoDuration=0,this.startTime=0,this.endTime=0,this.trigger("uiVideoUnloaded")},this.toggleVideoPlayback=function(){this.videoDuration&&(this.isVideoPlaying()?this.pauseVideo():this.isVideoAtEnd()?this.playVideo(this.startTime):this.playVideo())},this.toggleAudioState=function(){this.setVideoMuted(!this.isVideoMuted()),this.updateVideoState()},this.after("initialize",function(){this.video=this.select("videoSelector")[0],this.on("uiLoadVideo",this.loadVideo),this.on("uiUnloadVideo",this.unloadVideo),this.on(this.video,"loadedmetadata",this.readVideoMetadata),this.on(this.video,"error",this.videoError),this.on(this.video,"emptied",this.videoUnloaded),this.on("click",{videoSelector:this.toggleVideoPlayback,playStateSelector:this.toggleVideoPlayback,audioStateSelector:this.toggleAudioState})}),this.before("teardown",function(){this.unloadVideo()})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(123);s(a);e.default=n},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"dialogs/close_button":i(217),"media/video_trim":i(593)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="modal draggable MediaEditDialog'),s.s(s.f("is_video",t,e,1),t,e,1,0,0,"")||s.b(" MediaEditDialog--photo"),s.b('">\n  <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"    ")),s.b('    <div class="modal-header">\n      <h3 class="modal-title">'),s.b(s.v(s.f("title",t,e,0))),s.b("</h3>\n    </div>\n"),s.s(s.f("is_video",t,e,1),t,e,0,259,2726,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('      <div class="MediaEditDialog-videoSection">\n        <div class="modal-body">\n'),i.b(i.rp("<media/video_trim1",t,e,"          ")),i.s(i.f("whitelisted_video_user",t,e,1),t,e,0,411,2503,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <form class="MediaEditForm form-horizontal">\n              <div class="control-group">\n                <div class="MediaEditForm-titleCharCounter CharCounter">\n                  <input class="MediaEditForm-title CharCounter-target js-initial-focus" type="text" name="video_metadata[title]" value="'),i.b(i.v(i.f("video_title",t,e,0))),i.b('" placeholder="Type the title of your video here" />\n                  <div class="CharCounter-counter"></div>\n                </div>\n              </div>\n              <div class="control-group">\n                <div class="MediaEditForm-descriptionCharCounter CharCounter">\n                  <textarea class="MediaEditForm-description CharCounter-target" name="video_metadata[description]" placeholder="Type a brief description here.">'),i.b(i.v(i.f("video_description",t,e,0))),i.b('</textarea>\n                  <div class="CharCounter-counter"></div>\n                </div>\n              </div>\n              <div class="control-group MediaEditForm-ctaContainer">\n                <select class="MediaEditForm-ctaSelect'),i.s(i.f("has_cta",t,e,1),t,e,1,0,0,"")||i.b(" u-inactive"),i.b(' t1-select" name="video_metadata[cta]">\n                  <option value="" '),i.s(i.f("has_cta",t,e,1),t,e,1,0,0,"")||i.b(" selected"),i.b('>Choose a call to action</option>\n                  <option value="visit_site"'),i.s(i.f("is_cta_visit_site",t,e,1),t,e,0,1674,1683,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(" selected")}),t.pop()),i.b('>Visit site:</option>\n                  <option value="watch_now"'),i.s(i.f("is_cta_watch_now",t,e,1),t,e,0,1791,1800,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(" selected")}),t.pop()),i.b('>Watch now:</option>\n                </select>\n                <input class="MediaEditForm-ctaUrl'),i.s(i.f("has_cta",t,e,1),t,e,1,0,0,"")||i.b(" u-hidden"),i.b('" type="text" name="video_metadata[cta_url]" value="'),i.b(i.v(i.f("video_ctl_url",t,e,0))),i.b('" placeholder="Website" />\n              </div>\n              <div class="control-group">\n                <div class="checkbox">\n                  <label>\n                    <input class="MediaEditForm-embeddable" type="checkbox" name="video_metadata[embeddable]" value="true" '),i.s(i.f("is_video_embeddable",t,e,1),t,e,0,2322,2329,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("checked")}),t.pop()),i.b(">\n                    Allow video to be embedded\n                  </label>\n                </div>\n              </div>\n            </form>\n")}),t.pop()),i.b('        </div>\n        <div class="modal-footer text-right">\n          <button type="button" class="btn primary-btn js-done">\n            Done\n          </button>\n        </div>\n      </div>\n')}),t.pop()),s.s(s.f("is_video",t,e,1),t,e,1,0,0,"")||(s.b('      <div class="MediaEditDialog-photoSection">\n        <div class="modal-body"><div class="MediaEditDialog-photoContainer"></div></div>\n'),s.s(s.f("can_compose_alt_text",t,e,1),t,e,0,2929,3350,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('          <div class="MediaEditDialog-footer modal-footer">\n            <textarea aria-label="Image description" class="MediaEditDialog-altTextTextarea js-initial-focus" placeholder="Describe this photo for the visually impaired" maxlength="420">'),i.b(i.v(i.f("alt_text",t,e,0))),i.b('</textarea>\n            <button type="button" class="btn primary-btn js-done MediaEditDialog-applyAltTextButton" disabled>Apply</button>\n          </div>\n')}),t.pop()),s.b("      </div>\n")),s.b('  </div>\n</div>\n<div class="close-modal-background-target"></div>\n'),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}},"<media/video_trim1":{name:"media/video_trim",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="VideoTrim">\n  <div class="VideoTrim-shroud"></div>\n  <div class="VideoTrim-videoContainer">\n    <video class="VideoTrim-video" preload="auto"></video>\n    <div class="VideoTrim-controls">\n      <span class="VideoTrim-playState">\n        <span class="Icon Icon--play"></span>\n        <span class="Icon Icon--pause"></span>\n      </span>\n      <div class="VideoTrim-timeline">\n        <div class="VideoTrim-timelineCursor"></div>\n        <div class="VideoTrim-scrubber">\n          <div class="VideoTrim-timeBubble"></div>\n          <div class="VideoTrim-unplayedScrubber"></div>\n        </div>\n      </div>\n      <span class="VideoTrim-timeContainer">\n        <span class="VideoTrim-time"></span>\n        <span class="VideoTrim-widestTime" aria-hidden="true"></span>\n      </span>\n      <span class="VideoTrim-audioState">\n        <span class="Icon Icon--soundOn"></span>\n        <span class="Icon Icon--soundOff"></span>\n      </span>\n    </div>\n  </div>\n  <div class="VideoTrim-selection">\n    <div class="VideoTrim-ticks"></div>\n    <div class="VideoTrim-innerSelection">\n      <div class="VideoTrim-midHandle">\n        <div class="VideoTrim-hideTicks"></div>\n        <div class="VideoTrim-leftHandle"></div>\n        <div class="VideoTrim-midHandleCursor"></div>\n        <div class="VideoTrim-midHandleInner">\n          <div class="VideoTrim-midHandleGrip"></div>\n        </div>\n        <div class="VideoTrim-rightHandle"></div>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.viewportHelpers=c.default,this.defaultAttrs({scrollThrottleMs:200,mediaSelectors:".PlayableMedia-player, .js-macaw-cards-iframe-container.card-type-promo_video_convo, .js-macaw-cards-iframe-container.card-type-audio, .js-macaw-cards-iframe-container.card-type-live_video, .js-macaw-cards-iframe-container.card-type-periscope_broadcast, .js-macaw-cards-iframe-container.card-type-player",tweetIdDataAttr:"data-tweet-id",tweetsSelector:".tweet",permalinkOverlaySelector:".PermalinkOverlay",openDropdownSelector:".dropdown.open .dropdown-menu",tweetNonceId:"data-tweet-nonce"}),this.notifyViewportPositionChange=function(){var t=this,e=c.default.getVisibleViewport(),i=this.getDropdownBoundingRect();this.watchedMedia.filter(function(t){return 0!==t.mediaElement.children.length}).filter(function(e){return t.permalinkOpen===e.inPermalink}).map(function(s){var n=s.mediaElement.getBoundingClientRect(),a=!1;return i&&(a=0!==t.generatePercentVisible(n,i)),{tweetId:s.tweetId,parentViewportSize:e,positionInParent:(0,h.default)(n),videoHidden:t.pageHidden||t.modalWithinPermalinkOpen||t.modalOpen&&!s.inPermalink||a}}).forEach(function(e){return t.notifyViewportPositionChangeForElement(e.tweetId,e.parentViewportSize,e.positionInParent,e.videoHidden)})},this.notifyViewportPositionChangeForElement=function(t,e,i,s){var n={parentViewportSize:e,positionInParent:(0,h.default)(i),videoHidden:s,percentVisible:s?0:this.generatePercentVisible(e,i)};this.trigger("uiPlayableMediaPositionChange",{tweetId:t,positionData:n})},this.generatePercentVisible=function(t,e){var i=e.bottom-e.top,s=e.right-e.left,n=s*i,a={top:Math.max(e.top,t.top),left:Math.max(e.left,t.left),bottom:Math.min(e.bottom,t.bottom),right:Math.min(e.right,t.right)},o=Math.max(0,a.bottom-a.top),r=Math.max(0,a.right-a.left),c=o*r;return 0===n?0:c/n},this.isMediaElementWithinPermalink=function(t){var e=t.closest(this.attr.permalinkOverlaySelector);return e.length>0},this.updateTweetList=function(){var e=this;this.watchedMedia=this.select("mediaSelectors").map(function(i,s){var n=t(s),a=e.modalOpen&&e.isMediaElementWithinPermalink(n),o=n.closest(e.attr.tweetsSelector);return{mediaElement:s,tweetId:o.attr(e.attr.tweetNonceId)||o.attr(e.attr.tweetIdDataAttr),inPermalink:a}}).get(),this.updatePermalinkVisibility(),this.throttledNotifyViewportPositionChange()},this.updatePermalinkVisibility=function(){this.permalinkOpen=this.$permalink.is(":visible")},this.updatePageVisibility=function(){var t=!document.hasFocus()||document.hidden;t!==this.pageHidden&&(this.pageHidden=t,this.throttledNotifyViewportPositionChange())},this.setModalOpen=function(){this.permalinkOpen?this.modalWithinPermalinkOpen=!0:this.modalOpen=!0,this.throttledNotifyViewportPositionChange()},this.setModalClosed=function(){this.modalWithinPermalinkOpen?this.modalWithinPermalinkOpen=!1:this.modalOpen=!1,this.updateTweetList()},this.getDropdownBoundingRect=function(){return this.dropdownOpen?this.dropdownOpen.getBoundingClientRect():null},this.setDropdownOpen=function(){this.dropdownOpen=this.select("openDropdownSelector")[0],this.throttledNotifyViewportPositionChange()},this.setDropdownClosed=function(){this.dropdownOpen=null,this.throttledNotifyViewportPositionChange()},this.after("initialize",function(){this.watchedMedia=[],this.pageHidden=!1,this.modalOpen=!1,this.permalinkOpen=!1,this.modalWithinPermalinkOpen=!1,this.dropdownOpen=null,this.throttledNotifyViewportPositionChange=d.default.throttle(this.notifyViewportPositionChange.bind(this),this.attr.scrollThrottleMs),this.on(document,"scroll uiDynamicCardLoaded uiDynamicCardUnloaded uiPlayableMediaReady",this.throttledNotifyViewportPositionChange),this.on(window,"resize",this.throttledNotifyViewportPositionChange),this.on(document,"uiPageHidden uiPageVisible",this.updatePageVisibility),this.on(window,"focus focusin blur focusout",this.updatePageVisibility),this.$permalink=this.select("permalinkOverlaySelector"),this.$permalink.on("scroll",this.throttledNotifyViewportPositionChange),this.on(document,"uiDialogOpened",this.setModalOpen),this.on(document,"uiDialogClosed",this.setModalClosed),this.on(document,"uiDropdownOpened",this.setDropdownOpen),this.on(document,"uiDropdownClosed",this.setDropdownClosed),this.on(document,"uiWatchPlayableMedia",this.updateTweetList),this.updateTweetList()})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(177),c=s(r),l=i(126),d=s(l),u=i(595),h=s(u);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e){"use strict";function i(t){return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({top:80,closeOnOtherDialogOpened:!0,topMargin:60,bottomMargin:60,containerSelector:".MomentCapsuleSummaryListDialog-listContainer",itemsSelector:".MomentCapsuleSummaryListDialog-items",capsuleSelector:".MomentCapsuleSummary",createMomentSelector:".MomentCapsuleSummaryListDialog-button--newMoment",spinnerSelector:".spinner"}),this.around("open",function(t,e,i){this.tweetId=i.tweet_id,0===this.$items.children().length&&this.trigger("uiMomentsGetDialogUserMoments"),t()}),this.renderDialogContents=function(t,e){this.select("spinnerSelector").hide(),this.$items.append(e.html),this.$items.trigger("uiMomentsHasInjectedNewItems"),this.trigger("uiTriggerEllipsis"),this.updatePaginationValues(e),this.resizeDialog()},this.getOlderMoments=function(){this.hasMoreItems&&(this.select("spinnerSelector").show(),this.trigger("uiMomentsGetDialogUserMoments",{before:this.oldestMomentId}))},this.updatePaginationValues=function(t){this.oldestMomentId=t.oldest_moment_id,this.hasMoreItems=t.has_more_items},this.windowHeight=function(){return t(window).height()},this.resizeDialog=function(){var t=this.$dialog.height()+this.attr.topMargin+this.attr.bottomMargin-this.windowHeight();this.$container.css("max-height",this.$container.height()-t)},this.handleCapsuleClick=function(e,i){e.preventDefault(),e.stopPropagation();var s=t(e.target).closest(this.attr.capsuleSelector).attr("data-moment-id");this.trigger("uiMomentMakerAddTweet",{moment_id:s,tweet_id:this.tweetId,scribeContext:{component:"add_to_moment_dialog"}}),this.close()},this.handleCreateMoment=function(t,e){this.trigger("uiMomentMakerCreateMoment",{tweet_id:this.tweetId,scribeContext:{component:"add_to_moment_dialog"}}),this.close()},this.after("initialize",function(){this.tweetId=void 0,this.$container=this.select("containerSelector"),this.$items=this.select("itemsSelector"),this.attachChild(c.default,this.attr.containerSelector),this.attachChild(d.default,this.select("containerSelector"),{contentSelector:this.attr.itemsSelector}),this.on(document,"uiOpenAddToMomentDialog",this.open),this.on(document,"dataMomentsGetDialogUserMomentsSuccess",this.renderDialogContents),this.on("click",{capsuleSelector:this.handleCapsuleClick,createMomentSelector:this.handleCreateMoment}),this.on("uiNearTheBottom",this.getOlderMoments)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(597),c=s(r),l=i(451),d=s(l),u=i(163),h=s(u),f=i(227),m=s(f);e.default=(0,o.default)(h.default,m.default,n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({mediaItemSelector:".MomentMediaItem",mediaEntitySelector:".MomentMediaItem-entity",dataShowableSelector:'[data-showable="true"]',dataShowableAttr:"data-showable",dataCropAspectRatio:"data-crop-aspect-ratio",cropSquare:"square",cropPortrait3x4:"portrait-three-by-four"}),this.loadAllMedia=function(){var t=this.select("mediaItemSelector").not(this.attr.dataShowableSelector);t.each(this.loadMedia.bind(this))},this.loadMedia=function(e,i){var s=t(i),n=s.find(this.attr.mediaEntitySelector);n.length&&s.length&&n.css(this.getCssForLoading(s,n)),s.attr(this.attr.dataShowableAttr,!0)},this.getCssForLoading=function(t,e){var i=this.getMediaDimensions(e),s=this.getTargetDimensions(t),n=t.attr(this.attr.dataCropAspectRatio),a=n===this.attr.cropSquare,o=n===this.attr.cropPortrait3x4;if(a||o){var r=this.getCropData(e,n)||c.default.getDefaultCropRect(i,s);return c.default.calculateCrop(i,s,r)}return this.calculateScalingCss(s,i)},this.getCropData=function(t,e){var i={x:parseInt(t.data(e+"-crop-x"),10),y:parseInt(t.data(e+"-crop-y"),10),width:parseInt(t.data(e+"-crop-width"),10),height:parseInt(t.data(e+"-crop-height"),10)};if(this.validateCropData(i))return i},this.validateCropData=function(t){return Object.keys(t).every(function(e){return!isNaN(t[e])})},this.getMediaDimensions=function(t){var e="img"===t.get(0).nodeName.toLowerCase();return e?this.getImageDimensions(t):this.getIframeDimensions(t)},this.getImageDimensions=function(t){var e=t.get(0);return{width:t.data("width")||e.naturalWidth,height:t.data("height")||e.naturalHeight}},this.getIframeDimensions=function(t){return{width:t.data("width"),height:t.data("height")}},this.getTargetDimensions=function(t){return{width:t.width(),height:t.height()}},this.calculateScalingCss=function(t,e){var i=t.width/e.width*e.height;return{width:"100%",height:i+"px"}},this.after("initialize",function(){this.loadAllMedia(),this.on("uiMomentsHasInjectedNewItems uiActivityPopupRendered uiMomentAnalyticsRendered",this.loadAllMedia)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(598),c=s(r);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={cropRatioThreshold:.05,calculateCrop:function(t,e,i){var s=e.width/e.height,n=i.width/i.height,a=(s-n)/s;Math.abs(a)>this.cropRatioThreshold&&(i=this.getDefaultCropRect(t,s),n=i.width/i.height);var o=t.width/i.width*100,r=t.height/i.height*100,c=i.x/i.width*100,l=i.y/i.width*100;return{width:o+"%",height:r+"%",marginLeft:-1*c+"%",marginTop:-1*l+"%"}},getDefaultCropRect:function(t,e){var i=e.width/e.height,s=i<1,n=i>1,a=void 0;if(s){var o=t.height*i;a={width:o,height:t.height}}else if(n){var r=t.width/i;a={width:t.width,height:r}}else{var c=Math.min(t.width,t.height);a={width:c,height:c}}var l=1;return a.width>t.width?l=t.width/a.width:a.height>t.height&&(l=t.height/a.height),a.width=a.width*l,a.height=a.height*l,a.x=.5*(t.width-a.width),a.y=.5*(t.height-a.height),["width","height","x","y"].forEach(function(t){return a[t]=Math.round(a[t])}),a}};e.default=i},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({tweetItemSelector:".tweet",deleteSelector:".js-actionDelete",shareViaDMSelector:".js-actionShareViaDM",copyLinkToTweetSelector:".js-actionCopyLinkToTweet",embedTweetSelector:".js-actionEmbedTweet",embedVideoSelector:".js-actionEmbedVideo",openAdsInfoLinkSelector:".js-actionOpenAdsInfoPage",openWhyThisAdModalSelector:".js-actionWhyThisAd",blockOrReportTweetSelector:".js-actionBlockOrReport",blockTweetSelector:".js-actionBlock",reportTweetSelector:".js-actionReport",unblockTweetSelector:".js-actionUnblock",userTogglePinTweetSelector:".js-actionPinTweet",curateTweetSelector:".js-actionCurateTweet",curateToOtherSelector:".js-actionCurateTweetOther",curateToNewTimelineSelector:".js-actionCurateTweetNewTimeline",removeMediaTagSelector:".js-actionRemoveTag",tweetContainerSelector:".js-stream-item",mediaTagContainerSelector:".media-tags-container",pinnedTweetClass:"user-pinned",hasTimelinesClass:"has-timelines"}),this.renderCustomTimelinesList=function(t,e){var i=this.select("curateToOtherSelector");this.select("curateTweetSelector").remove(),i.before(e.html),this.select("curateTweetSelector").length>0&&i.addClass(this.attr.hasTimelinesClass)},this.curateTweet=function(e,i,s){var n=t(i.el),a=n.attr("data-timeline-id"),o=n.data("is-member"),r=s.tweetData;r.timelineId=a,o?this.trigger("uiCurateRemoveTweet",r):this.trigger("uiCurateAddTweet",r),this.trigger("uiCloseDropdowns")},this.getCustomTimelines=function(t,e,i){var s=i.$tweet.attr("data-tweet-id");this.trigger("uiNeedsCustomTimelines",{tweetId:s})},this.confirmRemoveMediaTag=function(t){this.trigger(t.target,"uiOpenConfirmDialog",{titleText:"Remove photo tag from Tweet?",bodyText:"Are you sure you want to remove your photo tag from this Tweet?",cancelText:"Cancel",submitText:"OK",action:"MediaTagRemove"})},this.removeMediaTag=function(t,e,i){this.trigger(document,"uiDidRemoveMediaTag",i.tweetData)},this.handleRemoveMediaTagSuccess=function(t,e){var i=(0,l.default)(this.$node,this.attr.tweetItemSelector,e.id_str);i.find(this.attr.mediaTagContainerSelector).html(e.item_html),this.trigger("uiShowMessage",{message:"Photo tag removed"})},this.handleRemoveMediaTagFailure=function(t){this.trigger("uiShowMessage",{message:"Cannot delete the tag. Please try again later."})},this.showConfirmPinDialog=function(t){t.stopImmediatePropagation(),this.trigger(t.target,"uiOpenConfirmDialog",{titleText:"Pin this Tweet to the top of your profile",bodyText:"This will replace any previously pinned Tweet. Are you sure?",cancelText:"Cancel",submitText:"Pin",action:"UserPinTweetToggle"})},this.showConfirmUnPinDialog=function(t){t.stopImmediatePropagation(),this.trigger(t.target,"uiOpenConfirmDialog",{titleText:"Unpin from your profile",bodyText:"Are you sure?",cancelText:"Cancel",submitText:"Unpin",action:"UserPinTweetToggle"})},this.showUserPinToggledMessage=function(t,e){this.trigger("uiShowStickyMessage",e)},this.unpinOtherTweets=function(t,e){this.select("tweetItemSelector").removeClass(this.attr.pinnedTweetClass),this.handleTransition("addClass",this.attr.pinnedTweetClass).call(this,t,e)},this.handleTransition=function(t,e){return function(i,s){var n=s.id||s.sourceEventData.id,a=(0,l.default)(this.$node,this.attr.tweetItemSelector,n);a[t](e)}},this.confirmPinToggle=function(t,e,i){var s=i.$tweet.hasClass(this.attr.pinnedTweetClass)?"uiNeedUserUnpinTweetConfirm":"uiNeedUserPinTweetConfirm";this.trigger(i.$tweet,s)},this.togglePinnedTweet=function(t,e,i){return i.$tweet.hasClass(this.attr.pinnedTweetClass)?"uiDidUserUnpinTweet":"uiDidUserPinTweet"},this.unblockFromTweetAction=function(t,e){this.trigger("uiCloseDropdowns"),this.trigger("uiUnblockAction",e)},this.openAdsInfoLink=function(t,e){var i="https://business.twitter.com/help/how-twitter-ads-work";window.open(i,"_blank"),this.trigger("uiCloseDropdowns")},this.after("initialize",function(){var t=this.mkTweetDataCollectorForAction(this.interactionDataWithCard);this.on("click",{embedTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsEmbedTweetDialog")),embedVideoSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsEmbedVideoDialog")),copyLinkToTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsCopyLinkToTweetDialog")),openWhyThisAdModalSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsWhyThisAdDialog")),openAdsInfoLinkSelector:this.openAdsInfoLink}),this.attr.loggedIn&&(this.on("click",{deleteSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiOpenDeleteDialog")),userTogglePinTweetSelector:this.composeHandler(this.getClosestTweet,this.confirmPinToggle),shareViaDMSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiComposeNewDMWithTweet")),curateTweetSelector:this.composeHandler(this.getClosestTweet,t,this.curateTweet),curateToOtherSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiOpenCurateDialog")),curateToNewTimelineSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiOpenCreateCustomTimelineDialog")),removeMediaTagSelector:this.confirmRemoveMediaTag,blockOrReportTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsBlockOrReportDialog")),blockTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsBlockDialog")),unblockTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiDidUnblockFromTweet")),reportTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsReportDialog"))}),this.on("uiDropdownOpened",this.composeHandler(this.getClosestTweet,this.getCustomTimelines)),this.on("uiUserPinTweetToggleConfirm",this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction(this.togglePinnedTweet.bind(this)))),this.on("uiMediaTagRemoveConfirm",this.composeHandler(this.getClosestTweet,t,this.removeMediaTag)),this.on(document,"uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems uiHasInjectedRangeTimelineItems",this.applyARIAAttrs),this.on(document,"dataGotCustomTimelines",this.renderCustomTimelinesList),this.on(document,"uiNeedUserPinTweetConfirm",this.showConfirmPinDialog),this.on(document,"uiNeedUserUnpinTweetConfirm",this.showConfirmUnPinDialog),this.on(document,"uiDidUnblockFromTweet",this.unblockFromTweetAction),this.on(document,"dataDidUserPinTweet dataDidUserUnpinTweet",this.showUserPinToggledMessage),this.on(document,"dataDidUserPinTweet",this.unpinOtherTweets),
this.on(document,"uiDidUserPinTweet dataFailedToUserUnpinTweet",this.handleTransition("addClass",this.attr.pinnedTweetClass)),this.on(document,"uiDidUserUnpinTweet dataFailedToUserPinTweet",this.handleTransition("removeClass",this.attr.pinnedTweetClass)),this.on(document,"dataMediaTagRemoveSuccess",this.handleRemoveMediaTagSuccess),this.on(document,"dataMediaTagRemoveFailure",this.handleRemoveMediaTagFailure))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(123),o=(s(a),i(111)),r=s(o),c=i(600),l=s(c),d=i(540),u=s(d),h=i(138),f=s(h),m=i(601),p=s(m),g=i(542),v=s(g),b=i(602),w=s(b),S=(0,r.default)(n,u.default,v.default,f.default,p.default,w.default);e.default=S}).call(e,i(10))},function(t,e){"use strict";function i(t,e,i){var s=e.split(",").map(function(t){return t+"[data-tweet-id="+i+"]"}).join();return t.find(s)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},,function(t,e,i){(function(t){"use strict";function i(){this.defaultAttrs({momentItemSelector:".MomentCurationMenuItem",addTweetFromMomentSelector:".MomentCurationMenuItem:not(.is-member)",removeTweetFromMomentSelector:".MomentCurationMenuItem.is-member",addTweetToOtherMomentSelector:".js-actionMomentMakerAddTweetToOtherMoment",addTweetToNewMomentSelector:".js-actionMomentMakerCreateMoment",momentMemberClass:"is-member"}),this.renderUserMomentsList=function(t,e){this.select("momentItemSelector").remove(),this.select("addTweetToOtherMomentSelector").toggle(e.html.length>0).before(e.html)},this.setCurationClassValue=function(t){var e=this;return function(i,s){return e.select("momentItemSelector").filter("[data-moment-id="+s.moment_id+"]").toggleClass(e.attr.momentMemberClass,t)}},this.triggerMomentCurationEvent=function(e){return function(i,s,n){var a=t(s.el),o=a.attr("data-moment-id"),r=n.$tweet.attr("data-tweet-id");this.trigger(e,{moment_id:o,tweet_id:r,scribeContext:{component:"tweet_actions_dropdown"}}),this.trigger("uiCloseDropdowns")}},this.getMomentsWithEvent=function(t){return function(e,i,s){var n=s.$tweet.attr("data-tweet-id");this.trigger(t,{tweet_id:n})}},this.after("initialize",function(){this.attr.loggedIn&&(this.on("click",{addTweetFromMomentSelector:this.composeHandler(this.getClosestTweet,this.triggerMomentCurationEvent("uiMomentMakerAddTweet")),removeTweetFromMomentSelector:this.composeHandler(this.getClosestTweet,this.triggerMomentCurationEvent("uiMomentMakerRemoveTweet")),addTweetToOtherMomentSelector:this.composeHandler(this.getClosestTweet,this.getMomentsWithEvent("uiOpenAddToMomentDialog")),addTweetToNewMomentSelector:this.composeHandler(this.getClosestTweet,this.triggerMomentCurationEvent("uiMomentMakerCreateMoment"))}),this.on("uiDropdownOpened",this.composeHandler(this.getClosestTweet,this.getMomentsWithEvent("uiMomentsGetDropdownUserMoments"))),this.on(document,"dataMomentMakerAddTweetSuccess",this.setCurationClassValue(!0)),this.on(document,"dataMomentMakerRemoveTweetSuccess",this.setCurationClassValue(!1)),this.on(document,"dataMomentsGetDropdownUserMomentsSuccess",this.renderUserMomentsList))})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({unEllipsifiedTextClass:"js-ellipsis",unEllipsifiedTextSelector:".js-ellipsis",maxCharsRemoveEnsureEndOnWordBreak:5}),this.after("initialize",function(){"undefined"!=typeof document.createRange&&this.on(document,"uiSwiftLoaded uiPageChanged uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems uiHasInjectedRangeTimelineItems uiOverlayUpdate uiTrendsDisplayed uiShowMoreTrends uiCommerceTabToggled uiTriggerEllipsis",this.addEllipses)}),this.addEllipses=function(){var t=this.select("unEllipsifiedTextSelector").filter(":visible");t.removeClass(this.attr.unEllipsifiedTextClass),t.each(this.addEllipsis.bind(this))},this.addEllipsis=function(e,i){var s=t(i),n=this.createRange(s);if(n.hasOverflow()){s.data("full-text",s.text()),n.shortenToVisibleContent(),n.ensureLastLineAvailableWidth(this.maxEllipsisWidth(s)),n.shortenToNearestWordBreak({maxCharsToRemove:this.attr.maxCharsRemoveEnsureEndOnWordBreak});var a=n.toDocumentFragment();a.appendChild(document.createTextNode("")),s.html(a),this.trigger(s,"uiEllipsisAdded")}},this.maxEllipsisWidth=function(t){var e=parseInt(t.css("font-size"));return 2*e},this.createRange=function(t){return new c.default(t)}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(604),c=s(r);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e){"use strict";function i(t){function e(){var e=document.createRange(),i=t.contents(),s=t.contents().last()[0];return i.length>0&&(e.setStart(i[0],0),e.setEnd(s,l(s))),e}function i(t){return 3===t.nodeType||4===t.nodeType}function r(){for(var t=c(),e=null,i=null,s=null,n=null,a=0;a<t.length;a++){var o=t[a];(null===i||o.bottom>i)&&(i=o.bottom),(null===e||o.top<e)&&(e=o.top),(null===s||o.left<s)&&(s=o.left),(null===n||o.right>n)&&(n=o.right)}return{top:e,bottom:i,left:s,right:n,width:Math.abs(n-s),height:Math.abs(i-e)}}function c(){for(var t=p.getClientRects(),e=[],i=0;i<t.length;i++)e.push(t[i]);return e.filter(function(t){return t.width>0})}function l(t){return i(t)?t.nodeValue.length:t.childNodes.length}function d(){return t.width()-u()}function u(){var t=r(),e=c(),i=e[e.length-1];return 0===e.length?0:i.right-t.left}function h(t){var e=t.match(a);if(null!==e){var i=e[e.length-1],s=t.lastIndexOf(i);return{startIndex:s,endIndex:s+i.length}}return null}function f(t){return!!t.match(n)}function m(t){return(t.match(s)||[]).length}var p=e();this.shortenToVisibleContent=function(){for(var e=t.contents(),s=e.length-1;s>=0;s--){var n=e[s];if(i(n)){for(var a=n.nodeValue.length;a>=0;a--)if(p.setEnd(n,a),!this.hasOverflow())return}else if(p.setEnd(n,n.childNodes.length),!this.hasOverflow())return}},this.shortenToNearestWordBreak=function(t){var e=p.endContainer,s=t.maxCharsToRemove;if(i(e)&&(e.nodeValue.match(o)||p.endOffset!==e.nodeValue.length&&!f(e.nodeValue[p.endOffset]))){var n=e.nodeValue.slice(0,p.endOffset),a=h(n);null!==a&&(void 0!==s&&m(n.substring(a.endIndex))>s||p.setEnd(e,a.startIndex))}},this.ensureLastLineAvailableWidth=function(t){for(;d(p)<=t;){var e=p.endContainer;if(i(e)&&p.endOffset>1)p.setEnd(e,p.endOffset-1);else{var s=e.previousSibling;if(null===s)break;p.setEnd(s,l(s))}}},this.hasOverflow=function(){var e=r(),i=parseFloat(t.css("line-height"));return Math.round(e.height/i)>Math.round(t.height()/i)},this.toDocumentFragment=function(){return p.cloneContents()},this.setEnd=function(t,e){p.setEnd(t,e)}}Object.defineProperty(e,"__esModule",{value:!0});var s=/([\uD800-\uDBFF][\uDC00-\uDFFF]|[\S\s])/g,n=/\s/,a=/\s+/g,o=/^\n$/;e.default=i},,,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({defaultDisplayDuration:5e3,defaultIcon:void 0}),this.displayNotification=function(t,e){if(e&&"granted"===Notification.permission){var i=new Notification(e.title,{body:e.body,icon:e.icon||this.attr.defaultIcon,tag:e.tag});this.trigger("uiNativeNotificationTriggered",{type:e.type}),i.onclick=this.clickCallback.bind(this,e.click,e.type),i.onerror=this.errorCallback.bind(this,e.error,e.type),setTimeout(i.close.bind(i),e.displayDuration||this.attr.defaultDisplayDuration)}},this.clickCallback=function(t,e,i){i.target.close&&i.target.close(),this.trigger("uiNativeNotificationClicked",{type:e}),this.triggerEventWithData(t)},this.errorCallback=function(t,e){this.trigger("uiNativeNotificationError",{type:e}),this.triggerEventWithData(t)},this.triggerEventWithData=function(t){t&&t.eventName&&this.trigger(t.eventName,t.eventData||{})},this.requestPermission=function(){var t=this;Notification.requestPermission(function(e){switch(e){case"granted":t.trigger("uiNativeNotificationPermissionGranted");break;case"denied":t.trigger("uiNativeNotificationPermissionDenied");break;case"default":t.trigger("uiNativeNotificationPermissionDismissed")}}),this.trigger("uiNativeNotificationPermissionRequested")},this.after("initialize",function(){"Notification"in window&&(this.on("uiRequestNativeNotificationPermission",this.requestPermission),this.on("uiDisplayNativeNotification",this.displayNotification))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=(0,o.default)(n);e.default=r},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.after("initialize",function(){this.scribeOnEvent("uiNativeNotificationPermissionGranted",{page:"",section:"",component:"native_notifications",element:"permission",action:"success"}),this.scribeOnEvent("uiNativeNotificationPermissionDenied",{page:"",section:"",component:"native_notifications",element:"permission",action:"failure"}),this.scribeOnEvent("uiNativeNotificationPermissionDismissed",{page:"",section:"",component:"native_notifications",element:"permission",action:"dismiss"}),this.scribeOnEvent("uiNativeNotificationPermissionRequested",{page:"",section:"",component:"native_notifications",element:"permission",action:"impression"}),this.scribeOnEvent("uiNativeNotificationTriggered",{page:"",section:"",component:"native_notifications",element:"notification",action:"show"}),this.scribeOnEvent("uiNativeNotificationClicked",{page:"",section:"",component:"native_notifications",element:"notification",action:"click"}),this.scribeOnEvent("uiNativeNotificationError",{page:"",section:"",component:"native_notifications",element:"notification",action:"error"})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r),l=(0,o.default)(n,c.default);e.default=l},,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.pollForNotifications=function(t,e){d.default.shouldPoll()&&this.trigger("uiDMPoll")},this.resetDMs=function(t,e){d.default.resetDMState(t,e)},this.notifications=d.default,this.after("initialize",function(){d.default.init(this.attr),this.on(document,"uiResetDMPoll",this.resetDMs),this.on(document,"uiPollForNotifications",this.pollForNotifications),this.timer=(0,c.default)("uiPollForNotifications")})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(611),c=s(r),l=i(342),d=s(l),u=(0,o.default)(n);e.default=u},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(e,i,s){var n={focusedInterval:3e4,blurredInterval:9e4,backoffFactor:2};s=c.default.merge(n,s);var a=o.default.setIntervalEvent(e,s.focusedInterval,s.eventData);return t(document).on("uiPageHidden",a.backoff.bind(a,s.blurredInterval,s.backoffFactor)),t(document).on("uiPageVisible",a.cancelBackoff.bind(a)),a}Object.defineProperty(e,"__esModule",{value:!0});var a=i(110),o=s(a),r=i(126),c=s(r);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.requestEmbedCode=function(t,e){var i=this.cacheKeyForOptions(e),s=this.cachedEmbedCodes[i],n=this.receivedEmbedCode.bind(this,e),a=this.failedToReceiveEmbedCode.bind(this,e);return s?void this.receivedEmbedCode(e,s):void this.get({dataType:"jsonp",url:this.embedCodeUrl(),data:d.default.merge({id:e.tweetId},e.data),eventData:{},success:n,error:a})},this.embedCodeUrl=function(){return"//api.twitter.com/1/statuses/oembed.json"},this.receivedEmbedCode=function(t,e){var i=this.cacheKeyForOptions(t);this.cachedEmbedCodes[i]=e,this.trigger("dataOembedSuccess",{options:t,data:e})},this.failedToReceiveEmbedCode=function(t){t.retry?(t.retry=!1,this.trigger("dataOembedRetry",t),this.requestEmbedCode({},t)):this.trigger("dataOembedError",t)},this.cacheKeyForOptions=function(t){return JSON.stringify(t.data)+t.tweetId},this.after("initialize",function(){this.on("uiNeedsOembed",this.requestEmbedCode),this.cachedEmbedCodes={}})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=i(126),d=s(l);e.default=(0,o.default)(n,c.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeError=function(t,e){this.scribe({component:"oembed",action:"request_failed"})},this.scribeRetry=function(t,e){this.scribe({component:"oembed",action:"retry"})},this.scribeRequest=function(t,e){this.scribe({component:"oembed",action:"request"},e)},this.scribeSuccess=function(t,e){this.scribe({component:"oembed",action:"success"},e)},this.after("initialize",function(){this.on("dataOembedError",this.scribeError),this.on("dataOembedRetry",this.scribeRetry),this.on("dataOembedRequest",this.scribeRequest),this.on("dataOembedSuccess",this.scribeSuccess)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r);e.default=(0,o.default)(n,c.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){var e=void 0;this.defaultAttrs({offersDialogIframeSelector:".offers-card-iframe",offersActionSelector:".OffersCard-offersAction",tweetSelector:".tweet",commerceCardSelector:".OffersCard",top:47,defaultHeight:"600px"}),this.openDialog=function(t,e){var i=void 0;e&&e.retweetId?i="/i/redeem/status/"+e.retweetId:e&&e.tweetId&&(i="/i/redeem/status/"+e.tweetId),i&&(this.trigger("uiOffersCardClicked",e),this.select("offersDialogIframeSelector").attr("src",i),this.open())},this.closeDialog=function(t,e){this.select("offersDialogIframeSelector").attr("src","about:blank"),this.select("offersDialogIframeSelector").css("height",this.attr.defaultHeight),this.off(window,"message",this.adjustIframeHeight)},this.adjustIframeHeight=function(t){var e={iframeSelector:this.attr.offersDialogIframeSelector,isQualified:function(t){return t.name&&"offers"===t.name&&t.height}};this.fitIframeHeight(t,e)},this.offersActionClicked=function(i,s){var n=t(s.el).closest(this.attr.tweetSelector);e={tweetId:n.data("tweet-id"),retweetId:n.data("retweet-id"),impressionId:n.data("impression-id"),disclosureType:n.data("disclosure-type")},this.trigger("uiNeedsOffersDialog",e)},this.onSuccess=function(t,i){this.trigger("uiCloseDialog"),this.trigger("uiOffersSaveSuccess",e),setTimeout(function(t){return t.trigger("uiShowMessage",{message:"Offer claimed! Redemption details will be emailed shortly."})},200,this)},this.setupMessageListener=function(){this.on(window,"message",this.adjustIframeHeight)},this.after("initialize",function(){this.on("uiDialogOpened",this.setupMessageListener),this.on("uiDialogClosed",this.closeDialog),this.on(document,"uiOffersSaveComplete",this.onSuccess),this.on("uiNeedsOffersDialog",this.openDialog),this.on(document,"click",{offersActionSelector:this.offersActionClicked})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(123),c=(s(r),i(163)),l=s(c),d=i(172),u=s(d),h=i(615),f=s(h),m=i(173),p=s(m),g=(0,o.default)(n,l.default,u.default,p.default,f.default);e.default=g}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({emailNotConfirmedClass:"email-not-confirmed",confirmDialogOptionData:{titleText:"Verify email address",bodyText:"In order to proceed, you must first confirm your email address in your account settings.",cancelText:"Cancel",submitText:"Go to settings",action:"CommerceUserWantToVerifyEmail"}}),this.isEmailConfirmedOrHandle=function(e){var i=t(e).closest(this.attr.commerceCardSelector);return!i.hasClass(this.attr.emailNotConfirmedClass)||(this.trigger("uiOpenConfirmDialog",this.attr.confirmDialogOptionData),!1)},this.goToVerifyEmail=function(){window.location.href="/settings/account"},this.after("initialize",function(){this.on("uiCommerceUserWantToVerifyEmailConfirm",this.goToVerifyEmail)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(123);s(a);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.addCount=function(t,e){this.trigger(document,{type:"uiUpdatePageCount",defaultBehavior:this.updateCount.bind(this,e)})},this.updateCount=function(t){t.count&&(document.title="("+t.count+") "+this.title)},this.removeCount=function(t,e){document.title=this.title},this.setTitle=function(t,e){var i=e||t.originalEvent.state;i&&i.title&&(document.title=this.title=i.title)},this.after("initialize",function(){this.title=document.title,this.on("uiAddPageCount",this.addCount),this.on("uiHasInjectedNewTimeline",this.removeCount),this.on(document,"uiBeforePageChanged uiUpdatePageTitle",this.setTitle)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=(0,o.default)(n);e.default=r},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({heartBeat:0,doc:document,isIe:(0,o.default)().msie});var t=void 0,e=!1;this.visibilityChange=function(i){var s=void 0;switch(i.type){case"focus":case"focusin":s=!1;break;case"blur":case"focusout":s=!0;break;case"beforeunload":case"uiBeforeUnload":this.trigger("uiPageUnload");break;default:t&&(s=this.attr.doc[t])}s===!0?(e=!0,this.trigger("uiPageHidden")):s===!1&&(e=!1,this.trigger("uiPageVisible"))},this.focusTick=function(){e||this.trigger("uiPageVisible")},this.after("initialize",function(){var e={hidden:"visibilitychange",mozHidden:"mozvisibilitychange",webkitHidden:"webkitvisibilitychange",msHidden:"msvisibilitychange"},i=!1;for(var s in e)if(s in this.attr.doc){t=s,this.on(this.attr.doc,e[t],this.visibilityChange),i=!0;break}i||(this.attr.isIe?this.on(this.attr.doc,"focusin focusout",this.visibilityChange):this.on(window,"focus focusin blur focusout",this.visibilityChange)),this.on(window,"beforeunload uiBeforeUnload",this.visibilityChange),this.attr.heartBeat&&(this.timer=c.default.setIntervalEvent("uiPageFocusTick",this.attr.heartBeat),this.on("uiPageFocusTick",this.focusTick))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(156),o=s(a),r=i(110),c=s(r),l=i(111),d=s(l);e.default=(0,d.default)(n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({isLoadingClass:"PaymentOrderDialog-isLoading",isLoadedClass:"PaymentOrderDialog-isLoaded",isFailedClass:"PaymentOrderDialog-isFailed",containerSelector:".PaymentOrderDialog-orderDetails",spinnerSelector:".spinner-bigger",errorAlertSelector:".alert"}),this.setLoading=function(){this.select("modalBodySelector").addClass(this.attr.isLoadingClass).removeClass(this.attr.isLoadedClass).removeClass(this.attr.isFailedClass)},this.setLoaded=function(){this.select("modalBodySelector").removeClass(this.attr.isLoadingClass).addClass(this.attr.isLoadedClass).removeClass(this.attr.isFailedClass)},this.setFailed=function(){this.select("modalBodySelector").removeClass(this.attr.isLoadingClass).removeClass(this.attr.isLoadedClass).addClass(this.attr.isFailedClass)},this.openDialog=function(t,e){this.setLoading(),this.open(),this.trigger("uiShowPaymentOrderDetail",{orderId:e.orderId})},this.populateDialog=function(t,e){this.setLoaded(),this.select("modalBodySelector").addClass(this.attr.isLoadedClass),this.select("containerSelector").html(e.html),this.position()},this.after("initialize",function(){this.on(document,"uiRequestPaymentOrderDetail",this.openDialog),this.on(document,"dataCommercePaymentOrderDetailFetched",this.populateDialog),this.on(document,"dataCommercePaymentOrderDetailFetchFailed",this.setFailed)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r),l=(0,o.default)(n,c.default);e.default=l},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){c.default.attachTo("#profile-hover-container",g.default.merge(t,{eventData:{scribeContext:{component:"profile_hover"}}})),d.default.attachTo(document,g.default.merge(t,{eventData:{scribeContext:{component:"profile_dialog"}}})),m.default.attachTo(document,t),o.default.attachTo(document,t),h.default.attachTo(document,t)}Object.defineProperty(e,"__esModule",{value:!0});var a=i(620),o=s(a),r=i(621),c=s(r),l=i(623),d=s(l),u=i(624),h=s(u),f=i(625),m=s(f),p=i(126),g=s(p),v=t("#profile-hover-container").length>0;e.default=v?n:t.noop}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.listMembershipContent=function(t,e){this.get({url:"/i/"+e.userId+"/lists",dataType:"json",data:{},eventData:e,success:"dataGotListMembershipContent",error:"dataFailedToGetListMembershipContent"})},this.addUserToList=function(t,e){this.post({url:"/i/"+e.userId+"/lists/"+e.listId+"/members",dataType:"json",data:{},eventData:e,success:"dataDidAddUserToList",error:"dataFailedToAddUserToList"})},this.removeUserFromList=function(t,e){this.destroy({url:"/i/"+e.userId+"/lists/"+e.listId+"/members",dataType:"json",data:{},eventData:e,success:"dataDidRemoveUserFromList",error:"dataFailedToRemoveUserFromList"})},this.createList=function(t,e){this.post({url:"/i/lists/create",dataType:"json",data:e,eventData:e,success:"dataDidCreateList",error:"dataFailedToCreateList"})},this.after("initialize",function(){this.on("uiNeedsListMembershipContent",this.listMembershipContent),this.on("uiAddUserToList",this.addUserToList),this.on("uiRemoveUserFromList",this.removeUserFromList),this.on("uiCreateList",this.createList)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r);e.default=(0,o.default)(n,c.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({excludedContainerSelector:".modal-container, .Gallery, .ProfileCard",profileLinkSelector:"a.profile-picture, .fullname a",itemType:"user",subTargetClass:".username"}),this.openProfileHover=function(e,i){"true"!==(0,c.default)("disable_profile_hovers")&&(i.screenName&&delete i.userId,this.skipScreenName&&i.screenName&&i.screenName.toLowerCase()===this.skipScreenName.toLowerCase()||this.skipUserId&&i.userId===this.skipUserId||(i.isHoverRequest=!0,e.target&&t(e.target).closest(this.attr.excludedContainerSelector).length>0||(this.refEventData=i,this.refEl=t(e.target).find(this.attr.subTargetClass)[0]||e.target,this.lastRequested=i.screenName?i.screenName.toLowerCase():i.userId,this.prepareHover(this.lastRequested),this.$node.attr("data-associated-tweet-id",i.tweetId||null),this.$node.attr("data-impression-id",i.impressionId||null),this.$node.attr("data-disclosure-type",i.disclosureType||null),this.$node.attr("data-impression-cookie",i.impressionCookie||null),this.trigger("uiWantsProfilePopup",i))))},this.dataAvailable=function(e,i){if(i.screen_name&&this.lastRequested===i.screen_name.toLowerCase()||this.lastRequested===i.user_id){this.$node.attr("data-screen-name",i.screen_name||null),this.$node.attr("data-user-id",i.user_id||null);var s=t(i.html);s.find("a[href^='/"+i.screen_name+"']").attr("data-send-impression-cookie","true"),this.showHTML(i.user_id,s,t(this.refEl),this.refEventData)}},this.after("initialize",function(t,e){m.default.attachTo(this.$node,{eventData:{scribeContext:{component:"profile_hover"}}}),e.profile_user&&(this.skipScreenName=e.profile_user.screen_name,this.skipUserId=e.profile_user.id_str),this.on(document,"dataProfilePopupSuccess",this.dataAvailable),this.on(document,"uiShowProfileHover",this.openProfileHover),this.on(document,"uiHideProfileHover",this.hide)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(154),c=s(r),l=i(622),d=s(l),u=i(538),h=s(u),f=i(609),m=s(f),p=(0,o.default)(n,d.default,h.default);e.default=p}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){o.default.mixin(this,[c.default]),this.defaultAttrs({hoverContentSelector:".hovercard",hoverContainerClasses:"hovercard",showDelay:600,hideDelay:100}),this.prepareHover=function(t){this.currentKey!==t&&this.forceHide(!1),this.openTimer=setTimeout(this.timerSaysOK.bind(this),this.attr.showDelay)},this.timerSaysOK=function(){this.okToOpen=!0,this.queuedOpen&&this.queuedOpen()},this.showHTML=function(e,i,s,n){var a=this;if(n=n||{},n.id=e,this.currentKey===e&&this.timeout)return clearTimeout(this.timeout),void(this.timeout=null);if(!this.okToOpen)return void(this.queuedOpen=function(){this.showHTML(e,i,s,n)});this.queuedOpen=null,this.forceHide(),this.currentKey=e,this.$hoverContent=t(i),this.$hoverContent.addClass(this.attr.hoverContainerClasses),this.$node.html(this.$hoverContent),this.pos=this.adjacent(this.$node,t(s),{gravity:"vertical"}),this.$hoverContent.addClass("gravity-"+this.pos.gravity),this.$hoverContent.addClass("weight-"+this.pos.weight),"south"===this.pos.gravity&&(this.pos.top-=10),this.$node.css({top:this.pos.top,left:this.pos.left});var o=function(){var t=a.pos.top,e=a.pos.top+("north"===a.pos.gravity?20:-20);a.$node.css({top:e,opacity:0}),a.$node.show(),a.$node.animate({top:t,opacity:1},150,"easeOutQuad"),a.trigger("uiHoverShown",n)},r=this.$hoverContent.find("img.banner");r.length>0?r.on("load",o):o()},this.forceHide=function(t){var e=this;(null!==this.currentKey||t)&&(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.openTimer&&(clearTimeout(this.openTimer),this.openTimer=null),this.currentKey=null,this.$hoverContent&&this.$node.fadeOut({duration:100,complete:function(){e.$hoverContent&&(e.$hoverContent.remove(),e.$hoverContent=null)},easing:"easeOutQuad"}))},this.hide=function(){this.okToOpen=!1,this.queuedOpen=null,clearTimeout(this.openTimer),this.openTimer=null,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.forceHide.bind(this,!1),this.attr.hideDelay)},this.mouseOverContent=function(){if(this.timeout)return clearTimeout(this.timeout),void(this.timeout=null)},this.after("initialize",function(){this.on(document,"uiOverlayNavigate uiBeforePageChanged uiShortcutEsc",this.forceHide.bind(this,!0)),this.on(document,"mouseover",{hoverContentSelector:this.mouseOverContent}),this.on(document,"mouseout",{hoverContentSelector:this.hide}),t.extend(t.easing,{def:"easeOutQuad",easeOutQuad:function(t,e,i,s,n){return-s*(e/=n)*(e-2)+i}})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(121),o=s(a),r=i(172),c=s(r);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({hoverFetchDelay:100,noShowError:!0,statsName:"swift_profile_popup"}),this.userCache={screenNames:Object.create(null),ids:Object.create(null)},this.socialProofCache={screenNames:Object.create(null),ids:Object.create(null)},this.saveToCache=function(t,e){t.ids[e.user_id]=e,t.screenNames[e.screen_name]=e},this.retrieveFromCache=function(t,e){var i=void 0;return e.userId?i=t.ids[e.userId]:e.user_id?i=t.ids[e.user_id]:e.screenName?i=t.screenNames[e.screenName]:e.screen_name&&(i=t.screenNames[e.screen_name]),i},this.invalidateCaches=function(t,e){var i=void 0,s=void 0,n=void 0;e.userId?(i=e.userId,n=this.userCache.ids[i],s=n&&n.screen_name):(s=e.screenName,n=this.userCache.screenNames[s],i=n&&n.user_id),i&&delete this.userCache.ids[i],i&&delete this.socialProofCache.ids[i],s&&delete this.userCache.screenNames[s],s&&delete this.socialProofCache.screenNames[s]},this.getProfilePopupMain=function(t,e){var i=this,s=function(t){i.saveToCache(i.userCache,t),i.trigger("dataProfilePopupSuccess",t);var e=i.retrieveFromCache(i.socialProofCache,t);e&&i.trigger("dataSocialProofSuccess",e)},n=function(t){return i.trigger("dataProfilePopupFailure",t)},a=this.retrieveFromCache(this.userCache,t);if(a)return a.sourceEventData=t,void s(a);var o=function(){i.pendingRemoteRequest=null,i.get({url:"/i/profiles/popup",data:e,eventData:t,cache:!1,success:s,error:n})};e.wants_hovercard?this.pendingRemoteRequest=setTimeout(o,this.attr.hoverFetchDelay):o()},this.getProfilePopup=function(t,e){var i={};e.screenName?i.screen_name=e.screenName:e.userId&&(i.user_id=e.userId),e.isHoverRequest&&(i.wants_hovercard=!0),this.getProfilePopupMain(e,i)},this.hideProfileHover=function(){this.pendingRemoteRequest&&(clearTimeout(this.pendingRemoteRequest),this.pendingRemoteRequest=null)},this.after("initialize",function(){this.on("uiWantsProfilePopup",this.getProfilePopup),this.on("uiHideProfileHover",this.hideProfileHover),this.on(document,"dataFollowStateChange dataUserActionSuccess dataDidMuteUser dataDidUnmuteUser",this.invalidateCaches)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=(0,o.default)(n,c.default);e.default=l},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({scribeContext:{component:"profile_hover"}}),this.scribeProfilePopupOpen=function(e,i){if(i.isHoverRequest){i.user_id=i.user_id||t(e.target).attr("data-user-id"),["profile","me"].indexOf(this.clientEvent.scribeContext.page)!==-1&&this.clientEvent.scribeData.profile_id||(this.clientEvent.scribeData.profile_id=i.user_id);var s=c.default.merge(this.attr.scribeContext,{action:"open"});this.scribeInteraction(s,i)}},this.cleanupProfilePopupScribing=function(t,e){this.clientEvent.scribeData.profile_id&&["profile","me"].indexOf(this.clientEvent.scribeContext.page)===-1&&delete this.clientEvent.scribeData.profile_id},this.after("initialize",function(){this.clientEvent=h.default,this.on(document,"uiHideProfileHover",this.cleanupProfilePopupScribing),this.on(document,"uiHoverShown",this.scribeProfilePopupOpen)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(126),c=s(r),l=i(141),d=s(l),u=i(134),h=s(u);e.default=(0,o.default)(n,d.default)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(){this.defaultAttrs({millisecInDay:864e5,ageGateingErrorCode:250,ageGateCookieKey:"age-gated"}),this.hasBeenAgeGatedWithin24Hr=function(){var t=(0,f.default)(this.attr.ageGateCookieKey);return!!t&&(new Date).getTime()-parseInt(t,10)<this.attr.millisecInDay},this.getUserAction=function(t){var e,i=(e={"/i/user/block":"block","/i/user/unblock":"unblock","/i/user/hide":"dismiss"},n(e,this.apiEndpointUrl("/friendships/create.json"),"follow"),n(e,this.apiEndpointUrl("/friendships/destroy.json"),"unfollow"),e);return i[t]},this.updateFollowStatus=function(e,i){function s(t){t.message&&this.trigger("uiShowMessage",t);var s=t.new_state,n=t.is_follow_back,r=void 0;if(a&&(t.protected&&"follow"===o?(s="pending",r=0):"follow"===o?(s="following",r=1):(r=-1,s="not-following"),n=t.followed_by&&"follow"===o),this.trigger("dataFollowStateChange",u.default.merge(t,e,{userId:e.userId,newState:s,requestUrl:i,isFollowBack:n,action:o,username:e.screenName})),a){var c={stats:[{stat:"following",user_id:p.default.user.id,delta:r},{stat:"follower",user_id:e.userId,delta:r}]};this.trigger(document,"dataGotProfileStats",c)}else this.trigger(document,"dataGotProfileStats",{stats:t.profile_stats})}function n(t){var s=e.userId,n=e.originalFollowState,c=t&&t.data&&t.data.code,l=t.data&&t.data.timestamp;a&&(c=this.getApiErrorCode(t),l=this.getApiErrorDataField(t,"timestamp"));var d=c===r.default.errorCode.UserMustBeAlcoholAgeScreened;if(t.new_state&&(n=t.new_state),this.trigger("dataFollowStateChange",u.default.merge(t,{userId:s,newState:n,action:this.getUserAction(i),username:e.screenName})),d&&this.trigger("uiNeedsAgeGateDialog",{originalData:e,newState:n,ageGated:this.hasBeenAgeGatedWithin24Hr(),minBirthDate:parseInt(l,10)}),"follow"===o)return"dataFailedToFollow"}var a=this.isApiRequest(i),o=this.getUserAction(i),c=e.disclosureType?"earned"===e.disclosureType:void 0,l=t.extend({user_id:e.userId,impression_id:e.impressionId,earned:c,fromShortcut:e.fromShortcut,handles_challenges:1},e.additionalPostData);e.lifeline&&(l.lifeline=1),l.challenges_passed=!!e.passedAgeGating,this.post({url:i,data:l,eventData:e,success:s.bind(this),error:n.bind(this),retryIfUnavailable:!0,useOAuthSessionAuth:e.useOAuthSessionAuth
})},this.reversibleAjaxCall=function(e,i,s){function n(s){this.trigger("dataUserActionSuccess",t.extend({},s,{userId:e.userId,requestUrl:i,action:this.getUserAction(i)})),s.message&&this.trigger("uiShowMessage",s)}function a(t){this.trigger(s,e)}this.post({url:i,data:{user_id:e.userId,impression_id:e.impressionId},eventData:e,success:n.bind(this),error:a.bind(this)})},this.normalAjaxCall=function(e,i,s){function n(s){this.trigger("dataUserActionSuccess",t.extend({},s,{userId:e.userId,requestUrl:i,action:this.getUserAction(i)})),s.message&&this.trigger("uiShowMessage",s)}var a=t.extend({user_id:e.userId,token:e.feedbackToken,impression_id:e.impressionId},s);this.post({url:i,data:a,eventData:e,success:n.bind(this),error:"dataUserActionError"})};var e={include_blocking:!0,include_blocked_by:!0,include_can_dm:!0,include_followed_by:!0,include_mute_edge:!0,skip_status:!0};this.followAction=function(i,s){var n=this.apiEndpointUrl("/friendships/create.json");this.updateFollowStatus(t.extend(s,{useOAuthSessionAuth:!0,additionalPostData:e}),n)},this.unfollowAction=function(t,i){var s=this.apiEndpointUrl("/friendships/destroy.json");this.updateFollowStatus(Object.assign(i,{useOAuthSessionAuth:!0,additionalPostData:e}),s)},this.cancelAction=function(t,e){var i="/i/user/cancel";this.updateFollowStatus(e,i)},this.blockAction=function(t,e){var i="/i/user/block";this.updateFollowStatus(e,i)},this.unblockAction=function(t,e){var i="/i/user/unblock";this.updateFollowStatus(e,i)},this.reportSpamAction=function(t,e){this.normalAjaxCall(e,"/i/user/report_spam",{screen_name:e.screenName,report_type:e.reportType,block_user:e.blockUser,impression_id:e.impressionId})},this.hideSuggestionAction=function(t,e){this.normalAjaxCall(e,"/i/user/hide")},this.retweetOnAction=function(t,e){this.reversibleAjaxCall(e,"/i/user/retweets_on","dataRetweetOffAction")},this.retweetOffAction=function(t,e){this.reversibleAjaxCall(e,"/i/user/retweets_off","dataRetweetOnAction")},this.deviceNotificationsOnAction=function(t,e){this.reversibleAjaxCall(e,"/i/user/device_notifications_on","dataDeviceNotificationsOffAction")},this.deviceNotificationsOffAction=function(t,e){this.reversibleAjaxCall(e,"/i/user/device_notifications_off","dataDeviceNotificationsOnAction")},this.after("initialize",function(){this.on(document,"uiFollowAction",this.followAction),this.on(document,"uiUnfollowAction",this.unfollowAction),this.on(document,"uiCancelFollowRequestAction",this.cancelAction),this.on(document,"uiBlockAction",this.blockAction),this.on(document,"uiUnblockAction",this.unblockAction),this.on(document,"uiReportSpamAction uiReportUserAction",this.reportSpamAction),this.on(document,"uiHideSuggestionAction",this.hideSuggestionAction),this.on(document,"uiRetweetOnAction",this.retweetOnAction),this.on(document,"uiRetweetOffAction",this.retweetOffAction),this.on(document,"uiDeviceNotificationsOnAction",this.deviceNotificationsOnAction),this.on(document,"uiDeviceNotificationsOffAction",this.deviceNotificationsOffAction),this.on(document,"uiAgeGatePassed",this.followAction)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(241),r=s(o),c=i(111),l=s(c),d=i(126),u=s(d),h=i(154),f=s(h),m=i(136),p=s(m),g=i(240),v=s(g),b=(0,l.default)(a,v.default);e.default=b}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({currentUserPath:""}),this.navigateToProfilePath=function(){this.trigger("uiNavigate",{href:this.attr.currentUserPath})},this.after("initialize",function(){this.on("uiNavigateToProfile",this.navigateToProfilePath)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=(0,o.default)(n);e.default=r},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){var e=t.promptbirdData||{};if(e.promptbirdEnabled){o.default.attachTo(document),c.default.attachTo(document),d.default.attachTo(document,e),h.default.attachTo(document,e),D.default.attachTo(document,o.default),y.default.attachTo(document,o.default),m.default.attachTo("#above-timeline-prompt",e),g.default.attachTo("#dashboard-profile-prompt",e),k.default.attachTo("#promptbird-modal-prompt",e);var i=x.default.timelinePromptOptions(e.format),s=O.default.merge(e,i.promptOptions);I.default.attachTo(i.timelineSelector,s),b.default.attachTo(i.timelineSelector,O.default.merge(s,{actionSelector:".PromptbirdPrompt--inline .js-promptAction",dismissSelector:".PromptbirdPrompt--inline .js-promptDismiss"})),S.default.attachTo(i.timelineSelector,O.default.merge(s,{actionSelector:".PromptbirdPrompt--inlinePointer .js-promptAction",dismissSelector:".PromptbirdPrompt--inlinePointer .js-promptDismiss"}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var a=i(628),o=s(a),r=i(629),c=s(r),l=i(630),d=s(l),u=i(632),h=s(u),f=i(633),m=s(f),p=i(669),g=s(p),v=i(670),b=s(v),w=i(672),S=s(w),C=i(673),y=s(C),T=i(675),D=s(T),M=i(676),I=s(M),P=i(677),k=s(P),A=i(635),x=s(A),E=i(126),O=s(E)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.postFunction=function(t,e,i,s,n){var a={prompt_id:n.prompt_id};this.post({url:"/i/users/prompts/"+t,eventData:a,data:a,success:e,error:i})},this.after("initialize",function(){this.on("uiPromptbirdDismissPrompt",this.postFunction.bind(this,"dismiss","dataPromptbirdPromptDismissed","dataPromptbirdPromptDismissalError")),this.on("uiPromptbirdClick",this.postFunction.bind(this,"click","dataPromptbirdPromptClicked","dataPromptbirdPromptClickError")),this.on("uiPromptbirdPromptWasShown uiInlinePromptScrolledIn",this.postFunction.bind(this,"impress","dataPromptbirdPromptImpressed","dataPromptbirdPromptImpressError")),this.on("uiPromptbirdPromptWasShown uiInlinePromptScrolledIn","uiItemsInjected")})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r);e.default=(0,o.default)(n,c.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.after("initialize",function(){this.scribeOnEvent("uiPromptbirdPromptWasShown",{action:"impression"}),this.scribeOnEvent("uiInlinePromptScrolledIn",{action:"impression"}),this.scribeOnEvent("uiPromptbirdClick",{action:"click"}),this.scribeOnEvent("uiPromptbirdDismissPrompt",{action:"dismiss"}),this.scribeOnEvent("uiPromptbirdPreviewPromotedAccount",{action:"preview"}),this.scribeOnEvent("uiShowDashboardProfilePromptbird",{action:"show"})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r);e.default=(0,o.default)(n,c.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({delayedPrompts:[],tweetItemSelector:'.js-stream-item[data-item-type="tweet"]:visible',originalTweetSelector:".js-original-tweet",promotedTweetClass:"promoted-tweet",immediateTriggers:[]}),this.initPage=function(){this.trigger("uiPromptbirdManagerWantsPrompts",{tweetIds:this.getTweetIds()})},this.renderImmediatePrompts=function(t){var e=t.filter(function(t){return this.shouldRenderPromptImmediately(t)},this);e.forEach(this.renderPrompt,this)},this.renderPrompt=function(t){this.trigger("uiPromptbirdShouldRenderPrompt",{prompt:t})},this.saveDelayedPrompts=function(t){var e=t.filter(function(t){return!this.shouldRenderPromptImmediately(t)},this);this.attr.delayedPrompts=e},this.refreshPrompts=function(t,e){e.prompts&&(this.renderImmediatePrompts(e.prompts),this.saveDelayedPrompts(e.prompts))},this.shouldRenderPromptImmediately=function(t){return!t.trigger||this.attr.immediateTriggers.indexOf(t.trigger)>-1},this.getTweetIds=function(){var e=this,i=this.select("tweetItemSelector").filter(function(i,s){return!t(s).find(e.attr.originalTweetSelector).hasClass(e.attr.promotedTweetClass)}).map(function(){return t(this).data("item-id")}).toArray();return i.join(",")},this.after("initialize",function(){this.on(document,"uiSwiftLoaded uiPageChanged",this.initPage),this.on("dataPromptbirdManagerHasPrompts",this.refreshPrompts)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(631),c=s(r);e.default=(0,o.default)(n,c.default)}).call(e,i(10))},function(t,e){"use strict";function i(){this.renderActionPrompt=function(t,e,i){this.renderDelayedPromptForAction(i.sourceEventData.id,t)},this.renderDelayedPromptForAction=function(t,e){var i=this.getDelayedPromptForAction(e);i&&(i.pointerTweetId=t,this.renderPrompt(i))},this.getDelayedPromptForAction=function(t){var e=this.attr.delayedPrompts.filter(function(e){return e.trigger===t})[0];if(e){var i=this.attr.delayedPrompts.indexOf(e);this.attr.delayedPrompts.splice(i,1)}return e},this.after("initialize",function(){this.on(document,"dataDidRetweet",this.renderActionPrompt.bind(this,"retweet")),this.on(document,"dataDidFavoriteTweet",this.renderActionPrompt.bind(this,"favorite"))})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({endpoint:"/i/users/prompts",format:""}),this.fetchPrompts=function(t,e){e=e||{};var i={format:this.attr.format,tweet_ids:e.tweetIds,force_prompt_id:this.getForcePromptIdParam()};this.get({url:this.attr.endpoint,eventData:i,data:i,success:"dataPromptbirdManagerHasPrompts",error:"dataPromptbirdManagerPollFailure"})},this.getForcePromptIdParam=function(){return d.default.decode(window.location.search.replace(/^\?/,"")).force_prompt_id},this.after("initialize",function(){this.on("uiPromptbirdManagerWantsPrompts",this.fetchPrompts)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=i(344),d=s(l);e.default=(0,o.default)(n,c.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({promptType:"above_timeline"}),this.insertPrompt=function(t){this.$node.html(t.html)}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(634),o=s(a),r=i(667),c=s(r),l=i(668),d=s(l);e.default=o.default.mixin(n,c.default,d.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({promptType:null,promptSelector:".PromptbirdPrompt",actionSelector:".js-promptAction",dismissSelector:".js-promptDismiss",promptLayoutContainerSelector:".js-prompt-layout-container",promptBirdStreamItemSelector:".PromptbirdPrompt-streamItem",isStickyClass:"js-isSticky",triggerImpressionOnInsert:!0}),this.insertPrompt=function(t){},this.removePrompt=function(t){t.closest(this.attr.promptLayoutContainerSelector).remove()},this.showPrompt=function(t,e){var i=this.filterPrompt(e.prompt);i&&(i.html=c.default.getPromptHtml(i,this.attr.format),this.insertPrompt(i),this.bootPrompt(i),this.attr.triggerImpressionOnInsert&&this.trigger("uiPromptbirdPromptWasShown",this.scribeData(i.id)))},this.bootPrompt=function(t){var e=this;if(t.js_boot){var s=function(i){return i({promptElement:e.getPromptByPromptId(t.id)})};i.e(4,function(e){var n=i(654)("./"+t.js_boot).default;s(n)})}},this.filterPrompt=function(t){if(this.attr.promptType===t.type)return t},this.actionClicked=function(e,i){this.triggerPromptAction(i.el,"uiPromptbirdClick");var s=t(i.el);s.hasClass(this.attr.isStickyClass)||this.removePrompt(this.getPromptFromChild(i.el))},this.dismissClicked=function(t,e){t.preventDefault(),this.dismissPrompt(e.el)},this.dismissPrompt=function(e){this.triggerPromptAction(e,"uiPromptbirdDismissPrompt");var i=t(e).closest(this.attr.promptBirdStreamItemSelector);this.trigger(i,"uiRemoveClassBeforePromptbird"),this.removePrompt(this.getPromptFromChild(e))},this.triggerPromptAction=function(t,e){var i=this.getPromptFromChild(t),s=i.data("prompt-intent"),n=i.data("prompt-intent-params"),a=parseInt(i.data("prompt-id"),10);this.trigger(e,this.scribeData(a,s,n))},this.scribeData=function(t,e,i){return{scribeContext:{component:"promptbird_"+t},prompt_id:t,intent:e,intent_params:i}},this.getPromptFromChild=function(e){return t(e).closest(this.attr.promptSelector)},this.getPromptByPromptId=function(t,e){var i=this.attr.promptSelector+'[data-prompt-id="'+t+'"]',s=this.$node.find(i).addBack(i);return e?s.closest(this.attr.promptLayoutContainerSelector):s},this.getPromptIdFromNode=function(t){var e=t.is(this.attr.promptSelector)?t:t.find(this.attr.promptSelector);return e.data("prompt-id")},this.after("initialize",function(){this.on(document,"uiPromptbirdShouldRenderPrompt",this.showPrompt),this.on("click",{actionSelector:this.actionClicked,dismissSelector:this.dismissClicked})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(635),c=s(r);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(636),a=s(n),o=i(647),r=s(o),c=i(648),l=s(c),d=i(651),u=s(d),h={PROFILE_FORMATS:["ProfileOther","ProfileSelf"],TIMELINE_LAYOUT_TYPES:["inline","inline_pointer"],timelinePromptOptions:function(t){return this.isProfileFormat(t)?{timelineSelector:".GridTimeline-items",promptOptions:{streamItemSelector:".Grid .Grid-cell .js-stream-item",streamItemContainerSelector:"> .Grid"}}:{timelineSelector:"#stream-items-id",promptOptions:{streamItemSelector:"> .js-stream-item",streamItemContainerSelector:"> .js-stream-item"}}},DEFAULT_LAYOUT:r.default,GRID_TIMELINE_LAYOUT:l.default,LIST_TIMELINE_LAYOUT:u.default,getPromptLayout:function(t,e){var i=void 0;return i=this.hasTimelineLayout(t)?this.isProfileFormat(e)?h.GRID_TIMELINE_LAYOUT:h.LIST_TIMELINE_LAYOUT:h.DEFAULT_LAYOUT},getPromptHtml:function(e,i){var s=this.getPromptLayout(e.type,i),n=s.render(e.renderData),o=a.default[e.template].render(e.renderData),r=t("<div></div>");return r.html(n),r.find(".js-prompt-layout-content").html(o),r.html()},isProfileFormat:function(t){return this.PROFILE_FORMATS.indexOf(t)>-1},hasTimelineLayout:function(t){return this.TIMELINE_LAYOUT_TYPES.indexOf(t)>-1}};e.default=h}).call(e,i(10))},function(t,e,i){"use strict";function s(t){var e=t.match(a);if(e)return e[1];throw new Error("unexpected mustache path: "+t)}function n(t){var e={};return t.keys().forEach(function(i){var n=s(i);e[n]=t(i)}),e}Object.defineProperty(e,"__esModule",{value:!0});var a=/^\.\/(.+)\.mustache$/,o=n(i(637));e.default=o},function(t,e,i){function s(t){return i(n(t))}function n(t){return a[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var a={"./above_timeline_prompt.mustache":638,"./account_health_prompt.mustache":643,"./dashboard_profile_prompt.mustache":646,"./default_layout.mustache":647,"./grid_timeline_layout.mustache":648,"./inline_pointer_prompt.mustache":649,"./inline_prompt.mustache":650,"./list_timeline_layout.mustache":651,"./make_disco_modal_prompt.mustache":652,"./modal_prompt.mustache":653};s.keys=function(){return Object.keys(a)},s.resolve=n,t.exports=s,s.id=637},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"promptbird/templates/dismiss_button":i(639),"promptbird/templates/title":i(640),"promptbird/templates/explanation":i(641),"promptbird/templates/call_to_action":i(642)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--aboveTimeline" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('">\n  <div class="PromptbirdPrompt-content '),s.b(s.v(s.f("prompt_css_class",t,e,0))),s.b(" "),s.s(s.f("background_image_url",t,e,1),t,e,0,179,189,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("with-image")}),t.pop()),s.b('"\n    '),s.s(s.f("data_attributes",t,e,1),t,e,0,240,260,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(" "),i.b(i.v(i.f("key",t,e,0))),i.b('="'),i.b(i.v(i.f("value",t,e,0))),i.b('"')}),t.pop()),s.b("\n"+i),s.b("    "),s.s(s.f("background_image_url",t,e,1),t,e,0,310,367,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(' style="background-image: url('),i.b(i.v(i.f("background_image_url",t,e,0))),i.b(');"')}),t.pop()),s.b(">\n\n"),s.b(s.rp("<promptbird/templates/dismiss_button0",t,e,"    ")),s.b(s.rp("<promptbird/templates/title1",t,e,"    ")),s.b(s.rp("<promptbird/templates/explanation2",t,e,"    ")),s.b(s.rp("<promptbird/templates/call_to_action3",t,e,"    ")),s.b("  </div>\n</div>"),s.fl()},partials:{"<promptbird/templates/dismiss_button0":{name:"promptbird/templates/dismiss_button",partials:{},subs:{}},"<promptbird/templates/title1":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation2":{name:"promptbird/templates/explanation",partials:{},subs:{}},"<promptbird/templates/call_to_action3":{name:"promptbird/templates/call_to_action",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<button type="button" class="PromptbirdPrompt-dismiss js-promptDismiss" tabindex="-1">\n  <span class="Icon Icon--close Icon--smallest">\n    <span class="visuallyhidden">\n      Dismiss\n    </span>\n  </span>\n</button>'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<h3 class="PromptbirdPrompt-title">'),s.b(s.v(s.f("title",t,e,0))),s.b("</h3>"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<p class="PromptbirdPrompt-explanation">'),s.b(s.v(s.f("explanation",t,e,0))),s.b("</p>"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("call_to_action_text",t,e,1),t,e,0,96,540,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('  <div class="PromptbirdPrompt-action">\n'),s.s(s.f("call_to_action_url",t,e,1),t,e,0,164,292,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('      <a href="'),s.b(s.v(s.f("call_to_action_url",t,e,0))),s.b('" class="btn primary-btn js-promptAction">\n        '),s.b(s.v(s.f("call_to_action_text",t,e,0))),s.b("\n"+i),s.b("      </a>\n")}),t.pop()),s.s(s.f("call_to_action_url",t,e,1),t,e,1,0,0,"")||(s.b('      <button type="button" class="btn primary-btn js-promptAction '),s.s(s.f("sticky_cta",t,e,1),t,e,0,426,437,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("js-isSticky")}),t.pop()),s.b('">\n        '),s.b(s.v(s.f("call_to_action_text",t,e,0))),s.b("\n"+i),s.b("      </button>\n")),s.b("  </div>\n")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"promptbird/templates/dismiss_button":i(639),"promptbird/templates/icon":i(644),"promptbird/templates/title":i(640),"promptbird/templates/explanation":i(641),"promptbird/templates/call_to_action":i(642),"promptbird/templates/second_call_to_action":i(645)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--'),s.s(s.f("is_modal",t,e,1),t,e,0,60,65,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("modal")}),t.pop()),s.s(s.f("is_above_timeline",t,e,1),t,e,0,100,113,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("aboveTimeline")}),t.pop()),s.b(" "),s.b(s.v(s.f("health_prompt_custom_class",t,e,0))),s.b('" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('">\n'),s.s(s.f("is_above_timeline",t,e,1),t,e,0,224,272,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<promptbird/templates/dismiss_button0",t,e,"    "))}),t.pop()),s.s(s.f("is_modal",t,e,1),t,e,0,310,348,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<promptbird/templates/icon1",t,e,"    "))}),t.pop()),s.b(s.rp("<promptbird/templates/title2",t,e,"  ")),s.b(s.rp("<promptbird/templates/explanation3",t,e,"  ")),s.b(s.rp("<promptbird/templates/call_to_action4",t,e,"  ")),s.b(s.rp("<promptbird/templates/second_call_to_action5",t,e,"  ")),s.b("</div>"),s.fl()},partials:{"<promptbird/templates/dismiss_button0":{name:"promptbird/templates/dismiss_button",partials:{},subs:{}},"<promptbird/templates/icon1":{name:"promptbird/templates/icon",partials:{},subs:{}},"<promptbird/templates/title2":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation3":{name:"promptbird/templates/explanation",partials:{},subs:{}},"<promptbird/templates/call_to_action4":{name:"promptbird/templates/call_to_action",partials:{},subs:{}},"<promptbird/templates/second_call_to_action5":{name:"promptbird/templates/second_call_to_action",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("icon_class",t,e,1),t,e,0,15,99,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('  <span class="PromptbirdPrompt-icon Icon Icon--extraLarge '),i.b(i.v(i.f("icon_class",t,e,0))),i.b('"></span>\n')}),t.pop()),s.s(s.f("icon_class",t,e,1),t,e,1,0,0,"")||s.b('  <span class="PromptbirdPrompt-icon PromptbirdPrompt-icon--default Icon Icon--extraLarge Icon--bird"></span>\n'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("second_call_to_action_text",t,e,1),t,e,0,247,603,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('  <div class="PromptbirdPrompt-action">\n'),s.s(s.f("second_call_to_action_url",t,e,1),t,e,0,322,563,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('      <a href="'),s.b(s.v(s.f("second_call_to_action_url",t,e,0))),s.b('" class="btn-link js-promptAction '),s.b(s.v(s.f("custom_js_class",t,e,0))),s.b('" data-scribe-component="'),s.b(s.v(s.f("scribe_component",t,e,0))),s.b('" data-scribe-element="'),s.b(s.v(s.f("scribe_element",t,e,0))),s.b('">\n        '),s.b(s.v(s.f("second_call_to_action_text",t,e,0))),s.b("\n"+i),s.b("      </a>\n")}),t.pop()),s.b("  </div>\n")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"promptbird/templates/dismiss_button":i(639),"promptbird/templates/title":i(640)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--dashboardProfile" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('">\n  <span class="PromptbirdPrompt-arrow"></span>\n'),s.b(s.rp("<promptbird/templates/dismiss_button0",t,e,"  ")),s.b(s.rp("<promptbird/templates/title1",t,e,"  ")),s.b('  <p class="PromptbirdPrompt-explanation">\n    <a class="js-promptAction" href="'),s.b(s.v(s.f("call_to_action_url",t,e,0))),s.b('" target="_blank">\n      '),s.b(s.v(s.f("call_to_action_text",t,e,0))),s.b("\n"+i),s.b("    </a>\n    "),s.b(s.v(s.f("explanation",t,e,0))),s.b("\n"+i),s.b('    <button type="button" class="btn-link js-previewAccount">'),s.b(s.v(s.f("preview_text",t,e,0))),s.b("</button>\n  </p>\n</div>\n"),s.fl()},partials:{"<promptbird/templates/dismiss_button0":{name:"promptbird/templates/dismiss_button",partials:{},subs:{}},"<promptbird/templates/title1":{name:"promptbird/templates/title",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="js-prompt-layout-container">\n  <div class="js-prompt-layout-content"></div>\n</div>'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="Grid js-prompt-layout-container" data-component-context="prompt" role="presentation">\n  <div class="Grid-cell" role="presentation">\n    <div class="PromptbirdPrompt-streamItem StreamItem js-stream-item js-prompt-layout-content separated-module" data-item-type="prompt" data-item-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('" role="listitem"></div>\n  </div>\n</div>'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"promptbird/templates/dismiss_button":i(639),"promptbird/templates/icon":i(644),"promptbird/templates/title":i(640),"promptbird/templates/explanation":i(641)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--inlinePointer" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('" data-prompt-intent="'),s.b(s.v(s.f("prompt_intent",t,e,0))),s.b('">\n  <span class="PromptbirdPrompt-arrow"></span>\n'),s.b(s.rp("<promptbird/templates/dismiss_button0",t,e,"  ")),s.b(s.rp("<promptbird/templates/icon1",t,e,"  ")),s.b(s.rp("<promptbird/templates/title2",t,e,"  ")),s.b(s.rp("<promptbird/templates/explanation3",t,e,"  ")),s.b("</div>\n"),s.fl()},partials:{"<promptbird/templates/dismiss_button0":{name:"promptbird/templates/dismiss_button",partials:{},subs:{}},"<promptbird/templates/icon1":{name:"promptbird/templates/icon",partials:{},subs:{}},"<promptbird/templates/title2":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation3":{name:"promptbird/templates/explanation",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"promptbird/templates/dismiss_button":i(639),"promptbird/templates/icon":i(644),"promptbird/templates/title":i(640),"promptbird/templates/explanation":i(641),"promptbird/templates/call_to_action":i(642)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--inline" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('" data-prompt-intent="'),s.b(s.v(s.f("prompt_intent",t,e,0))),s.b('" data-prompt-intent-params="'),s.b(s.v(s.f("prompt_intent_params",t,e,0))),s.b('">\n'),s.b(s.rp("<promptbird/templates/dismiss_button0",t,e,"  ")),s.b(s.rp("<promptbird/templates/icon1",t,e,"  ")),s.b(s.rp("<promptbird/templates/title2",t,e,"  ")),s.b(s.rp("<promptbird/templates/explanation3",t,e,"  ")),s.b(s.rp("<promptbird/templates/call_to_action4",t,e,"  ")),s.b("</div>\n"),s.fl()},partials:{"<promptbird/templates/dismiss_button0":{name:"promptbird/templates/dismiss_button",partials:{},subs:{}},"<promptbird/templates/icon1":{name:"promptbird/templates/icon",partials:{},subs:{}},"<promptbird/templates/title2":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation3":{name:"promptbird/templates/explanation",partials:{},subs:{}},"<promptbird/templates/call_to_action4":{name:"promptbird/templates/call_to_action",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<li class="PromptbirdPrompt-streamItem js-stream-item js-prompt-layout-container separated-module" data-item-type="prompt" data-item-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('">\n  <div class="js-prompt-layout-content"></div>\n</li>'),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"promptbird/templates/title":i(640),"promptbird/templates/explanation":i(641),"promptbird/templates/title":i(640),"promptbird/templates/explanation":i(641)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--modal" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('">\n  <div id="make-disco-dialog-content">\n    <img src="'),s.b(s.v(s.f("redisco_cover_img",t,e,0))),s.b('" alt="Help your friends to find you." class="PromptbirdPrompt-redisco-cover">\n'),s.b(s.rp("<promptbird/templates/title0",t,e,"    ")),s.b(s.rp("<promptbird/templates/explanation1",t,e,"    ")),s.b('    <div class="PromptbirdPrompt-action">\n      <button type="button" class="btn primary-btn js-close js-promptMakeDiscoAction js-promptAction">\n        '),s.b(s.v(s.f("call_to_action_text",t,e,0))),s.b("\n"+i),s.b('      </button>\n    </div>\n    <div class="PromptbirdPrompt-action">\n      <button type="button" class="btn-link js-promptMakeDiscoDontConnect">\n        '),s.b(s.v(s.f("second_call_to_action_text",t,e,0))),s.b("\n"+i),s.b('      </button>\n    </div>\n  </div>\n  <div id="make-disco-confirmation-content" class="u-hidden">\n    <img src="'),s.b(s.v(s.f("redisco_cover_img",t,e,0))),s.b('" alt="Help your friends to find you." class="PromptbirdPrompt-redisco-cover">\n'),s.s(s.f("confirmation_content",t,e,1),t,e,0,919,1006,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<promptbird/templates/title2",t,e,"      ")),i.b(i.rp("<promptbird/templates/explanation3",t,e,"      "))}),t.pop()),s.b('    <div class="PromptbirdPrompt-action">\n      <button type="button" class="btn-link js-close js-promptMakeDiscoConfirmationYes js-promptDismiss">\n        Yes\n      </button>\n    </div>\n    <div class="PromptbirdPrompt-action">\n      <button type="button" class="btn primary-btn js-promptMakeDiscoConfirmationCancel">\n        No, Cancel\n      </button>\n    </div>\n  </div>\n</div>\n'),s.fl()},partials:{"<promptbird/templates/title0":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation1":{name:"promptbird/templates/explanation",partials:{},subs:{}},"<promptbird/templates/title2":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation3":{name:"promptbird/templates/explanation",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in o)e[s]||(e[s]=o[s]);return r.render(t,e,i)}var n=i(216).default,a={"promptbird/templates/icon":i(644),"promptbird/templates/title":i(640),"promptbird/templates/explanation":i(641),"promptbird/templates/call_to_action":i(642),"promptbird/templates/second_call_to_action":i(645)},o=n(a),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--modal" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('" data-prompt-intent="'),s.b(s.v(s.f("prompt_intent",t,e,0))),s.b('">\n'),s.b(s.rp("<promptbird/templates/icon0",t,e,"  ")),s.b(s.rp("<promptbird/templates/title1",t,e,"  ")),s.b(s.rp("<promptbird/templates/explanation2",t,e,"  ")),s.b(s.rp("<promptbird/templates/call_to_action3",t,e,"  ")),s.b(s.rp("<promptbird/templates/second_call_to_action4",t,e,"  ")),s.b("</div>\n"),s.fl()},partials:{"<promptbird/templates/icon0":{name:"promptbird/templates/icon",partials:{},subs:{}},"<promptbird/templates/title1":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation2":{name:"promptbird/templates/explanation",partials:{},subs:{}},"<promptbird/templates/call_to_action3":{name:"promptbird/templates/call_to_action",partials:{},subs:{}},"<promptbird/templates/second_call_to_action4":{name:"promptbird/templates/second_call_to_action",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:o,render:s}}).call(e,i(1))},,,,,,,,,,,,,,function(t,e){"use strict";function i(){this.after("insertPrompt",function(){this.select("promptSelector").slideDown()})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e){"use strict";function i(){this.defaultAttrs({removePromptDuration:400}),this.around("removePrompt",function(t,e){e.slideUp(this.attr.removePromptDuration,function(){return t(e)})})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{
"default":t}}function n(){this.defaultAttrs({promptType:"dashboard_profile"}),this.insertPrompt=function(t){this.$node.html(t.html)}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(634),o=s(a),r=i(668),c=s(r);e.default=o.default.mixin(n,c.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({promptType:"inline",promptItemSelector:".PromptbirdPrompt--inline",defaultInsertionIndex:0}),this.insertPrompt=function(t){var e=t.renderData.insertionIndex||this.attr.defaultInsertionIndex,i=t.renderData.shouldInsertAbove||!1;this.insertPromptAtIndex(t,e,i)}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(671),o=s(a),r=i(667),c=s(r);e.default=o.default.mixin(n,c.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({streamItemSelector:"> .js-stream-item",streamItemContainerSelector:"> .js-stream-item",scrollDebounceInterval:100}),this.enabledScrollCheck=function(t){var e=this,i=this.getPromptIdFromNode(t);setTimeout(function(){return e.updateVisibility(t)},0),this.on(window,"scroll.prompt"+i,d.default.debounce(this.updateVisibility.bind(this,t),this.attr.scrollDebounceInterval))},this.disableScrollCheck=function(t){var e=t.data("prompt-id");this.off(window,"scroll.prompt"+e)},this.updateVisibility=function(e,i,s){var n=h.default.isWithinBounds(t(window),e),a=this.getPromptIdFromNode(e);!this.promptVisibility[a]&&n&&this.trigger("uiInlinePromptScrolledIn",this.scribeData(a)),this.promptVisibility[a]=n},this.insertPromptAtIndex=function(e,i,s){var n=s?"before":"after",a=t(e.html),o=this.select("streamItemContainerSelector").eq(i);o[n](a),this.enabledScrollCheck(a)},this.before("removePrompt",this.disableScrollCheck),this.after("initialize",function(){this.attr.triggerImpressionOnInsert=!1,this.promptVisibility={}})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(634),o=s(a),r=i(668),c=s(r),l=i(126),d=s(l),u=i(177),h=s(u);e.default=o.default.mixin(n,c.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({promptType:"inline_pointer",promptItemSelector:".PromptbirdPrompt--inlinePointer",pointerArrowSelector:".PromptbirdPrompt-arrow",pointerTargetSelectors:{favorite_action:".ProfileTweet-action .js-actionFavorite .Icon, .ProfileTweet-action .js-actionFavorite .HeartAnimation",reply_action:".ProfileTweet-action .js-actionReply .Icon",retweet_action:".ProfileTweet-action .js-actionRetweet .Icon",more_action:".ProfileTweet-action .js-dropdown-toggle .Icon"}}),this.insertPrompt=function(t){this.trigger("uiPromptNeedsInsertionIndex",{prompt:t})},this.insertPromptWithIndex=function(t,e){var i=e.prompt;this.insertPromptAtIndex(i,e.insertionIndex,e.shouldInsertAbove),this.setPointerArrowOffset(i)},this.setPointerArrowOffset=function(t){var e=this.attr.pointerTargetSelectors[t.renderData.pointerTarget],i=this.getPromptByPromptId(t.id,!0),s=i.find(this.attr.pointerArrowSelector),n=i.prev(),a=n.find(e),o=a.offset().left-n.offset().left;o<=i.width()&&s.css({left:o+"px"})},this.after("initialize",function(){this.on("uiPromptHasInsertionIndex",this.insertPromptWithIndex)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(671),o=s(a),r=i(667),c=s(r);e.default=o.default.mixin(n,c.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({intent:"post_then_trigger"}),this.action=function(t){var e=this,i=c.default.decode(t),s=i.post_path,n=i.success_event_name,a=i.fail_event_name,o=this.tryParseData(i.post_data),r=this.tryParseData(i.success_event_data),l=this.tryParseData(i.fail_event_data);return this.post({url:s,data:o}).then(function(){return e.trigger(n,r)}).catch(function(){a&&e.trigger(a,l)})},this.tryParseData=function(t){var e=void 0;try{e=JSON.parse(t)}catch(i){e={}}return e}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(674),o=s(a),r=i(344),c=s(r),l=i(240),d=s(l);e.default=o.default.mixin(n,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({intent:null}),this.action=function(){},this.checkIntents=function(t,e){if(e.intent&&this.attr.intent===e.intent)return this.action(e.intent_params)},this.after("initialize",function(){this.on(document,"uiPromptbirdClick",this.checkIntents)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a);e.default=(0,o.default)(n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({intent:"tweet"}),this.action=function(t){var e=c.default.decode(t);e.canTweetDefaultText=!0,this.trigger("uiOpenTweetDialog",e)}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(674),o=s(a),r=i(344),c=s(r);e.default=o.default.mixin(n)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({streamItemSelector:".js-stream-item",promotedTweetSelector:".promoted-tweet",originalTweetSelector:".js-original-tweet",favoritedClass:"favorited",favoriteCountSelector:".ProfileTweet-action--favorite .ProfileTweet-actionCount",tweetStatCountSelector:"tweet-stat-count",tweetSelectionAlgorithmMap:{most_favorited:"getMostFavoritedTweet",mutual_follow:"getMutualFollowTweet",not_following:"getNotFollowingTweet"}}),this.getInsertionIndex=function(t,e){var i=e.prompt,s=this.getInsertionIndexForPrompt(i);s<0||this.trigger("uiPromptHasInsertionIndex",{prompt:i,insertionIndex:s})},this.getEligibleTweets=function(){var e=this.attr.promotedTweetSelector;return this.select("streamItemSelector").filter(function(i,s){return 0===t(s).find(e).length})},this.getInsertionIndexForPrompt=function(e){var i=e.renderData.pointerTweetId||this.getTweetIdForPrompt(e),s=this.select("streamItemSelector").map(function(){return t(this).data("item-id").toString()}).toArray();return s.indexOf(i)},this.getTweetIdForPrompt=function(t){var e=this.attr.tweetSelectionAlgorithmMap[t.renderData.pointerTweetSelection];if(this[e]){var i=this[e]();return i.length>0?i.data("item-id").toString():void 0}},this.getMutualFollowTweet=function(){var e=this;return this.getEligibleTweets().filter(function(i,s){var n=t(s).find(e.attr.originalTweetSelector);return n.data("you-follow")&&n.data("follows-you")}).eq(0)},this.getNotFollowingTweet=function(){var e=this;return this.getEligibleTweets().filter(function(i,s){return!t(s).find(e.attr.originalTweetSelector).data("you-follow")}).eq(0)},this.getMostFavoritedTweet=function(){var e=this,i=this.getEligibleTweets().filter(function(i,s){return!t(s).find(e.attr.originalTweetSelector).hasClass(e.attr.favoritedClass)});return i.sort(function(i,s){var n=function(i){return t(i).find(e.attr.favoriteCountSelector).data(e.attr.tweetStatCountSelector)};return n(s)-n(i)}).eq(0)},this.after("initialize",function(){this.on("uiPromptNeedsInsertionIndex",this.getInsertionIndex)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({promptType:"modal",backgroundCloseTarget:".close-modal-background-target",top:120,width:590,blockClickDuration:2e3}),this.insertPrompt=function(t){var e=t.renderData.hide_dismiss;this.disableBackgroundClicks(e),this.select("modalContentSelector").html(t.html),this.open(),this.removeOrAdjustCloseBtnPosition(e)},this.removePrompt=function(){},this.disableBackgroundClicks=function(t){var e=function(t){t.stopImmediatePropagation()},i=this.select("backgroundCloseTarget");i.on("click",e),t||setTimeout(function(){return i.off("click",e)},this.attr.blockClickDuration)},this.removeOrAdjustCloseBtnPosition=function(t){this.select("closeButtonSelector").remove(),t||this.select("promptSelector").append(this.$modalCloseBtn)},this.dismissPromptOnDismissDialog=function(){this.isOpen()&&this.dismissPrompt(this.select("promptSelector"))},this.onUiShortcutEsc=function(){this.isOpen()&&this.trigger("uiPromptbirdModalPromptKeyboardDismiss"),this.dismissPromptOnDismissDialog()},this.after("initialize",function(){this.$modalCloseBtn=this.select("closeButtonSelector").clone(!1),this.on(document,"uiShortcutEsc",this.onUiShortcutEsc),this.on("click",{backgroundCloseTarget:this.dismissPromptOnDismissDialog,actionSelector:this.close})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(634),o=s(a),r=i(163),c=s(r);e.default=o.default.mixin(n,c.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({autoSubscribe:!1,allowRegistration:!0,serviceWorkerPath:"/push_service_worker.js",pushCheckinTTL:864e5}),this.subscriptionChangeRequested=function(t,e){var i=this,s=Promise.resolve();if(!this.serviceWorkerRegistration||!this.attr.allowRegistration)return s;var n=!this.subscription&&e.subscribe,a=this.subscription&&!e.subscribe,o=void 0;if(n)o=this.subscribe(this.serviceWorkerRegistration);else if(a){var r=function(){i.subscription=null,i.storeUnregister(),i.trigger("uiBrowserPushUnsubscribe"),i.sendCurrentStatus()};o=this.subscription.unsubscribe().then(r,r)}return o||s},this.showInitialNotification=function(){this.trigger("uiDisplayNativeNotification",{title:"Customize your notifications",body:"Click to visit your settings and choose which web notifications you receive",displayDuration:15e3,click:{eventName:"uiPushSettingsNotificationClicked"}})},this.subscribe=function(t){if(!t||!this.attr.allowRegistration)return Promise.resolve();var e="granted"===this.getNotificationPermission();return e?this.trigger("uiBrowserSilentSubscribeAttempt"):this.trigger("uiBrowserPushPromptImpression"),t.pushManager.subscribe({userVisibleOnly:!0}).then(this.subscribeSuccess.bind(this,e),this.subscribeFailure.bind(this,e))},this.subscribeSuccess=function(t,e){t?this.trigger("uiBrowserSilentSubscribeSuccess"):this.trigger("uiBrowserPushPromptAllow"),this.subscription=e,this.storeSubscription(this.subscription,!0),this.sendCurrentStatus(),this.showInitialNotification()},this.subscribeFailure=function(t){"denied"===this.getNotificationPermission()?this.trigger("uiBrowserPushPromptDeny"):"default"===this.getNotificationPermission()?this.trigger("uiBrowserPushPromptDismiss"):t?this.trigger("uiBrowserSilentSubscribeError"):this.trigger("uiBrowserPushPromptError")},this.isSupported=function(){var t="PushManager"in window,e="denied"!==this.getNotificationPermission(),i="serviceWorker"in navigator,s=i&&"showNotification"in ServiceWorkerRegistration.prototype;return s&&t&&e&&i},this.serviceWorkerReady=function(t){var e=this;return this.serviceWorkerRegistration=t,this.serviceWorkerRegistration.pushManager.getSubscription().then(function(i){e.subscription=i,"granted"===e.getNotificationPermission()&&e.trigger("uiABImpression",{experiment:"web_native_push_notifications_4335"}),"granted"===e.getNotificationPermission()&&!i&&e.attr.autoSubscribe?e.subscribe(t):e.sendCurrentStatus(),e.storeSubscription(e.subscription)})},this.getNotificationPermission=function(){return"Notification"in window&&Notification.permission},this.storeSubscription=function(e,i){var s=this;if(e&&(!this.storage.getItem("isSaved")||i)){var n={subscribe:!0,token:e.endpoint};e.subscriptionId&&e.endpoint.indexOf(e.subscriptionId)===-1&&(n.token=e.endpoint+"/"+e.subscriptionId),this.post({url:"/i/push_destinations",data:n,success:function(){return s.storage.setItem("isSaved",!0,s.attr.pushCheckinTTL)},error:t.noop})}},this.storeUnregister=function(){this.storage.clear(),this.post({url:"/i/push_destinations/destroy",success:t.noop,error:t.noop})},this.sendCurrentStatus=function(){this.trigger("dataPushSubscriptionState",{supported:this.attr.allowRegistration&&this.supported,subscribed:!!this.subscription})},this.navigateToSettings=function(t,e){this.trigger("uiNavigate",{href:"/settings/web_notifications"})},this.after("initialize",function(){var t=this;if(this.serviceWorkerRegistration=null,this.subscription=null,this.on("uiPushSettingsNotificationClicked",this.navigateToSettings),this.supported=this.isSupported(),this.supported){var e=(0,c.default)({withExpiry:!0});this.storage=new e("push_notifications"),this.on("uiWantsPushSubscriptionState",this.sendCurrentStatus),this.on("uiPushSubscriptionChangeRequested",this.subscriptionChangeRequested);var i=navigator.serviceWorker;i.register(this.attr.serviceWorkerPath).then(function(){return i.ready}).then(this.serviceWorkerReady.bind(this)).then(void 0,function(){t.supported=!1,t.sendCurrentStatus()})}else"denied"===this.getNotificationPermission()&&this.trigger("uiBrowserPushPermissionDenied"),this.sendCurrentStatus()})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(338),c=s(r),l=i(240),d=s(l),u=i(123);s(u);e.default=(0,o.default)(n,d.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.after("initialize",function(){this.scribeOnEvent("uiPushPromptShown",{component:"push_manager",element:"soft_prompt",action:"impression"}),this.scribeOnEvent("uiPushPromptClick",{component:"push_manager",element:"soft_prompt",action:"click"}),this.scribeOnEvent("uiPushPromptDismiss",{component:"push_manager",element:"soft_prompt",action:"dismiss"}),this.scribeOnEvent("uiBrowserPushPromptImpression",{component:"push_manager",element:"browser_prompt",action:"impression"}),this.scribeOnEvent("uiBrowserPushPromptAllow",{component:"push_manager",element:"browser_prompt",action:"permissions_granted"}),this.scribeOnEvent("uiBrowserPushPromptDeny",{component:"push_manager",element:"browser_prompt",action:"permissions_denied"}),this.scribeOnEvent("uiBrowserPushPermissionDenied",{component:"push_manager",action:"permissions_denied"}),this.scribeOnEvent("uiBrowserPushPromptDismiss",{component:"push_manager",element:"browser_prompt",action:"dismiss"}),this.scribeOnEvent("uiBrowserPushPromptError",{component:"push_manager",element:"browser_prompt",action:"permissions_error"}),this.scribeOnEvent("uiBrowserPushUnsubscribe",{component:"push_manager",action:"disable"}),this.scribeOnEvent("uiBrowserSilentSubscribeAttempt",{component:"push_manager",element:"silent_subscribe",action:"impression"}),this.scribeOnEvent("uiBrowserSilentSubscribeError",{component:"push_manager",element:"silent_subscribe",action:"error"}),this.scribeOnEvent("uiBrowserSilentSubscribeSuccess",{component:"push_manager",element:"silent_subscribe",action:"success"})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r);e.default=(0,o.default)(c.default,n)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({quickPromoteIframeSelector:".quick-promote-iframe",cancelButtonSelector:".cancel-action",top:47}),this.openDialog=function(e,i){var s=t(e.target),n=s.attr("data-tfb-view");this.select("quickPromoteIframeSelector").attr("src",n),this.open(),this.scribeDialogOpenInteraction(e)},this.closeDialog=function(t,e){this.select("quickPromoteIframeSelector").removeAttr("src style"),this.off(window,"message",this.postMessageHandler)},this.postMessageHandler=function(t){var e=t.originalEvent,i=!1;if(e.origin===window.location.protocol+"//"+window.location.host){if("string"==typeof e.data&&"undefined"!==e.data)try{i=JSON.parse(e.data)}catch(s){}if(i&&i.name&&"quick_promote"===i.name)if("resize"===i.type)this.adjustIframeHeight(e);else if("scribe"===i.type){var n=i.scribeData||{};this.scribeUiInteraction(n.uiEvent,n.data)}else"close"===i.type&&this.close()}},this.scribeDialogOpenInteraction=function(t){this.scribe({component:"tweet",element:"view_tweet_analytics",action:"navigate"})},this.scribeUiInteraction=function(t,e){t=t&&t.toLowerCase();var i=["click","confirm"];i.indexOf(t)>=0&&this.scribe({component:"tweet",element:"quick_promote",action:t})},this.adjustIframeHeight=function(t){var e={iframeSelector:this.attr.quickPromoteIframeSelector,isQualified:function(t){return t.height}};this.fitIframeHeight(t,e)},this.setupMessageListener=function(){this.on(window,"message",this.postMessageHandler)},this.after("initialize",function(){this.on("click",{cancelButtonSelector:this.close}),this.on("uiDialogOpened",this.setupMessageListener),this.on(document,"uiOpenQuickPromoteDialog",this.openDialog),this.on("uiDialogClosed",this.closeDialog),this.on(window,"message",this.postMessageHandler)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r),l=i(173),d=s(l),u=i(172),h=s(u),f=i(142),m=s(f),p=(0,o.default)(n,c.default,h.default,d.default,m.default);e.default=p}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.attributes({componentNodeSelector:".js-react"}),this.mountNode=function(t){this.loadReactBundle().then(function(e){return e.mount(t)})},this.unmountNode=function(t){this.loadReactBundle().then(function(e){return e.unmount(t)})},this.loadReactComponents=function(){var t=this.select("componentNodeSelector");t.toArray().forEach(this.mountNode.bind(this))},this.unloadReactComponents=function(){var t=this.select("componentNodeSelector");t.toArray().forEach(this.unmountNode.bind(this))},this.loadReactBundle=function(){return new Promise(function(t,e){return i.e(5,function(){var e=i(682);t(e)})})},this.before("teardown",function(){this.unloadReactComponents()}),this.after("initialize",function(){this.on("uiPageChanged uiSwiftLoaded",this.loadReactComponents)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a);e.default=(0,o.default)(n)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({reporterUserIdSelector:"#current-user-id",newReportFlowFormSelector:".new-report-flow-form",newReportFlowIframeSelector:"#new-report-flow-frame",newReportFlowNextSelector:".new-report-flow-next-button",newReportFlowNextTextSelector:".next-text",newReportFlowAddTextSelector:".add-text",newReportFlowBackSelector:".new-report-flow-back-button",newReportFlowCloseSelector:".new-report-flow-close-button",newReportFlowDoneSelector:".new-report-flow-done-button"}),this.setUpDialog=function(t,e){this.reset(),this.clientEvent=e.clientEvent||c.default,this.eventData=e,this.setTriggeredTarget(),this.setNewReportFlowContext(),this.showNewReportFlow(),this.open()},this.reset=function(){this.isComplete=!1},this.setTriggeredTarget=function(){this.$node.removeClass("report-moment report-user report-tweet"),"user"===this.eventData.target?this.$node.addClass("report-user"):"moment"===this.eventData.target?this.$node.addClass("report-moment"):this.$node.addClass("report-tweet")},this.buildReportClientContextParams=function(t){var e=this.clientEvent.scribeContext.page,i=this.clientEvent.scribeContext.section||"",s=this.eventData.scribeContext?this.eventData.scribeContext.component||"":"",n=e+":"+i+":"+s;if(t.client_location=n,this.clientEvent.scribeData)switch(this.clientEvent.scribeData.internal_referer&&(t.client_referer=this.clientEvent.scribeData.internal_referer),e){case"profile":t.profile_id=this.clientEvent.scribeData.profile_id||"";break;case"search":this.clientEvent.scribeData.search_details&&(t.search_query=this.clientEvent.scribeData.search_details.query||"",t.search_source=this.clientEvent.scribeData.search_details.query_source||"",t.search_result_filter=this.clientEvent.scribeData.search_details.result_filter||"")}return t},this.buildReportSourceParams=function(t){return this.$node.hasClass("report-user")?t.source="reportprofile":this.$node.hasClass("report-moment")?(t.source="reportmoment",t.is_media="true",t.reported_moment_id=this.eventData.momentId,t.reported_tweet_id=this.eventData.tweetId):(t.source="reporttweet",t.reported_moment_id=this.eventData.momentId,t.reported_tweet_id=this.eventData.tweetId,this.eventData.conversationSection&&(t.conversation_section=this.eventData.conversationSection)),t},this.setNewReportFlowContext=function(){var t=this.select("reporterUserIdSelector").val(),e=(!!this.eventData.mediaType).toString(),i=("promoted"===this.eventData.disclosureType).toString(),s={next_view:"report_story_start",reporter_user_id:t,reported_user_id:this.eventData.userId,is_media:e,is_promoted:i},n=this.buildReportSourceParams(s),a="/i/safety/report_story?"+h.default.encode(this.buildReportClientContextParams(n));this.select("newReportFlowIframeSelector").attr("src",a)},this.showNewReportFlow=function(){this.$node.addClass("new-report-flow-dialog"),this.$node.attr("aria-hidden",!1),this.select("newReportFlowBackSelector").hide(),this.select("newReportFlowDoneSelector").hide(),this.select("newReportFlowNextSelector").show(),this.select("newReportFlowNextTextSelector").show(),this.select("newReportFlowAddTextSelector").hide()},this.cancelReport=function(){this.trigger("uiDidCancelReport",this.eventData)},this.completeReport=function(){this.isComplete=!0,this.close()},this.around("close",function(t){this.isOpen()&&!this.isComplete&&this.cancelReport(),this.select("newReportFlowIframeSelector").attr("src",""),t()}),this.newReportFlowFrameNext=function(){this.select("newReportFlowIframeSelector").contents().find("#report_webview_form").submit()},this.newReportFlowFrameBack=function(){this.select("newReportFlowNextTextSelector").show(),this.select("newReportFlowAddTextSelector").hide(),this.select("newReportFlowIframeSelector").get(0).contentWindow.history.back()},this.checkNewReportFlowContentAndUpdate=function(){var t=this.select("newReportFlowIframeSelector").contents().get(0).location,e=t.href.indexOf("report_story_start")>=0,i=t.href.indexOf("/i/safety/report_story_complete")>=0;if(e)this.select("newReportFlowBackSelector").hide(),this.select("newReportFlowDoneSelector").hide(),this.select("newReportFlowCloseSelector").hide(),this.select("newReportFlowNextTextSelector").show(),this.select("newReportFlowAddTextSelector").hide();else if(i){this.select("newReportFlowBackSelector").hide(),this.select("newReportFlowNextSelector").hide(),this.select("newReportFlowAddTextSelector").hide(),this.select("newReportFlowNextTextSelector").hide(),this.select("newReportFlowDoneSelector").show();var s=t.search.match(/\baction=([^&]+)/);if(null!=s){var n={userId:this.eventData.userId,impressionId:this.eventData.impressionId,disclosureType:this.eventData.disclosureType,skipScribe:!0},a=s[1].toLowerCase();if("error"===a)this.select("newReportFlowCloseSelector").show(),this.select("newReportFlowBackSelector").hide(),this.select("newReportFlowDoneSelector").hide();else{var o=void 0;"mute"===a?o="uiDidMuteUser":"block"===a?o="uiBlockAction":"unfollow"===a&&(o="uiUnfollowAction"),void 0!==o&&this.trigger(o,n),this.completeReport()}}}else this.select("newReportFlowBackSelector").show(),this.select("newReportFlowDoneSelector").hide(),this.select("newReportFlowCloseSelector").hide()},this.after("initialize",function(){this.isComplete=!1,this.on(document,"uiNeedsReportDialog",this.setUpDialog);var t=this;this.select("newReportFlowIframeSelector").on("load",function(){return t.checkNewReportFlowContentAndUpdate()}),this.on("click",{newReportFlowNextSelector:this.newReportFlowFrameNext,newReportFlowBackSelector:this.newReportFlowFrameBack,newReportFlowDoneSelector:this.close,newReportFlowCloseSelector:this.close})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(134),c=s(r),l=i(163),d=s(l),u=i(344),h=s(u),f=(0,o.default)(d.default,n);e.default=f},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({leftDashboardSelector:".dashboard-left",rightDashboardSelector:".dashboard-right",roamingSelector:".roaming-module:not(.roaming-top-module)",roamingTopSelector:".roaming-module.roaming-top-module",dashboardLeftBottomSelector:".dashboard-left-bottom-module",threeColWidth:1236}),this.setWindowWidth=function(t){if(this.windowWidth=this.$window.width(),this.windowWidth<this.attr.threeColWidth){if(this.threeCol||t){this.$dashboardLeft.prepend(this.$dashboardRight.find(this.attr.roamingTopSelector));var e=this.$dashboardRight.find(this.attr.roamingSelector);this.$dashboardLeftBottomModule.length?this.$dashboardLeftBottomModule.before(e):this.$dashboardLeft.append(e),this.$body.removeClass("three-col"),this.threeCol=!1}}else this.threeCol&&!t||(this.$dashboardRight.prepend(this.$dashboardLeft.find(this.attr.roamingTopSelector)),this.$dashboardRight.append(this.$dashboardLeft.find(this.attr.roamingSelector)),this.$body.addClass("three-col"),this.threeCol=!0)},this.after("initialize",function(){this.$dashboardRight=this.select("rightDashboardSelector"),this.$dashboardRight.length&&(this.$window=t(window),this.$body=t(document.body),this.$dashboardLeft=this.select("leftDashboardSelector"),this.$dashboardLeftBottomModule=this.$dashboardLeft.find(this.attr.dashboardLeftBottomSelector),this.threeCol=!1,this.setWindowWidth(!0),this.on(window,"resize",c.default.debounce(this.setWindowWidth.bind(this),100)))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(126),c=s(r);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaults={retweetSelector:".retweet-action",commentBoxSelector:".RetweetDialog-commentBox",tweetBoxSelector:"form.tweet-form",isWithCommentClass:"is-withComment",composeIgnoreAttachmentText:!1,top:"20%"},this.openRetweet=function(t,e){this.tweetBoxReady||(h.default.attachTo(this.$tweetBox,{condensable:!0,thumbnailSize:"large",condenseContainer:this.attr.commentBoxSelector,typeaheadData:this.attr.typeaheadData,noTeardown:this.attr.noTeardown,ignoreAttachmentText:this.attr.composeIgnoreAttachmentText,hashflagsEnabled:!0}),this.tweetBoxReady=!0),this.trigger(this.$tweetBox,"uiOverrideTweetBoxOptions",{draftTweetId:"retweet_"+e.tweetId,urlToRetweet:["https://twitter.com",e.screenName,"status",e.id].join("/"),impressionId:e.impressionId,earned:e.disclosureType?"earned"===e.disclosureType:void 0}),this.sourceEventData=e,this.displayTweet(e.id,{modal:"retweet",disableLinks:!0}),this.open()},this.retweet=function(){this.$tweetBox.hasClass(this.attr.isWithCommentClass)||this.trigger("uiDidRetweet",this.sourceEventData)},this.retweetSuccess=function(t,e){void 0!==this.sourceEventData&&(this.trigger("uiDidRetweetSuccess",this.sourceEventData),"uiRetweetWithCommentSuccess"===t.type&&this.trigger("uiDidRetweetWithCommentSuccess",this.sourceEventData)),this.close(),this.sourceEventData=void 0},this.restoreFocusToTweet=function(e){t(e.target).is(this.$dialog)&&this.activeEl&&(e.preventDefault(),this.trigger(t(this.activeEl).closest(".tweet"),"uiShouldAddFocusStyle"),this.activeEl.focus())},this.updateTitle=function(t,e){e&&e.title&&this.select("modalTitleSelector").text(e.title)},this.after("initialize",function(t){this.$tweetBox=this.select("tweetBoxSelector"),this.on("click",{retweetSelector:this.retweet}),this.on(document,"uiOpenRetweetDialog",this.openRetweet),this.on(document,"uiRetweetWithCommentSuccess dataDidRetweet",this.retweetSuccess),this.on(document,"uiDialogRestorePreviousFocus",this.restoreFocusToTweet),this.on("uiDialogUpdateTitle",this.updateTitle)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(163),c=s(r),l=i(182),d=s(l),u=i(862),h=s(u);e.default=(0,o.default)(n,c.default,d.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({tweetActionSelector:".retweet-action",tweetboxId:"retweet",isWithCommentClass:"is-withComment"}),this.dmRegex=/^\s*(?:d|m|dm)\s+[@]?(\S+)\s*(.*)/i,this.createDataForSending=function(){var t={status:this.getVisibleText(),impression_id:this.impressionId,earned:this.earned,attachment_url:this.urlToRetweet};return t},this.isEmpty=function(){return!this.getVisibleText().trim()},this.hasAttachment=function(){return!0},this.sendRetweet=function(){this.detectUpdatedText(),this.isEmpty()||(this.trigger("uiSendTweet",{tweetboxId:this.attr.tweetboxId,tweetData:this.createDataForSending()}),this.$node.addClass("tweeting"),this.disable())},this.updateTweetStateOnTextChanged=function(t){var e=!this.isEmpty();this.maxReached()||this.$node.hasClass("tweeting")||this.getVisibleText().match(this.dmRegex)?this.disable():this.enable(),this.$node.toggleClass(this.attr.isWithCommentClass,e),e?this.trigger("uiDialogUpdateTitle",{title:"Quote Tweet"}):this.trigger("uiDialogRestoreTitle")},this.retweetSent=function(t,e){var i=e.tweetboxId||e.sourceEventData.tweetboxId;i===this.attr.tweetboxId&&(this.trigger("uiShowMessage",{message:"Your Tweet was posted!"}),this.trigger("uiRetweetWithCommentSuccess",e),this.$node.removeClass("tweeting"),this.clear())},this.retweetError=function(t,e){var i=e.tweetboxId||e.sourceEventData.tweetboxId;i===this.attr.tweetboxId&&(this.$node.removeClass("tweeting"),this.enable())},this.enable=function(){this.$tweetButton.removeClass("disabled").prop("disabled",!1)},this.disable=function(){this.$tweetButton.addClass("disabled").prop("disabled",!0)},this.clear=function(){this.reset()},this.reset=function(){this.resetTweetText()},this.resetAndFocus=function(){this.reset(),this.focus()},this.resetTweetText=function(){this.trigger("uiClearUndoState"),this.setVisibleText("")},this.handleCmdEnterSubmit=function(){this.$tweetButton.hasClass("disabled")||this.$tweetButton.click()},this.overrideOptions=function(t,e){this.urlToRetweet=e.urlToRetweet,this.impressionId=e.impressionId,this.earned=e.earned},this.after("initialize",function(){this.$tweetButton=this.select("tweetActionSelector"),this.on("uiTextChanged",this.updateTweetStateOnTextChanged),this.on("uiComposerResetAndFocus",this.resetAndFocus),this.initDraftTweets(),this.initTextNode(),this.on(this.$tweetButton,"click",this.sendRetweet),this.on("uiShortcutCmdEnter",this.handleCmdEnterSubmit),this.on(document,"dataTweetSuccess",this.retweetSent),this.on(document,"dataTweetError",this.retweetError),this.on("uiOverrideTweetBoxOptions",this.overrideOptions),this.reset()})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(123),o=(s(a),i(111)),r=s(o),c=i(863),l=s(c),d=i(229),u=s(d),h=i(864),f=s(h),m=i(431),p=s(m),g=i(432),v=s(g),b=i(224),w=s(b),S=i(433),C=s(S),y=i(865),T=s(y);e.default=(0,r.default)(n,l.default,w.default,C.default,u.default,v.default,f.default,T.default,p.default)},,,,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.saveSearch=function(t,e){this.post({url:"/i/saved_searches/create.json",data:e,eventData:{scribeComponent:e.scribeComponent,scribeAction:"add"},success:"dataAddedSavedSearch",error:"dataSavedSearchError"})},this.removeSavedSearch=function(t,e){this.post({url:"/i/saved_searches/destroy/"+encodeURIComponent(e.id)+".json",data:"",eventData:{scribeComponent:e.scribeComponent,scribeAction:"remove"},success:"dataRemovedSavedSearch",error:"dataSavedSearchError"})},this.after("initialize",function(){this.on("uiAddSavedSearch",this.saveSearch),this.on("uiRemoveSavedSearch",this.removeSavedSearch)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r);e.default=(0,o.default)(n,c.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeSavedSearchAction=function(t,e){this.scribe({component:e.sourceEventData.scribeComponent,element:"saved_search",action:e.sourceEventData.scribeAction})},this.after("initialize",function(){this.on("dataAddedSavedSearch dataRemovedSavedSearch",this.scribeSavedSearchAction)})}Object.defineProperty(e,"__esModule",{
value:!0});var a=i(111),o=s(a),r=i(142),c=s(r);e.default=(0,o.default)(n,c.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({querySourceLinkSelector:"a[data-query-source]",querySourceDataAttr:"data-query-source",storageExpiration:6e4}),this.saveQuerySource=function(t){this.storage.setItem("source",{source:{value:t,expire:Date.now()+this.attr.storageExpiration}},this.attr.storageExpiration)},this.catchLinkClick=function(e,i){var s=t(i.el).attr(this.attr.querySourceDataAttr);s&&this.saveQuerySource(s)},this.saveTypedQuery=function(t,e){"search"===e.source&&this.saveQuerySource("typed_query")},this.after("initialize",function(){var t=(0,c.default)({withExpiry:!0});this.storage=new t("searchQuerySource"),this.on("click",{querySourceLinkSelector:this.catchLinkClick}),this.on("uiSearchQuery",this.saveTypedQuery)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(338),c=s(r);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.handleMessage=function(t){try{var e=JSON.parse(t.data),i=e.event,s=e.data;this.trigger(i,s)}catch(n){}},this.after("initialize",function(){navigator.serviceWorker&&navigator.serviceWorker.addEventListener("message",this.handleMessage.bind(this))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=(0,o.default)(n);e.default=r},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.smsConfirmationAjaxCall=function(e,i,s){function n(t){t.error?this.trigger("uiAlertBanner",t):this.trigger(s,{message:t.message})}var a=t.extend({user_id:e.userId},e);this.post({url:i,data:a,success:n.bind(this),error:"dataUserActionError"})},this.sendPinAction=function(t,e){var i={phone_number:e.phone_number,country_code:e.country_code};this.smsConfirmationAjaxCall(i,"/i/devices/sms_confirmation_begin","dataSendPinSuccess")},this.resendPinAction=function(t,e){var i={phone_number:e.phone_number,country_code:e.country_code,resend:!0};this.smsConfirmationAjaxCall(i,"/i/devices/sms_confirmation_begin","dataResendPinSuccess")},this.verifyPinAction=function(t,e){var i={numeric_pin:e.numeric_pin,phone_number:e.phone_number,country_code:e.country_code};this.smsConfirmationAjaxCall(i,"/i/devices/sms_confirmation_complete","dataVerifyPinSuccess")},this.after("initialize",function(){this.on(document,"uiSendPinAction",this.sendPinAction),this.on(document,"uiResendPinAction",this.resendPinAction),this.on(document,"uiVerifyPinAction",this.verifyPinAction)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=(0,o.default)(n,c.default);e.default=l}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({phoneNumberInputModalSelector:"#sms-confirmation-begin-modal",pinVerificationModalSelector:"#sms-confirmation-complete-modal",alertBoxSelector:"#sms-alert-box",alertMessageSelector:"#sms-alert-message",alertBoxCloseSelector:"#sms-alert-close",authenticityTokenSelector:"#authenticity_token",resendCodeSelector:"#resend_code"}),this.setUpDialog=function(t,e){this.reset(),this.open()},this.reset=function(){this.select("pinVerificationModalSelector").hide(),this.select("phoneNumberSelector").val(""),this.savedPhoneNumber="",this.savedCountryCode=""},this.afterOpen=function(){this.position(),this.select("alertBoxSelector").hide()},this.alertBannerHandler=function(t,e){this.showAlert(e.message)},this.showAlert=function(t){this.select("alertBoxSelector").show(),this.select("alertMessageSelector").text(t)},this.hideAlert=function(){this.select("alertBoxSelector").hide(),this.select("alertMessageSelector").text("")},this.sendPinCode=function(t,e){t.preventDefault(),this.callbackIfValidPhoneNumber(function(){var t=this.select("phoneNumberSelector").val(),e=this.select("countryCodeSelector").val();this.savedPhoneNumber=t,this.savedCountryCode=e,this.trigger("uiSendPinAction",{phone_number:t,country_code:e})})},this.resendPinCode=function(){this.trigger("uiResendPinAction",{phone_number:this.savedPhoneNumber,country_code:this.savedCountryCode})},this.verifyPinCode=function(t,e){t.preventDefault();var i=this.stripPin(this.select("pinCodeSelectorRaw").val());return i?void this.trigger("uiVerifyPinAction",{numeric_pin:i,phone_number:this.savedPhoneNumber,country_code:this.savedCountryCode}):void this.showAlert("Incorrect code. Please try again or request a new one.")},this.sendPinSuccess=function(t,e){this.select("phoneNumberInputModalSelector").remove(),this.hideAlert();var i=this.trimSavedPhoneNumber();this.select("pinVerificationModalSelector").find("#phone_number_to_verify").html(i),this.select("pinVerificationModalSelector").show(),this.trigger("uiVerifyPinFormImpression")},this.trimSavedPhoneNumber=function(){var t=/\(*\)*\+*-*#* */g,e=this.savedPhoneNumber.replace(t,"");return this.savedCountryCode+e},this.verifyPinSuccess=function(t,e){this.isCompleted=!0,this.close(),this.trigger("uiShowMessage",{message:"Your account is unlocked."})},this.resendPinSuccess=function(t,e){this.showAlert(e.message)},this.updateSmsConfirmationCountryCode=function(t,e){this.trigger("uiSmsConfirmationCountryChange")},this.phoneNumberInput=function(t,e){this.startedPhoneInput||(this.trigger("uiSmsConfirmationPhoneNumberInput"),this.startedPhoneInput=!0)},this.pinInput=function(t,e){this.startedPinInput||(this.trigger("uiSmsConfirmationPinCodeInput"),this.startedPinInput=!0)},this.around("close",function(t){this.isOpen()&&!this.isCompleted&&this.trigger("uiCancelSmsConfirmationDialog"),t()}),this.after("initialize",function(){this.on(document,"uiNeedsSmsConfirmationDialog",this.setUpDialog),this.on("uiDialogOpened",this.afterOpen),this.on(document,"dataSendPinSuccess",this.sendPinSuccess),this.on(document,"dataResendPinSuccess",this.resendPinSuccess),this.on(document,"dataVerifyPinSuccess",this.verifyPinSuccess);var t=this.attr.show_sms_confirmation_dialog;t&&this.trigger("uiNeedsSmsConfirmationDialog"),this.on("click",{submitRegisterButtonSelector:this.sendPinCode,submitVerifyButtonSelector:this.verifyPinCode,alertBoxCloseSelector:this.clearInvalidPhoneMessage,resendCodeSelector:this.resendPinCode}),this.on("uiAlertBanner",this.alertBannerHandler),this.on("uiAlertBannerClose",this.hideAlert),this.on("submit",{phoneNumberInputModalSelector:this.sendPinCode,pinVerificationModalSelector:this.verifyPinCode}),this.on("change",{countryNameSelector:this.updateSmsConfirmationCountryCode}),this.on("input",{phoneNumberSelector:this.phoneNumberInput,pinCodeSelectorRaw:this.pinInput}),this.startedPhoneInput=!1,this.startedPinInput=!1,this.isCompleted=!1})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(123),c=(s(r),i(163)),l=s(c),d=i(872),u=s(d),h=(0,o.default)(l.default,u.default,n);e.default=h},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({countryCodeDisplaySelector:"#country_code_display",countryCodeSelector:"#country_code",countryNameSelector:"#device_country_code",phoneNumberSelector:"#phone_number",pinCodeSelector:"#numeric_pin",pinCodeSelectorRaw:"#numeric_pin_raw",submitRegisterButtonSelector:"#send_verification_pin",submitVerifyButtonSelector:"#device_verify"}),this.updateCountryCode=function(t,e){var i=e.value;this.select("countryCodeDisplaySelector").html("+"+i),this.select("countryCodeSelector").val(i),""!==this.select("phoneNumberSelector").val()&&this.callbackIfValidPhoneNumber(this.clearInvalidPhoneMessage)},this.callbackIfValidPhoneNumber=function(t){var e=this.select("countryCodeSelector").val(),i=this.select("phoneNumberSelector").val(),s=this.validatePhoneNumber(e,i);s?t.call(this):this.showInvalidPhoneMessage(e)},this.showInvalidPhoneMessage=function(t){var e="US and Canadian phone numbers must have 11 digits.",i="This appears to be an invalid phone number.",s="1"===t?e:i;s+=" Please enter a valid phone number.",this.trigger("uiAlertBanner",{message:s})},this.clearInvalidPhoneMessage=function(){this.trigger("uiAlertBannerClose")},this.validatePhoneNumber=function(t,e){var i=/\(*\)*\+*-*#* */g,s=e.replace(i,""),n=/^\d{11}$/;return"1"!==t&&(n=/^\d{10,15}$/),n.test(t+s)},this.enableIfValue=function(t){return function(e,i){var s=e.target||e.srcElement;this.select(t).prop("disabled",""===s.value)}},this.stripPin=function(t){return t.replace(/[^a-zA-Z0-9]/g,"")},this.after("initialize",function(){r.default.attachTo(this.attr.countryNameSelector),this.on(this.attr.countryNameSelector,"uiItemSelect",this.updateCountryCode),this.on("input",{phoneNumberSelector:this.enableIfValue("submitRegisterButtonSelector"),pinCodeSelectorRaw:this.enableIfValue("submitVerifyButtonSelector")})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(123),o=(s(a),i(873)),r=s(o);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.clickItems=function(t,e){this.trigger("uiItemClick")},this.itemSelect=function(){var t=void 0,e={index:this.node.selectedIndex},i=void 0;if(this.node.selectedIndex>=0){i=this.node.options[this.node.selectedIndex];for(var s=0;s<i.attributes.length;s++)t=i.attributes[s].name,e[t]=i.attributes[s].value;e.text=i.innerHTML}this.trigger("uiItemSelect",e)},this.setItems=function(e,i){var s=this;this.$node.empty(),i.items&&i.items.forEach(function(e){var i=t("<option />");for(var n in e)"text"===n?i.html(e[n]):i.attr(n,e[n]);i.appendTo(s.$node)}),this.itemSelect()},this.after("initialize",function(){this.node.jquery&&(this.node=this.node[0]),this.attr.items&&this.node.trigger("setItems",{items:this.attr.items}),this.on("setItems",this.setItems),this.on("change",this.itemSelect),this.on("mousedown",this.clickItems)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeDialogImpression=function(t,e){this.scribe({component:"sms_confirmation_dialog",action:"impression"},e)},this.scribeCountryChange=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"mobile_country_code",action:"change"},e)},this.scribePhoneNumberInput=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"phone_number",action:"change"},e)},this.scribeSendPinClick=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"activate_mobile",action:"click"},e)},this.scribeVerifyPinFormImpression=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"verify_pin",action:"impression"},e)},this.scribePinCodeInput=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"verify_pin",action:"input"},e)},this.scribeVerifyButtonClick=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"verify_pin",action:"click"},e)},this.scribeResendPinCodeButtonClick=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"resend_pin",action:"click"},e)},this.scribeDialogCancelClick=function(t,e){this.scribe({component:"sms_confirmation_dialog",action:"cancel"},e)},this.scribeUnlockSuccessImpression=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"verify_pin",action:"success"},e)},this.after("initialize",function(){this.on("dataVerifyPinSuccess",this.scribeUnlockSuccessImpression),this.on("uiCancelSmsConfirmationDialog",this.scribeDialogCancelClick),this.on("uiNeedsSmsConfirmationDialog",this.scribeDialogImpression),this.on("uiResendPinAction",this.scribeResendPinCodeButtonClick),this.on("uiSendPinAction",this.scribeSendPinClick),this.on("uiSmsConfirmationCountryChange",this.scribeCountryChange),this.on("uiSmsConfirmationPhoneNumberInput",this.scribePhoneNumberInput),this.on("uiSmsConfirmationPinCodeInput",this.scribePinCodeInput),this.on("uiVerifyPinAction",this.scribeVerifyButtonClick),this.on("uiVerifyPinFormImpression",this.scribeVerifyPinFormImpression)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r);e.default=(0,o.default)(n,c.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({supportedChallengeTypes:["Captcha"],captchaName:"Captcha",defaultCompletionMessage:"Challenge completed.",recaptchaLoadTime:100,maxCaptchaLoadRetries:3}),this.hitChallengeEndpoint=function(t){this.get({url:"/account/challenge",data:{challenge:t.challenge,response:t.response,challenge_name:t.challengeName},success:this.handleSuccessResponse.bind(this),error:this.handleErrorResponse.bind(this)})},this.handleErrorResponse=function(t){this.closeCurrentChallenge(),this.resetChallengeParams()},this.closeCurrentChallenge=function(){this.currentChallenge&&this.trigger("uiCloseSpam"+this.currentChallenge+"Challenge")},this.allChallengesCompleted=function(t){return!t.challengeName},this.isValidChallengeType=function(t){return this.attr.supportedChallengeTypes.indexOf(t.challengeName)!==-1},this.needToRefreshCaptchaChallenge=function(t){return this.currentChallenge===this.attr.captchaName&&t.challengeName===this.attr.captchaName},this.handleSuccessResponse=function(t){this.allChallengesCompleted(t)?(this.closeCurrentChallenge(),this.sendCompletionMessage(),this.resetChallengeParams()):this.needToRefreshCaptchaChallenge(t)?this.trigger("uiRefreshSpamCaptchaChallenge"):this.isValidChallengeType(t)?(this.closeCurrentChallenge(),this.setAndOpenNewChallenge(t)):(this.closeCurrentChallenge(),this.resetChallengeParams())},this.setAndOpenNewChallenge=function(t){this.setChallengeParams(t.challengeName,t.completionMessage),this.trigger("uiOpenSpam"+this.currentChallenge+"Challenge",t)},this.sendCompletionMessage=function(){this.trigger("uiShowMessage",{message:this.getCompletionMessage()})},this.getCompletionMessage=function(){return this.completionMessage||this.attr.defaultCompletionMessage},this.createInitialChallenge=function(t,e){this.needToCreateRecaptchaWidget(e)?this.fetchRecaptchaScript(t,e):this.setAndOpenNewChallenge(e)},this.needToCreateRecaptchaWidget=function(t){return t.challengeName===this.attr.captchaName&&!this.isRecaptchaObjectDefined()},this.isRecaptchaObjectDefined=function(){return"undefined"!=typeof Recaptcha},this.fetchScriptDone=function(t,e,i){"success"===i?this.ensureRecaptchaCreatedAndLoadChallenge(t):this.trigger(document,"uiShowError",{message:"Internal server error."})},this.fetchScriptFailure=function(t,e,i){this.trigger(document,"uiShowError",{message:"Internal server error."})},this.fetchRecaptchaScript=function(e,i){t.getScript(this.attr.recaptchaApiUrl).done(this.fetchScriptDone.bind(this,i)).fail(this.fetchScriptFailure.bind(this))},this.ensureRecaptchaCreatedAndLoadChallenge=function(t){return this.isRecaptchaObjectDefined()?void this.setAndOpenNewChallenge(t):(this.loadAttempts=this.attr.maxCaptchaLoadRetries,void(this.recaptchaLoadInterval=setInterval(this.checkIfRecaptchaCreated.bind(this,t),this.attr.recaptchaLoadTime)))},this.clearRecaptchLoadInterval=function(){clearInterval(this.recaptchaLoadInterval)},this.clearLoadAttempts=function(){this.loadAttempts=void 0},this.isLoadAttemptsDefined=function(){return"undefined"!=typeof this.loadAttempts},this.checkIfRecaptchaCreated=function(t){this.isLoadAttemptsDefined()&&this.loadAttempts--,this.isRecaptchaObjectDefined()&&(this.clearRecaptchLoadInterval(),this.setAndOpenNewChallenge(t),this.clearLoadAttempts()),(!this.isLoadAttemptsDefined()||this.loadAttempts<=0)&&(this.clearRecaptchLoadInterval(),this.clearLoadAttempts(),this.trigger(document,"uiShowError",{message:"Internal server error."}))},this.submitChallenge=function(t,e){this.hitChallengeEndpoint(e)},this.resetChallengeParams=function(){this.setChallengeParams()},this.setChallengeParams=function(t,e){this.currentChallenge=t,this.completionMessage=e},this.after("initialize",function(){this.on("uiSubmitSpamChallenge",this.submitChallenge),this.on("dataInitialChallengeNeeded",this.createInitialChallenge)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(123),c=(s(r),i(240)),l=s(c);e.default=(0,o.default)(n,l.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeSruStats=function(t,e){var i=["stats","sru",e.mediaCategory,e.command,e.status],s={browser:(0,o.default)(),append_byte_size:e.appendByteSize,total_duration_ms:e.totalDuration,total_byte_size:e.totalByteSize};this.scribePerftown(i.join(":"),e.duration,s)},this.after("initialize",function(){h.default.getDecider("web_sru_stats")&&this.on("dataSruStats",this.scribeSruStats)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(156),o=s(a),r=i(111),c=s(r),l=i(212),d=s(l),u=i(136),h=s(u);e.default=(0,c.default)(n,d.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({tcoSelector:".js-display-url",appendTarget:"head"}),this.preconnect=function(e){var i=e.target.parentNode,s=i&&i.href,n=i&&i.getAttribute("data-expanded-url");n&&s&&0===s.indexOf("https://t.co/")&&t('<link rel="preconnect">').attr({href:n}).appendTo(this.attr.appendTarget)},this.after("initialize",function(){this.on("click",{tcoSelector:this.preconnect})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=(0,o.default)(n);e.default=r}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({width:590,sourceLangSelector:".TranslationFeedbackDialog-sourceLanguage select",translationInputSelector:".TranslationFeedbackDialog-translationInput",submitSelector:".modal-submit"}),this.openDialog=function(t,e){this.resetDialog(),this.displayTweet(e.tweetId,{modal:"translation_feedback",disableLinks:!0}),this.tweetId=e.tweetId,this.destLang=e.destLang,this.select("sourceLangSelector").val(e.sourceLang),this.setVisibleText(this.unescapeHtml(e.translation)),this.open()},this.resetDialog=function(){this.enableSubmitButton()},this.unescapeHtml=function(e){return t("<div/>").html(e).text()},this.submit=function(){this.disableSubmitButton();var t={id:this.tweetId,source:this.select("sourceLangSelector").val(),dest:this.destLang,translation:this.getVisibleText()};this.trigger("uiSuggestTweetTranslation",t)},this.enableSubmitButton=function(){this.select("submitSelector").prop("disabled",!1)},this.disableSubmitButton=function(){this.select("submitSelector").prop("disabled",!0)},this.isEmpty=function(){return!this.getVisibleText().trim()},this.updateSubmitButton=function(){this.isEmpty()?this.disableSubmitButton():this.enableSubmitButton()},this.translationSubmitted=function(t,e){this.enableSubmitButton(),this.close()},this.submissionError=function(t,e){this.enableSubmitButton(),this.close()},this.after("initialize",function(){this.attr.textSelector=this.attr.translationInputSelector,this.initTextNode(),this.on(document,"uiNeedsTranslationFeedbackDialog",this.openDialog),this.on(document,"dataTweetTranslationSuggestionSuccess",this.translationSubmitted),this.on(document,"dataTweetTranslationSuggestionError",this.submissionError),this.on("uiTextChanged",this.updateSubmitButton),this.on("click",{submitSelector:this.submit})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=i(163),d=s(l),u=i(182),h=s(u),f=i(224),m=s(f);e.default=(0,o.default)(n,d.default,m.default,h.default,c.default)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({favoriteSelector:".js-toggle-fav a, .js-actionFavorite",replySelector:".js-actionReply",retweetSelector:".js-toggleRt a:not([aria-disabled=true]), .js-actionRetweet:not(:disabled)",quickPromoteSelector:".js-actionQuickPromote",permalinkSelector:".tweet .js-permalink",tweetItemSelector:".tweet",retweetInlineSelector:".js-actionInlineRetweet",togglableTweetActionsSelector:"a:visible",toggleContainerSelector:".js-toggleState",otherReplyUsersSelector:".js-other-reply-users",anyLoggedInActionSelector:".js-toggleRt a:not([aria-disabled=true]), .js-toggle-fav a, .js-actionReply, .js-actionRetweet, .js-actionFavorite, .js-actionCount",favoritedTweetClass:"favorited",retweetedTweetClass:"retweeted"}),this.handleTransition=function(e,i){return function(s,n){var a=n.id||n.sourceEventData.id,o=(0,l.default)(this.$node,this.attr.tweetItemSelector,a),r=o[0],c=document.activeElement,d=void 0;r&&t.contains(r,c)&&(d=t(c).closest(this.attr.toggleContainerSelector)),o[e](i),d&&d.find(this.attr.togglableTweetActionsSelector).focus()}},this.getDataForReply=function(t){var e=t.closest("[data-semantic-annotation-ids]").attr("data-semantic-annotation-ids"),i=void 0;try{i=JSON.parse(t.attr("data-reply-to-users-json")||"[]")}catch(s){}return Array.isArray(i)||(i=[]),u.default.merge({isReplyLinkClick:!0,replyToUsers:i,retweetId:t.attr("data-retweet-id"),semanticAnnotationIds:e},!0)},this.toggleFavorite=function(t,e,i){var s=i.$tweet.hasClass(this.attr.favoritedTweetClass)?"uiDidUnfavoriteTweet":"uiDidFavoriteTweet";this.trigger(i.$tweet,s,i.tweetData)},this.toggleRetweet=function(t,e,i){var s=i.$tweet.hasClass(this.attr.retweetedTweetClass)?"uiDidUnretweet":"uiOpenRetweetDialog";this.trigger(i.$tweet,s,i.tweetData)},this.uiOpenSignupDialog=function(e,i,s){var n=t(i.el),a=void 0;a=n.is(this.attr.replySelector)?"reply":n.is(this.attr.retweetSelector)?"retweet":n.is(this.attr.favoriteSelector)?"favorite":"default",this.trigger("uiOpenSignupDialog",{screenName:s.tweetData.screenName,action:a})},this.handleLoggedOutFavoriteClick=function(t,e,i){this.trigger("uiLoggedOutActionAttempt",u.default.merge(i.tweetData,{action:"favorite_attempt"}))},this.handleLoggedOutRetweetClick=function(t,e,i){this.trigger("uiLoggedOutActionAttempt",u.default.merge(i.tweetData,{action:"retweet_attempt"}))},this.handleLoggedOutReplyClick=function(t,e,i){this.trigger("uiLoggedOutActionAttempt",u.default.merge(i.tweetData,{action:"reply_attempt"}))},this.otherReplyUsersPopup=function(t,e,i){this.trigger(i.$tweet,"uiRequestActivityPopup",{component:"people_in_conversation_popup",contentId:i.tweetData.tweetId,htmlTitle:"People in this conversation"})},this.after("initialize",function(){var t=this.mkTweetDataCollectorForAction(this.interactionDataWithCard);if(!this.attr.loggedIn)return void this.on("click",{anyLoggedInActionSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.uiOpenSignupDialog),favoriteSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.handleLoggedOutFavoriteClick),retweetSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.handleLoggedOutRetweetClick),replySelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.handleLoggedOutReplyClick)});var e=this.mkTweetDataCollectorForAction(this.interactionDataWithCard,this.getDataForReply);this.on("click",{favoriteSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.toggleFavorite),retweetSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.toggleRetweet),replySelector:this.composeHandler(this.preventDefault,this.getClosestTweet,e,this.triggerTweetAction("uiReplyToTweet")),quickPromoteSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,this.triggerTweetAction("uiOpenQuickPromoteDialog")),permalinkSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiPermalinkClick")),otherReplyUsersSelector:this.composeHandler(this.getClosestTweet,t,this.otherReplyUsersPopup)}),this.on(document,"uiDidFavoriteTweet dataFailedToUnfavoriteTweet",this.handleTransition("addClass",this.attr.favoritedTweetClass)),this.on(document,"uiDidUnfavoriteTweet dataFailedToFavoriteTweet",this.handleTransition("removeClass",this.attr.favoritedTweetClass)),this.on(document,"uiDidRetweet dataFailedToUnretweet",this.handleTransition("addClass",this.attr.retweetedTweetClass)),this.on(document,"uiDidUnretweet dataFailedToRetweet",this.handleTransition("removeClass",this.attr.retweetedTweetClass))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(123),o=(s(a),i(111)),r=s(o),c=i(600),l=s(c),d=i(126),u=s(d),h=i(542),f=s(h),m=i(138),p=s(m),g=i(880),v=s(g),b=i(881),w=s(b),S=i(882),C=s(S),y=(0,r.default)(n,f.default,p.default,v.default,w.default,C.default);e.default=y}).call(e,i(10))},function(t,e){"use strict";function i(){this.before("toggleFavorite",function(t,e,i){return i.tweetData.tweetStatCount=i.$tweet.find(".ProfileTweet-action--favorite .ProfileTweet-actionCount").attr("data-tweet-stat-count")}),this.before("toggleRetweet",function(t,e,i){return i.tweetData.tweetStatCount=i.$tweet.find(".ProfileTweet-action--retweet .ProfileTweet-actionCount").attr("data-tweet-stat-count")})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){(function(t){"use strict";function i(){this.defaultAttrs({tweetActionContainerSelector:".ProfileTweet-action",animationStateClass:"is-animating",animationTweetSelector:".tweet",animationName:"heart-burst"}),this.getTweetActions=function(t){return t.find(this.attr.tweetActionContainerSelector)},this.isTweetAnimating=function(t){return this.getTweetActions(t).find(this.animationStateClass)},this.cleanupAnimation=function(t){this.isTweetAnimating(t)&&(this.getTweetActions(t).removeClass(this.attr.animationStateClass),this.trigger("uiAnimationEnd"))},this.completeAnimation=function(e){e.originalEvent&&e.originalEvent.animationName===this.attr.animationName&&this.cleanupAnimation(t(e.target).closest(this.attr.animationTweetSelector))},this.unfavoriteHandler=function(e){this.cleanupAnimation(t(e.target))},this.animateAction=function(e,i){this.getTweetActions(t(e.target)).addClass(this.attr.animationStateClass)},this.after("initialize",function(){this.on(document,"uiDidFavoriteTweet",this.animateAction),this.on(document,"uiDidUnfavoriteTweet",this.unfavoriteHandler),this.on("webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationend",{animationTweetSelector:this.completeAnimation})})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function i(){this.addCancelHoverStyleClass=function(e,i,s){var n=t(e.target).closest(this.attr.tweetItemSelector),a=t(e.target).closest(this.attr.toggleContainerSelector);return"click"!==e.type||n.hasClass(this.attr.favoritedTweetClass)||n.hasClass(this.attr.retweetedTweetClass)?void a.removeClass("is-hoverStateCancelled"):(a.addClass("is-hoverStateCancelled"),void a.one("mouseleave",function(){return a.removeClass("is-hoverStateCancelled")}))},this.after("toggleFavorite",this.addCancelHoverStyleClass),this.after("toggleRetweet",this.addCancelHoverStyleClass)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.updateRetweetState=function(t,e){var i=e.tweet_id||e.id,s=e.retweet_id||e.id_str,n=this.$node.find('div.tweet[data-tweet-id="'+i+'"]');n.attr("data-my-retweet-id",s)},this.updateUnRetweetState=function(t,e){var i=e.tweet_id||e.id_str,s=this.$node.find('div.tweet[data-tweet-id="'+i+'"]');s.removeAttr("data-my-retweet-id data-retweet-id data-retweeter")},this.after("initialize",function(){this.attr.loggedIn&&(this.on(document,"dataDidRetweet",this.updateRetweetState),this.on(document,"dataDidUnretweet",this.updateUnRetweetState))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=(0,o.default)(n);e.default=r},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({limit:10,remoteDebounceInterval:300,remoteThrottleInterval:300,outstandingRemoteRequestCount:0,queuedRequestData:!1,outstandingRemoteRequestMax:6,useThrottle:!1,tweetContextEnabled:!1,topicsWithFiltersEnabled:!1}),this.triggerSuggestionsEvent=function(t,e,i){this.trigger("dataTypeaheadSuggestionsResults",{suggestions:i,queryData:e,id:t})},this.hasAnySuggestions=function(t,e){return e.some(function(e){return t[e]&&t[e].length})},this.needsRemoteRequest=function(t,e){return e.some(function(e){return this.datasources[e]&&this.datasources[e].requiresRemoteSuggestions&&this.datasources[e].requiresRemoteSuggestions(t)},this)},this.getLocalSuggestions=function(t,e,i){function s(){a++,a===e.length&&i(n)}var n={},a=0;e.forEach(function(e){this.datasources[e]?this.datasources[e].getLocalSuggestions(t,function(t){t.length&&(t.forEach(function(t){return t.origin="prefetched"}),n[e]=t),s()}):s()},this)},this.processRemoteSuggestions=function(t){this.adjustRequestCount(-1);var e=t.sourceEventData,i=e.suggestions||{};e.datasources.forEach(function(s){var n=s.processRemoteSuggestions(e,t,i);if(n[s.attr.id]&&n[s.attr.id].length){for(var a in n)n[a].forEach(function(t){return t.origin=t.origin||"remote"});e.suggestions[s.attr.id]=n[s.attr.id]}},this),this.processSuggestionsByDataset(i),this.triggerSuggestionsEvent(e.id,e.queryData,i),this.makeQueuedRemoteRequestIfPossible()},this.getRemoteSuggestions=function(t,e,i,s){e&&this.needsRemoteRequest(e,s)&&(this.request[t]||(this.attr.useThrottle?this.request[t]=d.default.throttle(this.splitRemoteRequests.bind(this),this.attr.remoteThrottleInterval):this.request[t]=d.default.debounce(this.splitRemoteRequests.bind(this),this.attr.remoteDebounceInterval)),0===e.query.indexOf("@")&&"COMPOSE"===e.typeaheadSrc&&(e.query=e.query.substring(1),e.atSignRemoved=!0),this.request[t](t,e,i,s))},this.makeQueuedRemoteRequestIfPossible=function(){if(this.attr.outstandingRemoteRequestCount===this.attr.outstandingRemoteRequestMax-1&&this.attr.queuedRequestData){var t=this.attr.queuedRequestData;this.getRemoteSuggestions(t.id,t.queryData,t.suggestions,t.datasources),this.attr.queuedRequestData=!1}},this.adjustRequestCount=function(t){this.attr.outstandingRemoteRequestCount+=t},this.canMakeRemoteRequest=function(t){return this.attr.outstandingRemoteRequestCount<this.attr.outstandingRemoteRequestMax||(this.attr.queuedRequestData=t,!1)},this.processRemoteRequestError=function(){this.adjustRequestCount(-1),this.makeQueuedRemoteRequestIfPossible()},this.splitRemoteRequests=function(t,e,i,s){var n={};s.forEach(function(t){if(this[t]&&this[t].requiresRemoteSuggestions&&this[t].requiresRemoteSuggestions(e)){var i=this[t];n[i.attr.remotePath]?n[i.attr.remotePath].push(i):n[i.attr.remotePath]=[i]}},this.datasources);for(var a in n){this.executeRemoteRequest(t,e,i,n[a]);break}},this.executeRemoteRequest=function(t,e,i,s){var n={id:t,queryData:e,suggestions:i,datasources:s};this.canMakeRemoteRequest(n)&&((!this.attr.tweetContextEnabled||e.tweetContext&&e.tweetContext.length>1e3)&&(e.tweetContext=void 0),this.adjustRequestCount(1),this.get({url:s[0].attr.remotePath,data:{q:e.query,tweet_context:e.tweetContext,count:this.attr.limit,result_type:s.map(function(t){return t.attr.remoteType}).join(","),filters:this.attr.topicsWithFiltersEnabled,src:e.typeaheadSrc},eventData:n,success:this.processRemoteSuggestions.bind(this),error:this.processRemoteRequestError.bind(this)}))},this.truncateTopicsWithRecentSearches=function(t){if(t.topics&&t.recentSearches){var e=t.recentSearches.length,i=4-e;t.topics=t.topics.slice(0,i)}},this.dedupSuggestions=function(t,e,i){function s(){return e.some(function(t){return t in i})}function n(t){var e=t.topic||t.name;return!a[e.toLowerCase()]}if(i[t]&&s()){var a={};i[t].forEach(function(t){var e=t.name||t.topic;a[e.toLowerCase()]=!0}),e.forEach(function(t){t in i&&(i[t]=i[t].filter(n))})}},this.processSuggestionsByDataset=function(t){this.dedupSuggestions("recentSearches",["topics"],t),this.truncateTopicsWithRecentSearches(t)},this.getSuggestions=function(t,e){var i=this;if("undefined"==typeof e)throw"No parameters specified";
if(!e.datasources)throw"No datasources specified";if("undefined"==typeof e.queryData)throw"No query data specified";if("undefined"==typeof e.queryData.query)throw"No query specified";if(!e.id)throw"No id specified";this.getLocalSuggestions(e.queryData,e.datasources,function(t){i.processSuggestionsByDataset(t);var s="@"!==e.queryData.query&&i.needsRemoteRequest(e.queryData,e.datasources);!i.hasAnySuggestions(t,e.datasources)&&s||i.triggerSuggestionsEvent(e.id,e.queryData,t),s&&i.getRemoteSuggestions(e.id,e.queryData,t,e.datasources)})},this.getGlobalDatasources=function(){return W},this.setGlobalDatasources=function(t){W=t},this.addSynchronousDatasource=function(t,e,i){var s=i[e]||{};this.isDatasourceEnabled(e)&&(W.hasOwnProperty(e)?this.datasources[e]=W[e]:W[e]=this.datasources[e]=new t(d.default.merge(s,{id:e})),this.setupEventListeners(e))},this.addAsynchronousDatasource=function(t){var e=this,i=t.datasource;t=t||{};var s=t.dsName,n=this.componentOptions[s]||{},a=new i(d.default.merge(n,{id:s}),t);return a.initialize().then(function(t){return W[s]=e.datasources[s]=a,t})},this.initializeLocalData=function(t){this.addDatasourcesNotUsingIndexedDB();var e=this.shouldUseIndexedDB()?this.addAsynchronousDatasources():this.addSynchronousDatasources(),i=this.addDMTypeaheadDatasources();Promise.all([e,i]).then(t,t)},this.isDatasourceEnabled=function(t){var e=this.componentOptions[t]||{};return!!e.enabled},this.isBrowserSafari=function(){return(0,o.default)().safari},this.shouldUseIndexedDB=function(){return $.default.isSupported()&&this.attr.useIndexedDB&&!this.isBrowserSafari()},this.addAsync=function(t){var e=arguments,i=t.dsName,s=t.dbName,n=t.datasource,a=this;return(0,H.default)({title:"Typeahead ("+i+")",enabled:window.DEBUG&&window.DEBUG.enabled},new Promise(function(t,o){a.isDatasourceEnabled(i)?a.addAsynchronousDatasource({dbName:s,dsName:i,datasource:n,indexedDBWrapper:q.default}).then(function(e){a.setupEventListeners(i),a.addDBHandleToGlobals(s,e),t([i,s,e])}).catch(function(){a.indexedDBInitializationFailed=!0,o(e)}):t()}))},this.addDBHandleToGlobals=function(t,e){e&&(window.globalIndexedDBs[t]=e)},this.addDMTypeaheadDatasources=function(){return this.addAsync({dsName:"dmConversations",dbName:"dm_typeahead",datasource:y.default})},this.addAsynchronousDatasources=function(){var t=this;return this.pendingAsyncDatasources=this.addAsync({dsName:"accounts",dbName:"accounts",datasource:S.default}).then(function(){return t.addAsync({dsName:"dmAccounts",dbName:"accounts",datasource:S.default})}).then(function(){return t.addAsync({dsName:"mediaTagAccounts",dbName:"accounts",datasource:S.default})})},this.addDatasourcesNotUsingIndexedDB=function(){this.addSynchronousDatasource(D.default,"savedSearches",this.componentOptions),this.addSynchronousDatasource(x.default,"topics",this.componentOptions),this.addSynchronousDatasource(x.default,"hashtags",d.default.merge(this.componentOptions,{hashtags:{remoteType:"hashtags"}},!0)),this.addSynchronousDatasource(O.default,"trendLocations",this.componentOptions),this.addSynchronousDatasource(L.default,"selectedUsers",this.componentOptions),this.addSynchronousDatasource(U.default,"prefillUsers",this.componentOptions),this.addSynchronousDatasource(I.default,"recentSearches",this.componentOptions),this.addSynchronousDatasource(N.default,"concierge",this.componentOptions)},this.addSynchronousDatasources=function(){return this.addSynchronousDatasource(b.default,"accounts",this.componentOptions),this.addSynchronousDatasource(b.default,"dmAccounts",this.componentOptions),this.addSynchronousDatasource(b.default,"mediaTagAccounts",this.componentOptions),Promise.resolve()},this.possiblyScribeIndexedDB=function(){if(this.shouldUseIndexedDB()){var t=this.indexedDBInitializationFailed?"failure":"success";this.scribe({component:"indexeddb",action:t})}},this.after("initialize",function(t,e){var i=this;this.datasources={},this.request={},this.componentOptions=e,this.initializeLocalData(function(){i.on("uiNeedsTypeaheadSuggestions",i.getSuggestions),i.possiblyScribeIndexedDB()})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(156),o=s(a),r=i(111),c=s(r),l=i(126),d=s(l),u=i(240),h=s(u),f=i(885),m=s(f),p=i(142),g=s(p),v=i(886),b=s(v),w=i(888),S=s(w),C=i(891),y=s(C),T=i(892),D=s(T),M=i(893),I=s(M),P=i(894),k=s(P),A=i(895),x=s(A),E=i(896),O=s(E),R=i(897),N=s(R),F=i(898),L=s(F),j=i(899),U=s(j),B=i(889),$=s(B),V=i(900),q=s(V),z=i(890),H=s(z);window.globalIndexedDBs={};var W={};e.default=(0,c.default)(n,h.default,m.default,k.default,g.default)},function(t,e){"use strict";function i(){this.defaultAttrs({cache_limit:10}),this.getCachedSuggestions=function(t){return this.cache[t]?this.cache[t].value:null},this.clearCache=function(){this.cache={NEWEST:null,OLDEST:null,COUNT:0,LIMIT:this.attr.cache_limit}},this.deleteCachedSuggestions=function(t){return!!this.cache[t]&&(this.cache.COUNT>1&&(t===this.cache.NEWEST.query?(this.cache.NEWEST=this.cache.NEWEST.before,this.cache.NEWEST.after=null):t===this.cache.OLDEST.query?(this.cache.OLDEST=this.cache.OLDEST.after,this.cache.OLDEST.before=null):(this.cache[t].after.before=this.cache[t].before,this.cache[t].before.after=this.cache[t].after)),delete this.cache[t],this.cache.COUNT-=1,!0)},this.setCachedSuggestions=function(t,e){0!==this.cache.LIMIT&&(this.deleteCachedSuggestions(t),this.cache.COUNT>=this.cache.LIMIT&&this.deleteCachedSuggestions(this.cache.OLDEST.query),0===this.cache.COUNT?(this.cache[t]={query:t,value:e,before:null,after:null},this.cache.NEWEST=this.cache[t],this.cache.OLDEST=this.cache[t]):(this.cache[t]={query:t,value:e,before:this.cache.NEWEST,after:null},this.cache.NEWEST.after=this.cache[t],this.cache.NEWEST=this.cache[t]),this.cache.COUNT+=1)},this.aroundGetSuggestions=function(t,e,i){var s=i.id+":"+i.query,n=this.getCachedSuggestions(s);return n?void this.triggerSuggestionsEvent(i.id,i.query,n):void t(e,i)},this.afterTriggerSuggestionsEvent=function(t,e,i,s){if(!s){var n=t+":"+e;this.setCachedSuggestions(n,i)}},this.after("triggerSuggestionsEvent",this.afterTriggerSuggestionsEvent),this.around("getSuggestions",this.aroundGetSuggestions),this.after("initialize",function(){this.clearCache(),this.on("uiTypeaheadDeleteRecentSearch",this.clearCache)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(e){this.attr={id:null,ttl_ms:1728e5,localStorageCount:1200,ie8LocalStorageCount:1e3,limit:6,version:4,localQueriesEnabled:!1,remoteQueriesEnabled:!1,onlyDMable:!1,onlyShowUsersWithCanMediaTag:!1,currentUserId:null,storageAdjacencyList:"userAdjacencyList",storageHash:"userHash",storageProtocol:"protocol",storageVersion:"userVersion",remotePath:"/i/search/typeahead.json",remoteType:"users",prefetchPath:"/i/search/typeahead.json",prefetchType:"users",storageBlackList:"userBlackList",maxLengthBlacklist:100},this.attr=g.default.merge(this.attr,e),this.after=t.noop,this.defaultAttrs=t.noop,m.default.mixin(this,[d.default,b.default,h.default]),this.getPrefetchCount=function(){return this.attr.localStorageCount},this.isMetadataExpired=function(){var t=this.storage.getItem(this.attr.storageVersion),e=this.storage.getItem(this.attr.storageProtocol);return t!==this.attr.version||e!==this.getProtocol()},this.getStorageKeys=function(){return[this.attr.storageVersion,this.attr.storageHash,this.attr.storageAdjacencyList,this.attr.storageProtocol]},this.getDataFromLocalStorage=function(){this.userHash=this.storage.getItem(this.attr.storageHash)||this.userHash,this.adjacencyList=this.storage.getItem(this.attr.storageAdjacencyList)||this.adjacencyList},this.processResults=function(t){return t&&t[this.attr.prefetchType]?(t[this.attr.prefetchType].forEach(function(t){this.isAccountMalformedAndScribe(t,"typeahead_local")||(t.tokens=t.tokens.map(function(t){return"string"==typeof t?t:t.token}),t.prefetched=!0,this.userHash[t.id]=t,t.tokens.forEach(function(e){var i=o.default.getFirstChar(e);i.trim().length&&(void 0===this.adjacencyList[i]&&(this.adjacencyList[i]=[]),this.adjacencyList[i].indexOf(t.id)===-1&&this.adjacencyList[i].push(t.id))},this))},this),this.storage.setItem(this.attr.storageHash,this.userHash,this.attr.ttl_ms),this.storage.setItem(this.attr.storageAdjacencyList,this.adjacencyList,this.attr.ttl_ms),this.storage.setItem(this.attr.storageVersion,this.attr.version,this.attr.ttl_ms),void this.storage.setItem(this.attr.storageProtocol,this.getProtocol(),this.attr.ttl_ms)):void this.useStaleData()},this.getLocalSuggestions=function(t,e){if(!this.attr.localQueriesEnabled)return void e([]);var i=o.default.tokenizeText(t.query.replace("@","")),s=this.getPotentiallyMatchingIds(i),n=this.getAccountsFromIds(s),a=n.filter(this.matcher(i));a.sort(this.sorter),a=a.slice(0,this.attr.limit),e(a)},this.getPotentiallyMatchingIds=function(t){var e=[];return t.map(function(t){var i=this.adjacencyList[o.default.getFirstChar(t)];i&&(e=e.concat(i))},this),e=g.default.uniqueArray(e)},this.getAccountsFromIds=function(t){var e=[];return t.forEach(function(t){var i=this.userHash[t];i&&e.push(i)},this),e},this.matcher=function(t){var e=this;return function(i){var s=i.tokens;if(e.attr.onlyDMable&&!i.is_dm_able)return!1;if(!e.isEligibleForMediaTagSuggestion(i))return!1;var n=t.every(function(t){var e=s.filter(function(e){return 0===e.indexOf(t)});return e.length});return n?i:void 0}},this.sorter=function(t,e){function i(t,e){var i=t.score_boost?t.score_boost:0,s=e.score_boost?e.score_boost:0,n=t.rounded_score?t.rounded_score:0,a=e.rounded_score?e.rounded_score:0;return a+s-(n+i)}var s=t.prefetched,n=e.prefetched;return s&&!n?-1:n&&!s?1:i(t,e)},this.processRemoteSuggestions=function(t,e,i){var s=i[this.attr.id]||[],n={};return s.forEach(function(t){return n[t.id_str]=!0},this),this.requiresRemoteSuggestions(t.queryData)&&e[this.attr.remoteType]&&e[this.attr.remoteType].forEach(function(t){var e=!n[t.id_str]&&(!this.attr.onlyDMable||t.is_dm_able)&&this.isEligibleForMediaTagSuggestion(t)&&!this.isAccountMalformedAndScribe(t,"typeahead_remote");e&&s.push(t)},this),i[this.attr.id]=s.slice(0,this.attr.limit),i[this.attr.id].forEach(function(t){this.removeBlacklistSocialContext(t)},this),i},this.removeBlacklistSocialContext=function(t){t.first_connecting_user_id in this.socialContextBlackList&&(t.first_connecting_user_name=void 0,t.first_connecting_user_id=void 0)},this.requiresRemoteSuggestions=function(t){return!(!t||!t.query)&&(t.accountsWithoutAtSignLocalOnly?this.attr.remoteQueriesEnabled&&("@"===o.default.getFirstChar(t.query)||t.atSignRemoved):this.attr.remoteQueriesEnabled)},this.isEligibleForMediaTagSuggestion=function(t){return!this.attr.onlyShowUsersWithCanMediaTag||t.can_media_tag||t.id===this.attr.currentUserId},this.isAccountMalformedAndScribe=function(t,e){var i=o.default.isAccountMalformed(t);return i&&this.scribe({component:"local_storage",element:e,action:"empty"}),i},this.initialize=function(){var t=(0,c.default)({withExpiry:!0});this.storage=new t("typeahead"),this.adjacencyList={},this.userHash={},this.attr.localQueriesEnabled&&this.loadData(this.attr.prefetchPath,this.attr.prefetchType),this.socialContextBlackList=this.storage.getItem(this.attr.storageBlackList)||{}},this.initialize()}Object.defineProperty(e,"__esModule",{value:!0});var a=i(411),o=s(a),r=i(338),c=s(r),l=i(240),d=s(l),u=i(142),h=s(u),f=i(121),m=s(f),p=i(126),g=s(p),v=i(887),b=s(v);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.prefetch=function(t,e,i,s){var n=this,a={prefetch:!0,result_type:e,count:this.getPrefetchCount(),media_tagging_in_prefetch:this.shouldIncludeCanMediaTag()};return this.storage&&(a[e+"_cache_age"]=this.storage.getCacheAge(this.attr.storageHash,this.attr.ttl_ms)),new Promise(function(e,o){var r=n.get({url:t,data:a,eventData:{},success:i,error:s});r.then(e).fail(o)})},this.useStaleData=function(){this.storage&&(this.extendTTL(),this.getDataFromLocalStorage())},this.extendTTL=function(){for(var t=this.getStorageKeys(),e=0;e<t.length;e++)this.storage.updateTTL(t[e],this.attr.ttl_ms)},this.loadData=function(t,e){var i=this.getStorageKeys().some(function(t){return this.storage.isExpired(t)},this);i||this.isMetadataExpired()?this.prefetch(t,e,this.processResults.bind(this),this.useStaleData.bind(this)):this.getDataFromLocalStorage()},this.getProtocol=function(){return window.location.protocol},this.shouldIncludeCanMediaTag=function(){return o.default.getDecider("enable_media_tag_prefetch")}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(136),o=s(a);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(e,i){this.attr={id:null,ttlMilliseconds:1728e5,itemCount:1e3,limit:6,version:1,localQueriesEnabled:!1,remoteQueriesEnabled:!1,onlyDMable:!1,onlyShowUsersWithCanMediaTag:!1,currentUserId:null,remotePath:"/i/search/typeahead.json",remoteType:"users",prefetchPath:"/i/search/typeahead.json",prefetchType:"users",storageBlackList:"userBlackList",maxLengthBlacklist:100,dbName:i.dbName||"accounts_typeahead",dbVersion:20150128,datastores:{MetadataStore:{name:"MetadataStore",keyPath:"key"},AccountTokensToIds:{name:"AccountTokensToIds",keyPath:"token"},IdsToAccounts:{name:"IdsToAccounts",keyPath:"id"}}},this.attr=b.default.merge(this.attr,e),this.after=t.noop,this.defaultAttrs=t.noop,g.default.mixin(this,[h.default,S.default,m.default]),this.initialize=function(t){var e=t||this.openIndexedDB.bind(this);this.isUsingIndexedDB=!0,this.initializeSocialContextBlacklist();var i=[this.attr.datastores.MetadataStore,this.attr.datastores.AccountTokensToIds,this.attr.datastores.IdsToAccounts],s=this;return e(this.attr.dbName,this.attr.dbVersion,i).then(this.checkIfLocalDataHasExpired.bind(this)).then(this.fetchDataIfExpired.bind(this)).then(this.repopulateDataStore.bind(this)).then(function(){return s.database}).catch(this.onInitializationError.bind(this))},this.openIndexedDB=function(t,e,i){var s=this;return c.default.open(t,e,i).then(function(t){return s.database=t})},this.close=function(){this.database&&this.database.close()},this.checkIfLocalDataHasExpired=function(){var t=this;return this.getData(this.attr.datastores.MetadataStore.name,this.attr.datastores.MetadataStore.keyPath).then(function(e){return t.isMetadataExpired(e)})},this.fetchDataIfExpired=function(t){return t&&this.attr.localQueriesEnabled&&this.prefetch(this.attr.prefetchPath,this.attr.prefetchType)},this.getData=function(t,e){return this.database.get(t,e)},this.repopulateDataStore=function(t){return t&&this.database.clear().then(this.populateDataStore.bind(this,t))},this.populateDataStore=function(t){return t&&this.database.put(this.processData(t))},this.onInitializationError=function(t){!this.isHttpError(t)&&this.close()},this.getPrefetchCount=function(){return this.attr.itemCount},this.initializeSocialContextBlacklist=function(){var t=(0,y.default)({withExpiry:!0});this.storage=new t("typeahead"),this.socialContextBlackList=this.storage.getItem(this.attr.storageBlackList)||{}},this.isMetadataExpired=function(t){if(!t)return!0;var e=t.version!==this.attr.version,i=this.hasTTLExpired(t.expirationTime),s=t.protocol!==this.getProtocol();return e||i||s},this.processData=function(t){var e=t[this.attr.prefetchType].filter(function(t){return!this.isAccountMalformedAndScribe(t,"typeahead_local")},this);t[this.attr.prefetchType]=e;var i={};return i[this.attr.datastores.AccountTokensToIds.name]=this.createItemsForAccountTokensToIdsObjectstore(t),i[this.attr.datastores.IdsToAccounts.name]=this.createItemsForIdsToAccountsObjectstore(t),i[this.attr.datastores.MetadataStore.name]=this.createItemsForMetadataObjectstore(t),i},this.createItemsForIdsToAccountsObjectstore=function(t){var e=t[this.attr.prefetchType].map(function(t){t.prefetched=!0;var e={};return e[this.attr.datastores.IdsToAccounts.keyPath]=t.id,e.account=t,e},this);return e},this.createItemsForAccountTokensToIdsObjectstore=function(t){var e=this.attr.datastores.AccountTokensToIds.keyPath,i={},s=[];t[this.attr.prefetchType].forEach(function(t){t.tokens.forEach(function(e){var s=e.token;""!==s&&(Array.isArray(i[s])?i[s].push(t.id):i[s]=[t.id])},this)},this);for(var n in i)if(i.hasOwnProperty(n)){var a={};a.ids=i[n],a[e]=n,s.push(a)}return s},this.createItemsForMetadataObjectstore=function(t){var e={};return e[this.attr.datastores.MetadataStore.keyPath]=this.attr.datastores.MetadataStore.keyPath,e.expirationTime=this.attr.ttlMilliseconds+(new Date).getTime(),e.version=this.attr.version,e.protocol=this.getProtocol(),[e]},this.addAccount=function(t){return this.getTokenIdsForAccount(t).then(this.addTokenIdsForAccount.bind(this,t)).then(this.addToIdsToAccounts.bind(this,t))},this.getTokenIdsForAccount=function(t){t=t.account||t;var e=t.tokens.map(function(t){var e=this.standardizeToken(t);return this.database.get(this.attr.datastores.AccountTokensToIds.name,e)},this);return Promise.all(e)},this.addTokenIdsForAccount=function(t,e){var i=o.default.compact(e);i=this.addNewTokenIds(t,i),i=this.addIdToTokenIds(t,i);var s={};return s[this.attr.datastores.AccountTokensToIds.name]=i,this.database.put(s)},this.standardizeToken=function(t){return"string"==typeof t?t:t.token},this.addNewTokenIds=function(t,e){var i=[];return t.tokens.forEach(function(t){var s=e.some(function(e){return e.token===t});s||i.push(this.createTokenId(t))},this),e.concat(i)},this.addIdToTokenIds=function(t,e){return e.forEach(function(e){return e.ids.push(t.id)}),e},this.createTokenId=function(t){var e={};return e[this.attr.datastores.AccountTokensToIds.keyPath]=t,e.ids=[],e},this.removeAccount=function(t){return this.database.destroy(this.attr.datastores.IdsToAccounts.name,t)},this.createAddAccountOptions=function(t){var e={},i={};return e[this.attr.datastores.IdsToAccounts.keyPath]=t.id,e.account=t,i[this.attr.datastores.IdsToAccounts.name]=[e],i},this.addToIdsToAccounts=function(t){var e=this.createAddAccountOptions(t);return this.database.put(e)},this.getLocalSuggestions=function(t,e){var i=d.default.tokenizeText(t.query.replace("@",""));return this.attr.localQueriesEnabled&&""!==t.query?void this.search(i).then(e,e):void e([])},this.search=function(t){return this.getIds(t).then(this.filterForRelevantIds.bind(this)).then(this.getAccounts.bind(this)).then(this.filterAndSortAccounts.bind(this))},this.filterForRelevantIds=function(t){if(0===t.length)return[];var e=this.createIdGroups(t),i=b.default.uniqueArray(e.candidateIds);return this.getCandidateIdsFoundInAllTermGroups(i,e.allIdGroupsByTerm)},this.getAccounts=function(t){var e=t.map(function(t){return this.database.get(this.attr.datastores.IdsToAccounts.name,t)},this);return Promise.all(e)},this.filterAndSortAccounts=function(t){var e=o.default.compact(t),i=e.map(function(t){return t.account});return t=i.filter(function(t){return!(this.attr.onlyDMable&&!t.is_dm_able)&&!!this.isEligibleForMediaTagSuggestion(t)},this),t.sort(this.sorter),t.slice(0,this.attr.limit)},this.sorter=function(t,e){function i(t,e){var i=t.score_boost?t.score_boost:0,s=e.score_boost?e.score_boost:0,n=t.rounded_score?t.rounded_score:0,a=e.rounded_score?e.rounded_score:0;return a+s-(n+i)}var s=t.prefetched,n=e.prefetched;return s&&!n?-1:n&&!s?1:i(t,e)},this.getIds=function(t){var e=t.map(function(t){return this.database.getByPrefix(this.attr.datastores.AccountTokensToIds.name,t)},this);return Promise.all(e)},this.getCandidateIdsFoundInAllTermGroups=function(t,e){return t.filter(function(t){return e.every(function(e){return e.indexOf(t)!==-1})})},this.createIdGroups=function(t){var e=[],i=[];return t.forEach(function(t){var s=[];t.forEach(function(t){e=e.concat(t.ids),s=s.concat(t.ids)}),i.push(s)}),{candidateIds:e,allIdGroupsByTerm:i}},this.processRemoteSuggestions=function(t,e,i){var s=i[this.attr.id]||[],n={};return s.forEach(function(t){return n[t.id_str]=!0},this),this.requiresRemoteSuggestions(t.queryData)&&e[this.attr.remoteType]&&e[this.attr.remoteType].forEach(function(t){var e=!n[t.id_str]&&(!this.attr.onlyDMable||t.is_dm_able)&&this.isEligibleForMediaTagSuggestion(t)&&!this.isAccountMalformedAndScribe(t,"typeahead_remote");e&&s.push(t)},this),i[this.attr.id]=s.slice(0,this.attr.limit),i[this.attr.id].forEach(function(t){this.removeBlacklistSocialContext(t)},this),i},this.requiresRemoteSuggestions=function(t){return!(!t||!t.query)&&(t.accountsWithoutAtSignLocalOnly?this.attr.remoteQueriesEnabled&&("@"===d.default.getFirstChar(t.query)||t.atSignRemoved):this.attr.remoteQueriesEnabled)},this.isHttpError=function(t){return t&&t.status&&t.status>=400&&t.status<600},this.hasTTLExpired=function(t){return t-this.now()<=0},this.now=function(){return(new Date).getTime()},this.removeBlacklistSocialContext=function(t){t.first_connecting_user_id in this.socialContextBlackList&&(t.first_connecting_user_name=void 0,t.first_connecting_user_id=void 0)},this.isEligibleForMediaTagSuggestion=function(t){return!this.attr.onlyShowUsersWithCanMediaTag||t.can_media_tag||t.id===this.attr.currentUserId},this.isAccountMalformedAndScribe=function(t,e){var i=d.default.isAccountMalformed(t);return i&&this.scribe({component:"indexeddb",element:e,action:"empty"}),i}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(357),o=s(a),r=i(889),c=s(r),l=i(411),d=s(l),u=i(240),h=s(u),f=i(142),m=s(f),p=i(121),g=s(p),v=i(126),b=s(v),w=i(887),S=s(w),C=i(338),y=s(C);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){var t=Array.prototype.slice.call(arguments);if(!(this instanceof n))return n.open.apply(null,t);var e=t[0];this.database=e,this.name=e.name,this.version=e.version,this.stores=a(e),e.onversionchange=function(){e.close(),self.location&&self.location.reload(!0)}}function a(t){for(var e=[],i=t.objectStoreNames,s=0;s<i.length;s++)e.push(i[s]);return e}Object.defineProperty(e,"__esModule",{value:!0});var o=i(890),r=s(o),c=self.indexedDB||self.mozIndexedDB||self.webkitIndexedDB||self.msIndexedDB,l=self.IDBKeyRange||self.webkitIDBKeyRange||self.msIDBKeyRange,d={readwrite:(self.IDBTransaction||self.webkitIDBTransaction||self.msIDBTransaction||{}).READ_WRITE||"readwrite",readonly:(self.IDBTransaction||self.webkitIDBTransaction||self.msIDBTransaction||{}).READ_ONLY||"readonly"};e.default=n,n.KeyRange=l,n.deleteDatabase=function(t){return new Promise(function(e){var i=c.deleteDatabase(t);i.onsuccess=i.onerror=e})},n.isSupported=function(){return!!c},n.open=function(t,e,i,s){var o={title:'IndexedDB "'+t+'" version '+e,enabled:self.DEBUG&&self.DEBUG.enabled};return(0,r.default)(o,new Promise(function(o,l){if(!n.isSupported())return l("not supported");var d=e?c.open(t,e):c.open(t),u=void 0;d.onupgradeneeded=function(e){var n=e.target.result,o={title:'IndexedDB "'+t+'" migration from version '+e.oldVersion+" to "+e.newVersion,enabled:self.DEBUG&&self.DEBUG.enabled};(0,r.default)(o,new Promise(function(t,e){s||a(n).forEach(function(t){return n.deleteObjectStore(t)});var o=a(n),r=(i||[]).map(function(t){return new Promise(function(e,i){var s=t.name,a=t.keyPath,r=t.indexes||[];if(o.indexOf(s)<0){var c=n.createObjectStore(s,{keyPath:a});return r.forEach(function(t){return c.createIndex(t.name,t.keyPath,t)}),c}})});return Promise.all(r).then(t,e)}))},d.onsuccess=function(t){(u||Promise.resolve()).then(function(){var e=new n(t.target.result);return o(e)}).catch(l)},d.onblocked=function(t){l("open blocked",t.target.error)},d.onerror=function(t){l("open error",t.target.error)}}))},n.prototype.add=function(t){return this.insert("add",t)},n.prototype.clear=function(){var t=arguments.length?Array.prototype.slice.call(arguments):this.stores,e=t.map(function(t){return this.transaction(t,d.readwrite,function(e){return e.objectStore(t).clear()})},this);return Promise.all(e)},n.prototype.close=function(){var t=this;return new Promise(function(e){return t.database.close(),e()})},n.prototype.destroy=function(t,e){return this.transaction(t,d.readwrite,function(i){return i.objectStore(t).delete(e)})},n.prototype.get=function(t,e){return this.transaction(t,d.readonly,function(i){return i.objectStore(t).get(e)}).then(function(t){return t.target.result})},n.prototype.getAll=function(){var t=Array.prototype.slice.call(arguments).filter(function(t){return null!=t}),e=t.length,i=t[0],s="string"==typeof t[1]?t[1]:null,n="string"!=typeof t[e-1]?t[e-1]:null,a=this.database;return new Promise(function(t,e){var o=a.transaction(i,d.readonly),r=s?o.objectStore(i).index(s):o.objectStore(i),c=[],l=r.openCursor(n);l.onerror=e,l.onsuccess=function(e){var i=e.target.result;i?(c.push(i.value),i.continue()):t(c)}})},n.prototype.getByPrefix=function(){var t=Array.prototype.slice.call(arguments).filter(function(t){return null!=t}),e=t[0],i=3===t.length?t[1]:null,s=t[t.length-1];return this.getAll(e,i,l.bound(s,s+"",!1,!1))},n.prototype.put=function(t){return this.insert("put",t)},n.prototype.insert=function(t,e){var i=Object.keys(e),s=i.map(function(i){return this.transaction(i,d.readwrite,function(s){var n=s.objectStore(i);e[i].forEach(function(e){return n[t](e)})})},this);return Promise.all(s)},n.prototype.transaction=function(t,e,i){var s=this;return new Promise(function(n,a){var o=s.database.transaction(t,e),r=i(o);r?(r.onsuccess=n,r.onerror=a):(o.oncomplete=n,o.onerror=a)})}},function(t,e){"use strict";function i(t,e){if(t=t||{enabled:!1,title:null},t.enabled){var i=s(t.title,"resolved","info"),n=s(t.title,"rejected","warn");return e.then(i,function(t){throw n(t)})}return e}function s(t,e,i){return function(i){("["+e+"] "+(t||"")).trim();return i}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(e,i){i=i||{},this.attr={url:"/i/direct_messages/typeahead",dbName:i.dbName||"dm_typeahead",dbVersion:i.dbVersion||20160920,metadata:{name:"metadata",keyPath:"key"},conversations:{name:"conversations",keyPath:"id",indexes:[{name:"title",keyPath:"title",unique:!1}]},users:{name:"users",keyPath:"id",indexes:[{name:"name_lowercase",keyPath:"name_lowercase",unique:!1},{name:"screen_name",keyPath:"screen_name",unique:!0}]}},this.attr=m.default.merge(this.attr,e),this.after=t.noop,this.defaultAttrs=t.noop,d.default.mixin(this,[g.default]),this.initialize=function(){this.isUsingIndexedDB=!0;var t=this;return this.openIndexedDB(this.attr.dbName,this.attr.dbVersion,[this.attr.metadata,this.attr.users,this.attr.conversations]).then(this.ensureLocalDataBelongsToCurrentUser.bind(this,b.default.user.id)).then(this.checkIfLocalDataHasExpired.bind(this)).then(this.fetchDataIfExpired.bind(this)).then(this.ensureDataAndSchemaVersionMatch.bind(this)).then(this.repopulateDataStore.bind(this)).then(function(){return t.database}).catch(this.onInitializationError.bind(this))},this.getLocalSuggestions=function(t,e){var i=this;return new Promise(function(s,n){var a=function(t){(e||s)(t||[])},o=h.default.tokenizeText(t.query),r=t.dmConversationsOptions||{},c=o.map(function(t){return this.search(t)},i);Promise.all(c).then(C).then(function(t){return r.excludeGroups?i.removeGroups(t):t}).then(function(t){return r.excludeOneToOnes?i.removeOneToOnes(t):t}).then(function(t){return r.sortBySortId?i.sortBySortId(t):t}).then(a,a)})},this.repopulateIfStale=function(t){var e=this;if(t=t||[],t.length){var i=c.default.KeyRange.bound(t[0],t[t.length-1],!1,!1);return this.database.getAll(this.attr.conversations.name,i).then(function(e){return e.length<t.length}).then(function(t){return t&&e.database.clear(e.attr.metadata.name)}).then(function(){return e.initialize()})}return Promise.reject()},this.removeGroups=function(t){return(t||[]).filter(function(t){return t&&!t.is_group})},this.removeOneToOnes=function(t){return(t||[]).filter(function(t){return t&&t.is_group})},this.sortBySortId=function(t){return(t||[]).sort(function(t,e){return S.default.compare(e.sort_id,t.sort_id)})},this.openIndexedDB=function(t,e,i){var s=this;return c.default.open(t,e,i).then(function(t){return s.database=t})},this.ensureLocalDataBelongsToCurrentUser=function(t){var e=this;return this.database.get(this.attr.metadata.name,"user").then(function(e){return e&&e.id===t}).then(function(t){return t||e.database.clear()})},this.checkIfLocalDataHasExpired=function(){var t=this.now();return this.database.get(this.attr.metadata.name,"ttl").then(function(e){return!e||!e.expires||e.expires<t})},this.fetchDataIfExpired=function(t){return t&&this.get({url:this.attr.url})},this.ensureDataAndSchemaVersionMatch=function(t){if(t){var e=(t.metadata||[]).reduce(function(t,e){return e.version||t},0);if(this.database.version===e)return t}},this.repopulateDataStore=function(t){return t&&this.database.clear().then(this.populateDataStore.bind(this,t))},this.populateDataStore=function(t){return t&&this.database.add(t)},this.onInitializationError=function(t){this.database&&this.database.close()},this.hydrateParticipantsForOneToOnes=function(t){var e=this,i=t.map(function(t){return t.is_group?t:e.hydrateParticipants(t)});return Promise.all(i)},this.hydrateParticipants=function(t){var e=t.participants.map(function(t){return this.getUserById(t)},this);return Promise.all(e).then(function(e){return t.participants=e,t})},this.getUserById=function(t){return this.database.get(this.attr.users.name,t)},this.search=function(t){var e=this.searchUsers(t),i=this.searchConversations(t),s=this.getConversation.bind(this);return Promise.all([e,i]).then(C).then(y).then(function(t){return Promise.all(t.map(function(t){return s(t)}))}).then(this.hydrateParticipantsForOneToOnes.bind(this))},this.searchUsers=function(t){var e=this.database.getByPrefix(this.attr.users.name,"name_lowercase",t),i=this.database.getByPrefix(this.attr.users.name,"screen_name",t),s=Promise.all([e,i]).then(C);return s.then(function(t){return t.map(function(t){return t.conversations})}).then(C)},this.searchConversations=function(t){var e=this.database.getByPrefix(this.attr.conversations.name,"title",t);return e.then(function(t){return t.map(function(t){return t.id})})},this.getConversation=function(t){return this.database.get(this.attr.conversations.name,t)},this.now=function(){return(new Date).getTime()}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(357),o=s(a),r=i(889),c=s(r),l=i(121),d=s(l),u=i(411),h=s(u),f=i(126),m=s(f),p=i(240),g=s(p),v=i(136),b=s(v),w=i(352),S=s(w),C=o.default.flatten,y=o.default.unique;e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){this.attr={id:null,items:[],limit:0,searchPathWithQuery:"/search?src=savs&q=",querySource:"saved_search_click"},this.attr=o.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(t){return!1},this.getLocalSuggestions=function(t,e){if(t&&t.query){var i=this.attr.items.filter(function(e){return 0===e.name.indexOf(t.query)}).slice(0,this.attr.limit);e(i)}else e(this.attr.items)},this.addSavedSearch=function(t){t&&t.query&&this.attr.items.push({id:t.id,id_str:t.id_str,name:t.name,query:t.query,saved_search_path:this.attr.searchPathWithQuery+encodeURIComponent(t.query),search_query_source:this.attr.querySource})},this.removeSavedSearch=function(t){if(t&&t.query)for(var e=this.attr.items,i=0;i<e.length;i++)if(e[i].query===t.query||e[i].name===t.query)return void e.splice(i,1)}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(126),o=s(a);e.default=n},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){this.attr={id:null,limit:4,storageList:"recentSearchesList",maxLength:100,ttl_ms:12096e5,searchPathWithQuery:"/search?src=typd&q=",querySource:"typed_query"},this.attr=o.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(){return!1},this.removeAllRecentSearches=function(){this.items=[],this.updateStorage()},this.getLocalSuggestions=function(t,e){
if(t&&""!==t.query){var i=this.items.filter(function(e){return 0===e.name.indexOf(t.query)}).slice(0,this.attr.limit);e(i)}else e(this.items.slice(0,this.attr.limit))},this.updateStorage=function(){this.storage.setItem(this.attr.storageList,this.items,this.attr.ttl_ms)},this.removeOneRecentSearch=function(t){this.removeRecentSearchFromList(t.query),this.updateStorage()},this.addRecentSearch=function(t){t&&t.query&&(t.query=t.query.trim(),this.updateRecentSearchList(t),this.updateStorage())},this.updateRecentSearchList=function(t){var e=this.items,i={normalized_name:t.query.toLowerCase(),name:t.query,recent_search_path:this.attr.searchPathWithQuery+encodeURIComponent(t.query),search_query_source:this.attr.querySource};this.removeRecentSearchFromList(t.query),e.unshift(i),e.length>this.attr.maxLength&&e.pop()},this.removeRecentSearchFromList=function(t){for(var e=this.items,i=-1,s=t.toLowerCase(),n=0;n<e.length;n++)if(e[n].normalized_name===s){i=n;break}i!==-1&&e.splice(i,1)},this.initialize=function(){var t=(0,c.default)({withExpiry:!0});this.storage=new t("typeahead"),this.items=this.storage.getItem(this.attr.storageList)||[]},this.initialize()}Object.defineProperty(e,"__esModule",{value:!0});var a=i(126),o=s(a),r=i(338),c=s(r);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({weights:{CACHED_PROFILE_VISIT:10,UNCACHED_PROFILE_VISIT:75,FOLLOW:100}}),this.cleanupUserData=function(t){this.shouldUseIndexedDB()?this.removeAccountAsync(parseInt(t,10)):this.removeAccount(t),this.addToUserBlacklist(t)},this.onFollowStateChange=function(t,e){if(e.userId){switch(e.newState){case"blocked":this.cleanupUserData(e.userId);break;case"not-following":this.cleanupUserData(e.userId);break;case"following":e.user&&(this.adjustScoreBoost(e.user,this.attr.weights.FOLLOW),this.shouldUseIndexedDB()?this.addAccountForFollowAsync(e.user):this.addAccount(e.user,"following"),this.removeUserFromBlacklist(e.userId))}this.shouldUseIndexedDB()||this.updateLocalStorage()}},this.onProfileVisit=function(t,e){this.shouldUseIndexedDB()?this.handleProfileVisitAsync(e):this.handleProfileVisitSync(e)},this.handleProfileVisitAsync=function(t){this.datasources.accounts.getAccounts([t.id]).then(this.processUserAsync.bind(this,t)).then(this.datasources.accounts.addAccount.bind(this.datasources.accounts))},this.processUserAsync=function(t,e){e=c.default.compact(e);var i=0!==e.length,s=i?this.attr.weights.CACHED_PROFILE_VISIT:this.attr.weights.UNCACHED_PROFILE_VISIT,n=i?e[0].account:t;return this.adjustScoreBoost(n,s),i||(n.tokens=["@"+n.screen_name,n.screen_name].concat(o.default.tokenizeText(n.name))),n},this.handleProfileVisitSync=function(t){var e=this.datasources.accounts.userHash[t.id];this.processUserSync(t,e)},this.processUserSync=function(t,e){e?this.adjustScoreBoost(e,this.attr.weights.CACHED_PROFILE_VISIT):(this.adjustScoreBoost(t,this.attr.weights.UNCACHED_PROFILE_VISIT),this.addAccount(t,"visit")),this.updateLocalStorage()},this.updateLocalStorage=function(){this.datasources.accounts.storage.setItem("userHash",this.datasources.accounts.userHash,this.datasources.accounts.attr.ttl),this.datasources.accounts.storage.setItem("adjacencyList",this.datasources.accounts.adjacencyList,this.datasources.accounts.attr.ttl),this.datasources.accounts.storage.setItem("version",this.datasources.accounts.attr.version,this.datasources.accounts.attr.ttl)},this.removeAccount=function(t){if(this.datasources.accounts.userHash[t]){var e=this.datasources.accounts.userHash[t].tokens;e.forEach(function(e){var i=this.datasources.accounts.adjacencyList[e.charAt(0)];if(i){var s=i.indexOf(t);s!==-1&&i.splice(s,1)}},this),delete this.datasources.accounts.userHash[t]}},this.removeAccountAsync=function(t){this.datasources.accounts.removeAccount(t)},this.adjustScoreBoost=function(t,e){t.score_boost?t.score_boost+=e:t.score_boost=e},this.addAccount=function(t,e){this.datasources.accounts.userHash[t.id]=t,t.tokens=["@"+t.screen_name,t.screen_name].concat(o.default.tokenizeText(t.name)),t.social_proof="following"===e?1:0,t.tokens.forEach(function(e){var i=e.charAt(0);if(e.trim().length)return this.datasources.accounts.adjacencyList[i]?void(this.datasources.accounts.adjacencyList[i].indexOf(t.id)===-1&&this.datasources.accounts.adjacencyList[i].push(t.id)):void(this.datasources.accounts.adjacencyList[i]=[t.id])},this)},this.addAccountForFollowAsync=function(t){t.tokens=["@"+t.screen_name,t.screen_name].concat(o.default.tokenizeText(t.name)),t.social_proof=1,this.datasources.accounts.addAccount(t)},this.removeOldAccountsInBlackList=function(){var t=void 0,e=void 0,i=0,s=this.datasources.accounts.attr.maxLengthBlacklist||100,n=this.datasources.accounts.socialContextBlackList,a=(new Date).getTime(),o=this.datasources.accounts.attr.ttl_ms;for(e in n){var r=n[e]+o;r<a?delete n[e]:(t=t||e,t=n[t]>n[e]?e:t,i+=1)}s<i&&delete n[t]},this.updateBlacklistLocalStorage=function(t){this.datasources.accounts.storage.setItem("userBlackList",t,this.attr.ttl)},this.addToUserBlacklist=function(t){var e=this.datasources.accounts.socialContextBlackList;e[t]=(new Date).getTime(),this.removeOldAccountsInBlackList(),this.updateBlacklistLocalStorage(e)},this.removeUserFromBlacklist=function(t){var e=this.datasources.accounts.socialContextBlackList;this.removeOldAccountsInBlackList(),e[t]&&(delete e[t],this.updateBlacklistLocalStorage(e))},this.checkItemTypeForRecentSearch=function(t){return"saved_search"===t||"topics"===t||"recent_search"===t},this.addSavedSearch=function(t,e){this.datasources.savedSearches.addSavedSearch(e)},this.removeSavedSearch=function(t,e){this.datasources.savedSearches.removeSavedSearch(e)},this.addRecentSearch=function(t,e){"search"===e.source?this.datasources.recentSearches.addRecentSearch({query:e.query}):this.checkItemTypeForRecentSearch(e.source)&&e.isSearchInput&&this.datasources.recentSearches.addRecentSearch({query:e.query})},this.removeRecentSearch=function(e,i){i.deleteAll?this.datasources.recentSearches.removeAllRecentSearches():this.datasources.recentSearches.removeOneRecentSearch(i),t(e.target).trigger("dataTypeaheadRecentSearchDeleted")},this.updateSelectedUsers=function(t,e){this.datasources.selectedUsers.updateSelectedUsers(e)},this.setTrendLocations=function(t,e){this.datasources.trendLocations.setTrendLocations(e)},this.updatePrefill=function(t,e){this.datasources.prefillUsers.updateRecentlySelectedUsers(e)},this.checkDMConversationFreshness=function(t,e){this.datasources.dmConversations.repopulateIfStale(e&&e.groups)},this.setupEventListeners=function(t){switch(t){case"accounts":this.on("dataFollowStateChange",this.onFollowStateChange),this.on("profileVisit",this.onProfileVisit);break;case"savedSearches":this.on(document,"dataAddedSavedSearch",this.addSavedSearch),this.on(document,"dataRemovedSavedSearch",this.removeSavedSearch);break;case"recentSearches":this.on("uiSearchQuery uiTypeaheadItemSelected",this.addRecentSearch),this.on("uiTypeaheadDeleteRecentSearch",this.removeRecentSearch);break;case"trendLocations":this.on(document,"dataLoadedTrendLocations",this.setTrendLocations);break;case"selectedUsers":this.on("uiUpdatedSelectedUsers",this.updateSelectedUsers);break;case"prefillUsers":this.on("uiUpdateRecentTags",this.updatePrefill);break;case"dmConversations":this.on("dataDMConversationListResult",this.checkDMConversationFreshness)}}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(411),o=s(a),r=i(357),c=s(r);e.default=n}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(e){this.attr={id:null,ttl_ms:216e5,limit:4,version:4,storageAdjacencyList:"topicsAdjacencyList",storageHash:"topicsHash",storageVersion:"topicsVersion",prefetchLimit:500,localQueriesEnabled:!1,remoteQueriesEnabled:!1,remotePath:"/i/search/typeahead.json",remoteType:"topics",prefetchPath:"/i/search/typeahead.json",prefetchType:"topics",basePath:"/search?",modePathMap:{images:"f=images",videos:"f=videos",news:"f=news"},querySourcePathTypeahead:"src=tyah"},this.attr=h.default.merge(this.attr,e),this.after=t.noop,this.defaultAttrs=t.noop,d.default.mixin(this,[c.default,m.default]),this.getLocalSuggestions=function(t,e){e([])},this.getTopicObjectsFromStrings=function(t){var e=[];return t.forEach(function(t){var i=this.topicsHash[t];i&&e.push(i)},this),e},this.requiresRemoteSuggestions=function(t){var e=o.default.getFirstChar(t.query),i=t.topicsMustStartWithHashtag&&p.indexOf(e)===-1;return!(!t||!t.query||i)&&this.attr.remoteQueriesEnabled},this.processRemoteSuggestions=function(t,e,i){var s=i[this.attr.id]||[],n={};return s.forEach(function(t){var e=t.topic||t.hashtag;n[e.toLowerCase()]=!0},this),e[this.attr.remoteType]&&e[this.attr.remoteType].forEach(function(t){var e=t.topic||t.hashtag;t.searchPath=this.constructSearchPath(e,t.filter),n[e.toLowerCase()]||s.push(t)},this),i[this.attr.id]=s.slice(0,this.attr.limit),i},this.constructSearchPath=function(t,e){var i=["q="+encodeURIComponent(t)],s=e?this.attr.modePathMap[e]:"";return s&&i.push(s),i.push(this.attr.querySourcePathTypeahead),this.attr.basePath+i.join("&")},this.initialize=function(){},this.initialize()}Object.defineProperty(e,"__esModule",{value:!0});var a=i(411),o=s(a),r=i(240),c=s(r),l=i(121),d=s(l),u=i(126),h=s(u),f=i(887),m=s(f),p=["$","#",""];e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){var e={woeid:-1,placeTypeCode:-1,name:"No results were found. Try selecting from a list."};this.attr={id:null,items:[],limit:10},this.attr=o.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(t){return!1},this.getLocalSuggestions=function(t,i){var s=this.attr.items,n=function(t){return t.replace(/\s+/g,"").toLowerCase()};if(t&&t.query){var a=n(t.query);s=this.attr.items.filter(function(t){return 0===n(t.name).indexOf(a)})}i(s.length?s.slice(0,this.attr.limit):[e])},this.setTrendLocations=function(t){this.attr.items=t.trendLocations}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(126),o=s(a),r=i(123);s(r);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(e){this.attr={id:null,ttl_ms:216e5,limit:3,version:1,storageList:"conciergeList",storageVersion:"conciergeVersion",prefetchLimit:3,localQueriesEnabled:!1,remoteQueriesEnabled:!1,prefetchPath:"/i/search/typeahead.json",prefetchType:"oneclick",remotePath:"/i/search/typeahead.json",remoteType:"oneclick",basePath:"/search?",scribeMap:{images:"photos",videos:"video",news:"news",users:"people"},nameMap:{"images near":"Photos near you","images follow":"Photos from people you follow","videos near":"Videos near you","videos follow":"Videos from people you follow","news near":"News near you","news follow":"News shared by people you follow","users near":"People near you"},modePathMap:{images:"mode=photos",videos:"mode=videos",news:"mode=news",users:"mode=users"},locationFilterPath:"near=me",followFilterPath:"f=follows",querySourcePath:"src=taoc",querySource:"typeahead_oneclick"},this.attr=c.default.merge(this.attr,e),this.after=t.noop,this.defaultAttrs=t.noop,o.default.mixin(this,[f.default,p.default]),this.getStorageKeys=function(){return[this.attr.storageVersion,this.attr.storageList]},this.getPrefetchCount=function(){return this.attr.prefetchLimit},this.isMetadataExpired=function(){var t=this.storage.getItem(this.attr.storageVersion);return t!==this.attr.version},this.getDataFromLocalStorage=function(){this.conciergeList=this.storage.getItem(this.attr.storageList)||this.conciergeList},this.processResults=function(t){return t&&t[this.attr.prefetchType]?(t[this.attr.prefetchType].forEach(function(t){var e=this.constructConciergeSuggestion(t);e&&this.conciergeList.push(e)},this),this.storage.setItem(this.attr.storageList,this.conciergeList,this.attr.ttl_ms),void this.storage.setItem(this.attr.storageVersion,this.attr.version,this.attr.ttl_ms)):void this.useStaleData()},this.getLocalSuggestions=function(t,e){e(t&&""!==t.query?[]:this.conciergeList.slice(0,this.attr.limit))},this.requiresRemoteSuggestions=function(t){return!(!t||""!==t.query)&&this.attr.remoteQueriesEnabled},this.processRemoteSuggestions=function(t,e,i){var s=i[this.attr.id]||[];if(e[this.attr.remoteType])for(var n=e[this.attr.remoteType],a=0;a<n.length;a++){var o=this.constructConciergeSuggestion(n[a]);if(o){var r=s.push(o);if(r>=this.attr.limit)break}}return i[this.attr.id]=s.slice(0,this.attr.limit),i},this.constructConciergeSuggestion=function(t){var e=t.filter,i=!!t.location,s=!!t.follow,n=t.topic,a=this.constructName(e,i,s,n);return a?{topic:n,searchPath:this.constructSearchPath(e,i,s,n),name:a,querySource:this.attr.querySource,searchDetails:this.constructScribeDetails(e,i,s,n)}:null},this.constructName=function(t,e,i,s){var n=e?" near":"",a=i?" follow":"",o=s||this.attr.nameMap[t+n+a];return o},this.constructSearchPath=function(t,e,i,s){var n=[this.attr.querySourcePath],a=t?this.attr.modePathMap[t]:"";return a&&n.push(a),e&&n.push(this.attr.locationFilterPath),i&&n.push(this.attr.followFilterPath),s&&n.push("q="+encodeURIComponent(s)),this.attr.basePath+n.join("&")},this.constructScribeDetails=function(t,e,i,s){var n={result_type:this.attr.scribeMap[t]||"everything",social_filter:i?"following":"all"};return s&&(n.query=s),e&&(n.near="me"),n},this.initialize=function(){var t=(0,u.default)({withExpiry:!0});this.storage=new t("typeahead"),this.conciergeList=[],this.attr.localQueriesEnabled&&this.loadData(this.attr.prefetchPath,this.attr.prefetchType)},this.initialize()}Object.defineProperty(e,"__esModule",{value:!0});var a=i(121),o=s(a),r=i(126),c=s(r),l=i(123),d=(s(l),i(338)),u=s(d),h=i(240),f=s(h),m=i(887),p=s(m);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){this.attr={id:null,maxLength:100,querySource:"typed_query",items:[]},this.attr=o.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(){return!1},this.removeAllSelectedUsers=function(){this.attr.items=[]},this.getLocalSuggestions=function(t,e){e(this.attr.items.slice(0,this.attr.maxLength))},this.updateSelectedUsers=function(t){this.attr.items=t.items}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(126),o=s(a);e.default=n},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){this.attr={id:null,maxLength:10,querySource:"typed_query",customItems:[],ttl_ms:12096e5,storageList:"recentlySelectedList"},this.attr=o.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(){return!1},this.updateStorage=function(){this.storage.setItem(this.attr.storageList,this.storageItems,this.attr.ttl_ms)},this.updateRecentlySelectedUsers=function(t){var e=this.storageItems;t.items.forEach(function(t){this.removeRecentUserFromList(t),e.unshift(t),e.length>this.attr.maxLength&&(this.storageItems=e.slice(0,this.attr.maxLength))},this),this.updateStorage()},this.removeRecentUserFromList=function(t){var e=this.storageItems,i=this.getSuggestionIndexById(t,e);i!==-1&&e.splice(i,1)},this.getSuggestionIndexById=function(t,e){for(var i=0;i<e.length;i++)if(e[i].id===t.id)return i;return-1},this.getLocalSuggestions=function(t,e){for(var i=this.storageItems.slice(0,this.attr.maxLength),s=0;i.length<this.attr.maxLength&&s<this.attr.customItems.length;s++){var n=this.attr.customItems[s];this.getSuggestionIndexById(i,n)===-1&&i.push(n)}e(i)},this.updateCustomItems=function(t){this.attr.customItems=t.items},this.initialize=function(){var t=(0,c.default)({withExpiry:!0});this.storage=new t("typeahead"),this.storageItems=this.storage.getItem(this.attr.storageList)||[]},this.initialize()}Object.defineProperty(e,"__esModule",{value:!0});var a=i(126),o=s(a),r=i(338),c=s(r);e.default=n},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){var t=Array.prototype.slice.call(arguments);if(!(this instanceof n)){var e=t[0],i=e.dbName,s=e.dbVersion,o=r.default.open(i,s),c=o.then(function(t){return new n(t)});return a(c,e)}this.database=t[0]}function a(e,i){return i=i||{},e.then(i.onSuccess||t.noop,i.onFailure||t.noop)}Object.defineProperty(e,"__esModule",{value:!0});var o=i(889),r=s(o);e.default=n,n.prototype.closeConnection=function(){this.database.close()},n.prototype.getItemByKey=function(t){var e=this.database.get(t.objectStoreName,t.key);return a(e,t)},n.prototype.getItemsByPrefix=function(t){var e=this.database.getByPrefix(t.objectStoreName,t.index,t.prefix);return a(e,t)},n.prototype.addItems=function(t){var e={};return e[t.objectStoreName]=t.items,a(this.database.add(e),t)},n.prototype.upsertItems=function(t){var e={};return e[t.objectStoreName]=t.items,a(this.database.put(e),t)},n.prototype.createObjectStore=function(t){var e=this,i=this.database.name,s=this.database.version;this.database.close();var n={name:t.objectStoreName,keyPath:t.keyPathName,indexes:t.indexes||[]},o=r.default.open(i,s+1,[n],!0);return a(o.then(function(t){return e.database=t}),t)},n.prototype.deleteItem=function(t){var e=this.database.destroy(t.objectStoreName,t.key);return a(e,t)},n.prototype.clearObjectStore=function(t){var e=this.database.clear(t.objectStoreName);return a(e,t)},n.prototype.clearAllObjectStores=function(t){var e=this.database.clear();return a(e,t)},n.prototype.checkIfObjectStoreExists=function(t){return this.database.stores.indexOf(t)>-1}}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({tweetboxSelector:".tweet-box-shadow"}),this.storeCompletionData=function(t,e){if(e.scribeContext&&"tweet_box"===e.scribeContext.component){var i="account"===e.source?"@"+e.display:e.display;this.completions.push(i)}},this.handleTweetCompletion=function(e,i){if("tweet_box"===i.scribeContext.component){var s=t(e.target).find(this.attr.tweetboxSelector).val(),n=d.default.extractEntitiesWithIndices(s).filter(function(t){return t.screenName||t.cashtag||t.hashtag});n=n.map(function(t){return s.slice(t.indices[0],t.indices[1])});var a=n.filter(function(t){return this.completions.indexOf(t)>=0},this);if(this.completions=[],0!==n.length){var o={query:i.query,message:n.length,event_info:a.length,format_version:2};this.scribe("entities",i,o)}}},this.scribeSelection=function(t,e){if(!e.fromSelectionEvent||"uiTypeaheadItemComplete"!==t.type){var i={element:"typeahead_"+e.source,action:"select"},s=void 0;"uiTypeaheadItemComplete"===t.type?s="autocomplete":e.isClick?s="click":"uiTypeaheadItemSelected"===t.type&&(s="key_select");var n={position:e.index,description:s};"account"===e.source?(n.item_type=h.default.user,n.id=e.query):"topics"===e.source?(n.item_type=h.default.search,n.item_query=e.query):"saved_search"===e.source?(n.item_type=h.default.savedSearch,n.item_query=e.query):"recent_search"===e.source?(n.item_type=h.default.search,n.item_query=e.query):"trend_location"===e.source?(n.item_type=h.default.trend,n.item_query=e.item.woeid,e.item.woeid===-1&&(i.action="no_results")):"concierge"===e.source&&(n.item_type=h.default.search,n.item_query=e.query||e.item.name);var a={message:e.input,items:[n],format_version:2,event_info:e.item?e.item.origin:null,search_details:e.item?e.item.searchDetails:null};this.scribe(i,e,a)}},this.scribeMalformedAccount=function(){this.scribe({element:"typeahead_account",action:"empty"})},this.after("initialize",function(){this.completions=[],this.on("uiTypeaheadItemComplete uiTypeaheadItemSelected",this.storeCompletionData),this.on("uiTypeaheadItemComplete uiTypeaheadItemSelected",this.scribeSelection),this.on("uiTweetboxTweetSuccess uiTweetboxReplySuccess",this.handleTweetCompletion),this.on("uiTypeaheadAccountMalformed",this.scribeMalformedAccount)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r),l=i(230),d=s(l),u=i(144),h=s(u);e.default=(0,o.default)(n,c.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(344),a=s(n),o=i(111),r=s(o);e.default=(0,r.default)(function(){this.triggerCommand=function(){var t=this.attr.href,e=a.default.queryMap(t);switch(e.action){case"compose":this.trigger("uiOpenTweetDialog",this._trimParams(["action","mode"],e)),this._removeQueryStringFromUrl();break;case"overlay":e.screen_name&&e.tweet_id&&(this.trigger("uiOverlayNavigate",{href:e.screen_name+"/status/"+e.tweet_id}),this._removeQueryStringFromUrl())}},this._removeQueryStringFromUrl=function(){if(window.history&&history.replaceState){var t=window.location.href.replace(/\?[^#]*/,"");history.replaceState({title:document.title},document.title,t)}},this._trimParams=function(t,e){var i={};return Object.getOwnPropertyNames(e).forEach(function(s){t.indexOf(s)>=0&&(i[s]=e[s])}),i},this.after("initialize",function(){"string"==typeof this.attr.href&&this.on("uiSwiftLoaded",this.triggerCommand)})})},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({backgroundSelector:"#uz_bg",containerSelector:"#uz_popup_container",backgroundParentSelector:"body",blockUserSurveyClass:"uz_block_user_survey"}),this.fadeoutSurvey=function(e){t(this.attr.containerSelector).fadeOut(500)},this.openSurvey=function(){window._uzactions=window._uzactions||[];var e=this.overrideCookie?this.overrideCookie:"twittersurvey"+this.surveyId;window._uzactions.push(["_setCookie",e]),window._uzactions.push(["_setCustomVar",["userID",c.default.user.id]]),window._uzactions.push(["_setCustomVar",["guestId",c.default.user.guestId]]),window._uzactions.push(["_start"]);var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t.extend(document.createElement("script"),{type:"text/javascript",async:!0,id:"injected_uz_survey_script",charset:"utf-8",src:"https://cdn5.userzoom.com/files/js/"+this.surveyId+".js?t=uz_til&cuid=2BA733EB49F6DF1188490022196C4538"}),i)},this.onBlockAction=function(){this.$node.hasClass(this.attr.blockUserSurveyClass)&&this.openSurvey()},this.after("initialize",function(){this.surveyId=this.$node.attr("data-survey-id"),this.overrideCookie=this.$node.attr("data-override-cookie"),this.$node.attr("data-show")&&this.openSurvey(),this.on(document,"uiOpenSurvey",this.openSurvey),this.on(this.attr.backgroundParentSelector,"click",{backgroundSelector:this.fadeoutSurvey}),this.on(document,"uiBlockAction",this.onBlockAction)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(136),c=s(r);e.default=(0,o.default)(n)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(111),a=s(n),o=i(163),r=s(o),c=i(344),l=s(c);e.default=(0,a.default)(r.default,function(){this.defaultAttrs({whyThisAdIframeSelector:"#why-this-ad-frame",spinnerSelector:".why-this-ad-spinner"}),this.setUpDialog=function(t,e){this.$spinner.show(),this.$iframe.hide(),this.eventData=e,this.setWhyThisAdFrame(),this.open()},this.setWhyThisAdFrame=function(){var t="/about-ads?"+l.default.encode({aid:this.eventData.impressionId});this.$iframe.attr("src",t)},this.around("close",function(t){this.$iframe.attr("src",""),t()}),this.after("initialize",function(){var t=this;this.$iframe=this.select("whyThisAdIframeSelector"),this.$spinner=this.select("spinnerSelector"),this.on(document,"uiNeedsWhyThisAdDialog",this.setUpDialog),this.$iframe.on("load",function(){t.$iframe.show(),t.$spinner.hide()})})})},,function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(e){if(!e.no_global_infinite_scroll){var i=e.infiniteScrollNode||window;o.default.attachTo(i,{contentSelector:e.contentSelector,immediatelyRequestMoreItems:t(".stream-container").hasClass("js-request-more-stream-items")})}var s=e.inOverlay?".PermalinkOverlay":document;d.default.attachTo(s,e),c.default.attachTo(document)}Object.defineProperty(e,"__esModule",{value:!0});var a=i(451),o=s(a),r=i(907),c=s(r),l=i(908),d=s(l);e.default=n}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){var e=void 0,i="webkitfullscreenchange",s="onwebkitfullscreenchange",n=s in document;this.getFullscreenElement=function(){return document.webkitFullscreenElement},this.getYOffset=function(){return c.default.getGlobalYOffset()},this.supportsFullscreen=function(){return n},this.isEnteringFullscreen=function(){return Boolean(this.getFullscreenElement())},this.saveFullscreenElement=function(){e=this.getFullscreenElement()},this.scrollToFullscreenElement=function(){if(e){var i=t(e).parents('[data-component-context="tweet"]');i&&"function"==typeof i.offset&&i.offset()&&window.scrollTo(window.scrollX,i.offset().top-c.default.getGlobalYOffset()),e=void 0}},this.changeFullScreen=function(t,e){this.isEnteringFullscreen()?this.saveFullscreenElement():this.scrollToFullscreenElement()},this.after("initialize",function(){this.supportsFullscreen()&&this.on(document,i,this.changeFullScreen)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(178),c=s(r),l=(0,o.default)(n);e.default=l}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({defaultAjaxData:{include_entities:1,include_available_features:1},noShowError:!0,startPollingInterval:7500,maxPollingInterval:6e4}),this.requestItems=function(t,e){t&&t.stopPropagation();var i=function(i){this.hasTornDown||(e.isNewItemRequest?this.hasActiveNewItemsRequest=!1:this.hasActiveOldItemsRequest=!1,this.trigger(t.target,"dataGotMoreTimelineItems",i))},s=this.requestInterval,n=function(i){this.hasTornDown||(i&&i.xhr&&"timeout"===i.xhr.statusText&&s===this.requestInterval&&(this.requestInterval=Math.min(2*this.requestInterval,this.attr.maxPollingInterval)),e.isNewItemRequest?this.hasActiveNewItemsRequest=!1:this.hasActiveOldItemsRequest=!1,this.trigger(t.target,"dataGotMoreTimelineItemsError",i))},a=e&&e.headers||{};e&&e.fromPolling&&(a["X-Twitter-Polling"]=!0);var o={contextual_tweet_id:e.contextual_tweet_id,cursor:e.cursor,cursor_index:e.cursor_index,cursor_offset:e.cursor_offset,min_position:e.min_position,max_position:e.max_position,is_forward:e.is_forward,latent_count:e.latent_count,composed_count:e.composed_count,composed_ids:e.composed_ids,include_new_items_bar:e.include_new_items_bar,interval:e.interval,count:e.count,timeline_empty:e.timeline_empty,reset_error_state:e.reset_error_state};e.query&&(o.q=e.query),e.curated_timeline_since_id&&(o.curated_timeline_since_id=e.curated_timeline_since_id),e.scroll_cursor&&(o.scroll_cursor=e.scroll_cursor),e.refresh_cursor&&(o.refresh_cursor=e.refresh_cursor),e.excluded&&(o.excluded=e.excluded);var r=e.isNewItemRequest&&this.hasActiveNewItemsRequest||!e.isNewItemRequest&&this.hasActiveOldItemsRequest;r||(this.hasActiveNewItemsRequest=!(!this.hasActiveNewItemsRequest&&!e.isNewItemRequest),this.hasActiveOldItemsRequest=!(!this.hasActiveOldItemsRequest&&e.isNewItemRequest),this.get({url:this.attr.endpoint,headers:a,timeout:this.requestInterval,data:c.default.merge(this.attr.defaultAjaxData,o),eventData:e,success:i.bind(this),error:n.bind(this)}))},this.before("teardown",function(){this.hasTornDown=!0}),this.after("initialize",function(){this.hasActiveNewItemsRequest=!1,this.hasActiveOldItemsRequest=!1,this.requestInterval=this.attr.startPollingInterval,this.on("uiWantsMoreTimelineItems",this.requestItems)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(126),c=s(r),l=i(240),d=s(l);e.default=(0,o.default)(n,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){(0,o.default)(e),I.default.attachTo(document,e),k.default.attachTo(document),c.default.attachTo(document,e),x.default.attachTo(document,e),S.default.attachTo(document,e),D.default.attachTo(document,e),L.default.attachTo(document,e),e.excludeExpandingTweets||b.default.attachTo(t,e);var i=".js-new-items-bar-container";y.default.attachTo(i,e),e.excludeUserActions||O.default.attachTo(t,N.default.merge(e,{genericItemSelector:".js-stream-item"})),d.default.attachTo(document),h.default.attachTo(document),m.default.attachTo(document),g.default.attachTo(document)}Object.defineProperty(e,"__esModule",{value:!0});var a=i(910),o=s(a),r=i(914),c=s(r),l=i(915),d=s(l),u=i(916),h=s(u),f=i(917),m=s(f),p=i(918),g=s(p),v=i(919),b=s(v),w=i(925),S=s(w),C=i(926),y=s(C),T=i(469),D=s(T),M=i(928),I=s(M),P=i(943),k=s(P),A=i(944),x=s(A),E=i(945),O=s(E),R=i(126),N=s(R),F=i(947),L=s(F);e.default=n},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){o.default.attachTo(document,t),d.default.attachTo(document,t),c.default.attachTo(u,t,{initialFocusSelector:".modal-close"})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(911),o=s(a),r=i(912),c=s(r),l=i(913),d=s(l),u="#activity-popup-dialog";e.default=n},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({noShowError:!0}),this.getUsers=function(t,e){var i={retweeted_popup:"/i/activity/retweeted_popup",favorited_popup:"/i/activity/favorited_popup",media_tagged_popup:"/i/activity/media_tagged_popup",reply_users_popup:"/i/tweet/reply_users_popup",like_moment_popup:"/i/moments/user_likes_dialog",people_in_conversation_popup:"/i/tweet/people_in_conversation_popup"}[e.component];this.get({url:i,data:{id:e.contentId},eventData:e,success:"dataActivityPopupSuccess",error:"dataActivityPopupError"})},this.after("initialize",function(){this.on("uiFetchActivityPopup",this.getUsers)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r);e.default=(0,o.default)(n,c.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({itemType:"user",titleSelector:".modal-title",contentSelector:".activity-popup-dialog-content",contentShowingSelector:".tweet-showing",userContentSelector:".activity-popup-dialog-users",openDropdownSelector:".user-dropdown.open .dropdown-menu",usersSelector:".activity-popup-users",replyUsersHeadingSelector:".reply-users-heading",activityUserCheckboxSelector:".activity-popup-dialog-users .js-user-checkbox",activityOtherReplyUsersCheckboxSelector:".activity-popup-dialog-other-reply-users .js-other-reply-users-checkbox",accountSelector:".account",saveSelector:".save-action",maxTop:100,modalClasses:{retweeted_popup:"retweeted-popup",favorited_popup:"favorited-popup",media_tagged_popup:"media-tagged-popup",reply_users_popup:"reply-users-popup",like_moment_popup:"like-moment-popup",people_in_conversation_popup:"people-in-conversation-popup"}}),this.setTitle=function(t){this.select("titleSelector").html(t)},this.setContent=function(t,e){this.$node.addClass("has-content");var i=this.select("contentSelector");i.html(t),i.toggleClass(this.attr.contentShowingSelector,!e)},this.setUsers=function(t){this.$node.addClass("has-content"),this.select("userContentSelector").html(t)},this.clearContent=function(){this.$node.removeClass("has-content"),this.select("contentSelector").empty(),this.select("userContentSelector").empty(),this.setTitle("")},this.requestPopup=function(t,e){this.openerNode=t.target,this.excludeReplyUserIds=e.excludeReplyUserIds;var i=e.htmlTitle,s=e.contentId,n=e.component;if(this.attr.eventData=l.default.merge(this.attr.eventData,{scribeContext:{component:n}},!0),this.defaultEventData=this.attr.eventData,this.attr.modalClasses[n]){this.clearContent();var a=i||"Loading...";this.setTitle(a),Object.keys(this.attr.modalClasses).forEach(function(t){var e=this.attr.modalClasses[t];
this.$node.toggleClass(e,t===n)},this),this.open(),this.trigger("uiFetchActivityPopup",{component:n,contentId:s})}},this.updatePopup=function(t,e){this.setTitle(e.htmlTitle),this.setUsers(e.htmlUsers),this.setContent(e.htmlContent),this.trigger("uiActivityPopupRendered"),this.setReplyUsersCheckboxState(this.excludeReplyUserIds);var i=this.select("usersSelector");i.height()>=parseInt(i.css("max-height"),10)&&i.addClass("dropdown-threshold")},this.showError=function(e,i){this.clearContent();var s=t("<p>").addClass("error").html(i.message);this.setUsers(s,!0),this.setTitle("Sorry! There was an error.")},this.notifyOpenerDialogClosed=function(){this.trigger(this.openerNode,"uiActivityPopupClosed")},this.setReplyUsersCheckboxState=function(e){var i=this;e&&(this.select("activityUserCheckboxSelector").each(function(s,n){var a=t(n),o=a.closest(i.attr.accountSelector),r=o.attr("data-user-id");a.prop("checked",e.indexOf(r)<0)}),this.updateExcludeAllCheckboxState())},this.updateExcludeAllCheckboxState=function(){var t=this.select("activityUserCheckboxSelector"),e=t.length===t.filter(":checked").length;this.select("activityOtherReplyUsersCheckboxSelector").prop("checked",e)},this.saveExcludedReplyUsers=function(){var e=this.select("activityUserCheckboxSelector").filter(":not(:checked)").toArray().map(function(e){return t(e).closest(this.attr.accountSelector).attr("data-user-id")},this);this.trigger(this.openerNode,"uiActivityPopupSave",{excludeReplyUserIds:e})},this.toggleAllReplyUsers=function(e){this.select("activityUserCheckboxSelector").prop("checked",t(e.target).prop("checked"))},this.after("initialize",function(){this.on(document,"uiRequestActivityPopup",this.requestPopup),this.on(document,"dataActivityPopupSuccess",this.updatePopup),this.on(document,"dataActivityPopupError",this.showError),this.on(document,"uiShowProfilePopup uiOpenTweetDialogWithOptions uiNeedsDMDialog uiOpenSignupDialog",this.close),this.on("change",{activityUserCheckboxSelector:this.updateExcludeAllCheckboxState,activityOtherReplyUsersCheckboxSelector:this.toggleAllReplyUsers}),this.on("uiDialogClosed",this.saveExcludedReplyUsers),this.on("uiDialogClosed",this.notifyOpenerDialogClosed)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(123),o=(s(a),i(111)),r=s(o),c=i(126),l=s(c),d=i(163),u=s(d),h=i(535),f=s(h),m=i(538),p=s(m);e.default=(0,r.default)(n,u.default,p.default,f.default)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeActivityPopupOpen=function(t,e){var i=e.sourceEventData;this.scribe("open",e,{items:[{id:i.contentId,item_type:c.default.tweet}],item_count:1})},this.after("initialize",function(){this.on(document,"dataActivityPopupSuccess",this.scribeActivityPopupOpen)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(144),c=s(r),l=i(142),d=s(l);e.default=(0,o.default)(n,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.curateTweets=function(t,e){function i(t){var i=this;e.added.forEach(function(){return i.scribe({component:"tweet",action:"add_to_timeline"},t)});var s="Tweet successfully added/removed.";this.trigger("uiShowMessage",{message:s}),this.trigger("dataTweetsCurated",t)}function s(t){var e="Failed to add/remove Tweet.";this.trigger("uiShowError",{message:e})}var n={added:e.added,removed:e.removed,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/batch",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.addTweet=function(t,e){function i(t){var e=(0,m.default)("Added Tweet to <a href='{{url}}'>{{name}}</a>",{url:t.timeline_url,name:t.timeline_name});this.trigger("uiShowMessage",{message:e,timeout:1e4}),this.trigger("dataTweetAddedToTimeline",t),this.scribe({component:"tweet",action:"quick_add_to_timeline"},t)}function s(t){this.trigger("uiShowError",t),this.trigger("dataTweetNotAddedToTimeline",t)}var n={timeline_id:e.timelineId,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/add_tweet",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.removeTweet=function(t,e){function i(t){this.trigger("dataTweetRemovedFromTimeline",t),this.trigger("uiShowMessage",{message:"Tweet successfully removed."}),this.trigger("dataTweetRemovedFromTimeline",t)}function s(t){this.trigger("uiShowError",{message:"Error removing tweet."}),this.trigger("dataTweetNotRemovedFromTimeline",t)}var n={timeline_id:e.timelineId,tweet_id:e.tweetId,id:e.tweetId};this.post({url:"/i/curate/remove_tweet",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.createCustomTimeline=function(t,e){function i(t){this.scribe({component:"custom_timeline",action:"create"},t),this.trigger("uiNavigate",{href:t.timeline_url})}function s(t){this.trigger("uiShowError",{message:"Error creating collection."})}var n={name:e.name,description:e.description,order:e.order,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/create",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.updateCustomTimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"update"},t);var e=(0,m.default)("Collection updated. <a href='{{url}}'>Click here to refresh.</a>",{url:t.timeline_url});this.trigger("uiShowMessage",{message:e,timeout:5e3}),this.trigger("dataCustomTimelineUpdated",t)}function s(t){this.trigger("uiShowError",{message:"Error updating collection."})}var n={timeline_id:e.id,name:e.name,description:e.description,order:e.order};this.post({url:"/i/curate/update",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.deleteCustomTimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"delete"},t),this.trigger("uiNavigate",{href:this.attr.timelines_url})}function s(t){this.trigger("uiShowError",{message:"Error deleting collection."})}this.post({url:"/i/curate/destroy",data:{timeline_id:e.timeline_id},eventData:e,success:i.bind(this),error:s.bind(this)})},this.getFullCustomTimelines=function(t,e){this.get({url:"/i/curate/all_timelines",eventData:e,data:{tweet_id:e.tweetId},success:"dataGotFullCustomTimelines",error:"dataFailedToGetFullCustomTimelines"})},this.getCustomTimelinesForDropdown=function(t,e){e.tweetId&&this.get({url:"/i/curate/timelines",eventData:e,data:{tweet_id:e.tweetId},success:"dataGotCustomTimelines",error:"dataFailedToGetCustomTimelines"})},this.after("initialize",function(){d.default.getDecider("custom_timeline_curation")&&(this.on("uiCurateTweets",this.curateTweets),this.on("uiCurateAddTweet",this.addTweet),this.on("uiCurateRemoveTweet",this.removeTweet),this.on("uiNeedsCustomTimelines",this.getCustomTimelinesForDropdown),this.on("uiNeedsFullCustomTimelines",this.getFullCustomTimelines),this.on("uiCreateCustomTimeline",this.createCustomTimeline),this.on("uiUpdateCustomTimeline",this.updateCustomTimeline),this.on("uiDeleteCustomTimeline",this.deleteCustomTimeline))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=i(136),d=s(l),u=i(142),h=s(u),f=i(123),m=s(f),p=(0,o.default)(n,c.default,h.default);e.default=p},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.updateMomentMapAndTriggerEvent=function(t){var e=this;return function(i){e.momentMap=h.default.merge(e.momentMap,i.moment_map||{}),e.trigger(document,t,i)}},this.getDropdownUserMoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dropdown",data:{tweet_id:e.tweet_id},success:this.updateMomentMapAndTriggerEvent("dataMomentsGetDropdownUserMomentsSuccess"),error:"dataMomentsGetDropdownUserMomentsFailure"})},this.getDialogUserMoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dialog",data:e,success:this.updateMomentMapAndTriggerEvent("dataMomentsGetDialogUserMomentsSuccess"),error:"dataMomentsGetDialogUserMomentsFailure"})},this.addTweetSuccess=function(t,e){var i=e.moment_id&&this.momentMap[e.moment_id],s=void 0;i&&(s=i.is_empty_title?(0,m.default)('Tweet added to "<a target="_blank" href="{{url}}">Untitled Moment</a>"',{url:e.moment_maker_url}):(0,m.default)('Tweet added to "<a target="_blank" href="{{url}}">{{moment_name}}</a>"',{url:e.moment_maker_url,moment_name:i.title}),this.trigger("uiShowMessage",{message:s}))},this.removeTweetSuccess=function(t,e){var i=e.moment_id&&this.momentMap[e.moment_id],s=void 0;i&&(s=i.is_empty_title?(0,m.default)('Tweet removed from "<a target="_blank" href="{{url}}">Untitled Moment</a>"',{url:e.moment_maker_url}):(0,m.default)('Tweet removed from "<a target="_blank" href="{{url}}">{{moment_name}}</a>"',{url:e.moment_maker_url,moment_name:i.title}),this.trigger("uiShowMessage",{message:s}))},this.after("initialize",function(){this.momentMap={},this.on("uiMomentsGetDropdownUserMoments",this.getDropdownUserMoments),this.on("uiMomentsGetDialogUserMoments",this.getDialogUserMoments),this.on(document,"dataMomentMakerAddTweetSuccess",this.addTweetSuccess),this.on(document,"dataMomentMakerRemoveTweetSuccess",this.removeTweetSuccess)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=i(142),d=s(l),u=i(126),h=s(u),f=i(123),m=s(f);e.default=(0,o.default)(n,c.default,d.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.createActionHandler=function(t,e){var i=this;return function(s,n){return i.post({url:"/i/moments/edit/"+n.moment_id+"/"+t,data:n,success:"dataMomentMaker"+e+"TweetSuccess",error:"dataMomentMaker"+e+"TweetFailure"})}},this.bindAction=function(t){var e=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();this.on("uiMomentMaker"+e+"Tweet",this.createActionHandler(t.toLowerCase(),e))},this.sortMoment=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/sort",data:e,success:"dataMomentMakerSortMomentSuccess",error:this.genericErrorMessage.bind(this)})},this.editMetaData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/meta",data:e,success:"dataMomentMakerEditMetaSuccess",error:"dataMomentMakerEditMetaFailure",noAbortOnNavigate:!0})},this.setCoverData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"dataMomentMakerSetCoverSuccess",error:"dataMomentMakerSetCoverFailure"})},this.setCoverCropData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"dataMomentMakerSetCoverCropSuccess",error:"dataMomentMakerSetCoverCropFailure"})},this.setCoverDataByMediaId=function(t,e){function i(){this.trigger("dataMomentMakerSetCoverFailure")}var s=this,n=e.fileId,a=c.default.get(n);if(a)return this.trigger(document,"uiMediaSruInit",{fileId:n,uploadId:a.uploadId,mediaCategory:a.mediaCategory}),this.mediaSruFinalize(a).then(function(t){return s.post({url:"/i/moments/edit/"+e.momentId+"/update_cover/"+t,success:"dataMomentMakerSetCoverSuccess",error:"dataMomentMakerSetCoverFailure"})}).catch(function(t){throw i(),t})},this.createMoment=function(t,e){function i(t){this.trigger("uiNavigate",{href:t.url})}function s(){this.trigger("uiShowError",{message:"Something went wrong. This Moment couldn't be created. Give it a minute, then try again."})}this.post({url:"/i/moments/create",data:e,success:i.bind(this),error:s.bind(this)})},this.deleteMoment=function(t,e){function i(t){this.trigger("dataMomentMakerDeleteMomentSuccess",{href:t.href||"/i/moments"})}this.post({url:"/i/moments/delete",data:e,success:i.bind(this),error:"dataMomentMakerDeleteMomentFailure"})},this.updateCrop=function(t,e){function i(){this.trigger("dataMomentMakerUpdateCropFailure"),this.genericErrorMessage()}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_crop",data:e,success:"dataMomentMakerUpdateCropSuccess",error:i.bind(this)})},this.updateMomentVisibility=function(t,e){function i(t){t&&t.permission_error?this.trigger("uiShowError",{message:"You do not currently have permission to perform this action."}):this.trigger("uiMomentMakerUpdateVisibilitySuccess",g.default.merge(t,e))}function s(){this.trigger("uiMomentMakerUpdateVisibilityError",e),this.genericErrorMessage()}this.post({url:"/i/moments/visibility/"+e.moment_id,data:{mode:e.visibility_mode},success:i.bind(this),error:s.bind(this)})},this.updateNSFWSetting=function(t,e){function i(){this.trigger("uiShowMessage",{message:"Moment sensitivity updated successfully."})}function s(){this.trigger("dataMomentMakerUpdateNSFWError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_nsfw",data:e,success:i.bind(this),error:s.bind(this)})},this.updatePublishLocationSetting=function(t,e){function i(){this.trigger("uiShowMessage",{message:"Moment location setting updated successfully."})}function s(){this.trigger("dataMomentMakerUpdatePublishLocationError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_publish_location",data:e,success:i.bind(this),error:s.bind(this)})},this.updateThemeColorSetting=function(t,e){function i(){this.trigger("dataMomentMakerUpdateThemeColorError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_theme_color",data:e,success:"dataMomentMakerUpdateThemeColorSuccess",error:i.bind(this)})},this.genericErrorMessage=function(){this.trigger("uiShowError",{message:"Something went wrong. Give it a minute, then try again."})},this.after("initialize",function(){this.bindAction("add"),this.bindAction("remove"),this.bindAction("reorder"),this.on("uiMomentMakerSortMoment",this.sortMoment),this.on("uiMomentMakerEditMeta",this.editMetaData),this.on("uiMomentMakerSetCover",this.setCoverData),this.on("uiMomentMakerSetCoverCrop",this.setCoverCropData),this.on("uiMomentMakerSetCoverByMediaId",this.setCoverDataByMediaId),this.on("uiMomentMakerCreateMoment",this.createMoment),this.on("uiMomentMakerDeleteMoment",this.deleteMoment),this.on("uiMomentMakerUpdateVisibility",this.updateMomentVisibility),this.on("uiMomentMakerUpdateCrop",this.updateCrop),this.on("uiMomentMakerUpdateNSFW",this.updateNSFWSetting),this.on("uiMomentMakerUpdatePublishLocation",this.updatePublishLocationSetting),this.on("uiMomentMakerUpdateThemeColor",this.updateThemeColorSetting)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(220),c=s(r),l=i(240),d=s(l),u=i(345),h=s(u),f=i(512),m=s(f),p=i(126),g=s(p),v=i(123);s(v);e.default=(0,o.default)(n,d.default,h.default,m.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeCreateMoment=function(t,e){var i=e&&e.scribeContext&&e.scribeContext.component;this.scribe({component:i,element:"create_moment_button",action:"click"})},this.after("initialize",function(){this.on("uiMomentMakerCreateMoment",this.scribeCreateMoment)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r);e.default=(0,o.default)(n,c.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeTweetAction=function(t,e,i){var s=i&&i.scribeContext&&i.scribeContext.component;this.scribe({component:s,element:"moment",action:t})},this.after("initialize",function(){this.on("uiMomentMakerAddTweet",this.scribeTweetAction.bind(this,"add")),this.on("uiMomentMakerRemoveTweet",this.scribeTweetAction.bind(this,"remove")),this.on("dataMomentMakerAddTweetFailure",this.scribeTweetAction.bind(this,"add_failure")),this.scribeOnEvent("uiOpenAddToMomentDialog",{component:"add_to_moment_dialog",action:"open"})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r);e.default=(0,o.default)(n,c.default)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({tweetSelector:".tweet",tweetFormSelector:".tweet-form",conversationModuleSelector:".conversation-module",animatedGifSelector:".animated-gif"})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(920),c=s(r),l=i(921),d=s(l),u=i(489),h=s(u),f=i(922),m=s(f),p=i(924),g=s(p),v=i(472),b=s(v),w=i(574),S=s(w);e.default=(0,o.default)(n,d.default,m.default,g.default,h.default,S.default,b.default,c.default)},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){o.default.mixin(this,[c.default]),this.getPlayableMediaEventData=function(t){var e={},i=t.find("[data-media-id]").attr("data-media-id");if(i)e.playlist_url=i,e.video_uuid=i;else{var s=t.find("[data-card-url]").attr("data-card-url");e.playlist_url=s,e.video_uuid=s}return e.video_type="video",e.card_details=JSON.stringify(e),e},this.logPlayableMediaEvents=function(e,i,s){var n=i.attr("data-tweet-id"),a=void 0;a="animated_gif"===s||"__entity_animated_gif"===s?"gif_player":"vine_player";var o=t.extend({},this.interactionData(i),this.getPlayableMediaEventData(i));this.eventsFired.view[n]||(this.trigger("uiPlayableMediaEvent",t.extend({name:"video_content_view"},o)),this.scribeInteraction({action:"video_view",element:a},o),this.eventsFired.view[n]=!0),this.eventsFired[e][n]||(this.trigger("uiPlayableMediaEvent",t.extend({name:"video_content_"+e},o)),this.scribeInteraction({action:e,element:a},o),this.eventsFired[e][n]=!0)},this.shouldCollectAnalytics=function(t,e){return"animated_gif"===e||t.data("has-vine")},this.onAutoplayStart=function(e){var i=this,s=t(e.target);if(s.length){var n=s.find("[data-card2-name]").attr("data-card2-name");this.shouldCollectAnalytics(s,n)&&(this.autoplayTimeout=setTimeout(function(){return i.logPlayableMediaEvents("view_threshold",s,n)},3e3))}},this.onAutoplayStop=function(){this.autoplayTimeout&&clearTimeout(this.autoplayTimeout)},this.onTweetExpanded=function(e){var i=t(e.target);if(i.length){var s=i.find("[data-card2-name]").attr("data-card2-name");this.shouldCollectAnalytics(i,s)&&this.logPlayableMediaEvents("play_from_tap",i,s)}},this.after("initialize",function(){this.eventsFired={view:{},play_from_tap:{},view_threshold:{}},this.on("uiLOHPMediaPlay",this.onTweetExpanded),this.on("uiAutoplayMedia",this.onAutoplayStart),this.on("uiStopAutoplayingMedia",this.onAutoplayStop)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var a=i(121),o=s(a),r=i(138),c=s(r)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function i(){this.defaultAttrs({missingTweetsLinkSelector:"a.missing-tweets-link",missingTweetsBarSelector:".missing-tweets-bar",focalTweetSelector:".original-tweet",topLevelStreamItemSelector:".stream-item:not(.conversation-tweet-item)",conversationTweetClass:"conversation-tweet",detachedConversationClass:"detached-conversation",expandingConversationClass:"expanding-conversation",selectedSelector:".selected-stream-item",awaitingAncestorsClass:".conversation-awaiting-ancestors"}),this.handleExpandConversationAndLoadMissingTweets=function(t){t.preventDefault();var e=this.streamItemFromEvent(t),i=this.getFocalPoint(e),s=i.data("permalink-path"),n=i.data("conversation-id");s&&this.trigger("uiNavigate",{href:s,conversation_id:n})},this.streamItemFromEvent=function(e){return t(e.target).closest(this.attr.topLevelStreamItemSelector)},this.getFocalPoint=function(t){return t.find(this.attr.focalTweetSelector)},this.getTweetId=function(e){return t(e).find(".tweet").attr("data-tweet-id")},this.notifyConversationMutated=function(e,i){var s=t(e.target),n=s.closest(this.attr.conversationModuleSelector);n.length&&this.trigger(n,"uiConversationModuleUpdated")},this.after("initialize",function(){this.on("click",{missingTweetsLinkSelector:this.handleExpandConversationAndLoadMissingTweets}),this.on("uiShortcutEnter",{missingTweetsBarSelector:this.handleExpandConversationAndLoadMissingTweets}),this.on("uiTweetInserted uiBeforeTweetRemoved",this.notifyConversationMutated)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.getSize=function(t,e){var i=e.attr("data-width"),s=e.attr("data-height"),n=e.width(),a=s*(n/i);return{h:a,w:n}},this.createMediaElement=function(t,e,i){return new MediaElement(t,{pluginPath:o.default.path,flashName:"flashmediaelement.swf",loop:!0,defaultVideoHeight:e.h,defaultVideoWidth:e.w,pluginHeight:e.h,pluginWidth:e.w,success:i})},this.prepareMediaElement=function(t,e){var i=this,s=function(t){i.setCurrentTime(t,0),t.play()},n=this.createMediaElement(t,e,function(t){t.addEventListener("ended",function(){t&&s(t)},!1),t.addEventListener("timeupdate",function(){if("native"===n.pluginType&&t.duration<=t.currentTime){var e=function i(){s(t),t.removeEventListener("loadeddata",i)};t.addEventListener("loadeddata",e),t.load()}},!1),t.play()});return n},this.getPlayer=function(t){if(t.length){var e=t.find(this.attr.animatedGifSelector);if(e.length)return this.players[t.attr("data-tweet-id")]}return null},this.setCurrentTime=function(t,e){"native"===t.pluginType?t.currentTime=e:t.setCurrentTime(e)},this.autoplayGif=function(e){this.startGif(t(e.target).closest(".tweet"))},this.startGifOnEvent=function(e){this.startGif(t(e.target))},this.startGif=function(t){var e=this;if(t=t.filter(":not(.animated-gif-playing)").has(this.attr.animatedGifSelector),t.length){var i=t.attr("data-tweet-id");if(!this.players[i]){var s=t.find(this.attr.animatedGifSelector),n=s.find("[video-src]");n.attr("src",n.attr("video-src"));var a=s.get(0),o=this.getSize(t,s);this.players[i]=this.prepareMediaElement(a,o),this.players[i].load()}t.addClass("animated-gif-playing"),setTimeout(function(){return e.players[i]&&e.players[i].play&&e.players[i].play()},1)}},this.stopAutoplayingGif=function(e){this.stopGif(t(e.target).closest(".tweet"))},this.stopGifOnEvent=function(e){this.stopGif(t(e.target))},this.stopGif=function(t){var e=t.hasClass("animated-gif-playing")&&this.getPlayer(t);e&&(t.removeClass("animated-gif-playing"),t.find(".me-plugin").remove(),e.pause&&e.pause())},this.pauseGif=function(e){var i=t(e.target),s=i.hasClass("animated-gif-playing")&&this.getPlayer(i);s&&s.pause&&s.pause()},this.seekGif=function(e,i){var s=t(e.target),n=s.hasClass("animated-gif-playing")&&this.getPlayer(s);if(n){var a=i.position*n.duration;isNaN(n.duration)||(this.setCurrentTime(n,Math.min(a,n.duration)),n.pause())}},this.after("initialize",function(){this.players={},this.on("uiAutoplayMedia",this.autoplayGif),this.on("uiStartGif",this.startGifOnEvent),this.on("uiStopAutoplayingMedia",this.stopAutoplayingGif),this.on("uiStopGif",this.stopGifOnEvent),this.on("uiPauseGif",this.pauseGif),this.on("uiSeekGif",this.seekGif)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(923),o=s(a);e.default=n}).call(e,i(10))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={path:"/flash/1/"}},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){c.default.mixin(this,[d.default]),this.defaultAttrs({snapReelVideoSelector:"video.js-snap-reel",easingAcceleration:.5,FPS:(0,o.default)().chrome?20:30}),this.logInteraction=function(t){var e=t.attr("data-tweet-id");this.eventScribed[e]||(this.scribeInteraction({action:"snap_reel_interaction"},this.interactionData(t)),this.eventScribed[e]=!0)},this.mouseOver=function(e){var i=this;this.video=t(e.target),this.tweet=this.video.parents(this.attr.tweetSelector),this.tweet.hasClass("animated-gif-playing")&&(this.scribeTimeout=setTimeout(function(){return i.logInteraction(i.tweet,i.video)},3e3)),this.start()},this.mouseOut=function(t){clearTimeout(this.scribeTimeout),this.tweet&&this.tweet.hasClass("animated-gif-playing")&&(this.tweet.removeClass("animated-gif-playing"),this.trigger(this.tweet,"uiStartGif")),this.stop(),this.scribeTimeout=void 0,this.tweet=void 0,this.targetPosition=void 0},this.mouseMove=function(t){this.tweet&&this.tweet.hasClass("animated-gif-playing")&&(this.targetPosition=t.pageX-this.video.offset().left)},this.start=function(){this.running=!0,this.tick()},this.stop=function(){this.running=!1},this.tick=function(){var t=this;if(this.running){var e=1e3/this.attr.FPS;setTimeout(function(){requestAnimationFrame(t.tick.bind(t)),t.update()},e)}},this.update=function(){if(this.targetPosition){this.currentPosition+=(this.targetPosition-this.currentPosition)*this.attr.easingAcceleration;var t=this.currentPosition/this.video.width();this.trigger(this.tweet,"uiSeekGif",{position:t})}},this.after("initialize",function(t,e){this.scribeTimeout=void 0,this.eventScribed={},this.currentPosition=0,this.on("mouseover",{snapReelVideoSelector:this.mouseOver}),this.on("mouseout",{snapReelVideoSelector:this.mouseOut}),this.on("mousemove",{snapReelVideoSelector:this.mouseMove})})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var a=i(156),o=s(a),r=i(121),c=s(r),l=i(138),d=s(l)}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.deleteMediaTag=function(t,e){var i=function(t){this.trigger("dataMediaTagRemoveSuccess",t)},s=function(t,i,s){this.trigger("dataMediaTagRemoveFailure",{id:e.id,status:i,errorThrown:s})},n={status_id:e.id};this.post({url:"/i/media/media_tags/delete",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.after("initialize",function(){this.on("uiDidRemoveMediaTag",this.deleteMediaTag)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=(0,o.default)(n,c.default);e.default=l},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({newItemsBarSelector:".js-new-tweets-bar",containerSelector:".stream-container",newTweetsBarVisibleClass:"new-tweets-bar-visible",scrollTopOnNewItemsClick:!0}),this.updateNewItemsBar=function(e,i){if(e.target.contains(this.node)){var s=t(i.html),n=this.select("newItemsBarSelector");n.length?(n.replaceWith(s),this.trigger("uiNewItemsBarUpdated")):(this.$node.html(s),this.$node.hide(),this.showNewItemsBar(),this.trigger("uiNewItemsBarShown")),this.trigger("uiNewItemsBarVisible")}},this.showNewItemsBar=function(){var e=this.$node.parent(),i=c.default.getCanvasYOffset(e),s=t(window).scrollTop();this.$node.addClass(this.attr.newTweetsBarVisibleClass),s>i?(this.$node.show(),t("html, body").scrollTop(s+this.$node.height())):this.$node.slideDown()},this.hideNewItemsBar=function(){this.trigger("uiNewItemsBarHidden");var t=this.select("newItemsBarSelector");t.remove(),this.$node.removeClass(this.attr.newTweetsBarVisibleClass)},this.handleNewItemsBarClick=function(e,i){var s=t(e.target).closest("[data-live-video-item-json]").attr("data-live-video-item-json");this.attr.scrollTopOnNewItemsClick&&(0,d.default)(0,"fast"),this.trigger("uiInjectNewItems",{fromClick:!0});var n=t(e.target).attr("data-item-count"),a={unreadCount:Number(n)};if(s)try{a.items=[JSON.parse(s)]}catch(e){}this.trigger("uiNewItemsBarClick",a)},this.after("initialize",function(){this.on(document,"uiUpdateNewItemsBar",this.updateNewItemsBar),this.on(document,"uiHideNewItemsBar",this.hideNewItemsBar),this.on("click",{newItemsBarSelector:this.handleNewItemsBarClick})})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(178),c=s(r),l=i(927),d=s(l);e.default=(0,o.default)(n)}).call(e,i(10))},,function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({successFromEndpoints:{destroy:"dataDidDeleteTweet",retweet:"dataDidRetweet",like:"dataDidFavoriteTweet",unretweet:"dataDidUnretweet",unlike:"dataDidUnfavoriteTweet",report:"dataDidReportTweet",pin:"dataDidUserPinTweet",unpin:"dataDidUserUnpinTweet"},errorsFromEndpoints:{destroy:"dataFailedToDeleteTweet",retweet:"dataFailedToRetweet",like:"dataFailedToFavoriteTweet",unretweet:"dataFailedToUnretweet",unlike:"dataFailedToUnfavoriteTweet",report:"dataFailedToReportTweet",pin:"dataFailedToUserPinTweet",unpin:"dataFailedToUserUnpinTweet"},statsName:"swift_tweet_actions"});var t={like:{path:"/favorites/create.json",counterName:"favorite"},unlike:{path:"/favorites/destroy.json",counterName:"favorite"},retweet:{path:"/statuses/retweet.json",counterName:"retweet"},unretweet:{path:"/statuses/unretweet.json",counterName:"retweet"}};this.takeAction=function(e,i,s){var n=this,a=t[e],o=!!a,r=function(t){t&&t.message&&this.trigger("uiShowMessage",{message:t.message}),this.trigger(this.attr.successFromEndpoints[e],t);var i=t.profile_stats,s=t.tweet_stats;o&&(i=d.default.normalizeProfileStats(t,a,h.default.language),s=d.default.normalizeTweetStats(t,a,h.default.language)),i&&this.trigger("dataGotProfileStats",{stats:i}),s&&this.trigger("dataGotTweetStats",{stats:s})},c=function(t,e){return t?n.apiEndpointUrl(a.path):"/i/tweet/"+e},l=void 0;l=("like"===e||"retweet"===e)&&"retweetId"in s?{id:s.retweetId}:"report"===e?{tweet_id:s.tweetId,user_id:s.userId,screen_name:s.screenName,block_user:s.blockUser,report_type:s.reportType}:{id:s.id},s.tweetStatCount&&(l.tweet_stat_count=s.tweetStatCount),s.impressionId&&(l.impression_id=s.impressionId,s.disclosureType&&(l.earned="earned"===s.disclosureType)),s.featureContext&&(l.feature_context=s.featureContext);var u={destroy:"DELETE",unretweet:"DELETE"},f={url:c(o,e),data:l,eventData:s,success:r.bind(this),error:this.attr.errorsFromEndpoints[e],retryIfUnavailable:!0,statsSubcategory:e,useOAuthSessionAuth:o};"like"===e&&m.default.getDecider("like_over_http_client")&&(f.useHttpClient=!0,f.endpoint=e),this.JSONRequest(f,u[e]||"POST")},this.hitEndpoint=function(t){return this.takeAction.bind(this,t)},this.getTweet=function(t,e){var i={id:e.id};e.modal&&(i.modal=e.modal),this.get({url:e.hasStickers?"/i/tweet/stickersHtml":"/i/tweet/html",statsSubcategory:"html",data:i,eventData:e,success:"dataGotTweet",error:"dataFailedToGetTweet"})},this.after("initialize",function(){this.on("uiDidRetweet",this.hitEndpoint("retweet")),this.on("uiDidUnretweet",this.hitEndpoint("unretweet")),this.on("uiDidDeleteTweet",this.hitEndpoint("destroy")),this.on("uiDidFavoriteTweet",this.hitEndpoint("like")),this.on("uiDidUnfavoriteTweet",this.hitEndpoint("unlike")),this.on("uiDidBlockOrReport uiDidReportTweet",this.hitEndpoint("report")),this.on("uiGetTweet",this.getTweet),this.on("uiDidUserPinTweet",this.hitEndpoint("pin")),this.on("uiDidUserUnpinTweet",this.hitEndpoint("unpin"))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=i(929),d=s(l),u=i(941),h=s(u),f=i(136),m=s(f),p=(0,o.default)(n,c.default);e.default=p},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){var i=e.counterName+"_count",s=t.retweeted_status&&t.retweeted_status[i]?t.retweeted_status[i]:t[i];return"/statuses/unretweet.json"===e.path?s-1>=0?s-1:0:s}function a(t,e,i){var s=n(t,e),a=e.counterName,o=t.retweeted_status&&t.retweeted_status.id_str?t.retweeted_status.id_str:t.id_str;if(void 0!==s&&o){var r=l.default.compactOrCommaize(s,i),c=l.default.getCommaizedFormat(s),u=a===d?l.default.getFavoriteStatTitle(s,c):l.default.getRetweetStatTitle(s,c),h=[{status_id:o,name:a,count:s.toString(),commaized_count:c,compact_count:r,title:u}];return h}}function o(t,e,i){if("object"===r(t.user)){var s=void 0,n=void 0,a=e.counterName,o="\n",c=void 0,m=void 0;if(a===d){var p=t.user.favourites_count;m=l.default.getCommaizedFormat(p),s=l.default.getFavoriteStatPhrase(p,m),n=l.default.getNumericStatText(p,m),c=h}else if(a===u){var g=t.user.statuses_count,v=l.default.compactOrCommaize(g,i);m=l.default.getCommaizedFormat(g),s=l.default.getTweetStatPhrase(g,m),n=l.default.getNumericStatText(g,m),o=l.default.getProfileTweetStat(m,v),c=f}var b=[{highline_stat_phrase:s,highline_stat_value:n,html:o,stat:c,user_id:t.user.id_str}];return b}}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=i(930),l=s(c),d="favorite",u="retweet",h="favorite",f="tweet";
e.default={normalizeTweetStats:a,normalizeProfileStats:o}},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){return t>=1e3&&H.indexOf(e)===-1}function a(t){return t<9950?1:t<1e6?0:1}function o(t){return q.format(t,{precision:a(t)})}function r(t){return z.format(t)}function c(t,e){return n(t,e)?o(t):r(t)}function l(t,e){var i={intnumber:t.count,localized_number:t.commaizedCount,localized_compact_number:t.compactCount};return i["intnumber_"+C.default.PluralRules.rule_for(t.count)]=!0,e.render(i).trim()}function d(t,e){return l({count:t,commaizedCount:e},P.default)}function u(t,e){return l({count:t,commaizedCount:e},A.default)}function h(t,e){return l({count:t,commaizedCount:e},T.default)}function f(t,e){return l({count:t,commaizedCount:e},F.default)}function m(t,e){return l({count:t,commaizedCount:e},M.default)}function p(t,e){return l({count:t,commaizedCount:e},E.default)}function g(t,e){return l({count:t,commaizedCount:e},R.default)}function v(t,e){return l({commaizedCount:t,compactCount:e},B.default)}function b(t,e){return l({commaizedCount:t,compactCount:e},V.default)}function w(t,e){return l({count:t,commaizedCount:e},j.default)}Object.defineProperty(e,"__esModule",{value:!0});var S=i(478),C=s(S),y=i(931),T=s(y),D=i(932),M=s(D),I=i(933),P=s(I),k=i(934),A=s(k),x=i(935),E=s(x),O=i(936),R=s(O),N=i(937),F=s(N),L=i(938),j=s(L),U=i(939),B=s(U),$=i(940),V=s($),q=new C.default.ShortDecimalFormatter,z=new C.default.DecimalFormatter,H=["ja","ko","nl"];e.default={compactOrCommaize:c,getCompactNumberPrecision:a,getCommaizedFormat:r,needsCompacting:n,getFollowerStatPhrase:d,getFollowingStatPhrase:u,getFavoriteStatPhrase:h,getFavoriteStatTitle:m,getTweetStatPhrase:f,getNumericStatText:w,getReplyStatTitle:p,getRetweetStatTitle:g,getProfileTweetStat:v,getProfileFollowingStat:b}},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_one",t,e,1),t,e,0,21,46,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Like")}),t.pop()),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_other",t,e,1),t,e,0,87,113,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Likes")}),t.pop()),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("intnumber_one",t,e,1),t,e,0,26,51,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" like")}),t.pop()),s.s(s.f("intnumber_other",t,e,1),t,e,0,97,123,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" likes")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_one",t,e,1),t,e,0,21,50,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Follower")}),t.pop()),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_other",t,e,1),t,e,0,91,121,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Followers")}),t.pop()),s.b("\n"),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_one",t,e,1),t,e,0,21,51,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Following")}),t.pop()),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_other",t,e,1),t,e,0,92,122,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Following")}),t.pop()),s.b("\n"),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("intnumber_one",t,e,1),t,e,0,26,52,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" reply")}),t.pop()),s.s(s.f("intnumber_other",t,e,1),t,e,0,98,126,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" replies")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("intnumber_one",t,e,1),t,e,0,26,54,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" retweet")}),t.pop()),s.s(s.f("intnumber_other",t,e,1),t,e,0,100,129,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" retweets")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_one",t,e,1),t,e,0,21,47,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Tweet")}),t.pop()),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_other",t,e,1),t,e,0,88,115,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Tweets")}),t.pop()),s.b("\n"),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.b(s.v(s.f("localized_number",t,e,0))),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<strong title="'),s.b(s.v(s.f("localized_number",t,e,0))),s.b('" class="js-mini-profile-stat">'),s.b(s.v(s.f("localized_compact_number",t,e,0))),s.b("</strong>"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<strong title="'),s.b(s.v(s.f("localized_number",t,e,0))),s.b('" class="js-mini-profile-stat">'),s.b(s.v(s.f("localized_compact_number",t,e,0))),s.b("</strong>"),s.fl()},partials:{},subs:{}})}).call(e,i(1))},function(t,e,i){(function(t,e){"use strict";var i=t("html").attr("lang");e.export={language:i}}).call(e,i(10),i(942)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t){this.defaultAttrs({itemType:"tweet"}),this.scribeActivityCount=function(t,e,i){var s={component:this.attr.itemType,element:t,action:"click"};this.scribe(s,this.interactionData(e))},this.after("initialize",function(){this.on("uiRequestReplyActivity",this.scribeActivityCount.bind(this,"reply_count")),this.on("uiRequestRetweetedActivity",this.scribeActivityCount.bind(this,"retweet_count")),this.on("uiRequestFavoritedActivity",this.scribeActivityCount.bind(this,"favorite_count"))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(138),c=s(r),l=i(141),d=s(l),u=(0,o.default)(n,c.default,d.default);e.default=u},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.getTweetTranslation=function(t,e){var i=function(e){e&&e.message&&this.trigger("uiShowMessage",{message:e.message}),this.trigger(t.target,"dataTweetTranslationSuccess",e)},s=function(i,s,n){this.trigger(t.target,"dataTweetTranslationError",{id:e.id,status:s,errorThrown:n})},n={id:e.tweetId,dest:e.dest};this.get({url:"/i/translations/show.json",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.submitTweetTranslation=function(t,e){var i=function(e){this.trigger(t.target,"dataTweetTranslationSuggestionSuccess",e)},s=function(i,s,n){this.trigger(t.target,"dataTweetTranslationSuggestionError",{id:e.id,status:s,errorThrown:n})};this.post({url:"/i/translations/suggest.json",data:e,eventData:e,success:i.bind(this),error:s.bind(this)})},this.after("initialize",function(){this.on("uiNeedsTweetTranslation",this.getTweetTranslation),this.on("uiSuggestTweetTranslation",this.submitTweetTranslation)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(240),c=s(r),l=(0,o.default)(n,c.default);e.default=l},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(946),c=s(r),l=i(538),d=s(l);e.default=(0,o.default)(n,d.default,c.default)},function(t,e,i){(function(t){"use strict";function i(){this.getItemPosition=function(e){return t(this.attr.genericInteractionItemSelector).index(e.closest(this.attr.genericInteractionItemSelector))}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.scribeTweetPivotClick=function(t,e){this.scribe({component:"tweet",element:"more",action:"click"},{items:[e.item_details,e.component_details]})},this.after("initialize",function(){this.on("uiTweetPivotClick",this.scribeTweetPivotClick)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(142),c=s(r),l=(0,o.default)(n,c.default);e.default=l},,,,function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({containerSelector:".stream-container",itemsSelector:"#stream-items-id",genericItemSelector:".js-stream-item",timelineEndSelector:".timeline-end",backToTopSelector:".back-to-top",lastItemSelector:".stream-item:last",streamItemContentsSelector:".js-actionable-tweet, .js-actionable-user, .js-activity, .js-story-item",truncationLimit:200,highlightedSelector:".stream-container .stream li.js-stream-item.js-activity",tweetContainerSelector:"li",reloadTimelineSelector:".js-reload-timeline",useDeduping:!1}),this.findFirstItemContent=function(e){var i=e.find(this.attr.streamItemContentsSelector);return i=i.not(".conversation-tweet"),t(i[0])},this.injectItems=function(e,i,s,n){var a=t("<div/>").html(i),o=this.getItemsToInject(a),r=a.find(this.attr.genericItemSelector);if(o.length>0&&this.select("timelineEndSelector").addClass("has-items"),"prepend"===e&&o.length>this.attr.truncationLimit&&(o.length=this.attr.truncationLimit,r.length=this.attr.truncationLimit),this.injectToDOM(e,o),this.reportInjectedItems(r,s,n),"prepend"===e){var c=this.select("itemsSelector");c.find(">:gt("+(this.attr.truncationLimit-1)+")").remove();for(var l=c.children().last(),d=void 0;l.find(".promoted-tweet").length;)d=l.prev(),l.remove(),l=d}return o},this.getItemsToInject=function(t){return t.children()},this.injectToDOM=function(t,e){this.select("itemsSelector")[t](e)},this.removeDuplicates=function(t){var e=[];return t.filter(function(t){return!t.tweetId||e.indexOf(t.tweetId)===-1&&(e.push(t.tweetId),!0)})},this.extractTimestamp=function(t){return t.find("[data-time-ms]").attr("data-time-ms")},this.reportInjectedItems=function(e,i,s){function n(t){return"uiHasInjectedNewTimeline"===i||"uiHasInjectedOldTimelineItems"===i||"uiHasInjectedRangeTimelineItems"===i}var a=this,o=[],r=0;e.each(function(e,s){n(i)&&(o=o.concat(a.extraInteractionData(t(s))),o.push(a.interactionData(a.findFirstItemContent(t(s)))),r=Math.max(r,a.extractTimestamp(t(s)))),a.trigger(s,"uiHasInjectedTimelineItem")}),o=this.removeDuplicates(o);var c={};n(i)&&(c={scribeContext:{component:"stream"},scribeData:{},items:o},s&&s.autoplay&&(c.scribeData.event_initiator=h.default.clientSideApp)),this.trigger("uiWantsToRefreshTimestamps"),this.trigger(i,c)},this.inspectItemsFromServer=function(t,e){this.isOldItem(e)?this.injectOldItems(e):this.isNewItem(e)?this.notifyNewItems(e):this.wasRangeRequest(e)&&this.injectRangeItems(e)},this.investigateDataError=function(t,e){var i=e.sourceEventData;i&&(this.wasRangeRequest(i)?this.notifyRangeItemsError(e):this.wasNewItemsRequest(i)||this.wasOldItemsRequest(i)&&this.notifyOldItemsError(e))},this.possiblyShowBackToTop=function(){var e=this.select("lastItemSelector").position();e&&e.top>=t(window).height()&&this.select("backToTopSelector").show()},this.scrollToTop=function(){(0,g.default)(0,"fast")},this.getTimelinePosition=function(t){return t.closest(this.attr.genericItemSelector).index()},this.updateHighlighting=function(e,i){var s=this,n=this.select("highlightedSelector");n.each(function(e,n){var a=t(n),o=s.extractTimestamp(a);a.toggleClass("highlighted",o>i),o<=i&&a.removeClass("highlighted")})},this.handleTweetRemoved=function(){this.select("genericItemSelector").length||this.select("timelineEndSelector").removeClass("has-items")},this.handleTweetDelete=function(e,i){var s=this.$node.find('[data-tweet-id="'+i.sourceEventData.id+'"]');s.toArray().forEach(function(e,s){var n=t(e);this.trigger(n,"uiBeforeTweetRemoved",i),n.closest(this.attr.tweetContainerSelector).remove(),this.trigger("uiTweetRemoved",i)},this)},this.reloadTimeline=function(t,e){t.preventDefault(),this.trigger("uiNearTheBottom")},this.injectDeferredItems=function(){var t=this.$node.find('script[type="text/twitter-deferred-timeline-stream-items"]');t.length&&(this.injectItems("append",t.html(),"uiHasInjectedOldTimelineItems"),t.remove())},this.after("initialize",function(){this.on("dataGotMoreTimelineItems",this.inspectItemsFromServer),this.on("dataGotMoreTimelineItemsError",this.investigateDataError),this.on(document,"uiUpdateActivityHighlighting",this.updateHighlighting),this.on("uiTweetRemoved",this.handleTweetRemoved),this.on("uiReplyToTweet","uiOpenReplyDialog"),this.on(document,"dataDidDeleteTweet",this.handleTweetDelete),this.on("click",{backToTopSelector:this.scrollToTop,reloadTimelineSelector:this.reloadTimeline}),this.possiblyShowBackToTop(),window.requestIdleCallback(this.injectDeferredItems.bind(this))})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(952),c=s(r),l=i(138),d=s(l),u=i(954),h=s(u),f=i(955),m=s(f),p=i(927),g=s(p),v=i(956),b=s(v),w=i(957),S=s(w);e.default=(0,o.default)(n,c.default,d.default,m.default,b.default,S.default)}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){o.default.mixin(this,[c.default]),this.defaultAttrs({navigationActiveClass:"js-navigation-active",selectedClass:"selected-stream-item",unselectableClass:"js-unselectable-stream-item",firstItemSelector:".js-stream-item:first-child:not(.js-unselectable-stream-item)",profilePageSelector:".route-profile",profileOwnerUserIdSelector:".ProfileNav .user-actions",pushStateSelector:"a.js-nav",selectedSelector:".selected-stream-item"}),this.moveSelection=function(e){var i=this,s=t(e.target);if(!s.closest(this.attr.selectedSelector).length){var n=s.closest(this.attr.genericItemSelector);s.closest(this.attr.pushStateSelector).length&&(this.$linkClicked=n,clearTimeout(this.linkTimer),this.linkTimer=setTimeout(function(){return i.$linkClicked=t()},0)),this.$selected.length&&this.selectItem(n)}},this.clearSelection=function(){var e=t(this.attr.selectedSelector);this.$previousSelection=e,e.removeAttr("tabIndex").removeClass(this.attr.selectedClass),this.$selected=t(),this.trigger(e,"uiTimelineSelectionCleared")},this.selectTopItemHandler=function(){this.selectTopItem()},this.selectTopItem=function(t){this.clearSelection(),this.trigger("uiInjectNewItems",t||{}),this.selectAdjacentItem("next",{scrollToTop:!0})},this.injectAndPossiblySelectTopItem=function(t,e){var i=this.$selected.length;i&&this.clearSelection(),this.trigger("uiInjectNewItems",e||{}),i&&this.selectAdjacentItem("next")},this.selectTopItemByKeyboard=function(){this.selectTopItem({wasPeriodPress:!0})},this.selectPrevItem=function(){this.selectAdjacentItem("prev")},this.selectNextItem=function(t,e){this.selectAdjacentItem("next",e)},this.selectNextAdjacentItem=function(){var t=this.$selected;this.selectAdjacentItem("next"),t===this.$selected&&this.selectAdjacentItem("prev")},this.selectNextItemNotFrom=function(t){for(var e="next",i=this.$selected;this.getUserIdFromNode(this.$selected)===t;)if(this.selectAdjacentItem(e),i===this.$selected){if("next"!==e)return;e="prev"}else i=this.$selected},this.getAdjacentParentItem=function(t,e){var i=t.closest(".js-navigable-stream"),s=t;return i.length&&(t=i.closest(".js-stream-item"),s=t[e](),!s.length)?this.getAdjacentParentItem(t,e):s},this.getAdjacentChildItem=function(t,e){var i=t,s=i.hasClass("js-has-navigable-stream"),n="next"===e?"first-child":"last-child";return i.length&&s?(i=i.find(".js-navigable-stream").eq(0).find(">li:"+n),this.getAdjacentChildItem(i,e)):i},this.selectAdjacentItem=function(t,e){var i=void 0;if(i=this.$selected.length?this[t](this.$selected):this.select("firstItemSelector").eq(0),i.length||(i=this.getAdjacentParentItem(this.$selected,t)),i=this.getAdjacentChildItem(i,t),i.length&&i.hasClass(this.attr.unselectableClass))return this.$selected=i,this.selectAdjacentItem(t,e);this.selectItem(i);var s="next"===t?"uiNextItemSelected":"uiPreviousItemSelected";this.trigger(this.$selected,s),this.focusSelected(),!i.length||e&&e.maintainPosition||this.adjustScrollForSelectedItem(e)},this.next=function(t){return t.next()},this.prev=function(t){return t.prev()},this.selectItem=function(t){t.length&&this.$selected!==t&&(this.clearSelection(),this.$selected=t,this.$selected.addClass(this.attr.selectedClass),this.trigger(this.$selected,"uiTimelineItemSelected"))},this.focusSelected=function(){var t=this;this.$selected.attr("tabIndex",-1).focus(),setTimeout(function(e){return t.trigger(e,"uiAfterTimelineSelectionFocused")},0,this.$previousSelection)},this.deselect=function(e){var i=["HTML","BODY"].indexOf(e.target.tagName)!==-1,s="page-outer"===e.target.id&&!t(e.target).parents("#page-container").length;(i||s)&&this.clearSelection()},this.muteUser=function(){this.triggerBlockActionOnNode(this.$selected,"uiDidMuteUser")},this.blockUser=function(){this.triggerBlockActionOnNode(this.$selected,"uiOpenBlockUserDialog")},this.updateAfterBlock=function(e,i){var s=i.userId.toString()===t(this.attr.profileOwnerUserIdSelector).attr("data-user-id"),n=0!==t(this.attr.profilePageSelector).length;s?this.trigger("uiHideProfileTweets"):n||(this.selectNextItemNotFrom(i.userId),this.trigger("uiRemoveTweetsFromUser",i))},this.removeTweetsAndEngagementsFromUser=function(t,e){this.selectNextItemNotFrom(e.userId),this.trigger("uiRemoveTweetsFromUser",e)},this.updateSelectionBeforeDelete=function(t,e){this.select("genericItemSelector").length&&this.$selected.attr("data-item-id")===e.sourceEventData.id.toString()&&this.selectNextAdjacentItem()},this.adjustScrollForItem=function(e,i){i&&i.scrollToTop?t(window).scrollTop(0):e.length&&t(window).scrollTop(e.offset().top-t(window).height()/10)},this.notifyExpansionRequest=function(e,i){var s=this.$selected.find(".tweet"),n=s.data("permalink-path"),a=s.data("conversation-id");n&&t(document).trigger("uiNavigate",{href:n,conversation_id:a})},this.adjustScrollForSelectedItem=function(t){this.adjustScrollForItem(this.$selected,t)},this.processActiveNavigation=function(){var t=2;setTimeout(this.removeActiveNavigationClass.bind(this),1e3*t)},this.setNavigationActive=function(){this.$linkClicked.addClass(this.attr.navigationActiveClass)},this.removeActiveNavigationClass=function(){var t=this.$node.find("."+this.attr.navigationActiveClass);t.removeClass(this.attr.navigationActiveClass)},this.handleEvent=function(e){return function(){t("body").hasClass("modal-enabled")||this[e].apply(this,arguments)}},this.changeSelection=function(e,i){var s=t(e.target);this.$selected.length&&(this.selectItem(s),i&&i.setFocus&&this.focusSelected())},this.after("initialize",function(){this.$selected=this.$node.find(this.attr.selectedSelector),this.$linkClicked=t(),this.on(document,"uiShortcutSelectPrev",this.handleEvent("selectPrevItem")),this.on(document,"uiShortcutSelectNext uiSelectNext",this.handleEvent("selectNextItem")),this.on(document,"uiSelectItem",this.handleEvent("changeSelection")),this.on(document,"uiShortcutEnter",this.handleEvent("notifyExpansionRequest")),this.on(document,"uiSelectTopTweet",this.handleEvent("selectTopItemHandler")),this.on(document,"uiShortcutGotoTopOfScreen",this.handleEvent("selectTopItemByKeyboard")),this.on(document,"uiGotoTopOfScreen",this.handleEvent("injectAndPossiblySelectTopItem")),this.on(document,"uiShortcutMuteUser",this.handleEvent("muteUser")),this.on(document,"uiShortcutBlock",this.handleEvent("blockUser")),this.on(document,"uiUpdateAfterBlock",this.updateAfterBlock),this.on(document,"uiRemoveTweetsAndEngagementsFromUser",this.removeTweetsAndEngagementsFromUser),this.on(document,"uiBeforeTweetRemoved",this.updateSelectionBeforeDelete),this.on(document,"uiRemovedSomeTweets",this.adjustScrollForSelectedItem),this.on(document,"uiBeforePageChanged uiClearSelection",this.clearSelection),this.on(document,"uiPageChanged",this.processActiveNavigation),this.on("click",{genericItemSelector:this.moveSelection}),this.on(document,"uiNavigate",this.setNavigationActive),this.on(document,"click",this.deselect)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(121),o=s(a),r=i(953),c=s(r);e.default=n}).call(e,i(10))},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({actionableTweetSelector:".js-actionable-tweet"}),this.triggerBlockActionOnNode=function(t,e){!this.itemIsMine(t)&&this.itemIsBlockable(t)&&this.trigger(t,e,{userId:this.getUserIdFromNode(t),username:this.getUsernameFromNode(t),tweetId:this.getUserTweetIdFromNode(t),fromShortcut:!0})},this.getUserIdFromNode=function(t){var e=o.default.getId(t);return e||(e=o.default.getId(t.find("[data-user-id]"))),e},this.getUserTweetIdFromNode=function(t){var e=t.attr("data-tweet-id");return e||(e=t.find("[data-tweet-id]").attr("data-tweet-id")),e},this.getUsernameFromNode=function(t){var e=o.default.getName(t);return e||(e=o.default.getName(t.find("[data-name]"))),e},this.itemIsMine=function(t){return t.is(this.attr.ownTweetSelector)||t.find(this.attr.ownTweetSelector).length>0},this.itemIsBlockable=function(t){return t.find(this.attr.actionableTweetSelector).length>0||t.is(this.attr.actionableTweetSelector)}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(541),o=s(a);e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={clientSideUser:0,serverSideUser:1,clientSideApp:2,serverSideApp:3}},function(t,e,i){(function(t){"use strict";function i(){this.defaultAttrs({focusClass:"focus",focusContainerSelector:".tweet"}),this.addFocusStyle=function(e,i){t(i.el).addClass(this.attr.focusClass)},this.addFocusStyleToTarget=function(e){t(e.target).addClass(this.attr.focusClass)},this.removeFocusStyle=function(e,i){var s=this;setTimeout(function(){var e=i.el,n=document.activeElement;t.contains(e,n)||e===n||t(e).removeClass(s.attr.focusClass)},0)},this.after("initialize",function(){this.on(document,"uiShouldAddFocusStyle",this.addFocusStyleToTarget),this.on("focusin",{focusContainerSelector:this.addFocusStyle}),this.on("focusout",{focusContainerSelector:this.removeFocusStyle})})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){return t=t.getAttribute("data-aria-label-part")||0,e=e.getAttribute("data-aria-label-part")||0,"last"===t?1:"last"===e?-1:(t=parseInt(t,10),e=parseInt(e,10),t||e?t?e?t&&e?t===e?1:t-e:void 0:-1:1:0)}function a(){this.createImageLabel=function(e,i){var s=t(i);s.removeAttr("data-aria-label-part");var n=s.attr("alt");if(n){s.attr({alt:"","data-alt":n});var a=t("<span>",{addClass:"u-hiddenVisually image-description","data-aria-label-part":"",text:(0,r.default)("Image: {{imageDescription}}",{imageDescription:n})});s.before(a)}},this.createARIALabel=function(e,i){var s=e.target,a=t(s),o=a.find("img[data-aria-label-part]");o.each(this.createImageLabel);var r=a.find("[data-aria-label-part]").toArray();if(r.length){r.sort(n);var c=r.map(function(t,e){return(0,l.default)(t)});s.setAttribute("aria-labelledby",c.join(" ")),o.attr("data-aria-label-part","")}},this.removeItemLabel=function(e,i){var s=t(e.target);s.removeAttr("aria-labelledby").find(".image-description[data-aria-label-part]").remove(),s.find("img[data-alt]").each(function(e,i){var s=t(i);s.attr("alt",s.attr("data-alt")).removeAttr("data-alt")})},this.after("initialize",function(){this.on("uiBeforeTimelineSelectionCleared uiAfterTimelineSelectionFocused",this.removeItemLabel),this.on("uiTimelineItemSelected",this.createARIALabel)})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(123),r=s(o),c=i(394),l=s(c);e.default=a}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function i(){this.registerItem=function(e){var i=t(e),s=i.attr("data-item-id");s&&(this.idHash[s]?this.idHash[s]=!0:this.dedupItem(s))},this.dedupItem=function(e){var i=this.select("genericItemSelector").filter("[data-item-id="+e+"]").filter(function(e,i){return 0===t(i).closest(".js-no-dedup").length}),s=i.slice(1);s.remove()},this.registerInjectedItem=function(t,e){this.registerItem(t.target)},this.registerExistingItems=function(){var t=this,e=this.select("genericItemSelector");e.get().forEach(function(e){return t.registerItem(e)})},this.after("initialize",function(){this.attr.useDeduping&&(this.idHash={},this.registerExistingItems(),this.on("uiHasInjectedTimelineItem",this.registerInjectedItem))})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},function(t,e,i){(function(t){"use strict";function i(){function e(t){return t.removeClass("u-hidden").show()}function i(t){return t.addClass("u-hidden").hide()}this.defaultAttrs({endOfStreamSelector:".stream-footer",errorMessageSelector:".stream-fail-container",tryAgainSelector:".try-again-after-whale"}),this.getOldItems=function(t){t&&t.stopPropagation(),this.shouldGetOldItems()&&this.trigger("uiWantsMoreTimelineItems",this.getOldItemsData())},this.injectOldItems=function(t){this.hideWhaleEnd(),this.resetStateVariables(t),t.has_more_items?this.showMoreSpinner():this.hideMoreSpinner(),this.injectItems("append",t.items_html,"uiHasInjectedOldTimelineItems"),this.possiblyShowBackToTop()},this.notifyOldItemsError=function(t){this.showWhaleEnd()},this.showWhaleEnd=function(){e(this.select("errorMessageSelector")),i(this.select("endOfStreamSelector")),this.select("timelineEndSelector").addClass("has-items-error")},this.hideWhaleEnd=function(){i(this.select("errorMessageSelector")),e(this.select("endOfStreamSelector")),this.select("timelineEndSelector").removeClass("has-items-error")},this.showMoreSpinner=function(){this.select("timelineEndSelector").addClass("has-more-items")},this.hideMoreSpinner=function(){this.select("timelineEndSelector").removeClass("has-more-items")},this.tryAgainAfterWhale=function(t){t.preventDefault(),this.hideWhaleEnd(),this.getOldItems()},this.after("initialize",function(){var e=this.attr.inOverlay?".PermalinkOverlay":window;this.on(e,"uiNearTheBottom",this.getOldItems),this.$document=t(document),this.$window=t(window),this.on("click",{tryAgainSelector:this.tryAgainAfterWhale})})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},,,,,,,function(t,e,i){(function(t){"use strict";function i(){this.defaultAttrs({adaptivePhotoContainer:".js-adaptive-photo",adaptiveMediaContainer:".AdaptiveMedia"}),this.getPermalinkPath=function(t){return t.closest(this.attr.streamItemSelector).find(this.attr.permalinkSelector).attr("href")},this.openAdaptiveMediaGallery=function(e,i){e.preventDefault(),e.stopPropagation();var s=t(e.target).closest(this.attr.adaptivePhotoContainer);this.trigger(e.target,"uiOpenGallery",{timelineSelector:this.attr.adaptiveMediaContainer,inOverlay:this.attr.inOverlay});var n=s.closest("[data-impression-id]");n.length&&(n.attr("data-embedded-media-logged",!0),this.trigger("uiEmbeddedMedia",{impressionId:n.data("impression-id"),disclosureType:n.data("disclosure-type")})),i&&i.skipClickScribe||this.trigger("uiMediaThumbnailClick",{url:s.attr("data-image-url"),mediaType:"photo"})},this.openSelectedTweetAdaptiveMediaGallery=function(e){this.trigger(t(e.target).find(this.attr.adaptivePhotoContainer),"uiKeyboardOpenAdaptiveGallery",{skipClickScribe:!0})},this.after("initialize",function(){this.on(document,"uiOpenSelectedPhoto",this.openSelectedTweetAdaptiveMediaGallery),this.on("click uiKeyboardOpenAdaptiveGallery",{adaptivePhotoContainer:this.openAdaptiveMediaGallery})})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},function(t,e){"use strict";function i(){this.updateYouFollow=function(t,e){this.$node.find("[data-user-id="+t+"][data-you-follow]").attr("data-you-follow",e)},this.updateYouBlock=function(t,e){this.$node.find("[data-user-id="+t+"][data-you-block]").attr("data-you-block",e)},this.setViewerFollowState=function(t){return function(e,i){this.updateYouFollow(i.userId,t)}},this.setViewerBlockState=function(t){return function(e,i){this.updateYouBlock(i.userId,t)}},this.onFollowStateChange=function(t,e){var i=e.userId,s=e.newState;"following"===s?(this.updateYouFollow(i,!0),this.updateYouBlock(i,!1)):"not-following"===s?(this.updateYouFollow(i,!1),this.updateYouBlock(i,!1)):"blocked"===s&&(this.updateYouFollow(i,!1),this.updateYouBlock(i,!0))},this.after("initialize",function(){this.on(document,"uiFollowAction",this.setViewerFollowState(!0)),this.on(document,"uiUnfollowAction uiBlockAction uiReportSpamAction uiDidTriggerBlockingAction",this.setViewerFollowState(!1)),this.on(document,"uiBlockAction uiReportSpamAction uiDidTriggerBlockingAction",this.setViewerBlockState(!0)),this.on(document,"dataFollowStateChange",this.onFollowStateChange)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,i){(function(t){"use strict";function i(){this.isOldItem=function(t){return"undefined"!=typeof t.min_position},this.isNewItem=function(t){return"undefined"!=typeof t.max_position},this.getNewItemsData=function(){return{min_position:this.max_position,isNewItemRequest:!0}},this.getOldItemsData=function(){return{max_position:this.min_position,reset_error_state:void 0===this.min_position&&void 0===this.max_position&&!t(".permalink-container").length}},this.resetStateVariables=function(t){"undefined"!=typeof t.max_position&&(this.max_position=t.max_position,this.select("containerSelector").attr("data-max-position",this.max_position)),"undefined"!=typeof t.min_position&&(this.min_position=t.min_position,this.select("containerSelector").attr("data-min-position",this.min_position))},this.wasRangeRequest=function(){return!1},this.wasNewItemsRequest=function(t){return this.isOldItem(t)},this.wasOldItemsRequest=function(t){return this.isNewItem(t)},this.shouldGetOldItems=function(){return null!==this.min_position},this.shouldGetNewItems=function(){return null!==this.max_position},this.after("initialize",function(){this.min_position=this.select("containerSelector").attr("data-min-position")||void 0,this.max_position=this.select("containerSelector").attr("data-max-position")||void 0})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(10))},,,,,,function(t,e,i){(function(t){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(){this.defaultAttrs({tweetSelector:".tweet",tweetActionSelector:".ProfileTweet-action",favoriteCountSelector:".ProfileTweet-action--favorite .ProfileTweet-actionCount",retweetCountSelector:".ProfileTweet-action--retweet .ProfileTweet-actionCount",replyCountSelector:".ProfileTweet-action--reply .ProfileTweet-actionCount",actionCountForPresentationSelector:".ProfileTweet-actionCountForPresentation",actionCountForAriaSelector:".ProfileTweet-actionCountForAria",zeroCountClass:"ProfileTweet-actionCount--isZero"}),this.updateTweetStats=function(t,e){var i=this;e.stats&&e.stats.forEach(function(t){var e=i.findTweetOrRetweet(t.status_id),s=e.find(i.statElementSelectorFor(t.name));i.updateAria(s,t.count,t.title),i.updatePresentation(s,t.count,t.compact_count);
})},this.initializeTweetStats=function(e,i){var s=this,n=this.findUninitializedTweetOrRetweet();n.each(function(e,i){return s.renderTweetStats(t(i))})},this.renderTweetStats=function(t){var e=this;t.attr("data-tweet-stat-initialized","true"),["favorite","retweet","reply"].forEach(function(i){var s=i,n=t.find(e.statElementSelectorFor(s)),a=n&&n.attr("data-tweet-stat-count");if(void 0!==a){var o=d.default.compactOrCommaize(a,c.default.language);e.updatePresentation(n,a,o)}})},this.updatePresentation=function(t,e,i){var s=t.find(this.attr.actionCountForPresentationSelector);t.attr("data-tweet-stat-count",Math.max(e,0)),e<=0?(t.addClass(this.attr.zeroCountClass),s.empty()):(t.removeClass(this.attr.zeroCountClass),s.text(i))},this.updateAria=function(t,e,i){var s=t.find(this.attr.actionCountForAriaSelector);s.text(i),e<=0?(t.attr("aria-hidden","true"),s.removeAttr("data-aria-label-part")):(t.removeAttr("aria-hidden"),s.attr("data-aria-label-part","0"))},this.findTweetOrRetweet=function(t){var e=this.select("tweetSelector").filter("[data-tweet-id="+t+"]");return e.length||(e=this.select("tweetSelector").filter("[data-retweet-id="+t+"]")),e},this.findUninitializedTweetOrRetweet=function(){return this.select("tweetSelector").filter(":not([data-tweet-stat-initialized=true])")},this.statElementSelectorFor=function(t){var e={favorite:this.attr.favoriteCountSelector,retweet:this.attr.retweetCountSelector,reply:this.attr.replyCountSelector};return e[t]},this.after("initialize",function(){this.on("uiSwiftLoaded uiPageChanged uiNeedUpdateInjectedTweetStats",this.initializeTweetStats),this.on("dataGotTweetStats",this.updateTweetStats)})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(111),o=s(a),r=i(941),c=s(r),l=i(930),d=s(l),u=i(974),h=s(u);e.default=(0,o.default)(n,h.default)}).call(e,i(10))},function(t,e){"use strict";function i(){this.defaultAttrs({retweetStatSelector:".js-stat-retweets a",favoriteStatSelector:".js-stat-favorites a",tweetStatCountSelector:"data-tweet-stat-count",displayCountSelector:"strong"}),this.updateSocialProofStats=function(t,e){var i=this;t.target===document&&e.stats&&e.stats.forEach(function(t){var e=i.findTweetOrRetweet(t.status_id),s=e.find(i.socialProofStatElementSelectorFor(t.name));i.updateSocialProofStat(s,t)})},this.socialProofStatElementSelectorFor=function(t){var e={retweet:this.attr.retweetStatSelector,favorite:this.attr.favoriteStatSelector};return e[t]},this.updateSocialProofStat=function(t,e){t.attr(this.attr.tweetStatCountSelector,e.count),t.find(this.attr.displayCountSelector).text(e.commaized_count)},this.after("initialize",function(){this.on("dataGotTweetStats",this.updateSocialProofStats)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}]));
//# sourceMappingURL=17.commons.en.f875d779563bc5a511ab.js.map